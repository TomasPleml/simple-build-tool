<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>CompilerArguments.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> xsbt

	<span class="keyword">import</span> java.io.File
	<span class="keyword">import</span> CompilerArguments.{abs, absString}

<span class="comment">/** Forms the list of options that is passed to the compiler from the required inputs and other options.
* The directory containing scala-library.jar and scala-compiler.jar (scalaLibDirectory) is required in
* order to add these jars to the boot classpath. The 'scala.home' property must be unset because Scala
* puts jars in that directory on the bootclasspath.  Because we use multiple Scala versions,
* this would lead to compiling against the wrong library jar.*/</span>
<span class="keyword">class</span> <a title="class CompilerArguments extends java.lang.Object with NotNull with ScalaObject" id="7362">CompilerArguments</a>(<a title="xsbt.ScalaInstance" id="17033">scalaInstance</a>: <a href="ScalaInstance.scala.html#7485" title="xsbt.ScalaInstance">ScalaInstance</a>, <a title="xsbt.ClasspathOptions" id="17034">cp</a>: <a href="#7344" title="xsbt.ClasspathOptions">ClasspathOptions</a>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(Set[java.io.File],Set[java.io.File],java.io.File,Seq[String])Seq[String]" id="17027">apply</a>(<a title="Set[java.io.File]" id="17035">sources</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="Set[java.io.File]" id="17036">classpath</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="java.io.File" id="17037">outputDirectory</a>: <a title="java.io.File" id="3629">File</a>, <a title="Seq[String]" id="17038">options</a>: <span title="Seq[String]">Seq</span>[String]): <span title="Seq[String]">Seq</span>[String] =
	{
		<a href="#17031" title="()Unit">checkScalaHomeUnset</a>()
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="19753">bootClasspathOption</a> = <span title="Seq[java.lang.String]" class="keyword">if</span>(<a href="#17034" title="xsbt.ClasspathOptions">cp</a>.<a href="#16213" title="=&gt; Boolean">autoBoot</a>) <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-bootclasspath&quot;)" class="string">&quot;-bootclasspath&quot;</span>, <a href="#17032" title="=&gt; java.lang.String">createBootClasspath</a>) <span class="keyword">else</span> <span title="object Nil">Nil</span>
		<span class="keyword">val</span> <a title="Set[java.io.File]" id="19754">cpWithCompiler</a> = <a href="#17028" title="(Set[java.io.File])Set[java.io.File]">finishClasspath</a>(<a href="#17036" title="Set[java.io.File]">classpath</a>)
		<span class="keyword">val</span> <a title="Seq[String]" id="19755">classpathOption</a> = <span title="(String*)Seq[String]">Seq</span>(<span title="java.lang.String(&quot;-cp&quot;)" class="string">&quot;-cp&quot;</span>, <a href="#15661" title="(Set[java.io.File])String">absString</a>(<a href="#19754" title="Set[java.io.File]">cpWithCompiler</a>) )
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="19756">outputOption</a> = <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>, <a href="#17037" title="java.io.File">outputDirectory</a>.<span title="()java.lang.String">getAbsolutePath</span>)
		<a href="#17038" title="Seq[String]">options</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19756" title="Seq[java.lang.String]">outputOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19753" title="Seq[java.lang.String]">bootClasspathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19755" title="Seq[String]">classpathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#17030" title="(Set[java.io.File])List[java.lang.String]">abs</a>(<a href="#17035" title="Set[java.io.File]">sources</a>)
	}
	<span class="keyword">def</span> <a title="(Set[java.io.File])Set[java.io.File]" id="17028">finishClasspath</a>(<a title="Set[java.io.File]" id="18157">classpath</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Set[java.io.File]">Set</span>[File] =
		<a href="#18157" title="Set[java.io.File]">classpath</a> <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#17029" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#17034" title="xsbt.ClasspathOptions">cp</a>.<a href="#16214" title="=&gt; Boolean">compiler</a>, <a href="#17033" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15212" title="=&gt; java.io.File">compilerJar</a>) <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#17029" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#17034" title="xsbt.ClasspathOptions">cp</a>.<a href="#16215" title="=&gt; Boolean">extra</a>, <a href="#17033" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15214" title="=&gt; Seq[java.io.File]">extraJars</a> : _*)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean,java.io.File*)Seq[java.io.File]" id="17029">include</a>(<a title="Boolean" id="19915">flag</a>: <span title="Boolean">Boolean</span>, <a title="java.io.File*" id="19916">jars</a>: <a title="java.io.File*" id="2680">File</a>*) = <span title="Seq[java.io.File]" class="keyword">if</span>(<a href="#19915" title="Boolean">flag</a>) <a href="#19916" title="java.io.File*">jars</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Set[java.io.File])List[java.lang.String]" id="17030">abs</a>(<a title="Set[java.io.File]" id="19789">files</a>: <span title="Set[java.io.File]">Set</span>[File]) = <a href="#19789" title="Set[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)scala.collection.immutable.Set[java.lang.String]" id="16934">map</a>(<a href="#19793" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>).<a title="=&gt; List[java.lang.String]" id="16171">toList</a>.<a title="((java.lang.String, java.lang.String) =&gt; Boolean)List[java.lang.String]" id="15735">sort</a>(<a href="#19802" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="6611">_</a> <a title="(String)Boolean" id="17547">&lt;</a> <a href="#19803" title="java.lang.String">_</a>)
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="17031">checkScalaHomeUnset</a>()
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="19992">scalaHome</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String)java.lang.String" id="18317">getProperty</a>(<span title="java.lang.String(&quot;scala.home&quot;)" class="string">&quot;scala.home&quot;</span>)
		<a title="(Boolean,Any)Unit" id="6476">assert</a>((<a href="#19992" title="java.lang.String">scalaHome</a> <a title="(AnyRef)Boolean" id="6013">eq</a> <span title="Null(null)" class="keyword">null</span>) <a title="(Boolean)Boolean" id="2689">||</a> <a href="#19992" title="java.lang.String">scalaHome</a>.<span title="()Boolean">isEmpty</span>, <span title="java.lang.String(&quot;'scala.home' should not be set (was &quot;)" class="string">&quot;'scala.home' should not be set (was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19992" title="java.lang.String">scalaHome</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
	}
	<span class="comment">/** Add the correct Scala library jar to the boot classpath.*/</span>
	<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="17032">createBootClasspath</a> =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="18174">originalBoot</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String,java.lang.String)java.lang.String" id="18318">getProperty</a>(<span title="java.lang.String(&quot;sun.boot.class.path&quot;)" class="string">&quot;sun.boot.class.path&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
		<span class="keyword">val</span> <a title="java.lang.String" id="18175">newBootPrefix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#18174" title="java.lang.String">originalBoot</a>.<span title="()Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#18174" title="java.lang.String">originalBoot</a> <span title="(Any)java.lang.String">+</span> <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>
		<a href="#18175" title="java.lang.String">newBootPrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#17033" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15210" title="=&gt; java.io.File">libraryJar</a>.<span title="()java.lang.String">getAbsolutePath</span>
	}
}
<span class="keyword">class</span> <a title="class ClasspathOptions extends java.lang.Object with NotNull with ScalaObject" id="7344">ClasspathOptions</a>(<span class="keyword">val</span> <a title="Boolean" id="16213">autoBoot</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="16214">compiler</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="16215">extra</a>: <span title="Boolean">Boolean</span>)  <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="keyword">object</span> <a title="object xsbt.ClasspathOptions" id="7345">ClasspathOptions</a>
{
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="16209">manual</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#7344" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="16210">auto</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#7344" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>)
}
<span class="keyword">object</span> <a title="object xsbt.CompilerArguments" id="7363">CompilerArguments</a>
{
	<span class="keyword">def</span> <a title="(Seq[java.io.File])Seq[String]" id="15658">abs</a>(<a title="Seq[java.io.File]" id="20009">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#20009" title="Seq[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)Seq[java.lang.String]" id="16016">map</a>(<a href="#20012" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])Seq[String]" id="15659">abs</a>(<a title="Set[java.io.File]" id="20013">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#15658" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#20013" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
	<span class="keyword">def</span> <a title="(Seq[java.io.File])String" id="15660">absString</a>(<a title="Seq[java.io.File]" id="18156">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="String">String</span> = <a href="#15658" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#18156" title="Seq[java.io.File]">files</a>).<a title="(String)String" id="16175">mkString</a>(<span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])String" id="15661">absString</a>(<a title="Set[java.io.File]" id="18155">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="String">String</span> = <a href="#15660" title="(Seq[java.io.File])String">absString</a>(<a href="#18155" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
}
        </pre>
    </body>
</html>