<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IvyCache.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL

<span class="keyword">import</span> org.apache.ivy.{core, plugins, util}
<span class="keyword">import</span> core.cache.{ArtifactOrigin, CacheDownloadOptions, DefaultRepositoryCacheManager}
<span class="keyword">import</span> core.module.descriptor.{Artifact =&gt; IvyArtifact, DefaultArtifact}
<span class="keyword">import</span> plugins.repository.file.{FileRepository=&gt;IvyFileRepository, FileResource}
<span class="keyword">import</span> plugins.repository.{ArtifactResourceResolver, Resource, ResourceDownloader}
<span class="keyword">import</span> plugins.resolver.util.ResolvedResource
<span class="keyword">import</span> util.FileUtil

<span class="keyword">class</span> <a title="class NotInCache extends java.lang.RuntimeException with ScalaObject" id="9254">NotInCache</a>(<span class="keyword">val</span> <a title="sbt.ModuleID" id="46496">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="46497">cause</a>: <span title="Throwable">Throwable</span>)
	<span class="keyword">extends</span> <a title="java.lang.RuntimeException" id="19726">RuntimeException</a>(<a href="#46512" title="(sbt.ModuleID,Throwable)java.lang.String">NotInCache</a>(<a href="#46496" title="sbt.ModuleID">id</a>, <a href="#46497" title="Throwable">cause</a>), <a href="#46497" title="Throwable">cause</a>)
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID)sbt.NotInCache" id="39803" class="keyword">this</a>(<a title="sbt.ModuleID" id="46520">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>) = <a href="#9254" title="NotInCache.this.type" class="keyword">this</a>(<a href="#46520" title="sbt.ModuleID">id</a>, <span title="Null(null)" class="keyword">null</span>)
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.NotInCache" id="9255">NotInCache</a>
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Throwable)java.lang.String" id="46512">apply</a>(<a title="sbt.ModuleID" id="46513">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="46514">cause</a>: <span title="Throwable">Throwable</span>) =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="46516">postfix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#46514" title="Throwable">cause</a> <a title="(AnyRef)Boolean" id="3448">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> (<span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span><a href="#46514" title="Throwable">cause</a>.<span title="()java.lang.String">toString</span>)
		<span title="java.lang.String(&quot;File for &quot;)" class="string">&quot;File for &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46513" title="sbt.ModuleID">id</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not in cache&quot;)" class="string">&quot; not in cache&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46516" title="java.lang.String">postfix</a>
	}
}
<span class="comment">/** Provides methods for working at the level of a single jar file with the default Ivy cache.*/</span>
<span class="keyword">object</span> <a title="object sbt.IvyCache" id="12105">IvyCache</a>
{
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="39819">lockFile</a> = <a title="(java.lang.String,java.lang.String)java.io.File" id="16952" class="keyword">new</a> <span title="java.io.File">File</span>(<a title="object java.lang.System" id="1825">System</a>.<a title="(java.lang.String)java.lang.String" id="18317">getProperty</a>(<span title="java.lang.String(&quot;user.home&quot;)" class="string">&quot;user.home&quot;</span>), <span title="java.lang.String(&quot;.sbt.cache.lock&quot;)" class="string">&quot;.sbt.cache.lock&quot;</span>)
	<span class="comment">/** Caches the given 'file' with the given ID.  It may be retrieved or cleared using this ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="39820">cacheJar</a>(<a title="sbt.ModuleID" id="40532">moduleID</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="40533">file</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="40534">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="40535">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="46532">artifact</a> = <a href="#39831" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#40532" title="sbt.ModuleID">moduleID</a>)
		<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="46533">resolved</a> = <span title="org.apache.ivy.plugins.resolver.util.ResolvedResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="39773">ResolvedResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileResource" id="39670">FileResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileRepository" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileRepository" id="39673">IvyFileRepository</a>, <a href="#40533" title="java.io.File">file</a>), <a href="#40532" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#40252" title="=&gt; String">revision</a>)
		<a href="#39826" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; org.apache.ivy.core.report.ArtifactDownloadReport)org.apache.ivy.core.report.ArtifactDownloadReport">withDefaultCache</a>(<a href="#40534" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#40535" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46609">cache</a> =&gt;
			<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="46610">resolver</a> = <a title="template $anon extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="46611" class="keyword">new</a> <a title="org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="39646">ArtifactResourceResolver</a> { <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.plugins.resolver.util.ResolvedResource" id="46614">resolve</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46617">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a href="#46533" title="org.apache.ivy.plugins.resolver.util.ResolvedResource">resolved</a> }
			<a href="#46609" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.ArtifactResourceResolver,org.apache.ivy.plugins.repository.ResourceDownloader,org.apache.ivy.core.cache.CacheDownloadOptions)org.apache.ivy.core.report.ArtifactDownloadReport" id="45669">download</a>(<a href="#46532" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#46610" title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver">resolver</a>, <span title="sbt.FileDownloader" class="keyword">new</span> <a href="#10766" title="sbt.FileDownloader">FileDownloader</a>, <span title="org.apache.ivy.core.cache.CacheDownloadOptions" class="keyword">new</span> <a title="org.apache.ivy.core.cache.CacheDownloadOptions" id="39476">CacheDownloadOptions</a>)
		}
	}
	<span class="comment">/** Clears the cache of the jar for the given ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="39821">clearCachedJar</a>(<a title="sbt.ModuleID" id="40538">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="40539">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="40540">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">try</span> { <a href="#39823" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; Boolean)Boolean">withCachedJar</a>(<a href="#40538" title="sbt.ModuleID">id</a>, <a href="#40539" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#40540" title="sbt.IvyLogger">log</a>)(<a href="#46656" title="java.io.File">_</a>.<span title="()Boolean">delete</span>) }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="Exception" id="46657">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#40540" title="sbt.IvyLogger">log</a>.<a href="IvyLogger.scala.html#21067" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Error cleaning cached jar: &quot;)" class="string">&quot;Error cleaning cached jar: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46657" title="Exception">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	<span class="comment">/** Copies the cached jar for the given ID to the directory 'toDirectory'.  If the jar is not in the cache, NotInCache is thrown.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)java.io.File" id="39822">retrieveCachedJar</a>(<a title="sbt.ModuleID" id="46658">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="46659">toDirectory</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="46660">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46661">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>) =
		<a href="#39823" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; java.io.File)java.io.File">withCachedJar</a>(<a href="#46658" title="sbt.ModuleID">id</a>, <a href="#46660" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46661" title="sbt.IvyLogger">log</a>) { <a title="java.io.File" id="46665">cachedFile</a> =&gt;
			<span class="keyword">val</span> <a title="java.io.File" id="46666">copyTo</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="16953" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#46659" title="java.io.File">toDirectory</a>, <a href="#46665" title="java.io.File">cachedFile</a>.<a title="()java.lang.String" id="16955">getName</a>)
			<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.File,java.io.File,org.apache.ivy.util.CopyProgressListener)Boolean" id="46682">copy</a>(<a href="#46665" title="java.io.File">cachedFile</a>, <a href="#46666" title="java.io.File">copyTo</a>, <span title="Null(null)" class="keyword">null</span>)
			<a href="#46666" title="java.io.File">copyTo</a>
		}

	<span class="comment">/** Get the location of the cached jar for the given ID in the Ivy cache.  If the jar is not in the cache, NotInCache is thrown .*/</span>
	<span class="keyword">def</span> <a title="[T](sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; T)T" id="39823">withCachedJar</a>[<a title="&gt;: Nothing &lt;: Any" id="39825">T</a>](<a title="sbt.ModuleID" id="39892">id</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="39893">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="39894">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(java.io.File) =&gt; T" id="39895">f</a>: File =&gt; T): <a href="#39825" title="T">T</a> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="46712">cachedFile</a> =
			<span class="keyword">try</span>
			{
				<a href="#39826" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; java.io.File)java.io.File">withDefaultCache</a>(<a href="#39893" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#39894" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46715">cache</a> =&gt;
					<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="46716">artifact</a> = <a href="#39831" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#39892" title="sbt.ModuleID">id</a>)
					<a href="#46715" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.core.cache.ArtifactOrigin)java.io.File" id="45655">getArchiveFileInCache</a>(<a href="#46716" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#39829" title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin">unknownOrigin</a>(<a href="#46716" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>))
				}
			}
			<span class="keyword">catch</span> { <span title="Nothing" class="keyword">case</span> <a title="Exception" id="46734">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="sbt.NotInCache" class="keyword">new</span> <a href="#9254" title="sbt.NotInCache">NotInCache</a>(<a href="#39892" title="sbt.ModuleID">id</a>, <a href="#46734" title="Exception">e</a>) }

		<span title="T" class="keyword">if</span>(<a href="#46712" title="java.io.File">cachedFile</a>.<span title="()Boolean">exists</span>) <a href="#39895" title="(java.io.File)T">f</a>(<a href="#46712" title="java.io.File">cachedFile</a>) <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a href="#39803" title="(sbt.ModuleID)sbt.NotInCache" class="keyword">new</a> <a href="#9254" title="sbt.NotInCache">NotInCache</a>(<a href="#39892" title="sbt.ModuleID">id</a>)
	}
	<span class="comment">/** Calls the given function with the default Ivy cache.*/</span>
	<span class="keyword">def</span> <a title="[T](Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T)T" id="39826">withDefaultCache</a>[<a title="&gt;: Nothing &lt;: Any" id="39828">T</a>](<a title="Option[xsbti.GlobalLock]" id="46604">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46605">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T" id="46606">f</a>: DefaultRepositoryCacheManager =&gt; T): <a href="#39828" title="T">T</a> =
	{
		<span class="keyword">val</span> <a href="#17992" title="(sbt.IvySbt, sbt.FileRepository)">(</a><a href="#46743" title="sbt.IvySbt" id="17992">ivy</a>, <a href="#46743" title="sbt.FileRepository" id="17994">local</a>) = <a href="#39830" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)">basicLocalIvy</a>(<a href="#46604" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46605" title="sbt.IvyLogger">log</a>)
		<a href="#17992" title="sbt.IvySbt">ivy</a>.<a href="Ivy.scala.html#43584" title="((org.apache.ivy.Ivy) =&gt; T)T">withIvy</a> { <a title="org.apache.ivy.Ivy" id="46837">ivy</a> =&gt;
			<span class="keyword">val</span> <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46838">cache</a> = <a href="#46837" title="org.apache.ivy.Ivy">ivy</a>.<a title="()org.apache.ivy.core.settings.IvySettings" id="43858">getSettings</a>.<a title="()org.apache.ivy.core.cache.RepositoryCacheManager" id="43046">getDefaultRepositoryCacheManager</a>.<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="3442">asInstanceOf</a>[<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="39461">DefaultRepositoryCacheManager</a>]
			<a href="#46838" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(Boolean)Unit" id="45653">setUseOrigin</a>(<span title="Boolean(false)" class="keyword">false</span>)
			<a href="#46606" title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager)T">f</a>(<a href="#46838" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="39829">unknownOrigin</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46732">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a title="object org.apache.ivy.core.cache.ArtifactOrigin" id="39459">ArtifactOrigin</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="46718">unkwnown</a>(<a href="#46732" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>)
	<span class="comment">/** A minimal Ivy setup with only a local resolver and the current directory as the base directory.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)" id="39830">basicLocalIvy</a>(<a title="Option[xsbti.GlobalLock]" id="46746">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46747">log</a>: <a href="IvyLogger.scala.html#11567" title="sbt.IvyLogger">IvyLogger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.FileRepository" id="46749">local</a> = <a href="IvyInterface.scala.html#12834" title="object sbt.Resolver">Resolver</a>.<a href="IvyInterface.scala.html#43472" title="(Option[java.io.File])sbt.FileRepository">defaultLocal</a>(<span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.IvyPaths" id="46750">paths</a> = <span title="sbt.IvyPaths" class="keyword">new</span> <a href="IvyConfigurations.scala.html#11249" title="sbt.IvyPaths">IvyPaths</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>), <span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.InlineIvyConfiguration" id="46751">conf</a> = <span title="sbt.InlineIvyConfiguration" class="keyword">new</span> <a href="IvyConfigurations.scala.html#12917" title="sbt.InlineIvyConfiguration">InlineIvyConfiguration</a>(<a href="#46750" title="sbt.IvyPaths">paths</a>, <a title="(sbt.FileRepository*)Seq[sbt.FileRepository]" id="730">Seq</a>(<a href="#46749" title="sbt.FileRepository">local</a>), <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#46746" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46747" title="sbt.IvyLogger">log</a>)
		<span title="(sbt.IvySbt,sbt.FileRepository)(sbt.IvySbt, sbt.FileRepository)">(</span><span title="sbt.IvySbt" class="keyword">new</span> <a href="Ivy.scala.html#9389" title="sbt.IvySbt">IvySbt</a>(<a href="#46751" title="sbt.InlineIvyConfiguration">conf</a>), <a href="#46749" title="sbt.FileRepository">local</a>)
	}
	<span class="comment">/** Creates a default jar artifact based on the given ID.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact" id="39831">defaultArtifact</a>(<a title="sbt.ModuleID" id="46534">moduleID</a>: <a href="IvyInterface.scala.html#13007" title="sbt.ModuleID">ModuleID</a>): <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span> =
		<span title="org.apache.ivy.core.module.descriptor.DefaultArtifact" class="keyword">new</span> <a title="org.apache.ivy.core.module.descriptor.DefaultArtifact" id="39575">DefaultArtifact</a>(<a href="Ivy.scala.html#9390" title="object sbt.IvySbt">IvySbt</a>.<a href="Ivy.scala.html#43661" title="(sbt.ModuleID)org.apache.ivy.core.module.id.ModuleRevisionId">toID</a>(<a href="#46534" title="sbt.ModuleID">moduleID</a>), <span title="Null(null)" class="keyword">null</span>, <a href="#46534" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#40250" title="=&gt; String">name</a>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
}
<span class="comment">/** Required by Ivy for copying to the cache.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FileDownloader extends java.lang.Object with org.apache.ivy.plugins.repository.ResourceDownloader with NotNull with ScalaObject" id="10766">FileDownloader</a> <span class="keyword">extends</span> <a title="org.apache.ivy.plugins.repository.ResourceDownloader" id="39625">ResourceDownloader</a> <span class="keyword">with</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.Resource,java.io.File)Unit" id="46653">download</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46859">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>, <a title="org.apache.ivy.plugins.repository.Resource" id="46860">resource</a>: <a title="org.apache.ivy.plugins.repository.Resource" id="39628">Resource</a>, <a title="java.io.File" id="46861">dest</a>: <span title="java.io.File">File</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#46861" title="java.io.File">dest</a>.<span title="()Boolean">exists</span>()) <a href="#46861" title="java.io.File">dest</a>.<span title="()Boolean">delete</span>()
		<span class="keyword">val</span> <a title="java.io.File" id="46862">part</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#46861" title="java.io.File">dest</a>.<a title="()java.lang.String" id="16960">getAbsolutePath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.part&quot;)" class="string">&quot;.part&quot;</span>)
		<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.InputStream,java.io.File,org.apache.ivy.util.CopyProgressListener)Unit" id="46686">copy</a>(<a href="#46860" title="org.apache.ivy.plugins.repository.Resource">resource</a>.<a title="()java.io.InputStream" id="43164">openStream</a>, <a href="#46862" title="java.io.File">part</a>, <span title="Null(null)" class="keyword">null</span>)
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2686">!</a><a href="#46862" title="java.io.File">part</a>.<a title="(java.io.File)Boolean" id="16984">renameTo</a>(<a href="#46861" title="java.io.File">dest</a>))
			<a title="(String)Nothing" id="6472">error</a>(<span title="java.lang.String(&quot;Could not move temporary file &quot;)" class="string">&quot;Could not move temporary file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46862" title="java.io.File">part</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to final location &quot;)" class="string">&quot; to final location &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46861" title="java.io.File">dest</a>)
	}
}
        </pre>
    </body>
</html>