<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Conditional.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> xsbt.AnalyzingCompiler

<span class="keyword">trait</span> <a title="trait Conditional[Source, Product, External] extends java.lang.Object with NotNull with ScalaObject" id="11663">Conditional</a>[<a title="&gt;: Nothing &lt;: Any" id="13938">Source</a>, <a title="&gt;: Nothing &lt;: Any" id="13939">Product</a>, <a title="&gt;: Nothing &lt;: Any" id="13940">External</a>] <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">type</span> <a title="&gt;: Nothing &lt;: sbt.TaskAnalysis[Source,Product,External]" id="56715">AnalysisType</a> &lt;: TaskAnalysis[Source, Product, External]
	<span class="keyword">val</span> <a title="Conditional.this.AnalysisType" id="56716">analysis</a>: <a href="#56715" title="Conditional.this.AnalysisType">AnalysisType</a> = <a href="#56718" title="=&gt; Conditional.this.AnalysisType">loadAnalysis</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Conditional.this.AnalysisType" id="56718">loadAnalysis</a>: <a href="#56715" title="Conditional.this.AnalysisType">AnalysisType</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="56719">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="56720">productType</a>: <span title="String">String</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="56721">productTypePlural</a>: <span title="String">String</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="56722">sourcesToProcess</a>: <span title="Iterable[Source]">Iterable</span>[Source]

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Boolean" id="56723">sourceExists</a>(<a title="Source" id="59565">source</a>: <a href="#13938" title="Source">Source</a>): <span title="Boolean">Boolean</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Long" id="56724">sourceLastModified</a>(<a title="Source" id="57072">source</a>: <a href="#13938" title="Source">Source</a>): <span title="Long">Long</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Product)Boolean" id="56725">productExists</a>(<a title="Product" id="57074">product</a>: <a href="#13939" title="Product">Product</a>): <span title="Boolean">Boolean</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Product)Long" id="56726">productLastModified</a>(<a title="Product" id="57077">product</a>: <a href="#13939" title="Product">Product</a>): <span title="Long">Long</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]" id="56727">externalInfo</a>(<a title="Iterable[External]" id="57095">externals</a>: <span title="Iterable[External]">Iterable</span>[External]): <span title="Iterable[(External, Conditional.this.ExternalInfo)]">Iterable</span>[(External, ExternalInfo)]

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Conditional.this.ConditionalAnalysis)Option[String]" id="56728">execute</a>(<a title="Conditional.this.ConditionalAnalysis" id="56816">cAnalysis</a>: <a href="#56732" title="Conditional.this.ConditionalAnalysis">ConditionalAnalysis</a>): <a title="Option[String]" id="897">Option</a>[String]

	<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <a title="class ExternalInfo extends java.lang.Object with NotNull with ScalaObject with Product" id="59577">ExternalInfo</a>(<a title="Boolean" id="59597">available</a>: <span title="Boolean">Boolean</span>, <a title="Long" id="59598">lastModified</a>: <span title="Long">Long</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
	<span class="keyword">trait</span> <a title="trait ConditionalAnalysis extends java.lang.Object with NotNull" id="56732">ConditionalAnalysis</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
	{
		<span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="56807">dirtySources</a>: <span title="Iterable[Source]">Iterable</span>[Source]
		<span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="56808">cleanSources</a>: <span title="Iterable[Source]">Iterable</span>[Source]
		<span class="keyword">def</span> <a title="=&gt; Int" id="56809">directlyModifiedSourcesCount</a>: <span title="Int">Int</span>
		<span class="keyword">def</span> <a title="=&gt; Int" id="56810">invalidatedSourcesCount</a>: <span title="Int">Int</span>
		<span class="keyword">def</span> <a title="=&gt; Int" id="56811">removedSourcesCount</a>: <span title="Int">Int</span>
	}

	<span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Option[String]" id="56733">run</a> =
	{
		<span class="keyword">val</span> <a title="Option[String]" id="57041">result</a> = <a href="#56728" title="(Conditional.this.ConditionalAnalysis)Option[String]">execute</a>(<a href="#56734" title="=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis">analyze</a>)
		<a href="#56738" title="(Boolean)Unit">processingComplete</a>(<a href="#57041" title="Option[String]">result</a>.<a title="=&gt; Boolean" id="30526">isEmpty</a>)
		<a href="#57041" title="Option[String]">result</a>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis" id="56734">analyze</a> =
	{
		<span class="keyword">import</span> scala.collection.mutable.HashSet

		<span class="keyword">val</span> <a title="Iterable[Source]" id="57045">sourcesSnapshot</a> = <a href="#56722" title="=&gt; Iterable[Source]">sourcesToProcess</a>
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="57046">removedSources</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <span title="(Iterable[Source])Unit">++=</span> <a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51982" title="=&gt; scala.collection.Set[Source]">allSources</a>
		<a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <span title="(Iterable[Source])Unit">--=</span> <a href="#57045" title="Iterable[Source]">sourcesSnapshot</a>
		<span class="keyword">val</span> <a title="Int" id="57047">removedCount</a> = <a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a>.<span title="=&gt; Int">size</span>
		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="57060">removed</a> &lt;- <a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a>)
		{
			<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57060" title="Source">removed</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; removed.&quot;)" class="string">&quot; removed.&quot;</span>)
			<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51993" title="(Source)Unit">removeDependent</a>(<a href="#57060" title="Source">removed</a>)
		}

		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="57048">unmodified</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="57049">modified</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]

		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="57064">source</a> &lt;- <a href="#57045" title="Iterable[Source]">sourcesSnapshot</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#56737" title="(Source)Boolean">isSourceModified</a>(<a href="#57064" title="Source">source</a>))
			{
				<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57064" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; directly modified.&quot;)" class="string">&quot; directly modified.&quot;</span>)
				<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#57064" title="Source">source</a>
			}
			<span class="keyword">else</span>
			{
				<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57064" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; unmodified.&quot;)" class="string">&quot; unmodified.&quot;</span>)
				<a href="#57048" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">+=</span> <a href="#57064" title="Source">source</a>
			}
		}
		<span class="keyword">val</span> <a title="Int" id="57050">directlyModifiedCount</a> = <a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a>.<span title="=&gt; Int">size</span>
		<span class="keyword">for</span>(<a href="#57097" title="(((External, Conditional.this.ExternalInfo)) =&gt; Unit)Unit">(</a><a title="External" id="57102">external</a>, <a title="Conditional.this.ExternalInfo" id="57103">info</a>) &lt;- <a href="#56727" title="(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]">externalInfo</a>(<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51984" title="=&gt; scala.collection.Set[External]">allExternals</a>))
		{
			<span class="keyword">val</span> <a title="scala.collection.Set[Source]" id="57104">dependentSources</a> = <a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51987" title="(External)Option[scala.collection.Set[Source]]">externalDependencies</a>(<a href="#57102" title="External">external</a>).<a title="(=&gt; scala.collection.Set[Source])scala.collection.Set[Source]" id="30531">getOrElse</a>(<a title="=&gt; collection.immutable.Set.type" id="6470">Set</a>.<a title="scala.collection.immutable.Set[Source]" id="16915">empty</a>)
			<span title="Unit" class="keyword">if</span>(<a href="#57103" title="Conditional.this.ExternalInfo">info</a>.<a href="#59597" title="=&gt; Boolean">available</a>)
			{
				<span class="keyword">val</span> <a title="Long" id="57115">dependencyLastModified</a> = <a href="#57103" title="Conditional.this.ExternalInfo">info</a>.<a href="#59598" title="=&gt; Long">lastModified</a>
				<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="57117">dependentSource</a> &lt;- <a href="#57104" title="scala.collection.Set[Source]">dependentSources</a>; <a title="((scala.collection.Set[Product]) =&gt; Unit)Unit" id="57119">dependentProducts</a> &lt;- <a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51986" title="(Source)Option[scala.collection.Set[Product]]">products</a>(<a href="#57117" title="Source">dependentSource</a>))
				{
					<a href="#57119" title="scala.collection.Set[Product]">dependentProducts</a>.<span title="((Product) =&gt; Boolean)Option[Product]">find</span>(<a title="Product" id="57121">p</a> =&gt; <a href="#56726" title="(Product)Long">productLastModified</a>(<a href="#57121" title="Product">p</a>) <span title="(Long)Boolean">&lt;</span> <a href="#57115" title="Long">dependencyLastModified</a>) <span title="Unit" class="keyword">match</span>
					{
						<span title="Unit" class="keyword">case</span> Some(<a title="Product" id="57123">modifiedProduct</a>) =&gt;
						{
							<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<a href="#56720" title="=&gt; String">productType</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57123" title="Product">modifiedProduct</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; older than external dependency &quot;)" class="string">&quot; older than external dependency &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57102" title="External">external</a>)
							<a href="#57048" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">-=</span> <a href="#57117" title="Source">dependentSource</a>
							<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#57117" title="Source">dependentSource</a>
						}
						<span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
					}
				}
			}
			<span class="keyword">else</span>
			{
				<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;External dependency &quot;)" class="string">&quot;External dependency &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57102" title="External">external</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not found.&quot;)" class="string">&quot; not found.&quot;</span>)
				<a href="#57048" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Iterable[Source])Unit">--=</span> <a href="#57104" title="scala.collection.Set[Source]">dependentSources</a>
				<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Iterable[Source])Unit">++=</span> <a href="#57104" title="scala.collection.Set[Source]">dependentSources</a>
				<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51995" title="(External)Unit">removeExternalDependency</a>(<a href="#57102" title="External">external</a>)
			}
		}

		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="57051">handled</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> scala.collection.mutable.<span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<span class="keyword">val</span> <a title="Boolean" id="57052">transitive</a> = <span title="=&gt; Boolean">!</span>java.lang.<a title="object java.lang.Boolean" id="1963">Boolean</a>.<a title="(java.lang.String)Boolean" id="16230">getBoolean</a>(<span title="java.lang.String(&quot;sbt.intransitive&quot;)" class="string">&quot;sbt.intransitive&quot;</span>)
		<span class="keyword">def</span> <a title="(Iterable[Source])Unit" id="57053">markModified</a>(<a title="Iterable[Source]" id="57132">changed</a>: <span title="Iterable[Source]">Iterable</span>[Source]) { <span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="57136">c</a> &lt;- <a href="#57132" title="Iterable[Source]">changed</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#57051" title="scala.collection.mutable.HashSet[Source]">handled</a>.<a title="(Source)Boolean" id="30881">contains</a>(<a href="#57136" title="Source">c</a>)) <a href="#57054" title="(Source)Unit">markSourceModified</a>(<a href="#57136" title="Source">c</a>) }
		<span class="keyword">def</span> <a title="(Source)Unit" id="57054">markSourceModified</a>(<a title="Source" id="57137">src</a>: <a href="#13938" title="Source">Source</a>)
		{
			<a href="#57048" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">-=</span> <a href="#57137" title="Source">src</a>
			<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#57137" title="Source">src</a>
			<a href="#57051" title="scala.collection.mutable.HashSet[Source]">handled</a> <span title="(Source)Unit">+=</span> <a href="#57137" title="Source">src</a>
			<span title="Unit" class="keyword">if</span>(<a href="#57052" title="Boolean">transitive</a>)
				<a href="#57055" title="(Source)Unit">markDependenciesModified</a>(<a href="#57137" title="Source">src</a>)
		}
		<span class="keyword">def</span> <a title="(Source)Unit" id="57055">markDependenciesModified</a>(<a title="Source" id="57141">src</a>: <a href="#13938" title="Source">Source</a>) { <a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51994" title="(Source)Option[scala.collection.Set[Source]]">removeDependencies</a>(<a href="#57141" title="Source">src</a>).<a title="((scala.collection.Set[Source]) =&gt; Unit)Option[Unit]" id="30533">map</a>(<a href="#57053" title="(Iterable[Source])Unit">markModified</a>) }

		<a href="#57053" title="(Iterable[Source])Unit">markModified</a>(<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a>.<span title="=&gt; List[Source]">toList</span>)
		<span title="Unit" class="keyword">if</span>(<a href="#57052" title="Boolean">transitive</a>)
			<a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a>.<span title="((Source) =&gt; Unit)Unit">foreach</span>(<a href="#57055" title="(Source)Unit">markDependenciesModified</a>)

		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="57158">changed</a> &lt;- <a href="#57046" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <a title="(Iterable[Source])scala.collection.mutable.Set[Source]" id="30900">++</a> <a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a>)
			<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51992" title="(Source)Unit">removeSource</a>(<a href="#57158" title="Source">changed</a>)

		<a title="template $anon extends java.lang.Object with Conditional.this.ConditionalAnalysis" id="57159" class="keyword">new</a> <a href="#56732" title="Conditional.this.ConditionalAnalysis">ConditionalAnalysis</a>
		{
			<span class="keyword">def</span> <a title="=&gt; scala.collection.Set[Source]" id="57161">dirtySources</a> = wrap.<a href="wrap/Wrappers.scala.html#15035" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#52472" title="(scala.collection.mutable.Set[Source])scala.collection.Set[Source]">readOnly</a>(<a href="#57049" title="scala.collection.mutable.HashSet[Source]">modified</a>)
			<span class="keyword">def</span> <a title="=&gt; scala.collection.Set[Source]" id="57162">cleanSources</a> = wrap.<a href="wrap/Wrappers.scala.html#15035" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#52472" title="(scala.collection.mutable.Set[Source])scala.collection.Set[Source]">readOnly</a>(<a href="#57048" title="scala.collection.mutable.HashSet[Source]">unmodified</a>)
			<span class="keyword">def</span> <a title="=&gt; Int" id="57163">directlyModifiedSourcesCount</a> = <a href="#57050" title="Int">directlyModifiedCount</a>
			<span class="keyword">def</span> <a title="=&gt; Int" id="57164">invalidatedSourcesCount</a> = <a href="#57161" title="=&gt; scala.collection.Set[Source]">dirtySources</a>.<span title="=&gt; Int">size</span> <a title="(Int)Int" id="3087">-</a> <a href="#57050" title="Int">directlyModifiedCount</a>
			<span class="keyword">def</span> <a title="=&gt; Int" id="57165">removedSourcesCount</a> = <a href="#57047" title="Int">removedCount</a>
			<span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="57166">toString</a> =
			{
				<span title="java.lang.String(&quot;  Source analysis: &quot;)" class="string">&quot;  Source analysis: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57163" title="=&gt; Int">directlyModifiedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; new/modified, &quot;)" class="string">&quot; new/modified, &quot;</span> <span title="(Any)java.lang.String">+</span>
					<a href="#57164" title="=&gt; Int">invalidatedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; indirectly invalidated, &quot;)" class="string">&quot; indirectly invalidated, &quot;</span> <span title="(Any)java.lang.String">+</span>
					<a href="#57165" title="=&gt; Int">removedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; removed.&quot;)" class="string">&quot; removed.&quot;</span>
			}
		}
	}

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="56735">checkLastModified</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="56736">noProductsImpliesModified</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Boolean" id="56737">isSourceModified</a>(<a title="Source" id="57065">source</a>: <a href="#13938" title="Source">Source</a>) =
	{
		<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51986" title="(Source)Option[scala.collection.Set[Product]]">products</a>(<a href="#57065" title="Source">source</a>) <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
			{
				<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;New file &quot;)" class="string">&quot;New file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57065" title="Source">source</a>)
				<span title="Boolean(true)" class="keyword">true</span>
			}
			<span title="Boolean" class="keyword">case</span> Some(<a title="scala.collection.Set[Product]" id="57069">sourceProducts</a>) =&gt;
			{
				<span class="keyword">val</span> <a title="Long" id="57070">sourceModificationTime</a> = <a href="#56724" title="(Source)Long">sourceLastModified</a>(<a href="#57065" title="Source">source</a>)
				<span class="keyword">def</span> <a title="(Product)Boolean" id="57071">isOutofdate</a>(<a title="Product" id="57073">p</a>: <a href="#13939" title="Product">Product</a>) =
					<span title="=&gt; Boolean">!</span><a href="#56725" title="(Product)Boolean">productExists</a>(<a href="#57073" title="Product">p</a>) <span title="(Boolean)Boolean">||</span> (<a href="#56735" title="=&gt; Boolean">checkLastModified</a> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#56726" title="(Product)Long">productLastModified</a>(<a href="#57073" title="Product">p</a>) <span title="(Long)Boolean">&lt;</span> <a href="#57070" title="Long">sourceModificationTime</a>)

				<a href="#57069" title="scala.collection.Set[Product]">sourceProducts</a>.<span title="((Product) =&gt; Boolean)Option[Product]">find</span>(<a href="#57071" title="(Product)Boolean">isOutofdate</a>) <span title="Boolean" class="keyword">match</span>
				{
					<span title="Boolean" class="keyword">case</span> Some(<a title="Product" id="57081">modifiedProduct</a>) =&gt;
						<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Outdated &quot;)" class="string">&quot;Outdated &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56720" title="=&gt; String">productType</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57081" title="Product">modifiedProduct</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for source &quot;)" class="string">&quot; for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57065" title="Source">source</a>)
						<span title="Boolean(true)" class="keyword">true</span>
					<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
						<span title="Boolean" class="keyword">if</span>(<a href="#56736" title="=&gt; Boolean">noProductsImpliesModified</a> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#57069" title="scala.collection.Set[Product]">sourceProducts</a>.<a title="=&gt; Boolean" id="18163">isEmpty</a>)
						{
							<span class="comment">// necessary for change detection that depends on last modified</span>
							<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57065" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has no products, marking it modified.&quot;)" class="string">&quot; has no products, marking it modified.&quot;</span>)
							<span title="Boolean(true)" class="keyword">true</span>
						}
						<span class="keyword">else</span>
							<span title="Boolean(false)" class="keyword">false</span>
				}
			}
		}
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Boolean)Unit" id="56738">processingComplete</a>(<a title="Boolean" id="57261">success</a>: <span title="Boolean">Boolean</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#57261" title="Boolean">success</a>)
		{
			<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51979" title="()Option[String]">save</a>()
			<a href="#56719" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52375" title="(=&gt; String)Unit">info</a>(<span title="java.lang.String(&quot;  Post-analysis: &quot;)" class="string">&quot;  Post-analysis: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51983" title="=&gt; scala.collection.Set[Product]">allProducts</a>.<span title="=&gt; Seq[Product]">toSeq</span>.<a title="=&gt; Int" id="15997">length</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56721" title="=&gt; String">productTypePlural</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
		}
		<span class="keyword">else</span>
			<a href="#56716" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#51980" title="()Option[String]">revert</a>()
	}
}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AbstractCompileConfiguration extends java.lang.Object with NotNull with ScalaObject" id="12122">AbstractCompileConfiguration</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; String" id="56621">label</a>: <span title="String">String</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="56622">sourceRoots</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="56623">sources</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="56624">outputDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="56625">classpath</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="56626">analysisPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="56627">projectPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="56628">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>
	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="56629">options</a>: <span title="Seq[String]">Seq</span>[String]
	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="56630">javaOptions</a>: <span title="Seq[String]">Seq</span>[String]
	<span class="keyword">def</span> <a title="=&gt; Int" id="56631">maxErrors</a>: <span title="Int">Int</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.CompileOrder.Value" id="56632">compileOrder</a>: CompileOrder.<span title="sbt.CompileOrder.Value">Value</span>
}
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class CompileConfiguration extends sbt.AbstractCompileConfiguration with ScalaObject" id="12710">CompileConfiguration</a> <span class="keyword">extends</span> <a href="#12122" title="sbt.AbstractCompileConfiguration">AbstractCompileConfiguration</a>
{
	<span class="keyword">def</span> <a title="=&gt; sbt.Fingerprints" id="57889">fingerprints</a>: <a href="#59620" title="sbt.Fingerprints">Fingerprints</a>
}
<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <a title="class Fingerprints extends java.lang.Object with NotNull with ScalaObject with Product" id="59620">Fingerprints</a>(<a title="Iterable[String]" id="59881">superclassNames</a>: <span title="Iterable[String]">Iterable</span>[String], <a title="Iterable[String]" id="59882">annotationNames</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>

<span class="keyword">import</span> java.io.File
<span class="keyword">class</span> <a title="class CompileConditional extends sbt.AbstractCompileConditional with ScalaObject" id="9677">CompileConditional</a>(<span class="keyword">override</span> <span class="keyword">val</span> <a title="sbt.CompileConfiguration" id="57858">config</a>: <a href="#12710" title="sbt.CompileConfiguration">CompileConfiguration</a>, <a title="xsbt.AnalyzingCompiler" id="57859">compiler</a>: <a href="../AnalyzingCompiler.scala.html#7095" title="xsbt.AnalyzingCompiler">AnalyzingCompiler</a>) <span class="keyword">extends</span> <a href="#10601" title="sbt.AbstractCompileConditional">AbstractCompileConditional</a>(<a href="#57858" title="sbt.CompileConfiguration">config</a>, <a href="#57859" title="xsbt.AnalyzingCompiler">compiler</a>)
{
	<span class="keyword">import</span> config._
	<span class="keyword">type</span> <a title="sbt.CompileAnalysis" id="57854">AnalysisType</a> = <a href="Analysis.scala.html#8627" title="sbt.CompileAnalysis">CompileAnalysis</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)sbt.CompileAnalysis" id="57855">constructAnalysis</a>(<a title="sbt.Path" id="59639">analysisPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="59640">projectPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="59641">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
		<span title="sbt.CompileAnalysis" class="keyword">new</span> <a href="Analysis.scala.html#8627" title="sbt.CompileAnalysis">CompileAnalysis</a>(<a href="#59639" title="sbt.Path">analysisPath</a>, <a href="#59640" title="sbt.Path">projectPath</a>, <a href="#59641" title="sbt.Logger">log</a>)
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; CompileConditional.this.CompileAnalysisCallback" id="57856">analysisCallback</a> = <span title="CompileConditional.this.CompileAnalysisCallback" class="keyword">new</span> <a href="#57857" title="CompileConditional.this.CompileAnalysisCallback">CompileAnalysisCallback</a>
	<span class="keyword">protected</span> <span class="keyword">class</span> <a title="class CompileAnalysisCallback extends sbt.BasicCompileAnalysisCallback with ScalaObject" id="57857">CompileAnalysisCallback</a> <span class="keyword">extends</span> <a href="AnalysisCallback.scala.html#9035" title="sbt.BasicCompileAnalysisCallback">BasicCompileAnalysisCallback</a>(<a href="#56627" title="=&gt; sbt.Path">projectPath</a>, <a href="#56716" title="=&gt; CompileConditional.this.AnalysisType">analysis</a>)
	{
		<span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> <a title="sbt.Fingerprints" id="59646">fingerprints0</a> = <a href="#57889" title="=&gt; sbt.Fingerprints">fingerprints</a>
		<span class="keyword">def</span> <a title="=&gt; Iterable[String]" id="59647">superclassNames</a> = <a href="#59646" title="sbt.Fingerprints">fingerprints0</a>.<a href="#59881" title="=&gt; Iterable[String]">superclassNames</a>
		<span class="keyword">def</span> <a title="=&gt; Iterable[String]" id="59648">annotationNames</a> = <a href="#59646" title="sbt.Fingerprints">fingerprints0</a>.<a href="#59882" title="=&gt; Iterable[String]">annotationNames</a>
		<span class="keyword">def</span> <a title="(sbt.Path,String,String,Boolean)Unit" id="59649">foundSubclass</a>(<a title="sbt.Path" id="59656">sourcePath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="String" id="59657">subclassName</a>: <span title="String">String</span>, <a title="String" id="59658">superclassName</a>: <span title="String">String</span>, <a title="Boolean" id="59659">isModule</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
			<a href="AnalysisCallback.scala.html#53771" title="=&gt; sbt.CompileAnalysis">analysis</a>.<a href="Analysis.scala.html#53430" title="(sbt.Path,sbt.Discovered)Unit">addTest</a>(<a href="#59656" title="sbt.Path">sourcePath</a>, <a href="impl/TestParser.scala.html#59661" title="(Boolean,String,String)sbt.DiscoveredSubclass">DiscoveredSubclass</a>(<a href="#59659" title="Boolean">isModule</a>, <a href="#59657" title="String">subclassName</a>, <a href="#59658" title="String">superclassName</a>))
		<span class="keyword">def</span> <a title="(sbt.Path,String,String,Boolean)Unit" id="59650">foundAnnotated</a>(<a title="sbt.Path" id="59679">sourcePath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="String" id="59680">className</a>: <span title="String">String</span>, <a title="String" id="59681">annotationName</a>: <span title="String">String</span>, <a title="Boolean" id="59682">isModule</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
			<a href="AnalysisCallback.scala.html#53771" title="=&gt; sbt.CompileAnalysis">analysis</a>.<a href="Analysis.scala.html#53430" title="(sbt.Path,sbt.Discovered)Unit">addTest</a>(<a href="#59679" title="sbt.Path">sourcePath</a>, <a href="impl/TestParser.scala.html#59684" title="(Boolean,String,String)sbt.DiscoveredAnnotated">DiscoveredAnnotated</a>(<a href="#59682" title="Boolean">isModule</a>, <a href="#59680" title="String">className</a>, <a href="#59681" title="String">annotationName</a>))
	}
}
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AbstractCompileConditional extends java.lang.Object with sbt.Conditional[sbt.Path,sbt.Path,java.io.File] with ScalaObject" id="10601">AbstractCompileConditional</a>(<span class="keyword">val</span> <a title="sbt.AbstractCompileConfiguration" id="56797">config</a>: <a href="#12122" title="sbt.AbstractCompileConfiguration">AbstractCompileConfiguration</a>, <span class="keyword">val</span> <a title="xsbt.AnalyzingCompiler" id="56798">compiler</a>: <a href="../AnalyzingCompiler.scala.html#7095" title="xsbt.AnalyzingCompiler">AnalyzingCompiler</a>) <span class="keyword">extends</span> <a href="#11663" title="sbt.Conditional[sbt.Path,sbt.Path,java.io.File]">Conditional</a>[Path, Path, File]
{
	<span class="keyword">import</span> config._
	<span class="keyword">type</span> <a title="&gt;: Nothing &lt;: sbt.BasicCompileAnalysis" id="56747">AnalysisType</a> &lt;: BasicCompileAnalysis
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; AbstractCompileConditional.this.AnalysisType" id="56748">loadAnalysis</a> =
	{
		<span class="keyword">val</span> <a title="AbstractCompileConditional.this.AnalysisType" id="59707">a</a> = <a href="#56749" title="(sbt.Path,sbt.Path,sbt.Logger)AbstractCompileConditional.this.AnalysisType">constructAnalysis</a>(<a href="#56626" title="=&gt; sbt.Path">analysisPath</a>, <a href="#56627" title="=&gt; sbt.Path">projectPath</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>)
		<span class="keyword">for</span>(<a title="((String) =&gt; Unit)Unit" id="59709">errorMessage</a> &lt;- <a href="#59707" title="AbstractCompileConditional.this.AnalysisType">a</a>.<a href="Analysis.scala.html#52119" title="()Option[String]">load</a>())
			<a title="(String)Nothing" id="6472">error</a>(<a href="#59709" title="String">errorMessage</a>)
		<a href="#59707" title="AbstractCompileConditional.this.AnalysisType">a</a>
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)AbstractCompileConditional.this.AnalysisType" id="56749">constructAnalysis</a>(<a title="sbt.Path" id="56803">analysisPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="56804">projectPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="56805">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <a href="#56747" title="AbstractCompileConditional.this.AnalysisType">AnalysisType</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="56750">log</a> = <a href="#56797" title="=&gt; sbt.AbstractCompileConfiguration">config</a>.<a href="#56628" title="=&gt; sbt.Logger">log</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="56751">productType</a> = <span title="java.lang.String(&quot;class&quot;)" class="string">&quot;class&quot;</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="56752">productTypePlural</a> = <span title="java.lang.String(&quot;classes&quot;)" class="string">&quot;classes&quot;</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.Set[sbt.Path]" id="56753">sourcesToProcess</a> = <a href="#56623" title="=&gt; sbt.PathFinder">sources</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="56754">sourceExists</a>(<a title="sbt.Path" id="59716">source</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#59716" title="sbt.Path">source</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<span title="()Boolean">exists</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Long" id="56755">sourceLastModified</a>(<a title="sbt.Path" id="59718">source</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#59718" title="sbt.Path">source</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<span title="()Long">lastModified</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="56756">productExists</a>(<a title="sbt.Path" id="59720">product</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#59720" title="sbt.Path">product</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<span title="()Boolean">exists</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Long" id="56757">productLastModified</a>(<a title="sbt.Path" id="59722">product</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#59722" title="sbt.Path">product</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<span title="()Long">lastModified</span>

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.File" id="56758">libraryJar</a> = <a href="#56798" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#15175" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>.<a href="../ScalaInstance.scala.html#15210" title="=&gt; java.io.File">libraryJar</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.File" id="56759">compilerJar</a> = <a href="#56798" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#15175" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>.<a href="../ScalaInstance.scala.html#15212" title="=&gt; java.io.File">compilerJar</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Iterable[java.io.File])Iterable[(java.io.File, AbstractCompileConditional.this.ExternalInfo)]" id="56760">externalInfo</a>(<a title="Iterable[java.io.File]" id="59728">externals</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]) =
	{
		<span class="keyword">val</span> <a href="#17992" title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</a><a href="#59730" title="sbt.wrap.Set[java.io.File]" id="17992">classpathJars</a>, <a href="#59730" title="sbt.wrap.Set[java.io.File]" id="17994">classpathDirs</a>) = <a href="ClasspathUtilities.scala.html#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#54749" title="(Iterable[sbt.Path])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">buildSearchPaths</a>(<a href="#56625" title="=&gt; sbt.PathFinder">classpath</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <span title="(sbt.Path*)Seq[sbt.Path]">Seq</span>(<a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52308" title="(java.io.File)sbt.Path">fromFile</a>(<a href="#56758" title="=&gt; java.io.File">libraryJar</a>),  <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52308" title="(java.io.File)sbt.Path">fromFile</a>(<a href="#56759" title="=&gt; java.io.File">compilerJar</a>)))
		<span class="keyword">for</span>(<a title="((java.io.File) =&gt; (java.io.File, AbstractCompileConditional.this.ExternalInfo))Iterable[(java.io.File, AbstractCompileConditional.this.ExternalInfo)]" id="59744">external</a> &lt;- <a href="#59728" title="Iterable[java.io.File]">externals</a>) <span class="keyword">yield</span>
		{
			<span class="keyword">val</span> <a title="Boolean" id="59745">available</a> = <a href="#59744" title="java.io.File">external</a>.<span title="()Boolean">exists</span> <span title="(Boolean)Boolean">&amp;&amp;</span> (<a href="#59744" title="java.io.File">external</a> <span title="(AnyRef)Boolean">==</span> <a href="#56758" title="=&gt; java.io.File">libraryJar</a> <span title="(Boolean)Boolean">||</span> <a href="ClasspathUtilities.scala.html#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#54750" title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File],java.io.File)Boolean">onClasspath</a>(<a href="#17992" title="sbt.wrap.Set[java.io.File]">classpathJars</a>, <a href="#17994" title="sbt.wrap.Set[java.io.File]">classpathDirs</a>, <a href="#59744" title="java.io.File">external</a>) )
			<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#59745" title="Boolean">available</a>)
				<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;External &quot;)" class="string">&quot;External &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59744" title="java.io.File">external</a> <span title="(Any)java.lang.String">+</span> (<span title="Any" class="keyword">if</span>(<a href="#59744" title="java.io.File">external</a>.<span title="()Boolean">exists</span>) <span title="java.lang.String(&quot; not on classpath.&quot;)" class="string">&quot; not on classpath.&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; does not exist.&quot;)" class="string">&quot; does not exist.&quot;</span>))
			<span title="(java.io.File,AbstractCompileConditional.this.ExternalInfo)(java.io.File, AbstractCompileConditional.this.ExternalInfo)">(</span><a href="#59744" title="java.io.File">external</a>, <a href="#59577" title="(Boolean,Long)AbstractCompileConditional.this.ExternalInfo">ExternalInfo</a>(<a href="#59745" title="Boolean">available</a>, <a href="#59744" title="java.io.File">external</a>.<span title="()Long">lastModified</span>))
		}
	}

	<span class="keyword">import</span> ChangeDetection.{LastModifiedOnly, HashOnly, HashAndLastModified, HashAndProductsExist}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.ChangeDetection.Value" id="56762">changeDetectionMethod</a>: ChangeDetection.<span title="sbt.ChangeDetection.Value">Value</span> = <a href="#56835" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="56763">checkLastModified</a> = <a href="#56762" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <a title="(AnyRef)Boolean" id="6012">!=</a> <a href="#56835" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="56764">noProductsImpliesModified</a> = <a href="#56762" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="(AnyRef)Boolean">==</span> <a href="#56829" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="56765">isSourceModified</a>(<a title="sbt.Path" id="59762">source</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) =
		<a href="#56762" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <a href="#56833" title="=&gt; sbt.ChangeDetection.Value">HashAndLastModified</a> | <a href="#56835" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a> =&gt;
				<span class="comment">// behavior will differ because of checkLastModified</span>
				<span class="comment">// hash modified must come first so that the latest hash is calculated for every source</span>
				<a href="#56770" title="(sbt.Path)Boolean">hashModified</a>(<a href="#59762" title="sbt.Path">source</a>) <span title="(Boolean)Boolean">||</span> <span class="keyword">super</span>.<a href="#56737" title="(sbt.Path)Boolean">isSourceModified</a>(<a href="#59762" title="sbt.Path">source</a>)
			<span title="Boolean" class="keyword">case</span> <a href="#56831" title="=&gt; sbt.ChangeDetection.Value">HashOnly</a> =&gt; <a href="#56770" title="(sbt.Path)Boolean">hashModified</a>(<a href="#59762" title="sbt.Path">source</a>)
			<span title="Boolean" class="keyword">case</span> <a href="#56829" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a> =&gt; <span class="keyword">super</span>.<a href="#56737" title="(sbt.Path)Boolean">isSourceModified</a>(<a href="#59762" title="sbt.Path">source</a>)
		}

	<span class="keyword">import</span> scala.collection.mutable.{Buffer, ListBuffer}
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]" id="56767">newHashes</a>: <a title="scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]" id="20300">Buffer</a>[(Path, Option[Array[Byte]])] = <span title="scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]" id="20264">ListBuffer</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)Unit" id="56769">warnHashError</a>(<a title="sbt.Path" id="59797">source</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="String" id="59798">message</a>: <span title="String">String</span>)
	{
		<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52376" title="(=&gt; String)Unit">warn</a>(<span title="java.lang.String(&quot;Error computing hash for source &quot;)" class="string">&quot;Error computing hash for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59797" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59798" title="String">message</a>)
		<a href="#56767" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,object None)(sbt.Path, object None)">(</span><a href="#59797" title="sbt.Path">source</a>, <span title="object None">None</span>))
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="56770">hashModified</a>(<a title="sbt.Path" id="59765">source</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) =
	{
		<a href="#59765" title="sbt.Path">source</a>.<a href="Path.scala.html#52345" title="=&gt; Boolean">isDirectory</a> <span title="(Boolean)Boolean">||</span>
		(<a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#53410" title="(sbt.Path)Option[Array[Byte]]">hash</a>(<a href="#59765" title="sbt.Path">source</a>) <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
				<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59765" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; had no hash, marking modified.&quot;)" class="string">&quot; had no hash, marking modified.&quot;</span>)
				<a href="Hash.scala.html#59777" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#59765" title="sbt.Path">source</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>).<a title="((String) =&gt; Unit,(Array[Byte]) =&gt; Unit)Unit" id="53343">fold</a>(<a title="String" id="59796">err</a> =&gt; <a href="#56769" title="(sbt.Path,String)Unit">warnHashError</a>(<a href="#59765" title="sbt.Path">source</a>, <a href="#59796" title="String">err</a>), <a title="Array[Byte]" id="59800">newHash</a> =&gt; <a href="#56767" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,Some[Array[Byte]])(sbt.Path, Some[Array[Byte]])">(</span><a href="#59765" title="sbt.Path">source</a>, <span title="(Array[Byte])Some[Array[Byte]]">Some</span>(<a href="#59800" title="Array[Byte]">newHash</a>))))
				<span title="Boolean(true)" class="keyword">true</span>
			<span title="Boolean" class="keyword">case</span> Some(<a title="Array[Byte]" id="59804">oldHash</a>) =&gt;
			{
				<a href="Hash.scala.html#59777" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#59765" title="sbt.Path">source</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>) <span title="Boolean" class="keyword">match</span>
				{
					<span title="Boolean" class="keyword">case</span> Left(<a title="String" id="59809">err</a>) =&gt;
						<a href="#56769" title="(sbt.Path,String)Unit">warnHashError</a>(<a href="#59765" title="sbt.Path">source</a>, <a href="#59809" title="String">err</a>)
						<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Assuming source is modified because of error.&quot;)" class="string">&quot;Assuming source is modified because of error.&quot;</span>)
						<span title="Boolean(true)" class="keyword">true</span>
					<span title="Boolean" class="keyword">case</span> Right(<a title="Array[Byte]" id="59812">newHash</a>) =&gt;
						<a href="#56767" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,Some[Array[Byte]])(sbt.Path, Some[Array[Byte]])">(</span><a href="#59765" title="sbt.Path">source</a>, <span title="(Array[Byte])Some[Array[Byte]]">Some</span>(<a href="#59812" title="Array[Byte]">newHash</a>)))
						<span class="keyword">val</span> <a title="Boolean" id="59813">different</a> = <span title="=&gt; Boolean">!</span>(<a href="#59804" title="Array[Byte]">oldHash</a> <a title="(Any)Boolean" id="15892">deepEquals</a> <a href="#59812" title="Array[Byte]">newHash</a>)
						<span title="Unit" class="keyword">if</span>(<a href="#59813" title="Boolean">different</a>)
							<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Hash for source &quot;)" class="string">&quot;Hash for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59765" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; changed (was &quot;)" class="string">&quot; changed (was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="Hash.scala.html#11685" title="object sbt.Hash">Hash</a>.<a href="Hash.scala.html#59774" title="(Array[Byte])String">toHex</a>(<a href="#59804" title="Array[Byte]">oldHash</a>) <span title="(Any)java.lang.String">+</span>
							<span title="java.lang.String(&quot;, is now &quot;)" class="string">&quot;, is now &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="Hash.scala.html#11685" title="object sbt.Hash">Hash</a>.<a href="Hash.scala.html#59774" title="(Array[Byte])String">toHex</a>(<a href="#59812" title="Array[Byte]">newHash</a>) <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;), marking modified.&quot;)" class="string">&quot;), marking modified.&quot;</span>)
						<a href="#59813" title="Boolean">different</a>
				}
			}
		})
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Iterable[sbt.Path]" id="56771">scalaJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
	{
		<span class="keyword">val</span> <a title="xsbt.ScalaInstance" id="59830">instance</a> = <a href="#56798" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#15175" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>
		<span title="(java.io.File*)Seq[java.io.File]">Seq</span>(<a href="#59830" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15210" title="=&gt; java.io.File">libraryJar</a>, <a href="#59830" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15212" title="=&gt; java.io.File">compilerJar</a>).<a title="((java.io.File) =&gt; sbt.Path)Seq[sbt.Path]" id="16016">map</a>(<a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52308" title="(java.io.File)sbt.Path">fromFile</a>)
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(AbstractCompileConditional.this.ConditionalAnalysis)Option[String]" id="56772">execute</a>(<a title="AbstractCompileConditional.this.ConditionalAnalysis" id="56814">executeAnalysis</a>: <a href="#56732" title="AbstractCompileConditional.this.ConditionalAnalysis">ConditionalAnalysis</a>) =
	{
		<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52375" title="(=&gt; String)Unit">info</a>(<a href="#56814" title="AbstractCompileConditional.this.ConditionalAnalysis">executeAnalysis</a>.<a title="()java.lang.String" id="6004">toString</a>)
		<a href="#56773" title="()Unit">finishHashes</a>()
		<span class="keyword">import</span> executeAnalysis.dirtySources

		<span class="comment">// the output directory won't show up in the classpath unless it exists, so do this before classpath.get</span>
		<span class="keyword">val</span> <a title="java.io.File" id="56818">outputDir</a> = <a href="#56624" title="=&gt; sbt.Path">outputDirectory</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>
		<a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52181" title="(java.io.File,sbt.Logger)Option[String]">createDirectory</a>(<a href="#56818" title="java.io.File">outputDir</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>)

		<span class="keyword">val</span> <a title="scala.collection.Set[sbt.Path]" id="56819">cp</a> = <a href="#56625" title="=&gt; sbt.PathFinder">classpath</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#56807" title="=&gt; Iterable[sbt.Path]">dirtySources</a>.<a title="=&gt; Boolean" id="16182">isEmpty</a>)
			<a href="#56774" title="(Iterable[sbt.Path])Unit">checkClasspath</a>(<a href="#56819" title="scala.collection.Set[sbt.Path]">cp</a>)
		<span class="keyword">def</span> <a title="=&gt; Option[String]" id="56820">run</a> =
		{
			<span class="keyword">val</span> <a title="sbt.Compile" id="56843">compile</a> = <span title="sbt.Compile" class="keyword">new</span> <a href="Compile.scala.html#12269" title="sbt.Compile">Compile</a>(<a href="#56797" title="=&gt; sbt.AbstractCompileConfiguration">config</a>.<a href="#56631" title="=&gt; Int">maxErrors</a>, <a href="#56798" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>, <a href="#56775" title="=&gt; sbt.AnalysisCallback">analysisCallback</a>, <a href="#56627" title="=&gt; sbt.Path">projectPath</a>)
			<a href="Compile.scala.html#56846" title="(String,Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path,Seq[String],Seq[String],sbt.CompileOrder.Value,sbt.Logger)Option[String]">compile</a>(<a href="#56621" title="=&gt; String">label</a>, <a href="#56807" title="=&gt; Iterable[sbt.Path]">dirtySources</a>, <a href="#56819" title="scala.collection.Set[sbt.Path]">cp</a>, <a href="#56624" title="=&gt; sbt.Path">outputDirectory</a>, <a href="#56629" title="=&gt; Seq[String]">options</a>, <a href="#56630" title="=&gt; Seq[String]">javaOptions</a>, <a href="#56632" title="=&gt; sbt.CompileOrder.Value">compileOrder</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>)
		}
		<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="56821">loader</a> = <a href="ClasspathUtilities.scala.html#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#54727" title="(Iterable[sbt.Path])java.lang.ClassLoader">toLoader</a>(<a href="#56819" title="scala.collection.Set[sbt.Path]">cp</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a href="#56771" title="=&gt; Iterable[sbt.Path]">scalaJars</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="56822">r</a> = classfile.<a href="classfile/Analyze.scala.html#56913" title="(sbt.Path,sbt.Path,Iterable[sbt.Path],Iterable[sbt.Path],sbt.Logger)(=&gt; scala.collection.Set[sbt.Path],sbt.AnalysisCallback,java.lang.ClassLoader)(=&gt; Option[String])Option[String]">Analyze</a>(<a href="#56627" title="=&gt; sbt.Path">projectPath</a>, <a href="#56624" title="=&gt; sbt.Path">outputDirectory</a>, <a href="#56807" title="=&gt; Iterable[sbt.Path]">dirtySources</a>, <a href="#56622" title="=&gt; sbt.PathFinder">sourceRoots</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#56750" title="=&gt; sbt.Logger">log</a>)(<a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#52093" title="=&gt; scala.collection.mutable.Set[sbt.Path]">allProducts</a>, <a href="#56775" title="=&gt; sbt.AnalysisCallback">analysisCallback</a>, <a href="#56821" title="java.lang.ClassLoader">loader</a>)(<a href="#56820" title="=&gt; Option[String]">run</a>)
		<span title="Unit" class="keyword">if</span>(<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52371" title="(sbt.Level.Value)Boolean">atLevel</a>(<a href="Logger.scala.html#9888" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#56503" title="=&gt; sbt.Level.Value">Debug</a>))
		{
			<span class="comment">/** This checks that the plugin accounted for all classes in the output directory.*/</span>
			<span class="keyword">val</span> <a title="scala.collection.mutable.Set[sbt.Path]" id="56991">classes</a> = scala.collection.mutable.<a title="(sbt.Path*)scala.collection.mutable.Set[sbt.Path]" id="20235">HashSet</a>(<a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#52093" title="=&gt; scala.collection.mutable.Set[sbt.Path]">allProducts</a>.<span title="=&gt; Seq[sbt.Path]">toSeq</span>: _*)
			<span class="keyword">val</span> <a title="scala.collection.Set[sbt.Path]" id="56992">actualClasses</a> = (<a href="#56624" title="=&gt; sbt.Path">outputDirectory</a> <a href="Path.scala.html#52318" title="(sbt.FileFilter)sbt.PathFinder">**</a> <a href="NameFilter.scala.html#56997" title="(String)sbt.NameFilter">GlobFilter</a>(<span title="java.lang.String(&quot;*.class&quot;)" class="string">&quot;*.class&quot;</span>)).<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>
			<span class="keyword">val</span> <a title="List[sbt.Path]" id="56993">missedClasses</a> = <a href="#56992" title="scala.collection.Set[sbt.Path]">actualClasses</a>.<span title="=&gt; List[sbt.Path]">toList</span>.<a title="((sbt.Path) =&gt; Boolean)List[sbt.Path]" id="15733">remove</a>(<a href="#56991" title="scala.collection.mutable.Set[sbt.Path]">classes</a>.<a href="#57001" title="(sbt.Path)Boolean" id="18161">contains</a>)
			<a href="#56993" title="List[sbt.Path]">missedClasses</a>.<a title="((sbt.Path) =&gt; Unit)Unit" id="15731">foreach</a>(<a title="sbt.Path" id="57003">c</a> =&gt; <a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Missed class: &quot;)" class="string">&quot;Missed class: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57003" title="sbt.Path">c</a>))
			<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Total missed classes: &quot;)" class="string">&quot;Total missed classes: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56993" title="List[sbt.Path]">missedClasses</a>.<a title="=&gt; Int" id="15710">length</a>)
		}
		<a href="#56822" title="Option[String]">r</a>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="56773">finishHashes</a>()
	{
		<span title="Unit" class="keyword">if</span>(<a href="#56762" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="(AnyRef)Boolean">==</span> <a href="#56829" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a>)
			<a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#53411" title="()Unit">clearHashes</a>()
		<span class="keyword">else</span>
		{
			<span class="keyword">for</span>(<a href="#59841" title="(((sbt.Path, Option[Array[Byte]])) =&gt; Unit)Unit" id="16020">(</a><a title="sbt.Path" id="59846">path</a>, <a title="Option[Array[Byte]]" id="59847">hash</a>) &lt;- <a href="#56767" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a>)
			{
				<a href="#59847" title="Option[Array[Byte]]">hash</a> <span title="Unit" class="keyword">match</span>
				{
					<span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#53409" title="(sbt.Path)Unit">clearHash</a>(<a href="#59846" title="sbt.Path">path</a>)
					<span title="Unit" class="keyword">case</span> Some(<a title="Array[Byte]" id="59848">hash</a>) =&gt; <a href="#56716" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#53408" title="(sbt.Path,Array[Byte])Unit">setHash</a>(<a href="#59846" title="sbt.Path">path</a>, <a href="#59848" title="Array[Byte]">hash</a>)
				}
			}
		}
		<a href="#56767" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a>.<a title="()Unit" id="45237">clear</a>()
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path])Unit" id="56774">checkClasspath</a>(<a title="Iterable[sbt.Path]" id="56842">cp</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path])
	{
		<span class="keyword">import</span> scala.collection.mutable.{HashMap, HashSet, Set}
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" id="59850">collisions</a> = <span title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" id="20417">HashMap</a>[String, Set[Path]]
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="59855">jar</a> &lt;- <a href="#56842" title="Iterable[sbt.Path]">cp</a> <span class="keyword">if</span> <a href="ClasspathUtilities.scala.html#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#54744" title="(sbt.Path)Boolean">isArchive</a>(<a href="#59855" title="sbt.Path">jar</a>))
			<a href="#59850" title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]">collisions</a>.<a title="(String,=&gt; scala.collection.mutable.Set[sbt.Path])scala.collection.mutable.Set[sbt.Path]" id="38010">getOrElseUpdate</a>(<a href="#59855" title="sbt.Path">jar</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<a title="()java.lang.String" id="16955">getName</a>, <span title="scala.collection.mutable.HashSet[sbt.Path]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[sbt.Path]">HashSet</span>[Path]) <a title="(sbt.Path)Unit" id="30894">+=</a> <a href="#59855" title="sbt.Path">jar</a>
		<span class="keyword">for</span>(<a href="#59858" title="(((String, scala.collection.mutable.Set[sbt.Path])) =&gt; Unit)Unit">(</a><a title="String" id="59863">name</a>, <a title="scala.collection.mutable.Set[sbt.Path]" id="59864">jars</a>) &lt;- <a href="#59850" title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]">collisions</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#59864" title="scala.collection.mutable.Set[sbt.Path]">jars</a>.<span title="=&gt; Int">size</span> <a title="(Int)Boolean" id="3084">&gt;</a> <span title="Int(1)" class="int">1</span>)
			{
				<a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Possible duplicate classpath locations for jar &quot;)" class="string">&quot;Possible duplicate classpath locations for jar &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59863" title="String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span>)
				<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="59869">jar</a> &lt;- <a href="#59864" title="scala.collection.mutable.Set[sbt.Path]">jars</a>) <a href="#56750" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;\011&quot;)" class="string">&quot;\t&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#59869" title="sbt.Path">jar</a>.<a href="Path.scala.html#52356" title="=&gt; String">absolutePath</a>)
			}
		}
	}

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.AnalysisCallback" id="56775">analysisCallback</a>: <a href="AnalysisCallback.scala.html#10844" title="sbt.AnalysisCallback">AnalysisCallback</a>
}
<span class="keyword">object</span> <a title="object sbt.ChangeDetection" id="8226">ChangeDetection</a> <span class="keyword">extends</span> <a title="Enumeration" id="34032">Enumeration</a>
{
	<span class="keyword">val</span> <a title="sbt.ChangeDetection.Value" id="56829">LastModifiedOnly</a>, <a title="sbt.ChangeDetection.Value" id="56831">HashOnly</a>, <a title="sbt.ChangeDetection.Value" id="56833">HashAndLastModified</a>, <a title="sbt.ChangeDetection.Value" id="56835">HashAndProductsExist</a> = <span title="=&gt; sbt.ChangeDetection.Value">Value</span>
}
        </pre>
    </body>
</html>