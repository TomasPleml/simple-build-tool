<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Webstart.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> scala.xml.{Elem, NodeSeq}
<span class="keyword">import</span> Control._

<span class="comment">/** Defines the configurable parameters for the webstart task. */</span>
<span class="keyword">trait</span> <a title="trait WebstartOptions extends java.lang.Object with NotNull" id="8075">WebstartOptions</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="comment">/** The main jar to use for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="83810">webstartMainJar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all generated files for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="83811">webstartOutputDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="comment">/** Generates the .jnlp file using the provided resource descriptions.  Each resource description
	* provides the path of the jar relative to 'webstartOutputDirectory' and whether or not
	* it is the main jar.*/</span>
	<span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.Elem" id="83812">jnlpXML</a>(<a title="Seq[sbt.WebstartJarResource]" id="83825">jars</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <span title="scala.xml.Elem">Elem</span>
	<span class="comment">/** The location to write the .jnlp file to.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="83813">jnlpFile</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all jars that are not the main jar.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="83814">webstartLibDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>
	<span class="comment">/** The libraries needed for webstart.  Note that only jars are used; directories are discarded.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="83815">webstartLibraries</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Libraries external to the project needed for webstart.  This is mainly for scala libraries.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="83816">webstartExtraLibraries</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Resources to copy to the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="83817">webstartResources</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** If defined, this specifies where to create a zip of the webstart output directory.  It cannot be
	* in the output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.Path]" id="83818">webstartZip</a>: <span title="Option[sbt.Path]">Option</span>[Path]

	<span class="comment">/** If defined, configures signing of jars.  All jars (main and libraries) are signed using
	* this configuration.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="83819">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration]
	<span class="comment">/** If true, pack200 compression is applied to all jars (main and libraries).  A version of each jar
	* without pack200 compression is still created in the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="83820">webstartPack200</a>: <span title="Boolean">Boolean</span>
	<span class="comment">/** If true, gzip compression will be applied to all jars.  If pack200 compression is enabled,
	* gzip compression is also applied to the archives with pack200 compression.  A version of
	* each file without gzip compression is still created in the webstart output directory. */</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="83821">webstartGzip</a>: <span title="Boolean">Boolean</span>
}
<span class="comment">/** Represents a library included in the webstart distribution.  Name is the filename of the jar.
* href is the path of the jar relative to the webstart output directory.  isMain is true only for
* the main jar. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class WebstartJarResource extends java.lang.Object with NotNull with ScalaObject" id="12041">WebstartJarResource</a>(<span class="keyword">val</span> <a title="String" id="83849">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="83850">href</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Boolean" id="83851">isMain</a>: <span title="Boolean">Boolean</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** Configuration for signing jars. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SignConfiguration extends java.lang.Object with NotNull with ScalaObject" id="9710">SignConfiguration</a>(<span class="keyword">val</span> <a title="String" id="83862">alias</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Seq[sbt.SignJar.SignOption]" id="83863">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** A scala project that produces a webstart distribution. */</span>
<span class="keyword">trait</span> <a title="trait WebstartScalaProject extends java.lang.Object with sbt.ScalaProject with ScalaObject" id="10217">WebstartScalaProject</a> <span class="keyword">extends</span> <a href="ScalaProject.scala.html#12923" title="sbt.ScalaProject">ScalaProject</a>
{
	<span class="keyword">import</span> WebstartScalaProject._
	<span class="comment">/** Creates a task that produces a webstart distribution using the given options.*/</span>
	<span class="keyword">def</span> <a title="(sbt.WebstartOptions)WebstartScalaProject.this.Task" id="83866">webstartTask</a>(<a title="sbt.WebstartOptions" id="83889">options</a>: <a href="#8075" title="sbt.WebstartOptions">WebstartOptions</a>) =
		<a href="TaskManager.scala.html#53827" title="(=&gt; Option[String])WebstartScalaProject.this.Task">task</a>
		{
			<span class="keyword">import</span> options._
			<a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52182" title="(Iterable[sbt.Path],sbt.Logger)Option[String]">createDirectories</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="#83899" title="(sbt.Path)List[sbt.Path]">::</a> <a href="#83814" title="=&gt; sbt.Path">webstartLibDirectory</a> <a href="#83900" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>) <span class="comment">// ignore errors</span>
			<a href="#83888" title="(sbt.WebstartOptions)Unit">verifyOptions</a>(<a href="#83889" title="sbt.WebstartOptions">options</a>)

			<span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="83893">relativize</a>(<a title="sbt.Path" id="83906">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52301" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#52341" title="=&gt; sbt.Path">##</a>, <a href="#83906" title="sbt.Path">jar</a>) <a title="(=&gt; sbt.Path)sbt.Path" id="30531">getOrElse</a>
				<a title="(String)Nothing" id="6472">error</a>(<span title="java.lang.String(&quot;Jar (&quot;)" class="string">&quot;Jar (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83906" title="sbt.Path">jar</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) was not in webstart output directory (&quot;)" class="string">&quot;) was not in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
			<span class="keyword">def</span> <a title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]" id="83894">signAndPack</a>(<a title="List[sbt.Path]" id="83912">jars</a>: <span title="List[sbt.Path]">List</span>[Path], <a title="sbt.Path" id="83913">targetDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>): <a title="Either[String,List[sbt.Path]]" id="336">Either</a>[String, List[Path]] =
			{
				<a href="Control.scala.html#53240" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#83912" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>: <span title="List[sbt.Path]">List</span>[Path])
				{ (<a title="List[sbt.Path]" id="83933">allJars</a>, <a title="sbt.Path" id="83934">jar</a>) =&gt;
					<span class="keyword">val</span> <a title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" id="83935">signPackResult</a> =
						<a href="#83819" title="=&gt; Option[sbt.SignConfiguration]">webstartSignConfiguration</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
						{
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> Some(<a title="sbt.SignConfiguration" id="83937">config</a>) =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#83820" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#83879" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signAndPack200</a>(<a href="#83934" title="sbt.Path">jar</a>, <a href="#83937" title="sbt.SignConfiguration">config</a>, <a href="#83913" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#83876" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signOnly</a>(<a href="#83934" title="sbt.Path">jar</a>, <a href="#83937" title="sbt.SignConfiguration">config</a>, <a href="#83913" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>)
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#83820" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#83881" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">pack200Only</a>(<a href="#83934" title="sbt.Path">jar</a>, <a href="#83913" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#83882" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#83934" title="sbt.Path">jar</a>, <a href="#83913" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="84093">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#13001" title="sbt.Jars">Jars</a>(<a href="#84093" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>))
						}
					<span class="keyword">val</span> <a title="Boolean" id="83936">deleteOriginal</a> = <a href="#83820" title="=&gt; Boolean">webstartPack200</a>
					<a href="#83935" title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product">signPackResult</a>.<span title="=&gt; Either.RightProjection[String,sbt.Jars]">right</span> <span title="((sbt.Jars) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">flatMap</span> { <a title="sbt.Jars" id="84101">addJars</a> =&gt;
						<span title="Either[String,List[sbt.Path]]" class="keyword">if</span>(<a href="#83821" title="=&gt; Boolean">webstartGzip</a>)
							<a href="Control.scala.html#13545" title="object sbt.Control">Control</a>.<a href="Control.scala.html#53240" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#84101" title="sbt.Jars">addJars</a>.<a href="#84000" title="=&gt; List[sbt.Path]">gzippable</a>, <a href="#84101" title="sbt.Jars">addJars</a>.<a href="#83999" title="=&gt; List[sbt.Path]">allJars</a> <a href="#84118" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#83933" title="List[sbt.Path]">allJars</a>)
								{ (<a title="List[sbt.Path]" id="84127">accumulate</a>, <a title="sbt.Path" id="84128">jar</a>) =&gt; <a href="#83878" title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product">gzipJar</a>(<a href="#84128" title="sbt.Path">jar</a>, <a href="#83936" title="Boolean">deleteOriginal</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">map</span>(<a href="#84166" title="List[sbt.Path]">_</a> <a href="#84167" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#84127" title="List[sbt.Path]">accumulate</a>) }
						<span class="keyword">else</span>
							<a title="(List[sbt.Path])Right[Nothing,List[sbt.Path]]" id="490">Right</a>(<a href="#84101" title="sbt.Jars">addJars</a>.<a href="#83999" title="=&gt; List[sbt.Path]">allJars</a> <a href="#84174" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#83933" title="List[sbt.Path]">allJars</a>)
					}
				}
			}

			<span class="keyword">import</span> FileUtilities._

			<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="83896">jars</a> = (<a href="#83815" title="=&gt; sbt.PathFinder">webstartLibraries</a> <a href="Path.scala.html#52316" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#83816" title="=&gt; sbt.PathFinder">webstartExtraLibraries</a>).<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>.<span title="((sbt.Path) =&gt; Boolean)Iterable[sbt.Path]">filter</span>(<a href="ClasspathUtilities.scala.html#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#54744" title="(sbt.Path)Boolean">isArchive</a>)
			<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[sbt.Path]" id="83897">process</a>(<a title="Iterable[sbt.Path]" id="84181">jars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <span class="keyword">for</span>(<a title="((sbt.Path) =&gt; sbt.Path)Iterable[sbt.Path]" id="84186">jar</a> &lt;- <a href="#84181" title="Iterable[sbt.Path]">jars</a> <span class="keyword">if</span> <a href="#84186" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>.<a title="(java.lang.String)Boolean" id="6371">endsWith</a>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)) <span class="keyword">yield</span> <a href="#83893" title="(sbt.Path)sbt.Path">relativize</a>(<a href="#84186" title="sbt.Path">jar</a>)

			<a href="Control.scala.html#53245" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#83894" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#83810" title="=&gt; sbt.Path">webstartMainJar</a> <a href="#84188" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>)) { <a title="List[sbt.Path]" id="84192">mainJars</a> =&gt;
				<a href="Control.scala.html#53245" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#83894" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#83896" title="Iterable[sbt.Path]">jars</a>.<span title="=&gt; List[sbt.Path]">toList</span>, <a href="#83814" title="=&gt; sbt.Path">webstartLibDirectory</a>)) { <a title="List[sbt.Path]" id="84195">libJars</a> =&gt;
					<a href="#83884" title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#83812" title="(Seq[sbt.WebstartJarResource])scala.xml.Elem">jnlpXML</a>(<a href="#83886" title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]">jarResources</a>(<a href="#83897" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#84192" title="List[sbt.Path]">mainJars</a>), <a href="#83897" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#84195" title="List[sbt.Path]">libJars</a>))), <a href="#83813" title="=&gt; sbt.Path">jnlpFile</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
					<a href="Control.scala.html#53245" title="(Either[String,scala.collection.Set[sbt.Path]])((scala.collection.Set[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="FileUtilities.scala.html#52197" title="(Iterable[sbt.Path],sbt.Path,sbt.Logger)Either[String,scala.collection.Set[sbt.Path]]">copy</a>(<a href="#83817" title="=&gt; sbt.PathFinder">webstartResources</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>)) { <a title="scala.collection.Set[sbt.Path]" id="84210">copiedResources</a> =&gt;
						<span class="keyword">val</span> <a title="sbt.PathFinder" id="84211">keep</a> = <a href="#83813" title="=&gt; sbt.Path">jnlpFile</a> <a href="Path.scala.html#52316" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52294" title="(=&gt; Iterable[sbt.Path])sbt.PathFinder">lazyPathFinder</a>(<a href="#84192" title="List[sbt.Path]">mainJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#84195" title="List[sbt.Path]">libJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#84210" title="scala.collection.Set[sbt.Path]">copiedResources</a>) <a href="Path.scala.html#52316" title="(sbt.PathFinder)sbt.PathFinder">+++</a>
							<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#52316" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#83814" title="=&gt; sbt.Path">webstartLibDirectory</a>
						<a href="FileUtilities.scala.html#52205" title="(sbt.Path,Iterable[sbt.Path],sbt.Logger)Option[String]">prune</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#84211" title="sbt.PathFinder">keep</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
						<a href="#83818" title="=&gt; Option[sbt.Path]">webstartZip</a>.<a title="((sbt.Path) =&gt; Option[String])Option[String]" id="30535">flatMap</a>( <a title="sbt.Path" id="84229">zipPath</a> =&gt; <a href="FileUtilities.scala.html#52156" title="(Iterable[sbt.Path],sbt.Path,Boolean,sbt.Logger)Option[String]">zip</a>(<span title="(sbt.Path*)List[sbt.Path]">List</span>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#52341" title="=&gt; sbt.Path">##</a>), <a href="#84229" title="sbt.Path">zipPath</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="Project.scala.html#53842" title="=&gt; sbt.Logger">log</a>) )
					}
				}
			}
		}
	<span class="comment">/** Creates default XML elements for a JNLP file for the given resources.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.NodeSeq" id="83867">defaultElements</a>(<a title="Seq[sbt.WebstartJarResource]" id="84232">resources</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <a title="scala.xml.NodeSeq" id="40056">NodeSeq</a> = <a title="object scala.xml.NodeSeq" id="40057">NodeSeq</a>.<a title="(Seq[scala.xml.Node])scala.xml.NodeSeq" id="44940">fromSeq</a>(<a href="#84232" title="Seq[sbt.WebstartJarResource]">resources</a>.<a title="((sbt.WebstartJarResource) =&gt; scala.xml.Elem)Seq[scala.xml.Elem]" id="16016">map</a>(<a href="#83868" title="(sbt.WebstartJarResource)scala.xml.Elem">defaultElement</a>))
	<span class="comment">/** Creates a default XML element for a JNLP file for the given resource.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.WebstartJarResource)scala.xml.Elem" id="83868">defaultElement</a>(<a title="sbt.WebstartJarResource" id="84234">resource</a>: <a href="#12041" title="sbt.WebstartJarResource">WebstartJarResource</a>): <span title="scala.xml.Elem">Elem</span> =
		&lt;jar href={<a href="#84234" title="sbt.WebstartJarResource">resource</a>.<a href="#83850" title="=&gt; String">href</a>} main={<a href="#84234" title="sbt.WebstartJarResource">resource</a>.<a href="#83851" title="=&gt; Boolean">isMain</a>.<a title="()java.lang.String" id="3439">toString</a>}/&gt;

}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Jars extends java.lang.Object with NotNull with ScalaObject" id="13001">Jars</a>(<span class="keyword">val</span> <a title="List[sbt.Path]" id="84000">gzippable</a>: <span title="List[sbt.Path]">List</span>[Path], <span class="keyword">val</span> <a title="List[sbt.Path]" id="84001">nonGzippable</a>: <span title="List[sbt.Path]">List</span>[Path]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; List[sbt.Path]" id="83999">allJars</a> = <a href="#84000" title="=&gt; List[sbt.Path]">gzippable</a> <a href="#84121" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#84001" title="=&gt; List[sbt.Path]">nonGzippable</a>
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.WebstartScalaProject" id="10218">WebstartScalaProject</a>
{
	<span class="keyword">import</span> FileTasks.{runOption, wrapProduct, wrapProducts}
	<span class="comment">/** Changes the extension of the Path of the given jar from &quot;.jar&quot; to newExtension.  If append is true,
	* the new extension is simply appended to the jar's filename. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)sbt.Path" id="83873">appendExtension</a>(<a title="sbt.Path" id="83948">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="String" id="83949">newExtension</a>: <span title="String">String</span>) =
		<a href="#83948" title="sbt.Path">jar</a> <span title="sbt.Path" class="keyword">match</span>
		{
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.RelativePath" id="83951">rp</a>: <a href="Path.scala.html#10991" title="sbt.RelativePath">RelativePath</a> =&gt; <a href="#83951" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#73637" title="=&gt; sbt.Path">parentPath</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> (<a href="#83951" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#73639" title="=&gt; String">component</a> <span title="(Any)java.lang.String">+</span> <a href="#83949" title="String">newExtension</a>)
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.Path" id="83952">x</a> =&gt; <a href="#83952" title="sbt.Path">x</a>
		}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="83874">gzipJarPath</a>(<a title="sbt.Path" id="84134">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#83873" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#84134" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="83875">packPath</a>(<a title="sbt.Path" id="83946">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="#83873" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#83946" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.pack&quot;)" class="string">&quot;.pack&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="83876">signOnly</a>(<a title="sbt.Path" id="84010">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="84011">signConfiguration</a>: <a href="#9710" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="84012">targetDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="84013">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="84015">targetJar</a> = <a href="#84012" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> <a href="#84010" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#61143" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign&quot;)" class="string">&quot;sign&quot;</span>, <a href="FileTask.scala.html#61141" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#60177" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#84010" title="sbt.Path">jar</a>, <a href="#84013" title="sbt.Logger">log</a>) {
			<a href="#84013" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Signing &quot;)" class="string">&quot;Signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84010" title="sbt.Path">jar</a>)
			<a href="#83877" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#84010" title="sbt.Path">jar</a>, <a href="#84011" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#84015" title="sbt.Path">targetJar</a>, <a href="#84013" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#13001" title="sbt.Jars">Jars</a>(<a href="#84015" title="sbt.Path">targetJar</a> <a href="#84029" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]" id="83877">signAndVerify</a>(<a title="sbt.Path" id="83974">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="83975">signConfiguration</a>: <a href="#9710" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="83976">targetJar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="83977">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#72073" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#83974" title="sbt.Path">jar</a>, <a href="#83975" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#83862" title="=&gt; String">alias</a>, <a href="Pack.scala.html#72064" title="(sbt.Path)sbt.SignJar.SignOption">signedJar</a>(<a href="#83976" title="sbt.Path">targetJar</a>) <a href="#83980" title="(sbt.SignJar.SignOption)List[sbt.SignJar.SignOption]">::</a> <a href="#83975" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#83863" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>.<span title="=&gt; List[sbt.SignJar.SignOption]">toList</span>, <a href="#83977" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="Pack.scala.html#72074" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#83974" title="sbt.Path">jar</a>, <a href="#83975" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#83863" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#83977" title="sbt.Logger">log</a>).<a title="((String) =&gt; java.lang.String)Option[java.lang.String]" id="30533">map</a>(<a title="String" id="83987">err</a> =&gt; <span title="java.lang.String(&quot;Signed jar failed verification: &quot;)" class="string">&quot;Signed jar failed verification: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83987" title="String">err</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="83878">gzipJar</a>(<a title="sbt.Path" id="84129">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="Boolean" id="84130">deleteOriginal</a>: <span title="Boolean">Boolean</span>, <a title="sbt.Logger" id="84131">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="84133">gzipJar</a> = <a href="#83874" title="(sbt.Path)sbt.Path">gzipJarPath</a>(<a href="#84129" title="sbt.Path">jar</a>)
		<a href="FileTask.scala.html#61143" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span>, <a href="FileTask.scala.html#61141" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">gzipJar</a> <a href="FileTask.scala.html#60177" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#84129" title="sbt.Path">jar</a>, <a href="#84131" title="sbt.Logger">log</a>)
		{
			<a href="#84131" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Gzipping &quot;)" class="string">&quot;Gzipping &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84129" title="sbt.Path">jar</a>)
			<a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52150" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">gzip</a>(<a href="#84129" title="sbt.Path">jar</a>, <a href="#84133" title="sbt.Path">gzipJar</a>, <a href="#84131" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
				(<span title="Option[String]" class="keyword">if</span>(<a href="#84130" title="Boolean">deleteOriginal</a>) <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52210" title="(Iterable[sbt.Path],Boolean,sbt.Logger)Option[String]">clean</a>(<a href="#84129" title="sbt.Path">jar</a> <a href="#84149" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#84131" title="sbt.Logger">log</a>) <span class="keyword">else</span> <span title="object None">None</span>)
		}.<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#84133" title="sbt.Path">gzipJar</a> <a href="#84156" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  This method only does anything if
	* its outputs are out of date with respect to 'jar'.  Note that it does not determine if the signing configuration has changed.
	* See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="83879">signAndPack200</a>(<a title="sbt.Path" id="83938">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="83939">signConfiguration</a>: <a href="#9710" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="83940">targetDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="83941">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="83943">signedJar</a> = <a href="#83940" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> <a href="#83938" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="83944">packedJar</a> = <a href="#83875" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#83943" title="sbt.Path">signedJar</a>)
		<span class="keyword">import</span> signConfiguration._

		<a href="FileTask.scala.html#61143" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign and pack200&quot;)" class="string">&quot;sign and pack200&quot;</span>, <a href="FileTask.scala.html#61142" title="implicit sbt.FileTasks.wrapProducts : (=&gt; Iterable[sbt.Path])sbt.ProductsWrapper">List</a>(<a href="#83944" title="sbt.Path">packedJar</a>, <a href="#83943" title="sbt.Path">signedJar</a>) <a href="FileTask.scala.html#60177" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#83938" title="sbt.Path">jar</a>, <a href="#83941" title="sbt.Logger">log</a>) {
			<a href="#83941" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression and signing &quot;)" class="string">&quot;Applying pack200 compression and signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83938" title="sbt.Path">jar</a>)
			<a href="#83880" title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">signAndPack</a>(<a href="#83938" title="sbt.Path">jar</a>, <a href="#83943" title="sbt.Path">signedJar</a>, <a href="#83944" title="sbt.Path">packedJar</a>, <a href="#83862" title="=&gt; String">alias</a>, <a href="#83863" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#83941" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="#83877" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#83938" title="sbt.Path">jar</a>, <a href="#83939" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#83943" title="sbt.Path">signedJar</a>, <a href="#83941" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#13001" title="sbt.Jars">Jars</a>(<a href="#83944" title="sbt.Path">packedJar</a> <a href="#84002" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#83943" title="sbt.Path">signedJar</a> <a href="#84005" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>))
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]" id="83880">signAndPack</a>(<a title="sbt.Path" id="83966">jarPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="83967">signedPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="83968">out</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="String" id="83969">alias</a>: <span title="String">String</span>, <a title="Seq[sbt.SignJar.SignOption]" id="83970">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption], <a title="sbt.Logger" id="83971">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">import</span> Pack._
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#71556" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#83966" title="sbt.Path">jarPath</a>, <a href="#83968" title="sbt.Path">out</a>, <a href="#83971" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#71558" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#83968" title="sbt.Path">out</a>, <a href="#83967" title="sbt.Path">signedPath</a>, <a href="#83971" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#72073" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#83967" title="sbt.Path">signedPath</a>, <a href="#83969" title="String">alias</a>, <a href="#83970" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#83971" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#71556" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#83967" title="sbt.Path">signedPath</a>, <a href="#83968" title="sbt.Path">out</a>, <a href="#83971" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#71558" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#83968" title="sbt.Path">out</a>, <a href="#83967" title="sbt.Path">signedPath</a>, <a href="#83971" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#72074" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#83967" title="sbt.Path">signedPath</a>, <a href="#83970" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#83971" title="sbt.Logger">log</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="83881">pack200Only</a>(<a title="sbt.Path" id="84034">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="84035">targetDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="84036">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="84038">targetJar</a> = <a href="#84035" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> <a href="#84034" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="84039">packedJar</a> = <a href="#83875" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#84038" title="sbt.Path">targetJar</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="84040">packResult</a> =
			<a href="FileTask.scala.html#61143" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;pack200&quot;)" class="string">&quot;pack200&quot;</span>, <a href="FileTask.scala.html#61141" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">packedJar</a> <a href="FileTask.scala.html#60177" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#84034" title="sbt.Path">jar</a>, <a href="#84036" title="sbt.Logger">log</a>)
			{
				<a href="#84036" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression to &quot;)" class="string">&quot;Applying pack200 compression to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84034" title="sbt.Path">jar</a>)
				<a href="Pack.scala.html#8466" title="object sbt.Pack">Pack</a>.<a href="Pack.scala.html#71556" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#84034" title="sbt.Path">jar</a>, <a href="#84039" title="sbt.Path">packedJar</a>, <a href="#84036" title="sbt.Logger">log</a>)
			}
		<a href="#84040" title="Option[String]">packResult</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
		{
			<span title="Left[String,Nothing]" class="keyword">case</span> Some(<a title="String" id="84051">err</a>) =&gt; <a title="(String)Left[String,Nothing]" id="1171">Left</a>(<a href="#84051" title="String">err</a>)
			<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#83882" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#84034" title="sbt.Path">jar</a>, <a href="#84035" title="sbt.Path">targetDirectory</a>, <a href="#84036" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="84082">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#13001" title="sbt.Jars">Jars</a>(<a href="#84039" title="sbt.Path">packedJar</a> <a href="#84083" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#84082" title="List[sbt.Path]">jars</a>))
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="83882">copyJar</a>(<a title="sbt.Path" id="84054">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="84055">targetDirectory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="84056">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="84058">targetJar</a> = <a href="#84055" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> <a href="#84054" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#61143" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;copy jar&quot;)" class="string">&quot;copy jar&quot;</span>, <a href="FileTask.scala.html#61141" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#60177" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#84054" title="sbt.Path">jar</a>, <a href="#84056" title="sbt.Logger">log</a>)( <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52201" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">copyFile</a>(<a href="#84054" title="sbt.Path">jar</a>, <a href="#84058" title="sbt.Path">targetJar</a>, <a href="#84056" title="sbt.Logger">log</a>) ).<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#84058" title="sbt.Path">targetJar</a> <a href="#84072" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,sbt.Path,sbt.Logger)Option[String]" id="83883">writeXML</a>(<a title="String" id="84200">xmlString</a>: <span title="String">String</span>, <a title="sbt.Path" id="84201">outputPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="84202">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
		<a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52215" title="(java.io.File,String,sbt.Logger)Option[String]">write</a>(<a href="#84201" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>, <a href="#84200" title="String">xmlString</a>, <a href="#84202" title="sbt.Logger">log</a>)
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath' if the hashes are different.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]" id="83884">writeXML</a>(<a title="scala.xml.Elem" id="84197">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="sbt.Path" id="84198">outputPath</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="84199">log</a>: <a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">val</span> <a title="String" id="84261">xmlString</a> =
		{
			<span class="keyword">import</span> scala.xml.Utility
			<span class="keyword">object</span> <a title="object WithToXML" id="84263">WithToXML</a> {
				<span class="keyword">def</span> <a title="(scala.xml.Elem,Boolean)java.lang.String" id="84267">toXML</a>(<a title="scala.xml.Elem" id="84269">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="Boolean" id="84270">stripComments</a>: <span title="Boolean">Boolean</span>) = <span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node)String" id="84283">toXML</a>(<a href="#84269" title="scala.xml.Elem">xml</a>).<a title="()java.lang.String" id="6400">toString</a> <span class="comment">// this will only be called for 2.8, which defaults to stripComments= false, unlike 2.7</span>
			}
			<span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.WebstartScalaProject.another28Hack : (AnyRef)object WithToXML" id="84265">another28Hack</a>(<a title="AnyRef" id="84417">any</a>: <a title="AnyRef" id="1953">AnyRef</a>) = <a href="#84263" title="object WithToXML">WithToXML</a>
			scala.xml.<span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node,Boolean)String" id="84284">toXML</a>(<a href="#84197" title="scala.xml.Elem">xml</a>, <span title="Boolean(false)" class="keyword">false</span>) <span class="comment">// 2.8 doesn't have this method anymore, so the above implicit will kick in for 2.8 only</span>
		}
		<span title="Option[String]" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#84198" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#52344" title="=&gt; Boolean">exists</a>)
		{
			<a href="#84199" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file did not exist, writing inline XML to &quot;)" class="string">&quot;JNLP file did not exist, writing inline XML to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84198" title="sbt.Path">outputPath</a>)
			<a href="#83883" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#84261" title="String">xmlString</a>, <a href="#84198" title="sbt.Path">outputPath</a>, <a href="#84199" title="sbt.Logger">log</a>)
		}
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="Either[String,Option[String]]" id="84434">result</a> =
				<span class="keyword">for</span>( <a title="((Array[Byte]) =&gt; Either[String,Option[String]])Either[String,Option[String]]" id="84444">xmlHash</a> &lt;- <a href="Hash.scala.html#59776" title="(String,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#84261" title="String">xmlString</a>, <a href="#84199" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span>; <a title="((Array[Byte]) =&gt; Option[String])Either[String,Option[String]] with Product" id="84454">fileHash</a> &lt;- <a href="Hash.scala.html#59777" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#84198" title="sbt.Path">outputPath</a>, <a href="#84199" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span> ) <span class="keyword">yield</span>
				{
					<span title="Option[String]" class="keyword">if</span>(<a href="#84444" title="Array[Byte]">xmlHash</a> <a title="(Any)Boolean" id="15892">deepEquals</a> <a href="#84454" title="Array[Byte]">fileHash</a>)
					{
						<a href="#84199" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file &quot;)" class="string">&quot;JNLP file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84198" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; uptodate.&quot;)" class="string">&quot; uptodate.&quot;</span>)
						<span title="object None">None</span>
					}
					<span class="keyword">else</span>
					{
						<a href="#84199" title="sbt.Logger">log</a>.<a href="Logger.scala.html#52374" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Inline JNLP XML modified, updating file &quot;)" class="string">&quot;Inline JNLP XML modified, updating file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84198" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
						<a href="#83883" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#84261" title="String">xmlString</a>, <a href="#84198" title="sbt.Path">outputPath</a>, <a href="#84199" title="sbt.Logger">log</a>)
					}
				}
			<a href="#84434" title="Either[String,Option[String]]">result</a>.<a title="((String) =&gt; Option[String],(Option[String]) =&gt; Option[String])Option[String]" id="53343">fold</a>(<a title="String" id="84462">err</a> =&gt; <a title="(String)Some[String]" id="286">Some</a>(<a href="#84462" title="String">err</a>), <a title="Option[String]" id="84465">x</a> =&gt; <a href="#84465" title="Option[String]">x</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean)(sbt.Path)sbt.WebstartJarResource" id="83885">jarResource</a>(<a title="Boolean" id="84466">isMain</a>: <span title="Boolean">Boolean</span>)(<a title="sbt.Path" id="84467">jar</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>): <a href="#12041" title="sbt.WebstartJarResource">WebstartJarResource</a> =
		<span title="sbt.WebstartJarResource" class="keyword">new</span> <a href="#12041" title="sbt.WebstartJarResource">WebstartJarResource</a>(<a href="#84467" title="sbt.Path">jar</a>.<a href="Path.scala.html#52358" title="=&gt; java.lang.String">name</a>, <a href="#84467" title="sbt.Path">jar</a>.<a href="Path.scala.html#52353" title="(String)String">relativePathString</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>), <a href="#84466" title="Boolean">isMain</a>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]" id="83886">jarResources</a>(<a title="Iterable[sbt.Path]" id="84203">mainJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="84204">libraries</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource] =
		<a href="#84203" title="Iterable[sbt.Path]">mainJars</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#83885" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(true)" class="keyword">true</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span> <a href="#84468" title="(List[sbt.WebstartJarResource])List[sbt.WebstartJarResource]">:::</a> <a href="#84204" title="Iterable[sbt.Path]">libraries</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#83885" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(false)" class="keyword">false</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span>

	<span class="comment">/** True iff 'directory' is an ancestor (strictly) of 'check'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path)Boolean" id="83887">isInDirectory</a>(<a title="sbt.Path" id="84477">directory</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>, <a title="sbt.Path" id="84478">check</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>) = <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52301" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#84477" title="sbt.Path">directory</a>, <a href="#84478" title="sbt.Path">check</a>).<a title="=&gt; Boolean" id="30527">isDefined</a> <a title="(Boolean)Boolean" id="2690">&amp;&amp;</a> <a href="#84477" title="sbt.Path">directory</a> <a title="(AnyRef)Boolean" id="6012">!=</a> <a href="#84478" title="sbt.Path">check</a>
	<span class="comment">/** Checks the paths in the given options for validity.  See the documentation for WebstartOptions.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.WebstartOptions)Unit" id="83888">verifyOptions</a>(<a title="sbt.WebstartOptions" id="83905">options</a>: <a href="#8075" title="sbt.WebstartOptions">WebstartOptions</a>)
	{
		<span class="keyword">import</span> options._
		<span title="(Boolean,Any)Unit">require</span>(<a href="#83887" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#83814" title="=&gt; sbt.Path">webstartLibDirectory</a>),
			<span title="java.lang.String(&quot;Webstart dependency directory (&quot;)" class="string">&quot;Webstart dependency directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83814" title="=&gt; sbt.Path">webstartLibDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) must be a subdirectory of webstart output directory (&quot;)" class="string">&quot;) must be a subdirectory of webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span>
				<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span title="(Boolean,Any)Unit">require</span>(<a href="#83887" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#83813" title="=&gt; sbt.Path">jnlpFile</a>), <span title="java.lang.String(&quot;Webstart JNLP file output location (&quot;)" class="string">&quot;Webstart JNLP file output location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83813" title="=&gt; sbt.Path">jnlpFile</a> <span title="(Any)java.lang.String">+</span>
			<span title="java.lang.String(&quot;) must be in the webstart output directory (&quot;)" class="string">&quot;) must be in the webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="84499">wz</a> &lt;- <a href="#83818" title="=&gt; Option[sbt.Path]">webstartZip</a>)
			<span title="(Boolean,Any)Unit">require</span>(<span title="=&gt; Boolean">!</span><a href="#83887" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#84499" title="sbt.Path">wz</a>),
				<span title="java.lang.String(&quot;Webstart output zip location (&quot;)" class="string">&quot;Webstart output zip location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84499" title="sbt.Path">wz</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; cannot be in webstart output directory (&quot;)" class="string">&quot; cannot be in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83811" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
	}
}
<span class="comment">/** The default extension point for a webstart project.  There is one method that is required to be defined: jnlpXML.
* 'webstartSignConfiguration', 'webstartPack200', and 'webstartGzip' are methods of interest. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DefaultWebstartProject extends sbt.BasicWebstartProject with sbt.MavenStyleWebstartPaths with ScalaObject" id="11318">DefaultWebstartProject</a>(<span class="keyword">val</span> <a title="sbt.ProjectInfo" id="84521">info</a>: <a href="ProjectInfo.scala.html#8384" title="sbt.ProjectInfo">ProjectInfo</a>) <span class="keyword">extends</span> <a href="#13145" title="sbt.BasicWebstartProject">BasicWebstartProject</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#9833" title="sbt.MavenStyleWebstartPaths">MavenStyleWebstartPaths</a>
<span class="comment">/** Defines default implementations of all methods in WebstartOptions except for jnlpXML.  packageAction is overridden
* to create a webstart distribution after the normal package operation. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BasicWebstartProject extends sbt.BasicScalaProject with sbt.WebstartScalaProject with sbt.WebstartOptions with sbt.WebstartPaths with ScalaObject" id="13145">BasicWebstartProject</a> <span class="keyword">extends</span> <a href="DefaultProject.scala.html#12437" title="sbt.BasicScalaProject">BasicScalaProject</a> <span class="keyword">with</span> <a href="#10217" title="sbt.WebstartScalaProject">WebstartScalaProject</a> <span class="keyword">with</span> <a href="#8075" title="sbt.WebstartOptions">WebstartOptions</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#9515" title="sbt.WebstartPaths">WebstartPaths</a>
{
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="84508">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration] = <span title="object None">None</span>

	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="84509">webstartExtraLibraries</a> = <a href="DefaultProject.scala.html#54112" title="=&gt; sbt.LibraryDependencies">mainDependencies</a>.<a href="DefaultProject.scala.html#60974" title="=&gt; sbt.PathFinder">scalaJars</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="84510">webstartLibraries</a> = <a href="DefaultProject.scala.html#54106" title="=&gt; sbt.PathFinder">publicClasspath</a> <a href="Path.scala.html#52316" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="DefaultProject.scala.html#54221" title="=&gt; sbt.PathFinder">jarsOfProjectDependencies</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="84511">webstartResources</a> = <a href="Project.scala.html#53940" title="(sbt.PathFinder,sbt.FileFilter)sbt.PathFinder">descendents</a>(<a href="ProjectPaths.scala.html#76190" title="=&gt; sbt.Path">jnlpResourcesPath</a> <a href="Path.scala.html#52341" title="=&gt; sbt.Path">##</a>, <a href="NameFilter.scala.html#10575" title="object sbt.AllPassFilter">AllPassFilter</a>)

	<span class="keyword">def</span> <a title="=&gt; Boolean" id="84512">webstartPack200</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="84513">webstartGzip</a> = <span title="Boolean(true)" class="keyword">true</span>

	<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; BasicWebstartProject.this.Task" id="84514">packageAction</a> = <span class="keyword">super</span>.<a href="DefaultProject.scala.html#54149" title="=&gt; BasicWebstartProject.this.Task">packageAction</a> <a href="TaskManager.scala.html#55216" title="(BasicWebstartProject.this.Task)BasicWebstartProject.this.Task">&amp;&amp;</a> <a href="#83866" title="(sbt.WebstartOptions)BasicWebstartProject.this.Task">webstartTask</a>(<a href="#13145" title="sbt.BasicWebstartProject" class="keyword">this</a>)
}
        </pre>
    </body>
</html>