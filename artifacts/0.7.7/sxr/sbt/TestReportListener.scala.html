<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/TestReportListener.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009  Steven Blundy, Mark Harrah
 */</span>

<span class="keyword">package</span> sbt

	<span class="keyword">import</span> org.scalatools.testing.{Logger =&gt; TLogger, Event =&gt; TEvent, Result =&gt; TResult}

<span class="keyword">trait</span> <a title="trait TestReportListener extends java.lang.Object with ScalaObject" id="8363">TestReportListener</a>
{
	<span class="comment">/** called for each class or equivalent grouping */</span>
  <span class="keyword">def</span> <a title="(String)Unit" id="60861">startGroup</a>(<a title="String" id="78593">name</a>: <span title="String">String</span>)
	<span class="comment">/** called for each test method or equivalent */</span>
  <span class="keyword">def</span> <a title="(sbt.TestEvent)Unit" id="60862">testEvent</a>(<a title="sbt.TestEvent" id="78589">event</a>: <a href="#11021" title="sbt.TestEvent">TestEvent</a>)
	<span class="comment">/** called if there was an error during test */</span>
  <span class="keyword">def</span> <a title="(String,Throwable)Unit" id="60863">endGroup</a>(<a title="String" id="78602">name</a>: <span title="String">String</span>, <a title="Throwable" id="78603">t</a>: <span title="Throwable">Throwable</span>)
	<span class="comment">/** called if test completed */</span>
  <span class="keyword">def</span> <a title="(String,sbt.Result.Value)Unit" id="60864">endGroup</a>(<a title="String" id="78600">name</a>: <span title="String">String</span>, <a title="sbt.Result.Value" id="78601">result</a>: Result.<span title="sbt.Result.Value">Value</span>)
  <span class="comment">/** Used by the test framework for logging test results*/</span>
  <span class="keyword">def</span> <a title="=&gt; Option[org.scalatools.testing.Logger]" id="60865">contentLogger</a>: <span title="Option[org.scalatools.testing.Logger]">Option</span>[TLogger] = <a title="object None" id="505">None</a>
}

<span class="keyword">trait</span> <a title="trait TestsListener extends java.lang.Object with sbt.TestReportListener" id="10820">TestsListener</a> <span class="keyword">extends</span> <a href="#8363" title="sbt.TestReportListener">TestReportListener</a>
{
	<span class="comment">/** called once, at beginning. */</span>
  <span class="keyword">def</span> <a title="=&gt; Unit" id="60866">doInit</a>
	<span class="comment">/** called once, at end. */</span>
  <span class="keyword">def</span> <a title="(sbt.Result.Value)Unit" id="60867">doComplete</a>(<a title="sbt.Result.Value" id="78804">finalResult</a>: Result.<span title="sbt.Result.Value">Value</span>)
}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class TestEvent extends java.lang.Object with NotNull with ScalaObject" id="11021">TestEvent</a> <span class="keyword">extends</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.Result.Value]" id="78584">result</a>: <span title="Option[sbt.Result.Value]">Option</span>[Result.Value]
	<span class="keyword">def</span> <a title="=&gt; Seq[org.scalatools.testing.Event]" id="78585">detail</a>: <span title="Seq[org.scalatools.testing.Event]">Seq</span>[TEvent] = <a title="object Nil" id="310">Nil</a>
}
<span class="keyword">object</span> <a title="object sbt.TestEvent" id="11022">TestEvent</a>
{
	<span class="keyword">def</span> <a title="(Seq[org.scalatools.testing.Event])sbt.TestEvent" id="78581">apply</a>(<a title="Seq[org.scalatools.testing.Event]" id="78582">events</a>: <span title="Seq[org.scalatools.testing.Event]">Seq</span>[TEvent]): <a href="#11021" title="sbt.TestEvent">TestEvent</a> =
	{
		<span class="keyword">val</span> <a title="sbt.Result.Value" id="78943">overallResult</a> = (<a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78439" title="=&gt; sbt.Result.Value">Passed</a> <a href="#78944" title="(sbt.Result.Value)((sbt.Result.Value, org.scalatools.testing.Event) =&gt; sbt.Result.Value)sbt.Result.Value" id="16159">/:</a> <a href="#78582" title="Seq[org.scalatools.testing.Event]">events</a>) { (<a title="sbt.Result.Value" id="78947">sum</a>, <a title="org.scalatools.testing.Event" id="78948">event</a>) =&gt;
			<span class="keyword">val</span> <a title="org.scalatools.testing.Result" id="78949">result</a> = <a href="#78948" title="org.scalatools.testing.Event">event</a>.<span title="()org.scalatools.testing.Result">result</span>
			<span title="sbt.Result.Value" class="keyword">if</span>(<a href="#78947" title="sbt.Result.Value">sum</a> <span title="(AnyRef)Boolean">==</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78437" title="=&gt; sbt.Result.Value">Error</a> <span title="(Boolean)Boolean">||</span> <a href="#78949" title="org.scalatools.testing.Result">result</a> <span title="(AnyRef)Boolean">==</span> TResult.<span title="org.scalatools.testing.Result(value Error)">Error</span>) <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78437" title="=&gt; sbt.Result.Value">Error</a>
			<span class="keyword">else</span> <span title="sbt.Result.Value" class="keyword">if</span>(<a href="#78947" title="sbt.Result.Value">sum</a> <span title="(AnyRef)Boolean">==</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78441" title="=&gt; sbt.Result.Value">Failed</a> <span title="(Boolean)Boolean">||</span> <a href="#78949" title="org.scalatools.testing.Result">result</a> <span title="(AnyRef)Boolean">==</span> TResult.<span title="org.scalatools.testing.Result(value Failure)">Failure</span>) <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78441" title="=&gt; sbt.Result.Value">Failed</a>
			<span class="keyword">else</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78439" title="=&gt; sbt.Result.Value">Passed</a>
		}
		<a title="template $anon extends sbt.TestEvent" id="78979" class="keyword">new</a> <a href="#11021" title="sbt.TestEvent">TestEvent</a> {
			<span class="keyword">val</span> <a title="Some[sbt.Result.Value]" id="78981">result</a> = <span title="(sbt.Result.Value)Some[sbt.Result.Value]">Some</span>(<a href="#78943" title="sbt.Result.Value">overallResult</a>)
			<span class="keyword">override</span> <span class="keyword">val</span> <a title="Seq[org.scalatools.testing.Event]" id="78983">detail</a> = <a href="#78582" title="Seq[org.scalatools.testing.Event]">events</a>
		}
	}
}

<span class="keyword">object</span> <a title="object sbt.TestLogger" id="12513">TestLogger</a>
{
	<span class="keyword">def</span> <a title="(sbt.Logger)sbt.TestLogger" id="61034">apply</a>(<a title="sbt.Logger" id="61036">logger</a>: sbt.<a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <a href="#12512" title="sbt.TestLogger">TestLogger</a> = <span title="sbt.TestLogger" class="keyword">new</span> <a href="#12512" title="sbt.TestLogger">TestLogger</a>(<a href="#61035" title="(sbt.Logger)org.scalatools.testing.Logger">wrap</a>(<a href="#61036" title="sbt.Logger">logger</a>))
	<span class="keyword">def</span> <a title="(sbt.Logger)org.scalatools.testing.Logger" id="61035">wrap</a>(<a title="sbt.Logger" id="78989">logger</a>: sbt.<a href="Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <span title="org.scalatools.testing.Logger">TLogger</span> =
		<a title="template $anon extends java.lang.Object with org.scalatools.testing.Logger" id="78990" class="keyword">new</a> <span title="org.scalatools.testing.Logger">TLogger</span>
		{
			<span class="keyword">def</span> <a title="(String)Unit" id="78992">error</a>(<a title="String" id="79001">s</a>: <span title="String">String</span>) = <a href="#78997" title="(sbt.Level.Value,String)Unit">log</a>(<a href="Logger.scala.html#9888" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#56509" title="=&gt; sbt.Level.Value">Error</a>, <a href="#79001" title="String">s</a>)
			<span class="keyword">def</span> <a title="(String)Unit" id="78993">warn</a>(<a title="String" id="79013">s</a>: <span title="String">String</span>) = <a href="#78997" title="(sbt.Level.Value,String)Unit">log</a>(<a href="Logger.scala.html#9888" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#56507" title="=&gt; sbt.Level.Value">Warn</a>, <a href="#79013" title="String">s</a>)
			<span class="keyword">def</span> <a title="(String)Unit" id="78994">info</a>(<a title="String" id="79015">s</a>: <span title="String">String</span>) = <a href="#78997" title="(sbt.Level.Value,String)Unit">log</a>(<a href="Logger.scala.html#9888" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#56505" title="=&gt; sbt.Level.Value">Info</a>, <a href="#79015" title="String">s</a>)
			<span class="keyword">def</span> <a title="(String)Unit" id="78995">debug</a>(<a title="String" id="79017">s</a>: <span title="String">String</span>) = <a href="#78997" title="(sbt.Level.Value,String)Unit">log</a>(<a href="Logger.scala.html#9888" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#56503" title="=&gt; sbt.Level.Value">Debug</a>, <a href="#79017" title="String">s</a>)
			<span class="keyword">def</span> <a title="(Throwable)Unit" id="78996">trace</a>(<a title="Throwable" id="79019">t</a>: <span title="Throwable">Throwable</span>) = <a href="#78989" title="sbt.Logger">logger</a>.<a href="Logger.scala.html#52372" title="(=&gt; Throwable)Unit">trace</a>(<a href="#79019" title="Throwable">t</a>)
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Level.Value,String)Unit" id="78997">log</a>(<a title="sbt.Level.Value" id="79003">level</a>: Level.<span title="sbt.Level.Value">Value</span>, <a title="String" id="79004">s</a>: <span title="String">String</span>) = <a href="#78989" title="sbt.Logger">logger</a>.<a href="Logger.scala.html#52379" title="(sbt.Level.Value,=&gt; String)Unit">log</a>(<a href="#79003" title="sbt.Level.Value">level</a>, <a href="#79004" title="String">s</a>)
			<span class="keyword">def</span> <a title="()Boolean" id="78998">ansiCodesSupported</a>() = <a href="#78989" title="sbt.Logger">logger</a>.<a href="Logger.scala.html#52370" title="=&gt; Boolean">ansiCodesSupported</a>
		}
}
<span class="keyword">class</span> <a title="class TestLogger extends java.lang.Object with sbt.TestsListener with ScalaObject" id="12512">TestLogger</a>(<span class="keyword">val</span> <a title="org.scalatools.testing.Logger" id="78988">log</a>: <span title="org.scalatools.testing.Logger">TLogger</span>) <span class="keyword">extends</span> <a href="#10820" title="sbt.TestsListener">TestsListener</a>
{
	<span class="keyword">protected</span> <span class="keyword">var</span> <a title="Int" id="79025">skipped</a>, <a title="Int" id="79026">errors</a>, <a title="Int" id="79027">passed</a>, <a title="Int" id="79028">failures</a> = <span title="Int(0)" class="int">0</span>
	
	<span class="keyword">def</span> <a title="(String)Unit" id="61053">startGroup</a>(<a title="String" id="79029">name</a>: <span title="String">String</span>) <span title="Unit">{</span>}
	<span class="keyword">def</span> <a title="(sbt.TestEvent)Unit" id="61054">testEvent</a>(<a title="sbt.TestEvent" id="79030">event</a>: <a href="#11021" title="sbt.TestEvent">TestEvent</a>): <span title="Unit">Unit</span> = <a href="#79030" title="sbt.TestEvent">event</a>.<a href="#78585" title="=&gt; Seq[org.scalatools.testing.Event]">detail</a>.<a title="((org.scalatools.testing.Event) =&gt; Unit)Unit" id="16148">foreach</a>(<a href="#61057" title="(org.scalatools.testing.Event)Unit">count</a>)
	<span class="keyword">def</span> <a title="(String,Throwable)Unit" id="61055">endGroup</a>(<a title="String" id="79034">name</a>: <span title="String">String</span>, <a title="Throwable" id="79035">t</a>: <span title="Throwable">Throwable</span>)
	{
		<a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>.<a title="(java.lang.Throwable)Unit" id="78522">trace</a>(<a href="#79035" title="Throwable">t</a>)
		<a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>.<span title="(java.lang.String)Unit">error</span>(<span title="java.lang.String(&quot;Could not run test &quot;)" class="string">&quot;Could not run test &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79034" title="String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79035" title="Throwable">t</a>.<a title="()java.lang.String" id="18029">toString</a>)
	}
	<span class="keyword">def</span> <a title="(String,sbt.Result.Value)Unit" id="61056">endGroup</a>(<a title="String" id="79036">name</a>: <span title="String">String</span>, <a title="sbt.Result.Value" id="79037">result</a>: Result.<span title="sbt.Result.Value">Value</span>) <span title="Unit">{</span>}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(org.scalatools.testing.Event)Unit" id="61057">count</a>(<a title="org.scalatools.testing.Event" id="79031">event</a>: <a title="org.scalatools.testing.Event" id="53064">TEvent</a>): <span title="Unit">Unit</span> =
	{
		<a href="#79031" title="org.scalatools.testing.Event">event</a>.<span title="()org.scalatools.testing.Result">result</span> <span title="Unit" class="keyword">match</span>
		{
			<span title="Unit" class="keyword">case</span> TResult.<span title="org.scalatools.testing.Result(value Error)">Error</span> =&gt; <a href="#79026" title="(Int)Unit">errors</a> <span title="(Int)Int">+=</span><span title="Int(1)" class="int">1</span>
			<span title="Unit" class="keyword">case</span> TResult.<span title="org.scalatools.testing.Result(value Success)">Success</span> =&gt; <a href="#79027" title="(Int)Unit">passed</a> <span title="(Int)Int">+=</span><span title="Int(1)" class="int">1</span> 
			<span title="Unit" class="keyword">case</span> TResult.<span title="org.scalatools.testing.Result(value Failure)">Failure</span> =&gt; <a href="#79028" title="(Int)Unit">failures</a> <span title="(Int)Int">+=</span><span title="Int(1)" class="int">1</span> 
			<span title="Unit" class="keyword">case</span> TResult.<span title="org.scalatools.testing.Result(value Skipped)">Skipped</span> =&gt; <a href="#79025" title="(Int)Unit">skipped</a> <span title="(Int)Int">+=</span> <span title="Int(1)" class="int">1</span>
		}
	}
	<span class="keyword">def</span> <a title="=&gt; Unit" id="61058">doInit</a>
	{
		<a href="#79028" title="(Int)Unit">failures</a> = <span title="Int(0)" class="int">0</span>
		<a href="#79026" title="(Int)Unit">errors</a> = <span title="Int(0)" class="int">0</span>
		<a href="#79027" title="(Int)Unit">passed</a> = <span title="Int(0)" class="int">0</span>
		<a href="#79025" title="(Int)Unit">skipped</a> = <span title="Int(0)" class="int">0</span>
	}
		<span class="comment">/** called once, at end. */</span>
	<span class="keyword">def</span> <a title="(sbt.Result.Value)Unit" id="61059">doComplete</a>(<a title="sbt.Result.Value" id="79127">finalResult</a>: Result.<span title="sbt.Result.Value">Value</span>): <span title="Unit">Unit</span> =
	{
		<span class="keyword">val</span> <a title="Int" id="79128">totalCount</a> = <a href="#79028" title="=&gt; Int">failures</a> <span title="(Int)Int">+</span> <a href="#79026" title="=&gt; Int">errors</a> <span title="(Int)Int">+</span> <a href="#79025" title="=&gt; Int">skipped</a> <span title="(Int)Int">+</span> <a href="#79027" title="=&gt; Int">passed</a>
		<span class="keyword">val</span> <a title="java.lang.String" id="79129">postfix</a> = <span title="java.lang.String(&quot;: Total &quot;)" class="string">&quot;: Total &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79128" title="Int">totalCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, Failed &quot;)" class="string">&quot;, Failed &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79028" title="=&gt; Int">failures</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, Errors &quot;)" class="string">&quot;, Errors &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79026" title="=&gt; Int">errors</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, Passed &quot;)" class="string">&quot;, Passed &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79027" title="=&gt; Int">passed</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, Skipped &quot;)" class="string">&quot;, Skipped &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79025" title="=&gt; Int">skipped</a>
		<a href="#79127" title="sbt.Result.Value">finalResult</a> <span title="Unit" class="keyword">match</span>
		{
			<span title="Unit" class="keyword">case</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78437" title="=&gt; sbt.Result.Value">Error</a> =&gt; <a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>.<span title="(java.lang.String)Unit">error</span>(<span title="java.lang.String(&quot;Error&quot;)" class="string">&quot;Error&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79129" title="java.lang.String">postfix</a>)
			<span title="Unit" class="keyword">case</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78439" title="=&gt; sbt.Result.Value">Passed</a> =&gt; <a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>.<a title="(java.lang.String)Unit" id="78520">info</a>(<span title="java.lang.String(&quot;Passed: &quot;)" class="string">&quot;Passed: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79129" title="java.lang.String">postfix</a>)
			<span title="Unit" class="keyword">case</span> <a href="TestFramework.scala.html#13338" title="object sbt.Result">Result</a>.<a href="TestFramework.scala.html#78441" title="=&gt; sbt.Result.Value">Failed</a> =&gt; <a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>.<span title="(java.lang.String)Unit">error</span>(<span title="java.lang.String(&quot;Failed: &quot;)" class="string">&quot;Failed: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#79129" title="java.lang.String">postfix</a>)
		}
	}
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Option[org.scalatools.testing.Logger]" id="61060">contentLogger</a>: <span title="Option[org.scalatools.testing.Logger]">Option</span>[TLogger] = <span title="(org.scalatools.testing.Logger)Some[org.scalatools.testing.Logger]">Some</span>(<a href="#78988" title="=&gt; org.scalatools.testing.Logger">log</a>)
}

        </pre>
    </body>
</html>