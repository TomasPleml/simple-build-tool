<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/complete/History.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt.complete

<span class="keyword">import</span> History.number

<span class="keyword">final</span> <span class="keyword">class</span> <a title="class History extends java.lang.Object with NotNull with ScalaObject" id="14433">History</a> <span class="keyword">private</span>(<a title="Array[String]" id="85628">lines</a>: <a title="Array[String]" id="1032">Array</a>[String], <a title="sbt.Logger" id="85629">log</a>: <a href="../Logger.scala.html#13532" title="sbt.Logger">Logger</a>) <span class="keyword">extends</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Array.Projection[String]" id="85612">reversed</a> = <a href="#85628" title="Array[String]">lines</a>.<a title="=&gt; Array.Projection[String]" id="15860">reverse</a>

	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="85613">all</a>: <span title="Seq[String]">Seq</span>[String] = <a href="#85628" title="Array[String]">lines</a>.<span title="Array[String]">toArray</span>
	<span class="keyword">def</span> <a title="=&gt; Int" id="85614">size</a> = <a href="#85628" title="Array[String]">lines</a>.<a title="=&gt; Int" id="15873">length</a>
	<span class="keyword">def</span> <a title="=&gt; Option[String]" id="85615">!!</a> : <span title="Option[String]">Option</span>[String] = <a href="#85619" title="(Int)Option[String]">!-</a> (<span title="Int(1)" class="int">1</span>)
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="85616">apply</a>(<a title="Int" id="85641">i</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <span title="Option[String]" class="keyword">if</span>(<span title="Int(0)" class="int">0</span> <a title="(Int)Boolean" id="3083">&lt;=</a> <a href="#85641" title="Int">i</a> <a title="(Boolean)Boolean" id="2690">&amp;&amp;</a> <a href="#85641" title="Int">i</a> <span title="(Int)Boolean">&lt;</span> <a href="#85614" title="=&gt; Int">size</a>) <span title="(String)Some[String]">Some</span>( <a href="#85628" title="(Int)String" id="15874">lines</a>(<a href="#85641" title="Int">i</a>) ) <span class="keyword">else</span> { <a href="#85629" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#52377" title="(=&gt; String)Unit">error</a>(<span title="java.lang.String(&quot;Invalid history index: &quot;)" class="string">&quot;Invalid history index: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#85641" title="Int">i</a>); <span title="object None">None</span> }
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="85617">!</a>(<a title="Int" id="85649">i</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <a href="#85616" title="(Int)Option[String]">apply</a>(<a href="#85649" title="Int">i</a>)

	<span class="keyword">def</span> <a title="(String)Option[String]" id="85618">!</a>(<a title="String" id="85650">s</a>: <span title="String">String</span>): <span title="Option[String]">Option</span>[String] =
		<a href="#85606" title="(String)Option[Int]">number</a>(<a href="#85650" title="String">s</a>) <span title="Option[String]" class="keyword">match</span>
		{
			<span title="Option[String]" class="keyword">case</span> Some(<a title="Int" id="85652">n</a>) =&gt; <span title="Option[String]" class="keyword">if</span>(<a href="#85652" title="Int">n</a> <span title="(Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span>) <a href="#85619" title="(Int)Option[String]">!-</a> (-<a href="#85652" title="=&gt; Int" id="3036">n</a>) <span class="keyword">else</span> <a href="#85616" title="(Int)Option[String]">apply</a>(<a href="#85652" title="Int">n</a>)
			<span title="Option[String]" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#85621" title="(String)(=&gt; Option[String])Option[String]">nonEmpty</a>(<a href="#85650" title="String">s</a>) { <a href="#85612" title="=&gt; Array.Projection[String]">reversed</a>.<span title="((String) =&gt; Boolean)Option[String]">find</span>(<a href="#85658" title="String">_</a>.<a title="(java.lang.String)Boolean" id="6370">startsWith</a>(<a href="#85650" title="String">s</a>)) }
		}
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="85619">!-</a> (<a title="Int" id="85640">n</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <a href="#85616" title="(Int)Option[String]">apply</a>(<a href="#85614" title="=&gt; Int">size</a> <span title="(Int)Int">-</span> <a href="#85640" title="Int">n</a> <span title="(Int)Int">-</span> <span title="Int(1)" class="int">1</span>)

	<span class="keyword">def</span> <a title="(String)Option[String]" id="85620">!?</a>(<a title="String" id="85676">s</a>: <span title="String">String</span>): <span title="Option[String]">Option</span>[String] = <a href="#85621" title="(String)(=&gt; Option[String])Option[String]">nonEmpty</a>(<a href="#85676" title="String">s</a>) { <a href="#85612" title="=&gt; Array.Projection[String]">reversed</a>.<a title="(Int)Array.Projection[String]" id="15849">drop</a>(<span title="Int(1)" class="int">1</span>).<span title="((String) =&gt; Boolean)Option[String]">find</span>(<a href="#85680" title="String">_</a>.<a title="(java.lang.CharSequence)Boolean" id="6389">contains</a>(<a href="#85676" title="String">s</a>)) }

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](String)(=&gt; Option[T])Option[T]" id="85621">nonEmpty</a>[<a title="&gt;: Nothing &lt;: Any" id="85623">T</a>](<a title="String" id="85654">s</a>: <span title="String">String</span>)(<a title="=&gt; Option[T]" id="85655">act</a>: =&gt; Option[T]): <span title="Option[T]">Option</span>[T] =
		<span title="Option[T]" class="keyword">if</span>(<a href="#85654" title="String">s</a>.<a title="()Boolean" id="6349">isEmpty</a>)
		{
			<a href="#85629" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#52377" title="(=&gt; String)Unit">error</a>(<span title="java.lang.String(&quot;No action specified to history command&quot;)" class="string">&quot;No action specified to history command&quot;</span>)
			<span title="object None">None</span>
		}
		<span class="keyword">else</span>
			<a href="#85655" title="=&gt; Option[T]">act</a>

	<span class="keyword">def</span> <a title="(Int,Int)Seq[String]" id="85624">list</a>(<a title="Int" id="85682">historySize</a>: <span title="Int">Int</span>, <a title="Int" id="85683">show</a>: <span title="Int">Int</span>): <span title="Seq[String]">Seq</span>[String] =
		<a href="#85628" title="Array[String]">lines</a>.<a title="=&gt; List[String]" id="16171">toList</a>.<a title="(Int)List[String]" id="15718">drop</a>((<a href="#85628" title="Array[String]">lines</a>.<a title="=&gt; Int" id="15999">size</a> <span title="implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt">-</span> <a href="#85682" title="Int">historySize</a>) <span title="(Int)Int">max</span> <span title="Int(0)" class="int">0</span>).<a title="=&gt; List[(String, Int)]" id="15753">zipWithIndex</a>.<a title="(((String, Int)) =&gt; java.lang.String)List[java.lang.String]" id="15727">map</a> <a href="#85693" title="java.lang.String">{</a> <span title="java.lang.String" class="keyword">case</span> (<a title="String" id="85694">line</a>, <a title="Int" id="85695">number</a>) =&gt; <span title="java.lang.String(&quot;   &quot;)" class="string">&quot;   &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#85695" title="Int">number</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#85694" title="String">line</a> }.<a title="(Int)List[java.lang.String]" id="15719">takeRight</a>(<a href="#85683" title="implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt">show</a> <span title="(Int)Int">max</span> <span title="Int(1)" class="int">1</span>)
}

<span class="keyword">object</span> <a title="object sbt.complete.History" id="14434">History</a>
{
	<span class="keyword">def</span> <a title="(Seq[String],sbt.Logger)sbt.complete.History" id="85605">apply</a>(<a title="Seq[String]" id="85701">lines</a>: <span title="Seq[String]">Seq</span>[String], <a title="sbt.Logger" id="85702">log</a>: <a href="../Logger.scala.html#13532" title="sbt.Logger">Logger</a>): <a href="#14433" title="sbt.complete.History">History</a> = <span title="sbt.complete.History" class="keyword">new</span> <a href="#14433" title="sbt.complete.History">History</a>(<a href="#85701" title="Seq[String]">lines</a>.<span title="Array[String]">toArray</span>, <a href="#85702" title="sbt.Logger">log</a>)

	<span class="keyword">def</span> <a title="(String)Option[Int]" id="85606">number</a>(<a title="String" id="85651">s</a>: <span title="String">String</span>): <span title="Option[Int]">Option</span>[Int] =
		<span class="keyword">try</span> { <span title="(Int)Some[Int]">Some</span>(<a href="#85651" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="6611">s</a>.<a title="=&gt; Int" id="17523">toInt</a>) }
		<span class="keyword">catch</span> { <span title="None.type" class="keyword">case</span> <a title="NumberFormatException" id="85712">e</a>: <a title="NumberFormatException" id="2040">NumberFormatException</a> =&gt; <span title="object None">None</span> }
}
        </pre>
    </body>
</html>