<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>CompilerArguments.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> xsbt

	<span class="keyword">import</span> java.io.File
	<span class="keyword">import</span> CompilerArguments.{abs, absString}

<span class="comment">/** Forms the list of options that is passed to the compiler from the required inputs and other options.
* The directory containing scala-library.jar and scala-compiler.jar (scalaLibDirectory) is required in
* order to add these jars to the boot classpath. The 'scala.home' property must be unset because Scala
* puts jars in that directory on the bootclasspath.  Because we use multiple Scala versions,
* this would lead to compiling against the wrong library jar.*/</span>
<span class="keyword">class</span> <a title="class CompilerArguments extends java.lang.Object with NotNull with ScalaObject" id="7366">CompilerArguments</a>(<a title="xsbt.ScalaInstance" id="16837">scalaInstance</a>: <a href="ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>, <a title="xsbt.ClasspathOptions" id="16838">cp</a>: <a href="#7348" title="xsbt.ClasspathOptions">ClasspathOptions</a>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(Set[java.io.File],Set[java.io.File],java.io.File,Seq[String])Seq[String]" id="16831">apply</a>(<a title="Set[java.io.File]" id="16839">sources</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="Set[java.io.File]" id="16840">classpath</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="java.io.File" id="16841">outputDirectory</a>: <a title="java.io.File" id="3633">File</a>, <a title="Seq[String]" id="16842">options</a>: <span title="Seq[String]">Seq</span>[String]): <span title="Seq[String]">Seq</span>[String] =
	{
		<a href="#16835" title="()Unit">checkScalaHomeUnset</a>()
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="19556">bootClasspathOption</a> = <span title="Seq[java.lang.String]" class="keyword">if</span>(<a href="#16838" title="xsbt.ClasspathOptions">cp</a>.<a href="#16017" title="=&gt; Boolean">autoBoot</a>) <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-bootclasspath&quot;)" class="string">&quot;-bootclasspath&quot;</span>, <a href="#16836" title="=&gt; java.lang.String">createBootClasspath</a>) <span class="keyword">else</span> <span title="object Nil">Nil</span>
		<span class="keyword">val</span> <a title="Set[java.io.File]" id="19557">cpWithCompiler</a> = <a href="#16832" title="(Set[java.io.File])Set[java.io.File]">finishClasspath</a>(<a href="#16840" title="Set[java.io.File]">classpath</a>)
		<span class="keyword">val</span> <a title="Seq[String]" id="19558">classpathOption</a> = <span title="(String*)Seq[String]">Seq</span>(<span title="java.lang.String(&quot;-cp&quot;)" class="string">&quot;-cp&quot;</span>, <a href="#15465" title="(Set[java.io.File])String">absString</a>(<a href="#19557" title="Set[java.io.File]">cpWithCompiler</a>) )
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="19559">outputOption</a> = <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>, <a href="#16841" title="java.io.File">outputDirectory</a>.<span title="()java.lang.String">getAbsolutePath</span>)
		<a href="#16842" title="Seq[String]">options</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19559" title="Seq[java.lang.String]">outputOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19556" title="Seq[java.lang.String]">bootClasspathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#19558" title="Seq[String]">classpathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#16834" title="(Set[java.io.File])List[java.lang.String]">abs</a>(<a href="#16839" title="Set[java.io.File]">sources</a>)
	}
	<span class="keyword">def</span> <a title="(Set[java.io.File])Set[java.io.File]" id="16832">finishClasspath</a>(<a title="Set[java.io.File]" id="17961">classpath</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Set[java.io.File]">Set</span>[File] =
		<a href="#17961" title="Set[java.io.File]">classpath</a> <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#16833" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#16838" title="xsbt.ClasspathOptions">cp</a>.<a href="#16018" title="=&gt; Boolean">compiler</a>, <a href="#16837" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15016" title="=&gt; java.io.File">compilerJar</a>) <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#16833" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#16838" title="xsbt.ClasspathOptions">cp</a>.<a href="#16019" title="=&gt; Boolean">extra</a>, <a href="#16837" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15018" title="=&gt; Seq[java.io.File]">extraJars</a> : _*)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean,java.io.File*)Seq[java.io.File]" id="16833">include</a>(<a title="Boolean" id="19718">flag</a>: <span title="Boolean">Boolean</span>, <a title="java.io.File*" id="19719">jars</a>: <a title="java.io.File*" id="2684">File</a>*) = <span title="Seq[java.io.File]" class="keyword">if</span>(<a href="#19718" title="Boolean">flag</a>) <a href="#19719" title="java.io.File*">jars</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Set[java.io.File])List[java.lang.String]" id="16834">abs</a>(<a title="Set[java.io.File]" id="19592">files</a>: <span title="Set[java.io.File]">Set</span>[File]) = <a href="#19592" title="Set[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)scala.collection.immutable.Set[java.lang.String]" id="16738">map</a>(<a href="#19596" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>).<a title="=&gt; List[java.lang.String]" id="15975">toList</a>.<a title="((java.lang.String, java.lang.String) =&gt; Boolean)List[java.lang.String]" id="15539">sort</a>(<a href="#19605" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="6615">_</a> <a title="(String)Boolean" id="17351">&lt;</a> <a href="#19606" title="java.lang.String">_</a>)
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="16835">checkScalaHomeUnset</a>()
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="19795">scalaHome</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String)java.lang.String" id="18121">getProperty</a>(<span title="java.lang.String(&quot;scala.home&quot;)" class="string">&quot;scala.home&quot;</span>)
		<a title="(Boolean,Any)Unit" id="6480">assert</a>((<a href="#19795" title="java.lang.String">scalaHome</a> <a title="(AnyRef)Boolean" id="6017">eq</a> <span title="Null(null)" class="keyword">null</span>) <a title="(Boolean)Boolean" id="2693">||</a> <a href="#19795" title="java.lang.String">scalaHome</a>.<span title="()Boolean">isEmpty</span>, <span title="java.lang.String(&quot;'scala.home' should not be set (was &quot;)" class="string">&quot;'scala.home' should not be set (was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#19795" title="java.lang.String">scalaHome</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
	}
	<span class="comment">/** Add the correct Scala library jar to the boot classpath.*/</span>
	<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="16836">createBootClasspath</a> =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="17978">originalBoot</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String,java.lang.String)java.lang.String" id="18122">getProperty</a>(<span title="java.lang.String(&quot;sun.boot.class.path&quot;)" class="string">&quot;sun.boot.class.path&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
		<span class="keyword">val</span> <a title="java.lang.String" id="17979">newBootPrefix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#17978" title="java.lang.String">originalBoot</a>.<span title="()Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#17978" title="java.lang.String">originalBoot</a> <span title="(Any)java.lang.String">+</span> <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>
		<a href="#17979" title="java.lang.String">newBootPrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#16837" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#15014" title="=&gt; java.io.File">libraryJar</a>.<span title="()java.lang.String">getAbsolutePath</span>
	}
}
<span class="keyword">class</span> <a title="class ClasspathOptions extends java.lang.Object with NotNull with ScalaObject" id="7348">ClasspathOptions</a>(<span class="keyword">val</span> <a title="Boolean" id="16017">autoBoot</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="16018">compiler</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="16019">extra</a>: <span title="Boolean">Boolean</span>)  <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="keyword">object</span> <a title="object xsbt.ClasspathOptions" id="7349">ClasspathOptions</a>
{
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="16013">manual</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#7348" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="16014">auto</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#7348" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>)
}
<span class="keyword">object</span> <a title="object xsbt.CompilerArguments" id="7367">CompilerArguments</a>
{
	<span class="keyword">def</span> <a title="(Seq[java.io.File])Seq[String]" id="15462">abs</a>(<a title="Seq[java.io.File]" id="19812">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#19812" title="Seq[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)Seq[java.lang.String]" id="15820">map</a>(<a href="#19815" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])Seq[String]" id="15463">abs</a>(<a title="Set[java.io.File]" id="19816">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#15462" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#19816" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
	<span class="keyword">def</span> <a title="(Seq[java.io.File])String" id="15464">absString</a>(<a title="Seq[java.io.File]" id="17960">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="String">String</span> = <a href="#15462" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#17960" title="Seq[java.io.File]">files</a>).<a title="(String)String" id="15979">mkString</a>(<span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])String" id="15465">absString</a>(<a title="Set[java.io.File]" id="17959">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="String">String</span> = <a href="#15464" title="(Seq[java.io.File])String">absString</a>(<a href="#17959" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
}
        </pre>
    </body>
</html>