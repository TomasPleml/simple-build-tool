<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IvyCache.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL

<span class="keyword">import</span> org.apache.ivy.{core, plugins, util}
<span class="keyword">import</span> core.cache.{ArtifactOrigin, CacheDownloadOptions, DefaultRepositoryCacheManager}
<span class="keyword">import</span> core.module.descriptor.{Artifact =&gt; IvyArtifact, DefaultArtifact}
<span class="keyword">import</span> plugins.repository.file.{FileRepository=&gt;IvyFileRepository, FileResource}
<span class="keyword">import</span> plugins.repository.{ArtifactResourceResolver, Resource, ResourceDownloader}
<span class="keyword">import</span> plugins.resolver.util.ResolvedResource
<span class="keyword">import</span> util.FileUtil

<span class="keyword">class</span> <a title="class NotInCache extends java.lang.RuntimeException with ScalaObject" id="7629">NotInCache</a>(<span class="keyword">val</span> <a title="sbt.ModuleID" id="84794">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="84795">cause</a>: <span title="Throwable">Throwable</span>)
	<span class="keyword">extends</span> <a title="java.lang.RuntimeException" id="19701">RuntimeException</a>(<a href="#84810" title="(sbt.ModuleID,Throwable)java.lang.String">NotInCache</a>(<a href="#84794" title="sbt.ModuleID">id</a>, <a href="#84795" title="Throwable">cause</a>), <a href="#84795" title="Throwable">cause</a>)
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID)sbt.NotInCache" id="84790" class="keyword">this</a>(<a title="sbt.ModuleID" id="84818">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>) = <a href="#7629" title="NotInCache.this.type" class="keyword">this</a>(<a href="#84818" title="sbt.ModuleID">id</a>, <span title="Null(null)" class="keyword">null</span>)
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.NotInCache" id="7630">NotInCache</a>
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Throwable)java.lang.String" id="84810">apply</a>(<a title="sbt.ModuleID" id="84811">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="84812">cause</a>: <span title="Throwable">Throwable</span>) =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="84814">postfix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#84812" title="Throwable">cause</a> <a title="(AnyRef)Boolean" id="3457">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> (<span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span><a href="#84812" title="Throwable">cause</a>.<span title="()java.lang.String">toString</span>)
		<span title="java.lang.String(&quot;File for &quot;)" class="string">&quot;File for &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84811" title="sbt.ModuleID">id</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not in cache&quot;)" class="string">&quot; not in cache&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84814" title="java.lang.String">postfix</a>
	}
}
<span class="comment">/** Provides methods for working at the level of a single jar file with the default Ivy cache.*/</span>
<span class="keyword">object</span> <a title="object sbt.IvyCache" id="10441">IvyCache</a>
{
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="84830">lockFile</a> = <a title="(java.lang.String,java.lang.String)java.io.File" id="16216" class="keyword">new</a> <span title="java.io.File">File</span>(<a title="object java.lang.System" id="1831">System</a>.<a title="(java.lang.String)java.lang.String" id="34082">getProperty</a>(<span title="java.lang.String(&quot;user.home&quot;)" class="string">&quot;user.home&quot;</span>), <span title="java.lang.String(&quot;.sbt.cache.lock&quot;)" class="string">&quot;.sbt.cache.lock&quot;</span>)
	<span class="comment">/** Caches the given 'file' with the given ID.  It may be retrieved or cleared using this ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="84831">cacheJar</a>(<a title="sbt.ModuleID" id="84862">moduleID</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="84863">file</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="84864">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="84865">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="84866">artifact</a> = <a href="#84842" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#84862" title="sbt.ModuleID">moduleID</a>)
		<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="84867">resolved</a> = <span title="org.apache.ivy.plugins.resolver.util.ResolvedResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="21498">ResolvedResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileResource" id="84778">FileResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileRepository" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileRepository" id="84781">IvyFileRepository</a>, <a href="#84863" title="java.io.File">file</a>), <a href="#84862" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#22208" title="=&gt; String">revision</a>)
		<a href="#84837" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; org.apache.ivy.core.report.ArtifactDownloadReport)org.apache.ivy.core.report.ArtifactDownloadReport">withDefaultCache</a>(<a href="#84864" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#84865" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="84943">cache</a> =&gt;
			<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="84944">resolver</a> = <a title="template $anon extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="84945" class="keyword">new</a> <a title="org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="21473">ArtifactResourceResolver</a> { <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.plugins.resolver.util.ResolvedResource" id="84948">resolve</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="84951">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a href="#84867" title="org.apache.ivy.plugins.resolver.util.ResolvedResource">resolved</a> }
			<a href="#84943" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.ArtifactResourceResolver,org.apache.ivy.plugins.repository.ResourceDownloader,org.apache.ivy.core.cache.CacheDownloadOptions)org.apache.ivy.core.report.ArtifactDownloadReport" id="79165">download</a>(<a href="#84866" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#84944" title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver">resolver</a>, <span title="sbt.FileDownloader" class="keyword">new</span> <a href="#9132" title="sbt.FileDownloader">FileDownloader</a>, <span title="org.apache.ivy.core.cache.CacheDownloadOptions" class="keyword">new</span> <a title="org.apache.ivy.core.cache.CacheDownloadOptions" id="19388">CacheDownloadOptions</a>)
		}
	}
	<span class="comment">/** Clears the cache of the jar for the given ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="84832">clearCachedJar</a>(<a title="sbt.ModuleID" id="84988">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="84989">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="84990">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">try</span> { <a href="#84834" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; Boolean)Boolean">withCachedJar</a>(<a href="#84988" title="sbt.ModuleID">id</a>, <a href="#84989" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#84990" title="sbt.IvyLogger">log</a>)(<a href="#84997" title="java.io.File">_</a>.<span title="()Boolean">delete</span>) }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="Exception" id="84998">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#84990" title="sbt.IvyLogger">log</a>.<a href="IvyLogger.scala.html#19750" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Error cleaning cached jar: &quot;)" class="string">&quot;Error cleaning cached jar: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#84998" title="Exception">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	<span class="comment">/** Copies the cached jar for the given ID to the directory 'toDirectory'.  If the jar is not in the cache, NotInCache is thrown.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)java.io.File" id="84833">retrieveCachedJar</a>(<a title="sbt.ModuleID" id="84999">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="85000">toDirectory</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="85001">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="85002">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>) =
		<a href="#84834" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; java.io.File)java.io.File">withCachedJar</a>(<a href="#84999" title="sbt.ModuleID">id</a>, <a href="#85001" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#85002" title="sbt.IvyLogger">log</a>) { <a title="java.io.File" id="85006">cachedFile</a> =&gt;
			<span class="keyword">val</span> <a title="java.io.File" id="85007">copyTo</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="16217" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#85000" title="java.io.File">toDirectory</a>, <a href="#85006" title="java.io.File">cachedFile</a>.<a title="()java.lang.String" id="16219">getName</a>)
			<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.File,java.io.File,org.apache.ivy.util.CopyProgressListener)Boolean" id="85023">copy</a>(<a href="#85006" title="java.io.File">cachedFile</a>, <a href="#85007" title="java.io.File">copyTo</a>, <span title="Null(null)" class="keyword">null</span>)
			<a href="#85007" title="java.io.File">copyTo</a>
		}

	<span class="comment">/** Get the location of the cached jar for the given ID in the Ivy cache.  If the jar is not in the cache, NotInCache is thrown .*/</span>
	<span class="keyword">def</span> <a title="[T](sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; T)T" id="84834">withCachedJar</a>[<a title="&gt;: Nothing &lt;: Any" id="84836">T</a>](<a title="sbt.ModuleID" id="84991">id</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="84992">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="84993">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(java.io.File) =&gt; T" id="84994">f</a>: File =&gt; T): <a href="#84836" title="T">T</a> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="85046">cachedFile</a> =
			<span class="keyword">try</span>
			{
				<a href="#84837" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; java.io.File)java.io.File">withDefaultCache</a>(<a href="#84992" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#84993" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="85049">cache</a> =&gt;
					<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="85050">artifact</a> = <a href="#84842" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#84991" title="sbt.ModuleID">id</a>)
					<a href="#85049" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.core.cache.ArtifactOrigin)java.io.File" id="79151">getArchiveFileInCache</a>(<a href="#85050" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#84840" title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin">unknownOrigin</a>(<a href="#85050" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>))
				}
			}
			<span class="keyword">catch</span> { <span title="Nothing" class="keyword">case</span> <a title="Exception" id="85068">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="sbt.NotInCache" class="keyword">new</span> <a href="#7629" title="sbt.NotInCache">NotInCache</a>(<a href="#84991" title="sbt.ModuleID">id</a>, <a href="#85068" title="Exception">e</a>) }

		<span title="T" class="keyword">if</span>(<a href="#85046" title="java.io.File">cachedFile</a>.<span title="()Boolean">exists</span>) <a href="#84994" title="(java.io.File)T">f</a>(<a href="#85046" title="java.io.File">cachedFile</a>) <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a href="#84790" title="(sbt.ModuleID)sbt.NotInCache" class="keyword">new</a> <a href="#7629" title="sbt.NotInCache">NotInCache</a>(<a href="#84991" title="sbt.ModuleID">id</a>)
	}
	<span class="comment">/** Calls the given function with the default Ivy cache.*/</span>
	<span class="keyword">def</span> <a title="[T](Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T)T" id="84837">withDefaultCache</a>[<a title="&gt;: Nothing &lt;: Any" id="84839">T</a>](<a title="Option[xsbti.GlobalLock]" id="84938">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="84939">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T" id="84940">f</a>: DefaultRepositoryCacheManager =&gt; T): <a href="#84839" title="T">T</a> =
	{
		<span class="keyword">val</span> <a href="#17794" title="(sbt.IvySbt, sbt.FileRepository)">(</a><a href="#85077" title="sbt.IvySbt" id="17794">ivy</a>, <a href="#85077" title="sbt.FileRepository" id="17796">local</a>) = <a href="#84841" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)">basicLocalIvy</a>(<a href="#84938" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#84939" title="sbt.IvyLogger">log</a>)
		<a href="#17794" title="sbt.IvySbt">ivy</a>.<a href="Ivy.scala.html#19847" title="((org.apache.ivy.Ivy) =&gt; T)T">withIvy</a> { <a title="org.apache.ivy.Ivy" id="85142">ivy</a> =&gt;
			<span class="keyword">val</span> <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="85143">cache</a> = <a href="#85142" title="org.apache.ivy.Ivy">ivy</a>.<a title="()org.apache.ivy.core.settings.IvySettings" id="20909">getSettings</a>.<a title="()org.apache.ivy.core.cache.RepositoryCacheManager" id="21336">getDefaultRepositoryCacheManager</a>.<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="3451">asInstanceOf</a>[<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="19373">DefaultRepositoryCacheManager</a>]
			<a href="#85143" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(Boolean)Unit" id="79149">setUseOrigin</a>(<span title="Boolean(false)" class="keyword">false</span>)
			<a href="#84940" title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager)T">f</a>(<a href="#85143" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="84840">unknownOrigin</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="85066">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a title="object org.apache.ivy.core.cache.ArtifactOrigin" id="19371">ArtifactOrigin</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="85052">unkwnown</a>(<a href="#85066" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>)
	<span class="comment">/** A minimal Ivy setup with only a local resolver and the current directory as the base directory.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)" id="84841">basicLocalIvy</a>(<a title="Option[xsbti.GlobalLock]" id="85080">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="85081">log</a>: <a href="IvyLogger.scala.html#9921" title="sbt.IvyLogger">IvyLogger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.FileRepository" id="85083">local</a> = <a href="IvyInterface.scala.html#11182" title="object sbt.Resolver">Resolver</a>.<a href="IvyInterface.scala.html#15062" title="(Option[java.io.File])sbt.FileRepository">defaultLocal</a>(<span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.IvyPaths" id="85084">paths</a> = <span title="sbt.IvyPaths" class="keyword">new</span> <a href="IvyConfigurations.scala.html#9606" title="sbt.IvyPaths">IvyPaths</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>), <span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.InlineIvyConfiguration" id="85085">conf</a> = <span title="sbt.InlineIvyConfiguration" class="keyword">new</span> <a href="IvyConfigurations.scala.html#11268" title="sbt.InlineIvyConfiguration">InlineIvyConfiguration</a>(<a href="#85084" title="sbt.IvyPaths">paths</a>, <a title="(sbt.FileRepository*)Seq[sbt.FileRepository]" id="730">Seq</a>(<a href="#85083" title="sbt.FileRepository">local</a>), <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#85080" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#85081" title="sbt.IvyLogger">log</a>)
		<span title="(sbt.IvySbt,sbt.FileRepository)(sbt.IvySbt, sbt.FileRepository)">(</span><span title="sbt.IvySbt" class="keyword">new</span> <a href="Ivy.scala.html#7770" title="sbt.IvySbt">IvySbt</a>(<a href="#85085" title="sbt.InlineIvyConfiguration">conf</a>), <a href="#85083" title="sbt.FileRepository">local</a>)
	}
	<span class="comment">/** Creates a default jar artifact based on the given ID.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact" id="84842">defaultArtifact</a>(<a title="sbt.ModuleID" id="84868">moduleID</a>: <a href="IvyInterface.scala.html#11352" title="sbt.ModuleID">ModuleID</a>): <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span> =
		<span title="org.apache.ivy.core.module.descriptor.DefaultArtifact" class="keyword">new</span> <a title="org.apache.ivy.core.module.descriptor.DefaultArtifact" id="19475">DefaultArtifact</a>(<a href="Ivy.scala.html#7771" title="object sbt.IvySbt">IvySbt</a>.<a href="Ivy.scala.html#24274" title="(sbt.ModuleID)org.apache.ivy.core.module.id.ModuleRevisionId">toID</a>(<a href="#84868" title="sbt.ModuleID">moduleID</a>), <span title="Null(null)" class="keyword">null</span>, <a href="#84868" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#22206" title="=&gt; String">name</a>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
}
<span class="comment">/** Required by Ivy for copying to the cache.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FileDownloader extends java.lang.Object with org.apache.ivy.plugins.repository.ResourceDownloader with NotNull with ScalaObject" id="9132">FileDownloader</a> <span class="keyword">extends</span> <a title="org.apache.ivy.plugins.repository.ResourceDownloader" id="21452">ResourceDownloader</a> <span class="keyword">with</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.Resource,java.io.File)Unit" id="84987">download</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="85164">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>, <a title="org.apache.ivy.plugins.repository.Resource" id="85165">resource</a>: <a title="org.apache.ivy.plugins.repository.Resource" id="21455">Resource</a>, <a title="java.io.File" id="85166">dest</a>: <span title="java.io.File">File</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#85166" title="java.io.File">dest</a>.<span title="()Boolean">exists</span>()) <a href="#85166" title="java.io.File">dest</a>.<span title="()Boolean">delete</span>()
		<span class="keyword">val</span> <a title="java.io.File" id="85167">part</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#85166" title="java.io.File">dest</a>.<a title="()java.lang.String" id="16224">getAbsolutePath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.part&quot;)" class="string">&quot;.part&quot;</span>)
		<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.InputStream,java.io.File,org.apache.ivy.util.CopyProgressListener)Unit" id="85027">copy</a>(<a href="#85165" title="org.apache.ivy.plugins.repository.Resource">resource</a>.<a title="()java.io.InputStream" id="78104">openStream</a>, <a href="#85167" title="java.io.File">part</a>, <span title="Null(null)" class="keyword">null</span>)
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2695">!</a><a href="#85167" title="java.io.File">part</a>.<a title="(java.io.File)Boolean" id="16248">renameTo</a>(<a href="#85166" title="java.io.File">dest</a>))
			<a title="(String)Nothing" id="6085">error</a>(<span title="java.lang.String(&quot;Could not move temporary file &quot;)" class="string">&quot;Could not move temporary file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#85167" title="java.io.File">part</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to final location &quot;)" class="string">&quot; to final location &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#85166" title="java.io.File">dest</a>)
	}
}
        </pre>
    </body>
</html>