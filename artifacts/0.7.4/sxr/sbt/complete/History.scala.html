<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/complete/History.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> sbt.complete

<span class="keyword">import</span> History.number

<span class="keyword">final</span> <span class="keyword">class</span> <a title="class History extends java.lang.Object with NotNull with ScalaObject" id="13528">History</a> <span class="keyword">private</span>(<a title="Array[String]" id="56726">lines</a>: <a title="Array[String]" id="1032">Array</a>[String], <a title="sbt.Logger" id="56727">log</a>: <a href="../Logger.scala.html#11865" title="sbt.Logger">Logger</a>) <span class="keyword">extends</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Array.Projection[String]" id="56710">reversed</a> = <a href="#56726" title="Array[String]">lines</a>.<a title="=&gt; Array.Projection[String]" id="17298">reverse</a>

	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="56711">all</a>: <span title="Seq[String]">Seq</span>[String] = <a href="#56726" title="Array[String]">lines</a>.<span title="Array[String]">toArray</span>
	<span class="keyword">def</span> <a title="=&gt; Int" id="56712">size</a> = <a href="#56726" title="Array[String]">lines</a>.<a title="=&gt; Int" id="17311">length</a>
	<span class="keyword">def</span> <a title="=&gt; Option[String]" id="56713">!!</a> : <span title="Option[String]">Option</span>[String] = <a href="#56717" title="(Int)Option[String]">!-</a> (<span title="Int(1)" class="int">1</span>)
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="56714">apply</a>(<a title="Int" id="56739">i</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <span title="Option[String]" class="keyword">if</span>(<span title="Int(0)" class="int">0</span> <a title="(Int)Boolean" id="3092">&lt;=</a> <a href="#56739" title="Int">i</a> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#56739" title="Int">i</a> <span title="(Int)Boolean">&lt;</span> <a href="#56712" title="=&gt; Int">size</a>) <span title="(String)Some[String]">Some</span>( <a href="#56726" title="(Int)String" id="17312">lines</a>(<a href="#56739" title="Int">i</a>) ) <span class="keyword">else</span> { <a href="#56727" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#19736" title="(=&gt; String)Unit">error</a>(<span title="java.lang.String(&quot;Invalid history index: &quot;)" class="string">&quot;Invalid history index: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56739" title="Int">i</a>); <span title="object None">None</span> }
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="56715">!</a>(<a title="Int" id="56747">i</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <a href="#56714" title="(Int)Option[String]">apply</a>(<a href="#56747" title="Int">i</a>)

	<span class="keyword">def</span> <a title="(String)Option[String]" id="56716">!</a>(<a title="String" id="56748">s</a>: <span title="String">String</span>): <span title="Option[String]">Option</span>[String] =
		<a href="#56704" title="(String)Option[Int]">number</a>(<a href="#56748" title="String">s</a>) <span title="Option[String]" class="keyword">match</span>
		{
			<span title="Option[String]" class="keyword">case</span> Some(<a title="Int" id="56750">n</a>) =&gt; <span title="Option[String]" class="keyword">if</span>(<a href="#56750" title="Int">n</a> <span title="(Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span>) <a href="#56717" title="(Int)Option[String]">!-</a> (-<a href="#56750" title="=&gt; Int" id="3045">n</a>) <span class="keyword">else</span> <a href="#56714" title="(Int)Option[String]">apply</a>(<a href="#56750" title="Int">n</a>)
			<span title="Option[String]" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#56719" title="(String)(=&gt; Option[String])Option[String]">nonEmpty</a>(<a href="#56748" title="String">s</a>) { <a href="#56710" title="=&gt; Array.Projection[String]">reversed</a>.<span title="((String) =&gt; Boolean)Option[String]">find</span>(<a href="#56756" title="String">_</a>.<a title="(java.lang.String)Boolean" id="5786">startsWith</a>(<a href="#56748" title="String">s</a>)) }
		}
	<span class="keyword">def</span> <a title="(Int)Option[String]" id="56717">!-</a> (<a title="Int" id="56738">n</a>: <span title="Int">Int</span>): <span title="Option[String]">Option</span>[String] = <a href="#56714" title="(Int)Option[String]">apply</a>(<a href="#56712" title="=&gt; Int">size</a> <span title="(Int)Int">-</span> <a href="#56738" title="Int">n</a> <span title="(Int)Int">-</span> <span title="Int(1)" class="int">1</span>)

	<span class="keyword">def</span> <a title="(String)Option[String]" id="56718">!?</a>(<a title="String" id="56774">s</a>: <span title="String">String</span>): <span title="Option[String]">Option</span>[String] = <a href="#56719" title="(String)(=&gt; Option[String])Option[String]">nonEmpty</a>(<a href="#56774" title="String">s</a>) { <a href="#56710" title="=&gt; Array.Projection[String]">reversed</a>.<a title="(Int)Array.Projection[String]" id="17287">drop</a>(<span title="Int(1)" class="int">1</span>).<span title="((String) =&gt; Boolean)Option[String]">find</span>(<a href="#56778" title="String">_</a>.<a title="(java.lang.CharSequence)Boolean" id="5805">contains</a>(<a href="#56774" title="String">s</a>)) }

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](String)(=&gt; Option[T])Option[T]" id="56719">nonEmpty</a>[<a title="&gt;: Nothing &lt;: Any" id="56721">T</a>](<a title="String" id="56752">s</a>: <span title="String">String</span>)(<a title="=&gt; Option[T]" id="56753">act</a>: =&gt; Option[T]): <span title="Option[T]">Option</span>[T] =
		<span title="Option[T]" class="keyword">if</span>(<a href="#56752" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">s</a>.<a title="=&gt; Boolean" id="16733">isEmpty</a>)
		{
			<a href="#56727" title="sbt.Logger">log</a>.<a href="../Logger.scala.html#19736" title="(=&gt; String)Unit">error</a>(<span title="java.lang.String(&quot;No action specified to history command&quot;)" class="string">&quot;No action specified to history command&quot;</span>)
			<span title="object None">None</span>
		}
		<span class="keyword">else</span>
			<a href="#56753" title="=&gt; Option[T]">act</a>

	<span class="keyword">def</span> <a title="(Int,Int)Seq[String]" id="56722">list</a>(<a title="Int" id="56787">historySize</a>: <span title="Int">Int</span>, <a title="Int" id="56788">show</a>: <span title="Int">Int</span>): <span title="Seq[String]">Seq</span>[String] =
		<a href="#56726" title="Array[String]">lines</a>.<a title="=&gt; List[String]" id="16304">toList</a>.<a title="(Int)List[String]" id="17954">drop</a>((<a href="#56726" title="Array[String]">lines</a>.<a title="=&gt; Int" id="16732">size</a> <span title="implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt">-</span> <a href="#56787" title="Int">historySize</a>) <span title="(Int)Int">max</span> <span title="Int(0)" class="int">0</span>).<a title="=&gt; List[(String, Int)]" id="17989">zipWithIndex</a>.<a title="(((String, Int)) =&gt; java.lang.String)List[java.lang.String]" id="17963">map</a> <a href="#56798" title="java.lang.String">{</a> <span title="java.lang.String" class="keyword">case</span> (<a title="String" id="56799">line</a>, <a title="Int" id="56800">number</a>) =&gt; <span title="java.lang.String(&quot;   &quot;)" class="string">&quot;   &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56800" title="Int">number</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;  &quot;)" class="string">&quot;  &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56799" title="String">line</a> }.<a title="(Int)List[java.lang.String]" id="17955">takeRight</a>(<a href="#56788" title="implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt">show</a> <span title="(Int)Int">max</span> <span title="Int(1)" class="int">1</span>)
}

<span class="keyword">object</span> <a title="object sbt.complete.History" id="13529">History</a>
{
	<span class="keyword">def</span> <a title="(Seq[String],sbt.Logger)sbt.complete.History" id="56703">apply</a>(<a title="Seq[String]" id="56806">lines</a>: <span title="Seq[String]">Seq</span>[String], <a title="sbt.Logger" id="56807">log</a>: <a href="../Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <a href="#13528" title="sbt.complete.History">History</a> = <span title="sbt.complete.History" class="keyword">new</span> <a href="#13528" title="sbt.complete.History">History</a>(<a href="#56806" title="Seq[String]">lines</a>.<span title="Array[String]">toArray</span>, <a href="#56807" title="sbt.Logger">log</a>)

	<span class="keyword">def</span> <a title="(String)Option[Int]" id="56704">number</a>(<a title="String" id="56749">s</a>: <span title="String">String</span>): <span title="Option[Int]">Option</span>[Int] =
		<span class="keyword">try</span> { <span title="(Int)Some[Int]">Some</span>(<a href="#56749" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">s</a>.<a title="=&gt; Int" id="17240">toInt</a>) }
		<span class="keyword">catch</span> { <span title="None.type" class="keyword">case</span> <a title="NumberFormatException" id="56817">e</a>: <a title="NumberFormatException" id="2049">NumberFormatException</a> =&gt; <span title="object None">None</span> }
}
        </pre>
    </body>
</html>