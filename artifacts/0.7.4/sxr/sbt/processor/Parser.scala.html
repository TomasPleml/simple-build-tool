<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/processor/Parser.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt.processor

<span class="comment">/** Parses commands.  `errorMessage` is the String used when a command is invalid.
* There is no detailed error reporting.
* Input Strings are assumed to be trimmed.*/</span>
<span class="keyword">class</span> <a title="class CommandParser extends java.lang.Object with sbt.processor.CommandParsing with ScalaObject" id="12040">CommandParser</a>(<a title="String" id="47383">errorMessage</a>: <span title="String">String</span>, <a title="sbt.processor.DefinitionParsing" id="47384">defParser</a>: <a href="Processor.scala.html#11965" title="sbt.processor.DefinitionParsing">DefinitionParsing</a>) <span class="keyword">extends</span> <a href="Processor.scala.html#12064" title="sbt.processor.CommandParsing">CommandParsing</a>
{
	<span class="keyword">def</span> <a title="(String)Either[String,sbt.processor.Command]" id="47361">parseCommand</a>(<a title="String" id="47385">line</a>: <span title="String">String</span>): <a title="Either[String,sbt.processor.Command]" id="336">Either</a>[String, Command] =
		<a href="#47384" title="sbt.processor.DefinitionParsing">defParser</a>.<a href="Processor.scala.html#31877" title="(String)Option[sbt.processor.Definition]">parseDefinition</a>(<a href="#47385" title="String">line</a>) <span title="Either[String,sbt.processor.Command]" class="keyword">match</span>
		{
			<span title="Right[Nothing,sbt.processor.DefineProcessor]" class="keyword">case</span> Some(<a title="sbt.processor.ProcessorDefinition" id="47386">p</a>: <a href="Processor.scala.html#11947" title="sbt.processor.ProcessorDefinition">ProcessorDefinition</a>) =&gt; <span title="(sbt.processor.DefineProcessor)Right[Nothing,sbt.processor.DefineProcessor]">Right</span>(<span title="sbt.processor.DefineProcessor" class="keyword">new</span> <a href="Processor.scala.html#12028" title="sbt.processor.DefineProcessor">DefineProcessor</a>(<a href="#47386" title="sbt.processor.ProcessorDefinition">p</a>))
			<span title="Right[Nothing,sbt.processor.DefineRepository]" class="keyword">case</span> Some(<a title="sbt.processor.RepositoryDefinition" id="47389">r</a>: <a href="Processor.scala.html#11956" title="sbt.processor.RepositoryDefinition">RepositoryDefinition</a>) =&gt; <span title="(sbt.processor.DefineRepository)Right[Nothing,sbt.processor.DefineRepository]">Right</span>(<span title="sbt.processor.DefineRepository" class="keyword">new</span> <a href="Processor.scala.html#11992" title="sbt.processor.DefineRepository">DefineRepository</a>(<a href="#47389" title="sbt.processor.RepositoryDefinition">r</a>))
			<span title="&lt;refinement&gt; extends Either[String,sbt.processor.Command with ScalaObject] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#47362" title="(String)Either[String,sbt.processor.Command with ScalaObject] with Product">parseOther</a>(<a href="#47385" title="String">line</a>)
		}
	
	<span class="keyword">def</span> <a title="(String)Either[String,sbt.processor.Command with ScalaObject] with Product" id="47362">parseOther</a>(<a title="String" id="47392">line</a>: <span title="String">String</span>) =
		<a href="#47392" title="String">line</a> <span title="&lt;refinement&gt; extends Either[String,sbt.processor.Command with ScalaObject] with Product" class="keyword">match</span>
		{
			<span title="Right[Nothing,sbt.processor.RemoveDefinition]" class="keyword">case</span> <a href="#47373" title="(Any)Option[List[String]]">RemoveRegex</a>(<a title="String" id="47395">label</a>) =&gt; <span title="(sbt.processor.RemoveDefinition)Right[Nothing,sbt.processor.RemoveDefinition]">Right</span>(<span title="sbt.processor.RemoveDefinition" class="keyword">new</span> <a href="Processor.scala.html#12046" title="sbt.processor.RemoveDefinition">RemoveDefinition</a>(<a href="#47395" title="String">label</a>))
			<span title="Right[Nothing,object sbt.processor.Help]" class="keyword">case</span> <a href="#47365" title="=&gt; java.lang.String">HelpCommand</a> | <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> =&gt; <span title="(object sbt.processor.Help)Right[Nothing,object sbt.processor.Help]">Right</span>(<a href="Processor.scala.html#11936" title="object sbt.processor.Help">Help</a>)
			<span title="Right[Nothing,object sbt.processor.Show]" class="keyword">case</span> <a href="#47363" title="=&gt; java.lang.String">ShowCommand</a> =&gt; <span title="(object sbt.processor.Show)Right[Nothing,object sbt.processor.Show]">Right</span>(<a href="Processor.scala.html#11939" title="object sbt.processor.Show">Show</a>)
			<span title="Left[String,Nothing]" class="keyword">case</span> _ =&gt; <a title="(String)Left[String,Nothing]" id="1171">Left</a>(<a href="#47383" title="String">errorMessage</a>)
		}

	<span class="keyword">val</span> <a title="java.lang.String" id="47363">ShowCommand</a> = <span title="java.lang.String(&quot;show&quot;)" class="string">&quot;show&quot;</span>
	<span class="keyword">val</span> <a title="java.lang.String" id="47365">HelpCommand</a> = <span title="java.lang.String(&quot;help&quot;)" class="string">&quot;help&quot;</span>
	<span class="keyword">val</span> <a title="java.lang.String" id="47367">ProcessorCommand</a> = <span title="java.lang.String(&quot;&lt;label&gt; is &lt;group&gt; &lt;module&gt; &lt;rev&gt;&quot;)" class="string">&quot;&lt;label&gt; is &lt;group&gt; &lt;module&gt; &lt;rev&gt;&quot;</span>
	<span class="keyword">val</span> <a title="java.lang.String" id="47369">RepositoryCommand</a> = <span title="java.lang.String(&quot;&lt;label&gt; at &lt;url&gt;&quot;)" class="string">&quot;&lt;label&gt; at &lt;url&gt;&quot;</span>
	<span class="keyword">val</span> <a title="java.lang.String" id="47371">RemoveCommand</a> = <span title="java.lang.String(&quot;remove &lt;label&gt;&quot;)" class="string">&quot;remove &lt;label&gt;&quot;</span>
	
	<span class="keyword">val</span> <a title="scala.util.matching.Regex" id="47373">RemoveRegex</a> = <span title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" class="string">&quot;&quot;&quot;remove\s+(\w+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
}

<span class="comment">/** Parses the String representation of definitions.*/</span>
<span class="keyword">class</span> <a title="class DefinitionParser extends java.lang.Object with sbt.processor.DefinitionParsing with ScalaObject" id="12058">DefinitionParser</a> <span class="keyword">extends</span> <a href="Processor.scala.html#11965" title="sbt.processor.DefinitionParsing">DefinitionParsing</a>
{
	<span class="keyword">def</span> <a title="(String)Option[sbt.processor.Definition]" id="34111">parseDefinition</a>(<a title="String" id="34149">line</a>: <span title="String">String</span>): <a title="Option[sbt.processor.Definition]" id="897">Option</a>[Definition] =
		<a href="#34149" title="String">line</a> <span title="Option[sbt.processor.Definition]" class="keyword">match</span>
		{
			<span title="Some[sbt.processor.ProcessorDefinition]" class="keyword">case</span> <a href="#34112" title="(Any)Option[List[String]]">ProcessorRegex</a>(<a title="String" id="47439">label</a>, <a title="String" id="47440">group</a>, <a title="String" id="47441">name</a>, <a title="String" id="47442">rev</a>) =&gt;  <span title="(sbt.processor.ProcessorDefinition)Some[sbt.processor.ProcessorDefinition]">Some</span>( <span title="sbt.processor.ProcessorDefinition" class="keyword">new</span> <a href="Processor.scala.html#11947" title="sbt.processor.ProcessorDefinition">ProcessorDefinition</a>(<a href="#47439" title="String">label</a>, <a href="#47440" title="String">group</a>, <a href="#47441" title="String">name</a>, <a href="#47442" title="String">rev</a>) )
			<span title="Some[sbt.processor.RepositoryDefinition]" class="keyword">case</span> <a href="#34114" title="(Any)Option[List[String]]">RepositoryRegex</a>(<a title="String" id="47445">label</a>, <a title="String" id="47446">url</a>) =&gt;  <span title="(sbt.processor.RepositoryDefinition)Some[sbt.processor.RepositoryDefinition]">Some</span>( <span title="sbt.processor.RepositoryDefinition" class="keyword">new</span> <a href="Processor.scala.html#11956" title="sbt.processor.RepositoryDefinition">RepositoryDefinition</a>(<a href="#47445" title="String">label</a>, <a href="#47446" title="String">url</a>) )
			<span title="None.type" class="keyword">case</span> _ =&gt; <span title="object None">None</span>
		}
		
	<span class="keyword">val</span> <a title="scala.util.matching.Regex" id="34112">ProcessorRegex</a> = <span title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" class="string">&quot;&quot;&quot;(\w+)\s+is\s+(\S+)\s+(\S+)\s+(\S+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
	<span class="keyword">val</span> <a title="scala.util.matching.Regex" id="34114">RepositoryRegex</a> = <span title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" class="string">&quot;&quot;&quot;(\w+)\s+at\s+(\S+)&quot;&quot;&quot;</span>.<span title="=&gt; scala.util.matching.Regex">r</span>
}

        </pre>
    </body>
</html>