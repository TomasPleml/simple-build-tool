<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Webstart.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> scala.xml.{Elem, NodeSeq}
<span class="keyword">import</span> Control._

<span class="comment">/** Defines the configurable parameters for the webstart task. */</span>
<span class="keyword">trait</span> <a title="trait WebstartOptions extends java.lang.Object with NotNull" id="6459">WebstartOptions</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="comment">/** The main jar to use for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="62296">webstartMainJar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all generated files for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="62297">webstartOutputDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="comment">/** Generates the .jnlp file using the provided resource descriptions.  Each resource description
	* provides the path of the jar relative to 'webstartOutputDirectory' and whether or not
	* it is the main jar.*/</span>
	<span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.Elem" id="62298">jnlpXML</a>(<a title="Seq[sbt.WebstartJarResource]" id="62311">jars</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <span title="scala.xml.Elem">Elem</span>
	<span class="comment">/** The location to write the .jnlp file to.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="62299">jnlpFile</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all jars that are not the main jar.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="62300">webstartLibDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="comment">/** The libraries needed for webstart.  Note that only jars are used; directories are discarded.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62301">webstartLibraries</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Libraries external to the project needed for webstart.  This is mainly for scala libraries.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62302">webstartExtraLibraries</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Resources to copy to the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62303">webstartResources</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** If defined, this specifies where to create a zip of the webstart output directory.  It cannot be
	* in the output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.Path]" id="62304">webstartZip</a>: <span title="Option[sbt.Path]">Option</span>[Path]

	<span class="comment">/** If defined, configures signing of jars.  All jars (main and libraries) are signed using
	* this configuration.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="62305">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration]
	<span class="comment">/** If true, pack200 compression is applied to all jars (main and libraries).  A version of each jar
	* without pack200 compression is still created in the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="62306">webstartPack200</a>: <span title="Boolean">Boolean</span>
	<span class="comment">/** If true, gzip compression will be applied to all jars.  If pack200 compression is enabled,
	* gzip compression is also applied to the archives with pack200 compression.  A version of
	* each file without gzip compression is still created in the webstart output directory. */</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="62307">webstartGzip</a>: <span title="Boolean">Boolean</span>
}
<span class="comment">/** Represents a library included in the webstart distribution.  Name is the filename of the jar.
* href is the path of the jar relative to the webstart output directory.  isMain is true only for
* the main jar. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class WebstartJarResource extends java.lang.Object with NotNull with ScalaObject" id="10380">WebstartJarResource</a>(<span class="keyword">val</span> <a title="String" id="62335">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="62336">href</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Boolean" id="62337">isMain</a>: <span title="Boolean">Boolean</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** Configuration for signing jars. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SignConfiguration extends java.lang.Object with NotNull with ScalaObject" id="8100">SignConfiguration</a>(<span class="keyword">val</span> <a title="String" id="62365">alias</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Seq[sbt.SignJar.SignOption]" id="62366">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** A scala project that produces a webstart distribution. */</span>
<span class="keyword">trait</span> <a title="trait WebstartScalaProject extends java.lang.Object with sbt.ScalaProject with ScalaObject" id="8601">WebstartScalaProject</a> <span class="keyword">extends</span> <a href="ScalaProject.scala.html#11271" title="sbt.ScalaProject">ScalaProject</a>
{
	<span class="keyword">import</span> WebstartScalaProject._
	<span class="comment">/** Creates a task that produces a webstart distribution using the given options.*/</span>
	<span class="keyword">def</span> <a title="(sbt.WebstartOptions)WebstartScalaProject.this.Task" id="62369">webstartTask</a>(<a title="sbt.WebstartOptions" id="62392">options</a>: <a href="#6459" title="sbt.WebstartOptions">WebstartOptions</a>) =
		<a href="TaskManager.scala.html#14806" title="(=&gt; Option[String])WebstartScalaProject.this.Task">task</a>
		{
			<span class="keyword">import</span> options._
			<a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15458" title="(Iterable[sbt.Path],sbt.Logger)Option[String]">createDirectories</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="#62406" title="(sbt.Path)List[sbt.Path]">::</a> <a href="#62300" title="=&gt; sbt.Path">webstartLibDirectory</a> <a href="#62407" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>) <span class="comment">// ignore errors</span>
			<a href="#62391" title="(sbt.WebstartOptions)Unit">verifyOptions</a>(<a href="#62392" title="sbt.WebstartOptions">options</a>)

			<span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="62396">relativize</a>(<a title="sbt.Path" id="62413">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15577" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#18068" title="=&gt; sbt.Path">##</a>, <a href="#62413" title="sbt.Path">jar</a>) <a title="(=&gt; sbt.Path)sbt.Path" id="19232">getOrElse</a>
				<a title="(String)Nothing" id="6085">error</a>(<span title="java.lang.String(&quot;Jar (&quot;)" class="string">&quot;Jar (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62413" title="sbt.Path">jar</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) was not in webstart output directory (&quot;)" class="string">&quot;) was not in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
			<span class="keyword">def</span> <a title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]" id="62397">signAndPack</a>(<a title="List[sbt.Path]" id="62419">jars</a>: <span title="List[sbt.Path]">List</span>[Path], <a title="sbt.Path" id="62420">targetDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>): <a title="Either[String,List[sbt.Path]]" id="336">Either</a>[String, List[Path]] =
			{
				<a href="Control.scala.html#25782" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#62419" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>: <span title="List[sbt.Path]">List</span>[Path])
				{ (<a title="List[sbt.Path]" id="62440">allJars</a>, <a title="sbt.Path" id="62441">jar</a>) =&gt;
					<span class="keyword">val</span> <a title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" id="62442">signPackResult</a> =
						<a href="#62305" title="=&gt; Option[sbt.SignConfiguration]">webstartSignConfiguration</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
						{
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> Some(<a title="sbt.SignConfiguration" id="62444">config</a>) =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#62306" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#62382" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signAndPack200</a>(<a href="#62441" title="sbt.Path">jar</a>, <a href="#62444" title="sbt.SignConfiguration">config</a>, <a href="#62420" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#62379" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signOnly</a>(<a href="#62441" title="sbt.Path">jar</a>, <a href="#62444" title="sbt.SignConfiguration">config</a>, <a href="#62420" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>)
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#62306" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#62384" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">pack200Only</a>(<a href="#62441" title="sbt.Path">jar</a>, <a href="#62420" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#62385" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#62441" title="sbt.Path">jar</a>, <a href="#62420" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="62654">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#11343" title="sbt.Jars">Jars</a>(<a href="#62654" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>))
						}
					<span class="keyword">val</span> <a title="Boolean" id="62443">deleteOriginal</a> = <a href="#62306" title="=&gt; Boolean">webstartPack200</a>
					<a href="#62442" title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product">signPackResult</a>.<span title="=&gt; Either.RightProjection[String,sbt.Jars]">right</span> <span title="((sbt.Jars) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">flatMap</span> { <a title="sbt.Jars" id="62662">addJars</a> =&gt;
						<span title="Either[String,List[sbt.Path]]" class="keyword">if</span>(<a href="#62307" title="=&gt; Boolean">webstartGzip</a>)
							<a href="Control.scala.html#11878" title="object sbt.Control">Control</a>.<a href="Control.scala.html#25782" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#62662" title="sbt.Jars">addJars</a>.<a href="#62548" title="=&gt; List[sbt.Path]">gzippable</a>, <a href="#62662" title="sbt.Jars">addJars</a>.<a href="#62547" title="=&gt; List[sbt.Path]">allJars</a> <a href="#62679" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62440" title="List[sbt.Path]">allJars</a>)
								{ (<a title="List[sbt.Path]" id="62688">accumulate</a>, <a title="sbt.Path" id="62689">jar</a>) =&gt; <a href="#62381" title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product">gzipJar</a>(<a href="#62689" title="sbt.Path">jar</a>, <a href="#62443" title="Boolean">deleteOriginal</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">map</span>(<a href="#62733" title="List[sbt.Path]">_</a> <a href="#62734" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62688" title="List[sbt.Path]">accumulate</a>) }
						<span class="keyword">else</span>
							<a title="(List[sbt.Path])Right[Nothing,List[sbt.Path]]" id="490">Right</a>(<a href="#62662" title="sbt.Jars">addJars</a>.<a href="#62547" title="=&gt; List[sbt.Path]">allJars</a> <a href="#62741" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62440" title="List[sbt.Path]">allJars</a>)
					}
				}
			}

			<span class="keyword">import</span> FileUtilities._

			<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="62399">jars</a> = (<a href="#62301" title="=&gt; sbt.PathFinder">webstartLibraries</a> <a href="Path.scala.html#16180" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#62302" title="=&gt; sbt.PathFinder">webstartExtraLibraries</a>).<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>.<span title="((sbt.Path) =&gt; Boolean)Iterable[sbt.Path]">filter</span>(<a href="ClasspathUtilities.scala.html#11449" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30474" title="(sbt.Path)Boolean">isArchive</a>)
			<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[sbt.Path]" id="62400">process</a>(<a title="Iterable[sbt.Path]" id="62748">jars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <span class="keyword">for</span>(<a title="((sbt.Path) =&gt; sbt.Path)Iterable[sbt.Path]" id="62753">jar</a> &lt;- <a href="#62748" title="Iterable[sbt.Path]">jars</a> <span class="keyword">if</span> <a href="#62753" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>.<a title="(java.lang.String)Boolean" id="5787">endsWith</a>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)) <span class="keyword">yield</span> <a href="#62396" title="(sbt.Path)sbt.Path">relativize</a>(<a href="#62753" title="sbt.Path">jar</a>)

			<a href="Control.scala.html#25787" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#62397" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#62296" title="=&gt; sbt.Path">webstartMainJar</a> <a href="#62755" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>)) { <a title="List[sbt.Path]" id="62759">mainJars</a> =&gt;
				<a href="Control.scala.html#25787" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#62397" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#62399" title="Iterable[sbt.Path]">jars</a>.<span title="=&gt; List[sbt.Path]">toList</span>, <a href="#62300" title="=&gt; sbt.Path">webstartLibDirectory</a>)) { <a title="List[sbt.Path]" id="62762">libJars</a> =&gt;
					<a href="#62387" title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#62298" title="(Seq[sbt.WebstartJarResource])scala.xml.Elem">jnlpXML</a>(<a href="#62389" title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]">jarResources</a>(<a href="#62400" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#62759" title="List[sbt.Path]">mainJars</a>), <a href="#62400" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#62762" title="List[sbt.Path]">libJars</a>))), <a href="#62299" title="=&gt; sbt.Path">jnlpFile</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
					<a href="Control.scala.html#25787" title="(Either[String,scala.collection.Set[sbt.Path]])((scala.collection.Set[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="FileUtilities.scala.html#15473" title="(Iterable[sbt.Path],sbt.Path,sbt.Logger)Either[String,scala.collection.Set[sbt.Path]]">copy</a>(<a href="#62303" title="=&gt; sbt.PathFinder">webstartResources</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>)) { <a title="scala.collection.Set[sbt.Path]" id="62777">copiedResources</a> =&gt;
						<span class="keyword">val</span> <a title="sbt.PathFinder" id="62778">keep</a> = <a href="#62299" title="=&gt; sbt.Path">jnlpFile</a> <a href="Path.scala.html#16180" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15570" title="(=&gt; Iterable[sbt.Path])sbt.PathFinder">lazyPathFinder</a>(<a href="#62759" title="List[sbt.Path]">mainJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#62762" title="List[sbt.Path]">libJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#62777" title="scala.collection.Set[sbt.Path]">copiedResources</a>) <a href="Path.scala.html#16180" title="(sbt.PathFinder)sbt.PathFinder">+++</a>
							<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#16180" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#62300" title="=&gt; sbt.Path">webstartLibDirectory</a>
						<a href="FileUtilities.scala.html#15481" title="(sbt.Path,Iterable[sbt.Path],sbt.Logger)Option[String]">prune</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#62778" title="sbt.PathFinder">keep</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
						<a href="#62304" title="=&gt; Option[sbt.Path]">webstartZip</a>.<a title="((sbt.Path) =&gt; Option[String])Option[String]" id="19236">flatMap</a>( <a title="sbt.Path" id="62799">zipPath</a> =&gt; <a href="FileUtilities.scala.html#15436" title="(Iterable[sbt.Path],sbt.Path,Boolean,sbt.Logger)Option[String]">zip</a>(<span title="(sbt.Path*)List[sbt.Path]">List</span>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#18068" title="=&gt; sbt.Path">##</a>), <a href="#62799" title="sbt.Path">zipPath</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="Project.scala.html#14821" title="=&gt; sbt.Logger">log</a>) )
					}
				}
			}
		}
	<span class="comment">/** Creates default XML elements for a JNLP file for the given resources.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.NodeSeq" id="62370">defaultElements</a>(<a title="Seq[sbt.WebstartJarResource]" id="62802">resources</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <a title="scala.xml.NodeSeq" id="14650">NodeSeq</a> = <a title="object scala.xml.NodeSeq" id="14651">NodeSeq</a>.<a title="(Seq[scala.xml.Node])scala.xml.NodeSeq" id="20067">fromSeq</a>(<a href="#62802" title="Seq[sbt.WebstartJarResource]">resources</a>.<a title="((sbt.WebstartJarResource) =&gt; scala.xml.Elem)Seq[scala.xml.Elem]" id="16749">map</a>(<a href="#62371" title="(sbt.WebstartJarResource)scala.xml.Elem">defaultElement</a>))
	<span class="comment">/** Creates a default XML element for a JNLP file for the given resource.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.WebstartJarResource)scala.xml.Elem" id="62371">defaultElement</a>(<a title="sbt.WebstartJarResource" id="62804">resource</a>: <a href="#10380" title="sbt.WebstartJarResource">WebstartJarResource</a>): <span title="scala.xml.Elem">Elem</span> =
		&lt;jar href={<a href="#62804" title="sbt.WebstartJarResource">resource</a>.<a href="#62336" title="=&gt; String">href</a>} main={<a href="#62804" title="sbt.WebstartJarResource">resource</a>.<a href="#62337" title="=&gt; Boolean">isMain</a>.<a title="()java.lang.String" id="3448">toString</a>}/&gt;

}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Jars extends java.lang.Object with NotNull with ScalaObject" id="11343">Jars</a>(<span class="keyword">val</span> <a title="List[sbt.Path]" id="62548">gzippable</a>: <span title="List[sbt.Path]">List</span>[Path], <span class="keyword">val</span> <a title="List[sbt.Path]" id="62549">nonGzippable</a>: <span title="List[sbt.Path]">List</span>[Path]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; List[sbt.Path]" id="62547">allJars</a> = <a href="#62548" title="=&gt; List[sbt.Path]">gzippable</a> <a href="#62682" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62549" title="=&gt; List[sbt.Path]">nonGzippable</a>
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.WebstartScalaProject" id="8602">WebstartScalaProject</a>
{
	<span class="keyword">import</span> FileTasks.{runOption, wrapProduct, wrapProducts}
	<span class="comment">/** Changes the extension of the Path of the given jar from &quot;.jar&quot; to newExtension.  If append is true,
	* the new extension is simply appended to the jar's filename. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)sbt.Path" id="62376">appendExtension</a>(<a title="sbt.Path" id="62457">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="String" id="62458">newExtension</a>: <span title="String">String</span>) =
		<a href="#62457" title="sbt.Path">jar</a> <span title="sbt.Path" class="keyword">match</span>
		{
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.RelativePath" id="62460">rp</a>: <a href="Path.scala.html#9357" title="sbt.RelativePath">RelativePath</a> =&gt; <a href="#62460" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#62463" title="=&gt; sbt.Path">parentPath</a> <a href="Path.scala.html#18070" title="(String)sbt.Path">/</a> (<a href="#62460" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#62465" title="=&gt; String">component</a> <span title="(Any)java.lang.String">+</span> <a href="#62458" title="String">newExtension</a>)
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.Path" id="62475">x</a> =&gt; <a href="#62475" title="sbt.Path">x</a>
		}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="62377">gzipJarPath</a>(<a title="sbt.Path" id="62695">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#62376" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#62695" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="62378">packPath</a>(<a title="sbt.Path" id="62455">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#62376" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#62455" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.pack&quot;)" class="string">&quot;.pack&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="62379">signOnly</a>(<a title="sbt.Path" id="62558">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="62559">signConfiguration</a>: <a href="#8100" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="62560">targetDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62561">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62563">targetJar</a> = <a href="#62560" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#18070" title="(String)sbt.Path">/</a> <a href="#62558" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#26296" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign&quot;)" class="string">&quot;sign&quot;</span>, <a href="FileTask.scala.html#26294" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#26316" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62558" title="sbt.Path">jar</a>, <a href="#62561" title="sbt.Logger">log</a>) {
			<a href="#62561" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Signing &quot;)" class="string">&quot;Signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62558" title="sbt.Path">jar</a>)
			<a href="#62380" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#62558" title="sbt.Path">jar</a>, <a href="#62559" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#62563" title="sbt.Path">targetJar</a>, <a href="#62561" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#11343" title="sbt.Jars">Jars</a>(<a href="#62563" title="sbt.Path">targetJar</a> <a href="#62577" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]" id="62380">signAndVerify</a>(<a title="sbt.Path" id="62497">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="62498">signConfiguration</a>: <a href="#8100" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="62499">targetJar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62500">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#62360" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#62497" title="sbt.Path">jar</a>, <a href="#62498" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#62365" title="=&gt; String">alias</a>, <a href="Pack.scala.html#62351" title="(sbt.Path)sbt.SignJar.SignOption">signedJar</a>(<a href="#62499" title="sbt.Path">targetJar</a>) <a href="#62507" title="(sbt.SignJar.SignOption)List[sbt.SignJar.SignOption]">::</a> <a href="#62498" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#62366" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>.<span title="=&gt; List[sbt.SignJar.SignOption]">toList</span>, <a href="#62500" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="Pack.scala.html#62361" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#62497" title="sbt.Path">jar</a>, <a href="#62498" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#62366" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#62500" title="sbt.Logger">log</a>).<a title="((String) =&gt; java.lang.String)Option[java.lang.String]" id="19234">map</a>(<a title="String" id="62535">err</a> =&gt; <span title="java.lang.String(&quot;Signed jar failed verification: &quot;)" class="string">&quot;Signed jar failed verification: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62535" title="String">err</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="62381">gzipJar</a>(<a title="sbt.Path" id="62690">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="Boolean" id="62691">deleteOriginal</a>: <span title="Boolean">Boolean</span>, <a title="sbt.Logger" id="62692">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62694">gzipJar</a> = <a href="#62377" title="(sbt.Path)sbt.Path">gzipJarPath</a>(<a href="#62690" title="sbt.Path">jar</a>)
		<a href="FileTask.scala.html#26296" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span>, <a href="FileTask.scala.html#26294" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">gzipJar</a> <a href="FileTask.scala.html#26316" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62690" title="sbt.Path">jar</a>, <a href="#62692" title="sbt.Logger">log</a>)
		{
			<a href="#62692" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Gzipping &quot;)" class="string">&quot;Gzipping &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62690" title="sbt.Path">jar</a>)
			<a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15430" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">gzip</a>(<a href="#62690" title="sbt.Path">jar</a>, <a href="#62694" title="sbt.Path">gzipJar</a>, <a href="#62692" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
				(<span title="Option[String]" class="keyword">if</span>(<a href="#62691" title="Boolean">deleteOriginal</a>) <a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15486" title="(Iterable[sbt.Path],Boolean,sbt.Logger)Option[String]">clean</a>(<a href="#62690" title="sbt.Path">jar</a> <a href="#62716" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#62692" title="sbt.Logger">log</a>) <span class="keyword">else</span> <span title="object None">None</span>)
		}.<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#62694" title="sbt.Path">gzipJar</a> <a href="#62723" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  This method only does anything if
	* its outputs are out of date with respect to 'jar'.  Note that it does not determine if the signing configuration has changed.
	* See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="62382">signAndPack200</a>(<a title="sbt.Path" id="62445">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="62446">signConfiguration</a>: <a href="#8100" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="62447">targetDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62448">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62450">signedJar</a> = <a href="#62447" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#18070" title="(String)sbt.Path">/</a> <a href="#62445" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="62451">packedJar</a> = <a href="#62378" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#62450" title="sbt.Path">signedJar</a>)
		<span class="keyword">import</span> signConfiguration._

		<a href="FileTask.scala.html#26296" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign and pack200&quot;)" class="string">&quot;sign and pack200&quot;</span>, <a href="FileTask.scala.html#26295" title="implicit sbt.FileTasks.wrapProducts : (=&gt; Iterable[sbt.Path])sbt.ProductsWrapper">List</a>(<a href="#62451" title="sbt.Path">packedJar</a>, <a href="#62450" title="sbt.Path">signedJar</a>) <a href="FileTask.scala.html#26316" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62445" title="sbt.Path">jar</a>, <a href="#62448" title="sbt.Logger">log</a>) {
			<a href="#62448" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression and signing &quot;)" class="string">&quot;Applying pack200 compression and signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62445" title="sbt.Path">jar</a>)
			<a href="#62383" title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">signAndPack</a>(<a href="#62445" title="sbt.Path">jar</a>, <a href="#62450" title="sbt.Path">signedJar</a>, <a href="#62451" title="sbt.Path">packedJar</a>, <a href="#62365" title="=&gt; String">alias</a>, <a href="#62366" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#62448" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="#62380" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#62445" title="sbt.Path">jar</a>, <a href="#62446" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#62450" title="sbt.Path">signedJar</a>, <a href="#62448" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#11343" title="sbt.Jars">Jars</a>(<a href="#62451" title="sbt.Path">packedJar</a> <a href="#62550" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#62450" title="sbt.Path">signedJar</a> <a href="#62553" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>))
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]" id="62383">signAndPack</a>(<a title="sbt.Path" id="62489">jarPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62490">signedPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62491">out</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="String" id="62492">alias</a>: <span title="String">String</span>, <a title="Seq[sbt.SignJar.SignOption]" id="62493">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption], <a title="sbt.Logger" id="62494">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">import</span> Pack._
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#62599" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#62489" title="sbt.Path">jarPath</a>, <a href="#62491" title="sbt.Path">out</a>, <a href="#62494" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62601" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#62491" title="sbt.Path">out</a>, <a href="#62490" title="sbt.Path">signedPath</a>, <a href="#62494" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62360" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#62490" title="sbt.Path">signedPath</a>, <a href="#62492" title="String">alias</a>, <a href="#62493" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#62494" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62599" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#62490" title="sbt.Path">signedPath</a>, <a href="#62491" title="sbt.Path">out</a>, <a href="#62494" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62601" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#62491" title="sbt.Path">out</a>, <a href="#62490" title="sbt.Path">signedPath</a>, <a href="#62494" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62361" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#62490" title="sbt.Path">signedPath</a>, <a href="#62493" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#62494" title="sbt.Logger">log</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="62384">pack200Only</a>(<a title="sbt.Path" id="62582">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62583">targetDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62584">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62586">targetJar</a> = <a href="#62583" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#18070" title="(String)sbt.Path">/</a> <a href="#62582" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="62587">packedJar</a> = <a href="#62378" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#62586" title="sbt.Path">targetJar</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="62588">packResult</a> =
			<a href="FileTask.scala.html#26296" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;pack200&quot;)" class="string">&quot;pack200&quot;</span>, <a href="FileTask.scala.html#26294" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">packedJar</a> <a href="FileTask.scala.html#26316" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62582" title="sbt.Path">jar</a>, <a href="#62584" title="sbt.Logger">log</a>)
			{
				<a href="#62584" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression to &quot;)" class="string">&quot;Applying pack200 compression to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62582" title="sbt.Path">jar</a>)
				<a href="Pack.scala.html#6844" title="object sbt.Pack">Pack</a>.<a href="Pack.scala.html#62599" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#62582" title="sbt.Path">jar</a>, <a href="#62587" title="sbt.Path">packedJar</a>, <a href="#62584" title="sbt.Logger">log</a>)
			}
		<a href="#62588" title="Option[String]">packResult</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
		{
			<span title="Left[String,Nothing]" class="keyword">case</span> Some(<a title="String" id="62611">err</a>) =&gt; <a title="(String)Left[String,Nothing]" id="1171">Left</a>(<a href="#62611" title="String">err</a>)
			<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#62385" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#62582" title="sbt.Path">jar</a>, <a href="#62583" title="sbt.Path">targetDirectory</a>, <a href="#62584" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="62643">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#11343" title="sbt.Jars">Jars</a>(<a href="#62587" title="sbt.Path">packedJar</a> <a href="#62644" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#62643" title="List[sbt.Path]">jars</a>))
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="62385">copyJar</a>(<a title="sbt.Path" id="62614">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62615">targetDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62616">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62618">targetJar</a> = <a href="#62615" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#18070" title="(String)sbt.Path">/</a> <a href="#62614" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#26296" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;copy jar&quot;)" class="string">&quot;copy jar&quot;</span>, <a href="FileTask.scala.html#26294" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#26316" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62614" title="sbt.Path">jar</a>, <a href="#62616" title="sbt.Logger">log</a>)( <a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15477" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">copyFile</a>(<a href="#62614" title="sbt.Path">jar</a>, <a href="#62618" title="sbt.Path">targetJar</a>, <a href="#62616" title="sbt.Logger">log</a>) ).<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#62618" title="sbt.Path">targetJar</a> <a href="#62632" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,sbt.Path,sbt.Logger)Option[String]" id="62386">writeXML</a>(<a title="String" id="62767">xmlString</a>: <span title="String">String</span>, <a title="sbt.Path" id="62768">outputPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62769">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
		<a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15491" title="(java.io.File,String,sbt.Logger)Option[String]">write</a>(<a href="#62768" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>, <a href="#62767" title="String">xmlString</a>, <a href="#62769" title="sbt.Logger">log</a>)
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath' if the hashes are different.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]" id="62387">writeXML</a>(<a title="scala.xml.Elem" id="62764">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="sbt.Path" id="62765">outputPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62766">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">val</span> <a title="String" id="62855">xmlString</a> =
		{
			<span class="keyword">import</span> scala.xml.Utility
			<span class="keyword">object</span> <a title="object WithToXML" id="62857">WithToXML</a> {
				<span class="keyword">def</span> <a title="(scala.xml.Elem,Boolean)java.lang.String" id="62861">toXML</a>(<a title="scala.xml.Elem" id="62863">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="Boolean" id="62864">stripComments</a>: <span title="Boolean">Boolean</span>) = <span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node)String" id="62877">toXML</a>(<a href="#62863" title="scala.xml.Elem">xml</a>).<a title="()java.lang.String" id="5816">toString</a> <span class="comment">// this will only be called for 2.8, which defaults to stripComments= false, unlike 2.7</span>
			}
			<span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.WebstartScalaProject.another28Hack : (AnyRef)object WithToXML" id="62859">another28Hack</a>(<a title="AnyRef" id="63011">any</a>: <a title="AnyRef" id="1962">AnyRef</a>) = <a href="#62857" title="object WithToXML">WithToXML</a>
			scala.xml.<span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node,Boolean)String" id="62878">toXML</a>(<a href="#62764" title="scala.xml.Elem">xml</a>, <span title="Boolean(false)" class="keyword">false</span>) <span class="comment">// 2.8 doesn't have this method anymore, so the above implicit will kick in for 2.8 only</span>
		}
		<span title="Option[String]" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#62765" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#18071" title="=&gt; Boolean">exists</a>)
		{
			<a href="#62766" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file did not exist, writing inline XML to &quot;)" class="string">&quot;JNLP file did not exist, writing inline XML to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62765" title="sbt.Path">outputPath</a>)
			<a href="#62386" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#62855" title="String">xmlString</a>, <a href="#62765" title="sbt.Path">outputPath</a>, <a href="#62766" title="sbt.Logger">log</a>)
		}
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="Either[String,Option[String]]" id="63028">result</a> =
				<span class="keyword">for</span>( <a title="((Array[Byte]) =&gt; Either[String,Option[String]])Either[String,Option[String]]" id="63038">xmlHash</a> &lt;- <a href="Hash.scala.html#57019" title="(String,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#62855" title="String">xmlString</a>, <a href="#62766" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span>; <a title="((Array[Byte]) =&gt; Option[String])Either[String,Option[String]] with Product" id="63048">fileHash</a> &lt;- <a href="Hash.scala.html#57020" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#62765" title="sbt.Path">outputPath</a>, <a href="#62766" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span> ) <span class="keyword">yield</span>
				{
					<span title="Option[String]" class="keyword">if</span>(<a href="#63038" title="Array[Byte]">xmlHash</a> <a title="(Any)Boolean" id="17330">deepEquals</a> <a href="#63048" title="Array[Byte]">fileHash</a>)
					{
						<a href="#62766" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file &quot;)" class="string">&quot;JNLP file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62765" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; uptodate.&quot;)" class="string">&quot; uptodate.&quot;</span>)
						<span title="object None">None</span>
					}
					<span class="keyword">else</span>
					{
						<a href="#62766" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Inline JNLP XML modified, updating file &quot;)" class="string">&quot;Inline JNLP XML modified, updating file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62765" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
						<a href="#62386" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#62855" title="String">xmlString</a>, <a href="#62765" title="sbt.Path">outputPath</a>, <a href="#62766" title="sbt.Logger">log</a>)
					}
				}
			<a href="#63028" title="Either[String,Option[String]]">result</a>.<a title="((String) =&gt; Option[String],(Option[String]) =&gt; Option[String])Option[String]" id="25883">fold</a>(<a title="String" id="63056">err</a> =&gt; <a title="(String)Some[String]" id="286">Some</a>(<a href="#63056" title="String">err</a>), <a title="Option[String]" id="63059">x</a> =&gt; <a href="#63059" title="Option[String]">x</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean)(sbt.Path)sbt.WebstartJarResource" id="62388">jarResource</a>(<a title="Boolean" id="63060">isMain</a>: <span title="Boolean">Boolean</span>)(<a title="sbt.Path" id="63061">jar</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>): <a href="#10380" title="sbt.WebstartJarResource">WebstartJarResource</a> =
		<span title="sbt.WebstartJarResource" class="keyword">new</span> <a href="#10380" title="sbt.WebstartJarResource">WebstartJarResource</a>(<a href="#63061" title="sbt.Path">jar</a>.<a href="Path.scala.html#18085" title="=&gt; java.lang.String">name</a>, <a href="#63061" title="sbt.Path">jar</a>.<a href="Path.scala.html#18080" title="(String)String">relativePathString</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>), <a href="#63060" title="Boolean">isMain</a>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]" id="62389">jarResources</a>(<a title="Iterable[sbt.Path]" id="62770">mainJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="62771">libraries</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource] =
		<a href="#62770" title="Iterable[sbt.Path]">mainJars</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#62388" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(true)" class="keyword">true</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span> <a href="#63062" title="(List[sbt.WebstartJarResource])List[sbt.WebstartJarResource]">:::</a> <a href="#62771" title="Iterable[sbt.Path]">libraries</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#62388" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(false)" class="keyword">false</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span>

	<span class="comment">/** True iff 'directory' is an ancestor (strictly) of 'check'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path)Boolean" id="62390">isInDirectory</a>(<a title="sbt.Path" id="63071">directory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="63072">check</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15577" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#63071" title="sbt.Path">directory</a>, <a href="#63072" title="sbt.Path">check</a>).<a title="=&gt; Boolean" id="19228">isDefined</a> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#63071" title="sbt.Path">directory</a> <a title="(AnyRef)Boolean" id="5738">!=</a> <a href="#63072" title="sbt.Path">check</a>
	<span class="comment">/** Checks the paths in the given options for validity.  See the documentation for WebstartOptions.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.WebstartOptions)Unit" id="62391">verifyOptions</a>(<a title="sbt.WebstartOptions" id="62412">options</a>: <a href="#6459" title="sbt.WebstartOptions">WebstartOptions</a>)
	{
		<span class="keyword">import</span> options._
		<span title="(Boolean,Any)Unit">require</span>(<a href="#62390" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#62300" title="=&gt; sbt.Path">webstartLibDirectory</a>),
			<span title="java.lang.String(&quot;Webstart dependency directory (&quot;)" class="string">&quot;Webstart dependency directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62300" title="=&gt; sbt.Path">webstartLibDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) must be a subdirectory of webstart output directory (&quot;)" class="string">&quot;) must be a subdirectory of webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span>
				<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span title="(Boolean,Any)Unit">require</span>(<a href="#62390" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#62299" title="=&gt; sbt.Path">jnlpFile</a>), <span title="java.lang.String(&quot;Webstart JNLP file output location (&quot;)" class="string">&quot;Webstart JNLP file output location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62299" title="=&gt; sbt.Path">jnlpFile</a> <span title="(Any)java.lang.String">+</span>
			<span title="java.lang.String(&quot;) must be in the webstart output directory (&quot;)" class="string">&quot;) must be in the webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="63093">wz</a> &lt;- <a href="#62304" title="=&gt; Option[sbt.Path]">webstartZip</a>)
			<span title="(Boolean,Any)Unit">require</span>(<span title="=&gt; Boolean">!</span><a href="#62390" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#63093" title="sbt.Path">wz</a>),
				<span title="java.lang.String(&quot;Webstart output zip location (&quot;)" class="string">&quot;Webstart output zip location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#63093" title="sbt.Path">wz</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; cannot be in webstart output directory (&quot;)" class="string">&quot; cannot be in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62297" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
	}
}
<span class="comment">/** The default extension point for a webstart project.  There is one method that is required to be defined: jnlpXML.
* 'webstartSignConfiguration', 'webstartPack200', and 'webstartGzip' are methods of interest. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DefaultWebstartProject extends sbt.BasicWebstartProject with sbt.MavenStyleWebstartPaths with ScalaObject" id="9672">DefaultWebstartProject</a>(<span class="keyword">val</span> <a title="sbt.ProjectInfo" id="63115">info</a>: <a href="ProjectInfo.scala.html#6756" title="sbt.ProjectInfo">ProjectInfo</a>) <span class="keyword">extends</span> <a href="#11484" title="sbt.BasicWebstartProject">BasicWebstartProject</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#8226" title="sbt.MavenStyleWebstartPaths">MavenStyleWebstartPaths</a>
<span class="comment">/** Defines default implementations of all methods in WebstartOptions except for jnlpXML.  packageAction is overridden
* to create a webstart distribution after the normal package operation. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BasicWebstartProject extends sbt.BasicScalaProject with sbt.WebstartScalaProject with sbt.WebstartOptions with sbt.WebstartPaths with ScalaObject" id="11484">BasicWebstartProject</a> <span class="keyword">extends</span> <a href="DefaultProject.scala.html#10776" title="sbt.BasicScalaProject">BasicScalaProject</a> <span class="keyword">with</span> <a href="#8601" title="sbt.WebstartScalaProject">WebstartScalaProject</a> <span class="keyword">with</span> <a href="#6459" title="sbt.WebstartOptions">WebstartOptions</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#7902" title="sbt.WebstartPaths">WebstartPaths</a>
{
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="63102">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration] = <span title="object None">None</span>

	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="63103">webstartExtraLibraries</a> = <a href="DefaultProject.scala.html#35370" title="=&gt; sbt.LibraryDependencies">mainDependencies</a>.<a href="DefaultProject.scala.html#48247" title="=&gt; sbt.PathFinder">scalaJars</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="63104">webstartLibraries</a> = <a href="DefaultProject.scala.html#35364" title="=&gt; sbt.PathFinder">publicClasspath</a> <a href="Path.scala.html#16180" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="DefaultProject.scala.html#35479" title="=&gt; sbt.PathFinder">jarsOfProjectDependencies</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="63105">webstartResources</a> = <a href="Project.scala.html#14919" title="(sbt.PathFinder,sbt.FileFilter)sbt.PathFinder">descendents</a>(<a href="ProjectPaths.scala.html#38357" title="=&gt; sbt.Path">jnlpResourcesPath</a> <a href="Path.scala.html#18068" title="=&gt; sbt.Path">##</a>, <a href="NameFilter.scala.html#8941" title="object sbt.AllPassFilter">AllPassFilter</a>)

	<span class="keyword">def</span> <a title="=&gt; Boolean" id="63106">webstartPack200</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="63107">webstartGzip</a> = <span title="Boolean(true)" class="keyword">true</span>

	<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; BasicWebstartProject.this.Task" id="63108">packageAction</a> = <span class="keyword">super</span>.<a href="DefaultProject.scala.html#35407" title="=&gt; BasicWebstartProject.this.Task">packageAction</a> <a href="TaskManager.scala.html#19297" title="(BasicWebstartProject.this.Task)BasicWebstartProject.this.Task">&amp;&amp;</a> <a href="#62369" title="(sbt.WebstartOptions)BasicWebstartProject.this.Task">webstartTask</a>(<a href="#11484" title="sbt.BasicWebstartProject" class="keyword">this</a>)
}
        </pre>
    </body>
</html>