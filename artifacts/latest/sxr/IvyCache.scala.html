<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IvyCache.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL

<span class="keyword">import</span> org.apache.ivy.{core, plugins, util}
<span class="keyword">import</span> core.cache.{ArtifactOrigin, CacheDownloadOptions, DefaultRepositoryCacheManager}
<span class="keyword">import</span> core.module.descriptor.{Artifact =&gt; IvyArtifact, DefaultArtifact}
<span class="keyword">import</span> plugins.repository.file.{FileRepository=&gt;IvyFileRepository, FileResource}
<span class="keyword">import</span> plugins.repository.{ArtifactResourceResolver, Resource, ResourceDownloader}
<span class="keyword">import</span> plugins.resolver.util.ResolvedResource
<span class="keyword">import</span> util.FileUtil

<span class="keyword">class</span> <a title="class NotInCache extends java.lang.RuntimeException with ScalaObject" id="9255">NotInCache</a>(<span class="keyword">val</span> <a title="sbt.ModuleID" id="46287">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="46288">cause</a>: <span title="Throwable">Throwable</span>)
	<span class="keyword">extends</span> <a title="java.lang.RuntimeException" id="19529">RuntimeException</a>(<a href="#46303" title="(sbt.ModuleID,Throwable)java.lang.String">NotInCache</a>(<a href="#46287" title="sbt.ModuleID">id</a>, <a href="#46288" title="Throwable">cause</a>), <a href="#46288" title="Throwable">cause</a>)
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID)sbt.NotInCache" id="39597" class="keyword">this</a>(<a title="sbt.ModuleID" id="46311">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>) = <a href="#9255" title="NotInCache.this.type" class="keyword">this</a>(<a href="#46311" title="sbt.ModuleID">id</a>, <span title="Null(null)" class="keyword">null</span>)
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.NotInCache" id="9256">NotInCache</a>
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Throwable)java.lang.String" id="46303">apply</a>(<a title="sbt.ModuleID" id="46304">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="46305">cause</a>: <span title="Throwable">Throwable</span>) =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="46307">postfix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#46305" title="Throwable">cause</a> <a title="(AnyRef)Boolean" id="3452">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> (<span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span><a href="#46305" title="Throwable">cause</a>.<span title="()java.lang.String">toString</span>)
		<span title="java.lang.String(&quot;File for &quot;)" class="string">&quot;File for &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46304" title="sbt.ModuleID">id</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not in cache&quot;)" class="string">&quot; not in cache&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46307" title="java.lang.String">postfix</a>
	}
}
<span class="comment">/** Provides methods for working at the level of a single jar file with the default Ivy cache.*/</span>
<span class="keyword">object</span> <a title="object sbt.IvyCache" id="12106">IvyCache</a>
{
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="39613">lockFile</a> = <a title="(java.lang.String,java.lang.String)java.io.File" id="16756" class="keyword">new</a> <span title="java.io.File">File</span>(<a title="object java.lang.System" id="1829">System</a>.<a title="(java.lang.String)java.lang.String" id="18121">getProperty</a>(<span title="java.lang.String(&quot;user.home&quot;)" class="string">&quot;user.home&quot;</span>), <span title="java.lang.String(&quot;.sbt.cache.lock&quot;)" class="string">&quot;.sbt.cache.lock&quot;</span>)
	<span class="comment">/** Caches the given 'file' with the given ID.  It may be retrieved or cleared using this ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="39614">cacheJar</a>(<a title="sbt.ModuleID" id="40326">moduleID</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="40327">file</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="40328">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="40329">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="46323">artifact</a> = <a href="#39625" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#40326" title="sbt.ModuleID">moduleID</a>)
		<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="46324">resolved</a> = <span title="org.apache.ivy.plugins.resolver.util.ResolvedResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="39567">ResolvedResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileResource" id="39464">FileResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileRepository" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileRepository" id="39467">IvyFileRepository</a>, <a href="#40327" title="java.io.File">file</a>), <a href="#40326" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#40046" title="=&gt; String">revision</a>)
		<a href="#39620" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; org.apache.ivy.core.report.ArtifactDownloadReport)org.apache.ivy.core.report.ArtifactDownloadReport">withDefaultCache</a>(<a href="#40328" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#40329" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46400">cache</a> =&gt;
			<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="46401">resolver</a> = <a title="template $anon extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="46402" class="keyword">new</a> <a title="org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="39440">ArtifactResourceResolver</a> { <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.plugins.resolver.util.ResolvedResource" id="46405">resolve</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46408">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a href="#46324" title="org.apache.ivy.plugins.resolver.util.ResolvedResource">resolved</a> }
			<a href="#46400" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.ArtifactResourceResolver,org.apache.ivy.plugins.repository.ResourceDownloader,org.apache.ivy.core.cache.CacheDownloadOptions)org.apache.ivy.core.report.ArtifactDownloadReport" id="45460">download</a>(<a href="#46323" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#46401" title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver">resolver</a>, <span title="sbt.FileDownloader" class="keyword">new</span> <a href="#10767" title="sbt.FileDownloader">FileDownloader</a>, <span title="org.apache.ivy.core.cache.CacheDownloadOptions" class="keyword">new</span> <a title="org.apache.ivy.core.cache.CacheDownloadOptions" id="39270">CacheDownloadOptions</a>)
		}
	}
	<span class="comment">/** Clears the cache of the jar for the given ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="39615">clearCachedJar</a>(<a title="sbt.ModuleID" id="40332">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="40333">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="40334">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">try</span> { <a href="#39617" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; Boolean)Boolean">withCachedJar</a>(<a href="#40332" title="sbt.ModuleID">id</a>, <a href="#40333" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#40334" title="sbt.IvyLogger">log</a>)(<a href="#46447" title="java.io.File">_</a>.<span title="()Boolean">delete</span>) }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="Exception" id="46448">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#40334" title="sbt.IvyLogger">log</a>.<a href="IvyLogger.scala.html#20870" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Error cleaning cached jar: &quot;)" class="string">&quot;Error cleaning cached jar: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46448" title="Exception">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	<span class="comment">/** Copies the cached jar for the given ID to the directory 'toDirectory'.  If the jar is not in the cache, NotInCache is thrown.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)java.io.File" id="39616">retrieveCachedJar</a>(<a title="sbt.ModuleID" id="46449">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="46450">toDirectory</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="46451">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46452">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>) =
		<a href="#39617" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; java.io.File)java.io.File">withCachedJar</a>(<a href="#46449" title="sbt.ModuleID">id</a>, <a href="#46451" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46452" title="sbt.IvyLogger">log</a>) { <a title="java.io.File" id="46456">cachedFile</a> =&gt;
			<span class="keyword">val</span> <a title="java.io.File" id="46457">copyTo</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="16757" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#46450" title="java.io.File">toDirectory</a>, <a href="#46456" title="java.io.File">cachedFile</a>.<a title="()java.lang.String" id="16759">getName</a>)
			<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.File,java.io.File,org.apache.ivy.util.CopyProgressListener)Boolean" id="46473">copy</a>(<a href="#46456" title="java.io.File">cachedFile</a>, <a href="#46457" title="java.io.File">copyTo</a>, <span title="Null(null)" class="keyword">null</span>)
			<a href="#46457" title="java.io.File">copyTo</a>
		}

	<span class="comment">/** Get the location of the cached jar for the given ID in the Ivy cache.  If the jar is not in the cache, NotInCache is thrown .*/</span>
	<span class="keyword">def</span> <a title="[T](sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; T)T" id="39617">withCachedJar</a>[<a title="&gt;: Nothing &lt;: Any" id="39619">T</a>](<a title="sbt.ModuleID" id="39686">id</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="39687">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="39688">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(java.io.File) =&gt; T" id="39689">f</a>: File =&gt; T): <a href="#39619" title="T">T</a> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="46503">cachedFile</a> =
			<span class="keyword">try</span>
			{
				<a href="#39620" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; java.io.File)java.io.File">withDefaultCache</a>(<a href="#39687" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#39688" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46506">cache</a> =&gt;
					<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="46507">artifact</a> = <a href="#39625" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#39686" title="sbt.ModuleID">id</a>)
					<a href="#46506" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.core.cache.ArtifactOrigin)java.io.File" id="45446">getArchiveFileInCache</a>(<a href="#46507" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#39623" title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin">unknownOrigin</a>(<a href="#46507" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>))
				}
			}
			<span class="keyword">catch</span> { <span title="Nothing" class="keyword">case</span> <a title="Exception" id="46525">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="sbt.NotInCache" class="keyword">new</span> <a href="#9255" title="sbt.NotInCache">NotInCache</a>(<a href="#39686" title="sbt.ModuleID">id</a>, <a href="#46525" title="Exception">e</a>) }

		<span title="T" class="keyword">if</span>(<a href="#46503" title="java.io.File">cachedFile</a>.<span title="()Boolean">exists</span>) <a href="#39689" title="(java.io.File)T">f</a>(<a href="#46503" title="java.io.File">cachedFile</a>) <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a href="#39597" title="(sbt.ModuleID)sbt.NotInCache" class="keyword">new</a> <a href="#9255" title="sbt.NotInCache">NotInCache</a>(<a href="#39686" title="sbt.ModuleID">id</a>)
	}
	<span class="comment">/** Calls the given function with the default Ivy cache.*/</span>
	<span class="keyword">def</span> <a title="[T](Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T)T" id="39620">withDefaultCache</a>[<a title="&gt;: Nothing &lt;: Any" id="39622">T</a>](<a title="Option[xsbti.GlobalLock]" id="46395">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46396">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T" id="46397">f</a>: DefaultRepositoryCacheManager =&gt; T): <a href="#39622" title="T">T</a> =
	{
		<span class="keyword">val</span> <a href="#17796" title="(sbt.IvySbt, sbt.FileRepository)">(</a><a href="#46534" title="sbt.IvySbt" id="17796">ivy</a>, <a href="#46534" title="sbt.FileRepository" id="17798">local</a>) = <a href="#39624" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)">basicLocalIvy</a>(<a href="#46395" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46396" title="sbt.IvyLogger">log</a>)
		<a href="#17796" title="sbt.IvySbt">ivy</a>.<a href="Ivy.scala.html#43375" title="((org.apache.ivy.Ivy) =&gt; T)T">withIvy</a> { <a title="org.apache.ivy.Ivy" id="46628">ivy</a> =&gt;
			<span class="keyword">val</span> <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="46629">cache</a> = <a href="#46628" title="org.apache.ivy.Ivy">ivy</a>.<a title="()org.apache.ivy.core.settings.IvySettings" id="43649">getSettings</a>.<a title="()org.apache.ivy.core.cache.RepositoryCacheManager" id="42837">getDefaultRepositoryCacheManager</a>.<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="3446">asInstanceOf</a>[<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="39255">DefaultRepositoryCacheManager</a>]
			<a href="#46629" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(Boolean)Unit" id="45444">setUseOrigin</a>(<span title="Boolean(false)" class="keyword">false</span>)
			<a href="#46397" title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager)T">f</a>(<a href="#46629" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="39623">unknownOrigin</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46523">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a title="object org.apache.ivy.core.cache.ArtifactOrigin" id="39253">ArtifactOrigin</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="46509">unkwnown</a>(<a href="#46523" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>)
	<span class="comment">/** A minimal Ivy setup with only a local resolver and the current directory as the base directory.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)" id="39624">basicLocalIvy</a>(<a title="Option[xsbti.GlobalLock]" id="46537">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="46538">log</a>: <a href="IvyLogger.scala.html#11568" title="sbt.IvyLogger">IvyLogger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.FileRepository" id="46540">local</a> = <a href="IvyInterface.scala.html#12835" title="object sbt.Resolver">Resolver</a>.<a href="IvyInterface.scala.html#43263" title="(Option[java.io.File])sbt.FileRepository">defaultLocal</a>(<span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.IvyPaths" id="46541">paths</a> = <span title="sbt.IvyPaths" class="keyword">new</span> <a href="IvyConfigurations.scala.html#11250" title="sbt.IvyPaths">IvyPaths</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>), <span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.InlineIvyConfiguration" id="46542">conf</a> = <span title="sbt.InlineIvyConfiguration" class="keyword">new</span> <a href="IvyConfigurations.scala.html#12918" title="sbt.InlineIvyConfiguration">InlineIvyConfiguration</a>(<a href="#46541" title="sbt.IvyPaths">paths</a>, <a title="(sbt.FileRepository*)Seq[sbt.FileRepository]" id="734">Seq</a>(<a href="#46540" title="sbt.FileRepository">local</a>), <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <span title="Boolean(false)" class="keyword">false</span>, <a href="#46537" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#46538" title="sbt.IvyLogger">log</a>)
		<span title="(sbt.IvySbt,sbt.FileRepository)(sbt.IvySbt, sbt.FileRepository)">(</span><span title="sbt.IvySbt" class="keyword">new</span> <a href="Ivy.scala.html#9390" title="sbt.IvySbt">IvySbt</a>(<a href="#46542" title="sbt.InlineIvyConfiguration">conf</a>), <a href="#46540" title="sbt.FileRepository">local</a>)
	}
	<span class="comment">/** Creates a default jar artifact based on the given ID.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact" id="39625">defaultArtifact</a>(<a title="sbt.ModuleID" id="46325">moduleID</a>: <a href="IvyInterface.scala.html#13008" title="sbt.ModuleID">ModuleID</a>): <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span> =
		<span title="org.apache.ivy.core.module.descriptor.DefaultArtifact" class="keyword">new</span> <a title="org.apache.ivy.core.module.descriptor.DefaultArtifact" id="39369">DefaultArtifact</a>(<a href="Ivy.scala.html#9391" title="object sbt.IvySbt">IvySbt</a>.<a href="Ivy.scala.html#43452" title="(sbt.ModuleID)org.apache.ivy.core.module.id.ModuleRevisionId">toID</a>(<a href="#46325" title="sbt.ModuleID">moduleID</a>), <span title="Null(null)" class="keyword">null</span>, <a href="#46325" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#40044" title="=&gt; String">name</a>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
}
<span class="comment">/** Required by Ivy for copying to the cache.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FileDownloader extends java.lang.Object with org.apache.ivy.plugins.repository.ResourceDownloader with NotNull with ScalaObject" id="10767">FileDownloader</a> <span class="keyword">extends</span> <a title="org.apache.ivy.plugins.repository.ResourceDownloader" id="39419">ResourceDownloader</a> <span class="keyword">with</span> <a title="NotNull" id="193">NotNull</a>
{
	<span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.Resource,java.io.File)Unit" id="46444">download</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="46650">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>, <a title="org.apache.ivy.plugins.repository.Resource" id="46651">resource</a>: <a title="org.apache.ivy.plugins.repository.Resource" id="39422">Resource</a>, <a title="java.io.File" id="46652">dest</a>: <span title="java.io.File">File</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#46652" title="java.io.File">dest</a>.<span title="()Boolean">exists</span>()) <a href="#46652" title="java.io.File">dest</a>.<span title="()Boolean">delete</span>()
		<span class="keyword">val</span> <a title="java.io.File" id="46653">part</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#46652" title="java.io.File">dest</a>.<a title="()java.lang.String" id="16764">getAbsolutePath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.part&quot;)" class="string">&quot;.part&quot;</span>)
		<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.InputStream,java.io.File,org.apache.ivy.util.CopyProgressListener)Unit" id="46477">copy</a>(<a href="#46651" title="org.apache.ivy.plugins.repository.Resource">resource</a>.<a title="()java.io.InputStream" id="42955">openStream</a>, <a href="#46653" title="java.io.File">part</a>, <span title="Null(null)" class="keyword">null</span>)
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2690">!</a><a href="#46653" title="java.io.File">part</a>.<a title="(java.io.File)Boolean" id="16788">renameTo</a>(<a href="#46652" title="java.io.File">dest</a>))
			<a title="(String)Nothing" id="6476">error</a>(<span title="java.lang.String(&quot;Could not move temporary file &quot;)" class="string">&quot;Could not move temporary file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46653" title="java.io.File">part</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to final location &quot;)" class="string">&quot; to final location &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#46652" title="java.io.File">dest</a>)
	}
}
        </pre>
    </body>
</html>