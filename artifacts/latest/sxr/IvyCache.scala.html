<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>IvyCache.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010  Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.URL

<span class="keyword">import</span> org.apache.ivy.{core, plugins, util}
<span class="keyword">import</span> core.cache.{ArtifactOrigin, CacheDownloadOptions, DefaultRepositoryCacheManager}
<span class="keyword">import</span> core.module.descriptor.{Artifact =&gt; IvyArtifact, DefaultArtifact}
<span class="keyword">import</span> plugins.repository.file.{FileRepository=&gt;IvyFileRepository, FileResource}
<span class="keyword">import</span> plugins.repository.{ArtifactResourceResolver, Resource, ResourceDownloader}
<span class="keyword">import</span> plugins.resolver.util.ResolvedResource
<span class="keyword">import</span> util.FileUtil

<span class="keyword">class</span> <a title="class NotInCache extends java.lang.RuntimeException with ScalaObject" id="7614">NotInCache</a>(<span class="keyword">val</span> <a title="sbt.ModuleID" id="83611">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="83612">cause</a>: <span title="Throwable">Throwable</span>)
	<span class="keyword">extends</span> <a title="java.lang.RuntimeException" id="19484">RuntimeException</a>(<a href="#83627" title="(sbt.ModuleID,Throwable)java.lang.String">NotInCache</a>(<a href="#83611" title="sbt.ModuleID">id</a>, <a href="#83612" title="Throwable">cause</a>), <a href="#83612" title="Throwable">cause</a>)
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID)sbt.NotInCache" id="83607" class="keyword">this</a>(<a title="sbt.ModuleID" id="83635">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>) = <a href="#7614" title="NotInCache.this.type" class="keyword">this</a>(<a href="#83635" title="sbt.ModuleID">id</a>, <span title="Null(null)" class="keyword">null</span>)
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.NotInCache" id="7615">NotInCache</a>
{
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Throwable)java.lang.String" id="83627">apply</a>(<a title="sbt.ModuleID" id="83628">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="Throwable" id="83629">cause</a>: <span title="Throwable">Throwable</span>) =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="83631">postfix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#83629" title="Throwable">cause</a> <a title="(AnyRef)Boolean" id="3457">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> (<span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span><a href="#83629" title="Throwable">cause</a>.<span title="()java.lang.String">toString</span>)
		<span title="java.lang.String(&quot;File for &quot;)" class="string">&quot;File for &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83628" title="sbt.ModuleID">id</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not in cache&quot;)" class="string">&quot; not in cache&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83631" title="java.lang.String">postfix</a>
	}
}
<span class="comment">/** Provides methods for working at the level of a single jar file with the default Ivy cache.*/</span>
<span class="keyword">object</span> <a title="object sbt.IvyCache" id="10393">IvyCache</a>
{
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="83647">lockFile</a> = <a title="(java.lang.String,java.lang.String)java.io.File" id="16005" class="keyword">new</a> <span title="java.io.File">File</span>(<a title="object java.lang.System" id="1831">System</a>.<a title="(java.lang.String)java.lang.String" id="34097">getProperty</a>(<span title="java.lang.String(&quot;user.home&quot;)" class="string">&quot;user.home&quot;</span>), <span title="java.lang.String(&quot;.sbt.cache.lock&quot;)" class="string">&quot;.sbt.cache.lock&quot;</span>)
	<span class="comment">/** Caches the given 'file' with the given ID.  It may be retrieved or cleared using this ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="83648">cacheJar</a>(<a title="sbt.ModuleID" id="83679">moduleID</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="83680">file</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="83681">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83682">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="83683">artifact</a> = <a href="#83659" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#83679" title="sbt.ModuleID">moduleID</a>)
		<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="83684">resolved</a> = <span title="org.apache.ivy.plugins.resolver.util.ResolvedResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.util.ResolvedResource" id="21077">ResolvedResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileResource" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileResource" id="83595">FileResource</a>(<span title="org.apache.ivy.plugins.repository.file.FileRepository" class="keyword">new</span> <a title="org.apache.ivy.plugins.repository.file.FileRepository" id="83598">IvyFileRepository</a>, <a href="#83680" title="java.io.File">file</a>), <a href="#83679" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#21897" title="=&gt; String">revision</a>)
		<a href="#83654" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; org.apache.ivy.core.report.ArtifactDownloadReport)org.apache.ivy.core.report.ArtifactDownloadReport">withDefaultCache</a>(<a href="#83681" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83682" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="83760">cache</a> =&gt;
			<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="83761">resolver</a> = <a title="template $anon extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="83762" class="keyword">new</a> <a title="org.apache.ivy.plugins.repository.ArtifactResourceResolver" id="21052">ArtifactResourceResolver</a> { <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.plugins.resolver.util.ResolvedResource" id="83765">resolve</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="83768">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a href="#83684" title="org.apache.ivy.plugins.resolver.util.ResolvedResource">resolved</a> }
			<a href="#83760" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.ArtifactResourceResolver,org.apache.ivy.plugins.repository.ResourceDownloader,org.apache.ivy.core.cache.CacheDownloadOptions)org.apache.ivy.core.report.ArtifactDownloadReport" id="78359">download</a>(<a href="#83683" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#83761" title="&lt;refinement&gt; extends java.lang.Object with org.apache.ivy.plugins.repository.ArtifactResourceResolver">resolver</a>, <span title="sbt.FileDownloader" class="keyword">new</span> <a href="#9093" title="sbt.FileDownloader">FileDownloader</a>, <span title="org.apache.ivy.core.cache.CacheDownloadOptions" class="keyword">new</span> <a title="org.apache.ivy.core.cache.CacheDownloadOptions" id="19171">CacheDownloadOptions</a>)
		}
	}
	<span class="comment">/** Clears the cache of the jar for the given ID.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)Unit" id="83649">clearCachedJar</a>(<a title="sbt.ModuleID" id="83805">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="83806">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83807">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>)
	{
		<span class="keyword">try</span> { <a href="#83651" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; Boolean)Boolean">withCachedJar</a>(<a href="#83805" title="sbt.ModuleID">id</a>, <a href="#83806" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83807" title="sbt.IvyLogger">log</a>)(<a href="#83814" title="java.io.File">_</a>.<span title="()Boolean">delete</span>) }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="Exception" id="83815">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#83807" title="sbt.IvyLogger">log</a>.<a href="IvyLogger.scala.html#19533" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Error cleaning cached jar: &quot;)" class="string">&quot;Error cleaning cached jar: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83815" title="Exception">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	<span class="comment">/** Copies the cached jar for the given ID to the directory 'toDirectory'.  If the jar is not in the cache, NotInCache is thrown.*/</span>
	<span class="keyword">def</span> <a title="(sbt.ModuleID,java.io.File,Option[xsbti.GlobalLock],sbt.IvyLogger)java.io.File" id="83650">retrieveCachedJar</a>(<a title="sbt.ModuleID" id="83816">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="java.io.File" id="83817">toDirectory</a>: <span title="java.io.File">File</span>, <a title="Option[xsbti.GlobalLock]" id="83818">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83819">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>) =
		<a href="#83651" title="(sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; java.io.File)java.io.File">withCachedJar</a>(<a href="#83816" title="sbt.ModuleID">id</a>, <a href="#83818" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83819" title="sbt.IvyLogger">log</a>) { <a title="java.io.File" id="83823">cachedFile</a> =&gt;
			<span class="keyword">val</span> <a title="java.io.File" id="83824">copyTo</a> = <a title="(java.io.File,java.lang.String)java.io.File" id="16006" class="keyword">new</a> <span title="java.io.File">File</span>(<a href="#83817" title="java.io.File">toDirectory</a>, <a href="#83823" title="java.io.File">cachedFile</a>.<a title="()java.lang.String" id="16008">getName</a>)
			<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.File,java.io.File,org.apache.ivy.util.CopyProgressListener)Boolean" id="83840">copy</a>(<a href="#83823" title="java.io.File">cachedFile</a>, <a href="#83824" title="java.io.File">copyTo</a>, <span title="Null(null)" class="keyword">null</span>)
			<a href="#83824" title="java.io.File">copyTo</a>
		}

	<span class="comment">/** Get the location of the cached jar for the given ID in the Ivy cache.  If the jar is not in the cache, NotInCache is thrown .*/</span>
	<span class="keyword">def</span> <a title="[T](sbt.ModuleID,Option[xsbti.GlobalLock],sbt.IvyLogger)((java.io.File) =&gt; T)T" id="83651">withCachedJar</a>[<a title="&gt;: Nothing &lt;: Any" id="83653">T</a>](<a title="sbt.ModuleID" id="83808">id</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>, <a title="Option[xsbti.GlobalLock]" id="83809">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83810">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(java.io.File) =&gt; T" id="83811">f</a>: File =&gt; T): <a href="#83653" title="T">T</a> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="83863">cachedFile</a> =
			<span class="keyword">try</span>
			{
				<a href="#83654" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; java.io.File)java.io.File">withDefaultCache</a>(<a href="#83809" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83810" title="sbt.IvyLogger">log</a>) { <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="83866">cache</a> =&gt;
					<span class="keyword">val</span> <a title="org.apache.ivy.core.module.descriptor.Artifact" id="83867">artifact</a> = <a href="#83659" title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact">defaultArtifact</a>(<a href="#83808" title="sbt.ModuleID">id</a>)
					<a href="#83866" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.core.cache.ArtifactOrigin)java.io.File" id="78345">getArchiveFileInCache</a>(<a href="#83867" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>, <a href="#83657" title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin">unknownOrigin</a>(<a href="#83867" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>))
				}
			}
			<span class="keyword">catch</span> { <span title="Nothing" class="keyword">case</span> <a title="Exception" id="83885">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <span title="sbt.NotInCache" class="keyword">new</span> <a href="#7614" title="sbt.NotInCache">NotInCache</a>(<a href="#83808" title="sbt.ModuleID">id</a>, <a href="#83885" title="Exception">e</a>) }

		<span title="T" class="keyword">if</span>(<a href="#83863" title="java.io.File">cachedFile</a>.<span title="()Boolean">exists</span>) <a href="#83811" title="(java.io.File)T">f</a>(<a href="#83863" title="java.io.File">cachedFile</a>) <span class="keyword">else</span> <span title="Nothing" class="keyword">throw</span> <a href="#83607" title="(sbt.ModuleID)sbt.NotInCache" class="keyword">new</a> <a href="#7614" title="sbt.NotInCache">NotInCache</a>(<a href="#83808" title="sbt.ModuleID">id</a>)
	}
	<span class="comment">/** Calls the given function with the default Ivy cache.*/</span>
	<span class="keyword">def</span> <a title="[T](Option[xsbti.GlobalLock],sbt.IvyLogger)((org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T)T" id="83654">withDefaultCache</a>[<a title="&gt;: Nothing &lt;: Any" id="83656">T</a>](<a title="Option[xsbti.GlobalLock]" id="83755">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83756">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>)(<a title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager) =&gt; T" id="83757">f</a>: DefaultRepositoryCacheManager =&gt; T): <a href="#83656" title="T">T</a> =
	{
		<span class="keyword">val</span> <a href="#17583" title="(sbt.IvySbt, sbt.FileRepository)">(</a><a href="#83894" title="sbt.IvySbt" id="17583">ivy</a>, <a href="#83894" title="sbt.FileRepository" id="17585">local</a>) = <a href="#83658" title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)">basicLocalIvy</a>(<a href="#83755" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83756" title="sbt.IvyLogger">log</a>)
		<a href="#17583" title="sbt.IvySbt">ivy</a>.<a href="Ivy.scala.html#19626" title="((org.apache.ivy.Ivy) =&gt; T)T">withIvy</a> { <a title="org.apache.ivy.Ivy" id="83959">ivy</a> =&gt;
			<span class="keyword">val</span> <a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="83960">cache</a> = <a href="#83959" title="org.apache.ivy.Ivy">ivy</a>.<a title="()org.apache.ivy.core.settings.IvySettings" id="20488">getSettings</a>.<a title="()org.apache.ivy.core.cache.RepositoryCacheManager" id="20915">getDefaultRepositoryCacheManager</a>.<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="3451">asInstanceOf</a>[<a title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager" id="19156">DefaultRepositoryCacheManager</a>]
			<a href="#83960" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>.<a title="(Boolean)Unit" id="78343">setUseOrigin</a>(<span title="Boolean(false)" class="keyword">false</span>)
			<a href="#83757" title="(org.apache.ivy.core.cache.DefaultRepositoryCacheManager)T">f</a>(<a href="#83960" title="org.apache.ivy.core.cache.DefaultRepositoryCacheManager">cache</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="83657">unknownOrigin</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="83883">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>) = <a title="object org.apache.ivy.core.cache.ArtifactOrigin" id="19154">ArtifactOrigin</a>.<a title="(org.apache.ivy.core.module.descriptor.Artifact)org.apache.ivy.core.cache.ArtifactOrigin" id="83869">unkwnown</a>(<a href="#83883" title="org.apache.ivy.core.module.descriptor.Artifact">artifact</a>)
	<span class="comment">/** A minimal Ivy setup with only a local resolver and the current directory as the base directory.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[xsbti.GlobalLock],sbt.IvyLogger)(sbt.IvySbt, sbt.FileRepository)" id="83658">basicLocalIvy</a>(<a title="Option[xsbti.GlobalLock]" id="83897">lock</a>: <span title="Option[xsbti.GlobalLock]">Option</span>[xsbti.GlobalLock], <a title="sbt.IvyLogger" id="83898">log</a>: <a href="IvyLogger.scala.html#9870" title="sbt.IvyLogger">IvyLogger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.FileRepository" id="83900">local</a> = <a href="IvyInterface.scala.html#11134" title="object sbt.Resolver">Resolver</a>.<a href="IvyInterface.scala.html#14851" title="(Option[java.io.File])sbt.FileRepository">defaultLocal</a>(<span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.IvyPaths" id="83901">paths</a> = <span title="sbt.IvyPaths" class="keyword">new</span> <a href="IvyConfigurations.scala.html#9564" title="sbt.IvyPaths">IvyPaths</a>(<span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>), <span title="object None">None</span>)
		<span class="keyword">val</span> <a title="sbt.InlineIvyConfiguration" id="83902">conf</a> = <span title="sbt.InlineIvyConfiguration" class="keyword">new</span> <a href="IvyConfigurations.scala.html#11217" title="sbt.InlineIvyConfiguration">InlineIvyConfiguration</a>(<a href="#83901" title="sbt.IvyPaths">paths</a>, <a title="(sbt.FileRepository*)Seq[sbt.FileRepository]" id="730">Seq</a>(<a href="#83900" title="sbt.FileRepository">local</a>), <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <a href="#83897" title="Option[xsbti.GlobalLock]">lock</a>, <a href="#83898" title="sbt.IvyLogger">log</a>)
		<span title="(sbt.IvySbt,sbt.FileRepository)(sbt.IvySbt, sbt.FileRepository)">(</span><span title="sbt.IvySbt" class="keyword">new</span> <a href="Ivy.scala.html#7749" title="sbt.IvySbt">IvySbt</a>(<a href="#83902" title="sbt.InlineIvyConfiguration">conf</a>), <a href="#83900" title="sbt.FileRepository">local</a>)
	}
	<span class="comment">/** Creates a default jar artifact based on the given ID.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.ModuleID)org.apache.ivy.core.module.descriptor.Artifact" id="83659">defaultArtifact</a>(<a title="sbt.ModuleID" id="83685">moduleID</a>: <a href="IvyInterface.scala.html#11292" title="sbt.ModuleID">ModuleID</a>): <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span> =
		<span title="org.apache.ivy.core.module.descriptor.DefaultArtifact" class="keyword">new</span> <a title="org.apache.ivy.core.module.descriptor.DefaultArtifact" id="19258">DefaultArtifact</a>(<a href="Ivy.scala.html#7750" title="object sbt.IvySbt">IvySbt</a>.<a href="Ivy.scala.html#23944" title="(sbt.ModuleID)org.apache.ivy.core.module.id.ModuleRevisionId">toID</a>(<a href="#83685" title="sbt.ModuleID">moduleID</a>), <span title="Null(null)" class="keyword">null</span>, <a href="#83685" title="sbt.ModuleID">moduleID</a>.<a href="IvyInterface.scala.html#21895" title="=&gt; String">name</a>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>, <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
}
<span class="comment">/** Required by Ivy for copying to the cache.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FileDownloader extends java.lang.Object with org.apache.ivy.plugins.repository.ResourceDownloader with NotNull with ScalaObject" id="9093">FileDownloader</a> <span class="keyword">extends</span> <a title="org.apache.ivy.plugins.repository.ResourceDownloader" id="21031">ResourceDownloader</a> <span class="keyword">with</span> <a title="NotNull" id="189">NotNull</a>
{
	<span class="keyword">def</span> <a title="(org.apache.ivy.core.module.descriptor.Artifact,org.apache.ivy.plugins.repository.Resource,java.io.File)Unit" id="83804">download</a>(<a title="org.apache.ivy.core.module.descriptor.Artifact" id="83981">artifact</a>: <span title="org.apache.ivy.core.module.descriptor.Artifact">IvyArtifact</span>, <a title="org.apache.ivy.plugins.repository.Resource" id="83982">resource</a>: <a title="org.apache.ivy.plugins.repository.Resource" id="21034">Resource</a>, <a title="java.io.File" id="83983">dest</a>: <span title="java.io.File">File</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#83983" title="java.io.File">dest</a>.<span title="()Boolean">exists</span>()) <a href="#83983" title="java.io.File">dest</a>.<span title="()Boolean">delete</span>()
		<span class="keyword">val</span> <a title="java.io.File" id="83984">part</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#83983" title="java.io.File">dest</a>.<a title="()java.lang.String" id="16013">getAbsolutePath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.part&quot;)" class="string">&quot;.part&quot;</span>)
		<span title="object org.apache.ivy.util.FileUtil">FileUtil</span>.<a title="(java.io.InputStream,java.io.File,org.apache.ivy.util.CopyProgressListener)Unit" id="83844">copy</a>(<a href="#83982" title="org.apache.ivy.plugins.repository.Resource">resource</a>.<a title="()java.io.InputStream" id="77303">openStream</a>, <a href="#83984" title="java.io.File">part</a>, <span title="Null(null)" class="keyword">null</span>)
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2695">!</a><a href="#83984" title="java.io.File">part</a>.<a title="(java.io.File)Boolean" id="16037">renameTo</a>(<a href="#83983" title="java.io.File">dest</a>))
			<a title="(String)Nothing" id="6085">error</a>(<span title="java.lang.String(&quot;Could not move temporary file &quot;)" class="string">&quot;Could not move temporary file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83984" title="java.io.File">part</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; to final location &quot;)" class="string">&quot; to final location &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83983" title="java.io.File">dest</a>)
	}
}
        </pre>
    </body>
</html>