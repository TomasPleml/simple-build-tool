<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ScaladocInterface.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> xsbti.Logger
<span class="keyword">import</span> Log.debug

<span class="keyword">class</span> <a title="class ScaladocInterface extends java.lang.Object with ScalaObject" id="12278">ScaladocInterface</a>
{
	<span class="keyword">def</span> <a title="(Array[String],Int,xsbti.Logger)Unit" id="87940">run</a>(<a title="Array[String]" id="87942">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="87943">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="87944">log</a>: <a href="xsbti/Logger.java.html#5869" title="xsbti.Logger">Logger</a>) = (<span title="xsbt.Runner" class="keyword">new</span> <a href="#12824" title="xsbt.Runner">Runner</a>(<a href="#87942" title="Array[String]">args</a>, <a href="#87943" title="Int">maximumErrors</a>, <a href="#87944" title="xsbti.Logger">log</a>)).<a href="#87962" title="()Unit">run</a>
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Runner extends java.lang.Object with ScalaObject" id="12824">Runner</a>(<a title="Array[String]" id="87965">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="87966">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="87967">log</a>: <a href="xsbti/Logger.java.html#5869" title="xsbti.Logger">Logger</a>)
{
	<span class="keyword">import</span> scala.tools.nsc.{doc, Global}
	<span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="87954">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span> = <span title="scala.tools.nsc.doc.Settings" class="keyword">new</span> doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>(<a href="Log.scala.html#12681" title="object xsbt.Log">Log</a>.<a href="Log.scala.html#47330" title="(xsbti.Logger)(String) =&gt; Unit">settingsError</a>(<a href="#87967" title="xsbti.Logger">log</a>))
	<span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="87956">command</a> = <a href="Command.scala.html#41069" title="(List[String],scala.tools.nsc.Settings)scala.tools.nsc.CompilerCommand">Command</a>(<a href="#87965" title="Array[String]">args</a>.<a title="=&gt; List[String]" id="16304">toList</a>, <a href="#87954" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)
	<span class="keyword">val</span> <a title="xsbt.LoggerReporter" id="87958">reporter</a> = <a href="LoggerReporter.scala.html#58895" title="(scala.tools.nsc.Settings,Int,xsbti.Logger)xsbt.LoggerReporter">LoggerReporter</a>(<a href="#87954" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>, <a href="#87966" title="Int">maximumErrors</a>, <a href="#87967" title="xsbti.Logger">log</a>)
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="87960">noErrors</a> = <span title="=&gt; Boolean">!</span><a href="#87958" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a title="=&gt; Boolean" id="58920">hasErrors</a> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#87956" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<a title="=&gt; Boolean" id="39495">ok</a>

	<span class="keyword">import</span> forScope._
	<span class="keyword">def</span> <a title="()Unit" id="87962">run</a>()
	{
		<a href="Log.scala.html#47329" title="(xsbti.Logger,=&gt; String)Unit">debug</a>(<a href="#87967" title="xsbti.Logger">log</a>, <span title="java.lang.String(&quot;Calling Scaladoc with arguments:\012\011&quot;)" class="string">&quot;Calling Scaladoc with arguments:\n\t&quot;</span> <a title="(Any)java.lang.String" id="5747">+</a> <a href="#87965" title="Array[String]">args</a>.<a title="(String)String" id="16308">mkString</a>(<span title="java.lang.String(&quot;\012\011&quot;)" class="string">&quot;\n\t&quot;</span>))
		<span title="Unit" class="keyword">if</span>(<a href="#87960" title="=&gt; Boolean">noErrors</a>)
		{
			<span class="keyword">import</span> doc._ <span class="comment">// 2.8 trunk and Beta1-RC4 have doc.DocFactory.  For other Scala versions, the next line creates forScope.DocFactory</span>
			<span class="keyword">val</span> <a title="Runner.this.forScope.DocFactory" id="88500">processor</a> = <span title="Runner.this.forScope.DocFactory" class="keyword">new</span> <a href="#88497" title="Runner.this.forScope.DocFactory">DocFactory</a>(<a href="#87958" title="=&gt; xsbt.LoggerReporter">reporter</a>, <a href="#87954" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)
			<a href="#88500" title="Runner.this.forScope.DocFactory">processor</a>.<a href="#88508" title="(Seq[String])Unit">document</a>(<a href="#87956" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>)
		}
		<a href="#87958" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a href="LoggerReporter.scala.html#58949" title="()Unit">printSummary</a>()
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#87960" title="=&gt; Boolean">noErrors</a>) <span title="Nothing" class="keyword">throw</span> <span title="xsbt.InterfaceCompileFailed" class="keyword">new</span> <a href="CompilerInterface.scala.html#12233" title="xsbt.InterfaceCompileFailed">InterfaceCompileFailed</a>(<a href="#87965" title="Array[String]">args</a>, <span title="java.lang.String(&quot;Scaladoc generation failed&quot;)" class="string">&quot;Scaladoc generation failed&quot;</span>)
	}

	<span class="keyword">object</span> <a title="object Runner.this.forScope" id="87963">forScope</a>
	{
		<span class="keyword">class</span> <a title="class DocFactory extends java.lang.Object with ScalaObject" id="88497">DocFactory</a>(<a title="xsbt.LoggerReporter" id="88509">reporter</a>: <a href="LoggerReporter.scala.html#12569" title="xsbt.LoggerReporter">LoggerReporter</a>, <a title="scala.tools.nsc.doc.Settings" id="88510">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>) <span class="comment">// 2.7 compatibility</span>
		{
			<span class="keyword">object</span> <a title="object DocFactory.this.compiler" id="88506">compiler</a> <span class="keyword">extends</span> <a title="scala.tools.nsc.Global" id="27826">Global</a>(<a href="#87956" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<a title="=&gt; scala.tools.nsc.Settings" id="39472">settings</a>, <a href="#88509" title="xsbt.LoggerReporter">reporter</a>)
			{
				<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="88517">onlyPresentation</a> = <span title="Boolean(true)" class="keyword">true</span>
				<span class="keyword">class</span> <a title="class DefaultDocDriver extends java.lang.Object with ScalaObject" id="88518">DefaultDocDriver</a>  <span class="comment">// 2.8 source compatibility</span>
				{
					<a title="(Boolean)Unit" id="787">assert</a>(<span title="Boolean(false)" class="keyword">false</span>)
					<span class="keyword">def</span> <a title="(Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit])Unit" id="88534">process</a>(<a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="88537">units</a>: <a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="1287">Iterator</a>[CompilationUnit]) = <a title="(String)Unit" id="50222">error</a>(<span title="java.lang.String(&quot;for 2.8 compatibility only&quot;)" class="string">&quot;for 2.8 compatibility only&quot;</span>)
				}
			}
			<span class="keyword">def</span> <a title="(Seq[String])Unit" id="88508">document</a>(<a title="Seq[String]" id="88511">ignore</a>: <a title="Seq[String]" id="729">Seq</a>[String])
			{
				<span class="keyword">import</span> compiler._
				<span class="keyword">val</span> <a title="DocFactory.this.compiler.Run" id="88540">run</a> = <span title="DocFactory.this.compiler.Run" class="keyword">new</span> <a href="#88506" title="DocFactory.this.compiler.Run" id="50422">Run</a>
				<a href="#88540" title="DocFactory.this.compiler.Run">run</a> <a title="(List[String])Unit" id="50487">compile</a> <a href="#87956" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>

				<span class="keyword">val</span> <a title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver" id="88541">generator</a> =
				{
					<span class="keyword">import</span> doc._
					<a title="template $anon extends scala.tools.nsc.doc.DefaultDocDriver" id="88543" class="keyword">new</a> <a title="scala.tools.nsc.doc.DefaultDocDriver" id="88434">DefaultDocDriver</a>
					{
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="DocFactory.this.compiler.type" id="88585">global</a>: compiler.<span class="keyword">type</span> = <a href="#88506" title="object DocFactory.this.compiler">compiler</a>
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="88587">settings</a> = <a href="#88510" title="scala.tools.nsc.doc.Settings">docSettings</a>
					}
				}
				<a href="#88541" title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver">generator</a>.<a title="(Iterator[generator.global.CompilationUnit])Unit" id="88552">process</a>(<a href="#88540" title="DocFactory.this.compiler.Run">run</a>.<a title="=&gt; Iterator[DocFactory.this.compiler.CompilationUnit]" id="50478">units</a>)
			}
		}
	}
}
        </pre>
    </body>
</html>