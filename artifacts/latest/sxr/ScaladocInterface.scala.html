<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ScaladocInterface.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> xsbti.Logger
<span class="keyword">import</span> Log.debug

<span class="keyword">class</span> <a title="class ScaladocInterface extends java.lang.Object with ScalaObject" id="6862">ScaladocInterface</a>
{
	<span class="keyword">def</span> <a title="(Array[String],Int,xsbti.Logger)Unit" id="38081">run</a>(<a title="Array[String]" id="38083">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="38084">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="38085">log</a>: <a href="xsbti/Logger.java.html#7619" title="xsbti.Logger">Logger</a>) = (<span title="xsbt.Runner" class="keyword">new</span> <a href="#7417" title="xsbt.Runner">Runner</a>(<a href="#38083" title="Array[String]">args</a>, <a href="#38084" title="Int">maximumErrors</a>, <a href="#38085" title="xsbti.Logger">log</a>)).<a href="#38103" title="()Unit">run</a>
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Runner extends java.lang.Object with ScalaObject" id="7417">Runner</a>(<a title="Array[String]" id="38106">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="38107">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="38108">log</a>: <a href="xsbti/Logger.java.html#7619" title="xsbti.Logger">Logger</a>)
{
	<span class="keyword">import</span> scala.tools.nsc.{doc, Global}
	<span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="38095">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span> = <span title="scala.tools.nsc.doc.Settings" class="keyword">new</span> doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>(<a href="Log.scala.html#7274" title="object xsbt.Log">Log</a>.<a href="Log.scala.html#34302" title="(xsbti.Logger)(String) =&gt; Unit">settingsError</a>(<a href="#38108" title="xsbti.Logger">log</a>))
	<span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="38097">command</a> = <a href="Command.scala.html#34219" title="(List[String],scala.tools.nsc.Settings)scala.tools.nsc.CompilerCommand">Command</a>(<a href="#38106" title="Array[String]">args</a>.<a title="=&gt; List[String]" id="15975">toList</a>, <a href="#38095" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)
	<span class="keyword">val</span> <a title="xsbt.LoggerReporter" id="38099">reporter</a> = <a href="LoggerReporter.scala.html#34366" title="(scala.tools.nsc.Settings,Int,xsbti.Logger)xsbt.LoggerReporter">LoggerReporter</a>(<a href="#38095" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>, <a href="#38107" title="Int">maximumErrors</a>, <a href="#38108" title="xsbti.Logger">log</a>)
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="38101">noErrors</a> = <span title="=&gt; Boolean">!</span><a href="#38099" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a title="=&gt; Boolean" id="34427">hasErrors</a> <a title="(Boolean)Boolean" id="2694">&amp;&amp;</a> <a href="#38097" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<a title="=&gt; Boolean" id="34248">ok</a>

	<span class="keyword">import</span> forScope._
	<span class="keyword">def</span> <a title="()Unit" id="38103">run</a>()
	{
		<a href="Log.scala.html#34301" title="(xsbti.Logger,=&gt; String)Unit">debug</a>(<a href="#38108" title="xsbti.Logger">log</a>, <span title="java.lang.String(&quot;Calling Scaladoc with arguments:\012\011&quot;)" class="string">&quot;Calling Scaladoc with arguments:\n\t&quot;</span> <a title="(Any)java.lang.String" id="6025">+</a> <a href="#38106" title="Array[String]">args</a>.<a title="(String)String" id="15979">mkString</a>(<span title="java.lang.String(&quot;\012\011&quot;)" class="string">&quot;\n\t&quot;</span>))
		<span title="Unit" class="keyword">if</span>(<a href="#38101" title="=&gt; Boolean">noErrors</a>)
		{
			<span class="keyword">import</span> doc._ <span class="comment">// 2.8 trunk and Beta1-RC4 have doc.DocFactory.  For other Scala versions, the next line creates forScope.DocFactory</span>
			<span class="keyword">val</span> <a title="Runner.this.forScope.DocFactory" id="38641">processor</a> = <span title="Runner.this.forScope.DocFactory" class="keyword">new</span> <a href="#38638" title="Runner.this.forScope.DocFactory">DocFactory</a>(<a href="#38099" title="=&gt; xsbt.LoggerReporter">reporter</a>, <a href="#38095" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)
			<a href="#38641" title="Runner.this.forScope.DocFactory">processor</a>.<a href="#38649" title="(Seq[String])Unit">document</a>(<a href="#38097" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>)
		}
		<a href="#38099" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a href="LoggerReporter.scala.html#34456" title="()Unit">printSummary</a>()
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#38101" title="=&gt; Boolean">noErrors</a>) <span title="Nothing" class="keyword">throw</span> <span title="xsbt.InterfaceCompileFailed" class="keyword">new</span> <a href="CompilerInterface.scala.html#6817" title="xsbt.InterfaceCompileFailed">InterfaceCompileFailed</a>(<a href="#38106" title="Array[String]">args</a>, <span title="java.lang.String(&quot;Scaladoc generation failed&quot;)" class="string">&quot;Scaladoc generation failed&quot;</span>)
	}

	<span class="keyword">object</span> <a title="object Runner.this.forScope" id="38104">forScope</a>
	{
		<span class="keyword">class</span> <a title="class DocFactory extends java.lang.Object with ScalaObject" id="38638">DocFactory</a>(<a title="xsbt.LoggerReporter" id="38650">reporter</a>: <a href="LoggerReporter.scala.html#7162" title="xsbt.LoggerReporter">LoggerReporter</a>, <a title="scala.tools.nsc.doc.Settings" id="38651">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>) <span class="comment">// 2.7 compatibility</span>
		{
			<span class="keyword">object</span> <a title="object DocFactory.this.compiler" id="38647">compiler</a> <span class="keyword">extends</span> <a title="scala.tools.nsc.Global" id="21496">Global</a>(<a href="#38097" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<a title="=&gt; scala.tools.nsc.Settings" id="34225">settings</a>, <a href="#38650" title="xsbt.LoggerReporter">reporter</a>)
			{
				<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="38658">onlyPresentation</a> = <span title="Boolean(true)" class="keyword">true</span>
				<span class="keyword">class</span> <a title="class DefaultDocDriver extends java.lang.Object with ScalaObject" id="38659">DefaultDocDriver</a>  <span class="comment">// 2.8 source compatibility</span>
				{
					<a title="(Boolean)Unit" id="791">assert</a>(<span title="Boolean(false)" class="keyword">false</span>)
					<span class="keyword">def</span> <a title="(Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit])Unit" id="38675">process</a>(<a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="38678">units</a>: <a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="1291">Iterator</a>[CompilationUnit]) = <a title="(String)Unit" id="24246">error</a>(<span title="java.lang.String(&quot;for 2.8 compatibility only&quot;)" class="string">&quot;for 2.8 compatibility only&quot;</span>)
				}
			}
			<span class="keyword">def</span> <a title="(Seq[String])Unit" id="38649">document</a>(<a title="Seq[String]" id="38652">ignore</a>: <a title="Seq[String]" id="733">Seq</a>[String])
			{
				<span class="keyword">import</span> compiler._
				<span class="keyword">val</span> <a title="DocFactory.this.compiler.Run" id="38681">run</a> = <span title="DocFactory.this.compiler.Run" class="keyword">new</span> <a href="#38647" title="DocFactory.this.compiler.Run" id="24446">Run</a>
				<a href="#38681" title="DocFactory.this.compiler.Run">run</a> <a title="(List[String])Unit" id="24511">compile</a> <a href="#38097" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>

				<span class="keyword">val</span> <a title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver" id="38682">generator</a> =
				{
					<span class="keyword">import</span> doc._
					<a title="template $anon extends scala.tools.nsc.doc.DefaultDocDriver" id="38684" class="keyword">new</a> <a title="scala.tools.nsc.doc.DefaultDocDriver" id="38575">DefaultDocDriver</a>
					{
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="DocFactory.this.compiler.type" id="38726">global</a>: compiler.<span class="keyword">type</span> = <a href="#38647" title="object DocFactory.this.compiler">compiler</a>
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="38728">settings</a> = <a href="#38651" title="scala.tools.nsc.doc.Settings">docSettings</a>
					}
				}
				<a href="#38682" title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver">generator</a>.<a title="(Iterator[generator.global.CompilationUnit])Unit" id="38693">process</a>(<a href="#38681" title="DocFactory.this.compiler.Run">run</a>.<a title="=&gt; Iterator[DocFactory.this.compiler.CompilationUnit]" id="24502">units</a>)
			}
		}
	}
}
        </pre>
    </body>
</html>