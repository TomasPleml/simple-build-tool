<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>FileUtilities.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> OpenResource._
<span class="keyword">import</span> ErrorHandling.translate

<span class="keyword">import</span> java.io.{ByteArrayOutputStream, BufferedWriter, File, FileInputStream, InputStream, OutputStream}
<span class="keyword">import</span> java.net.{URI, URISyntaxException, URL}
<span class="keyword">import</span> java.nio.charset.Charset
<span class="keyword">import</span> java.util.jar.{Attributes, JarEntry, JarFile, JarInputStream, JarOutputStream, Manifest}
<span class="keyword">import</span> java.util.zip.{GZIPOutputStream, ZipEntry, ZipFile, ZipInputStream, ZipOutputStream}
<span class="keyword">import</span> scala.collection.mutable.HashSet
<span class="keyword">import</span> scala.reflect.{Manifest =&gt; SManifest}
<span class="keyword">import</span> Function.tupled

<span class="keyword">object</span> <a title="object xsbt.FileUtilities" id="6715">FileUtilities</a>
{
	<span class="comment">/** The maximum number of times a unique temporary filename is attempted to be created.*/</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="18404">MaximumTries</a> = <span title="Int(10)" class="int">10</span>
	<span class="comment">/** The producer of randomness for unique name generation.*/</span>
	<span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.util.Random" id="18407">random</a> = <span title="java.util.Random" class="keyword">new</span> java.util.<a title="java.util.Random" id="5936">Random</a>
	<span class="keyword">val</span> <a title="java.io.File" id="18408">temporaryDirectory</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="object java.lang.System">System</span>.<span title="(java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;java.io.tmpdir&quot;)" class="string">&quot;java.io.tmpdir&quot;</span>))
	<span class="comment">/** The size of the byte or char buffer used in various methods.*/</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="Int" id="18410">BufferSize</a> = <span title="Int(8192)" class="int">8192</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="18412">Newline</a> = <span title="object java.lang.System">System</span>.<span title="(java.lang.String)java.lang.String">getProperty</span>(<span title="java.lang.String(&quot;line.separator&quot;)" class="string">&quot;line.separator&quot;</span>)

	<span class="keyword">def</span> <a title="=&gt; java.nio.charset.Charset" id="18414">utf8</a> = <a title="object java.nio.charset.Charset" id="6330">Charset</a>.<a title="(java.lang.String)java.nio.charset.Charset" id="45882">forName</a>(<span title="java.lang.String(&quot;UTF-8&quot;)" class="string">&quot;UTF-8&quot;</span>)

	<span class="keyword">def</span> <a title="(Class[_])java.net.URL" id="18415">classLocation</a>(<a title="Class[_]" id="91938">cl</a>: <span title="Class[_]">Class</span>[_]): <span title="java.net.URL">URL</span> =
	{
		<span class="keyword">val</span> <a title="java.security.CodeSource" id="91942">codeSource</a> = <a href="#91938" title="Class[_]">cl</a>.<a title="()java.security.ProtectionDomain" id="5087">getProtectionDomain</a>.<a title="()java.security.CodeSource" id="65518">getCodeSource</a>
		<span title="java.net.URL" class="keyword">if</span>(<a href="#91942" title="java.security.CodeSource">codeSource</a> <span title="(AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>) <span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;No class location for &quot;)" class="string">&quot;No class location for &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#91938" title="Class[_]">cl</a>)
		<span class="keyword">else</span> <a href="#91942" title="java.security.CodeSource">codeSource</a>.<a title="()java.net.URL" id="65529">getLocation</a>
	}
	<span class="keyword">def</span> <a title="(Class[_])java.io.File" id="18416">classLocationFile</a>(<a title="Class[_]" id="91945">cl</a>: <span title="Class[_]">Class</span>[_]): <span title="java.io.File">File</span> = <a href="#18423" title="(java.net.URL)java.io.File">toFile</a>(<a href="#18415" title="(Class[_])java.net.URL">classLocation</a>(<a href="#91945" title="Class[_]">cl</a>))
	<span class="keyword">def</span> <a title="[T](implicit scala.reflect.Manifest[T])java.net.URL" id="18417">classLocation</a>[<a title="&gt;: Nothing &lt;: Any" id="18419">T</a>](<span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="91956">mf</a>: <span title="scala.reflect.Manifest[T]">SManifest</span>[T]): <span title="java.net.URL">URL</span> = <a href="#18415" title="(Class[_])java.net.URL">classLocation</a>(<a href="#91956" title="scala.reflect.Manifest[T]">mf</a>.<span title="=&gt; Class[_]">erasure</span>)
	<span class="keyword">def</span> <a title="[T](implicit scala.reflect.Manifest[T])java.io.File" id="18420">classLocationFile</a>[<a title="&gt;: Nothing &lt;: Any" id="18422">T</a>](<span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="82831">mf</a>: <span title="scala.reflect.Manifest[T]">SManifest</span>[T]): <span title="java.io.File">File</span> = <a href="#18416" title="(Class[_])java.io.File">classLocationFile</a>(<a href="#82831" title="scala.reflect.Manifest[T]">mf</a>.<span title="=&gt; Class[_]">erasure</span>)

	<span class="keyword">def</span> <a title="(java.net.URL)java.io.File" id="18423">toFile</a>(<a title="java.net.URL" id="91949">url</a>: <span title="java.net.URL">URL</span>) =
		<span class="keyword">try</span> { <span title="(java.net.URI)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#91949" title="java.net.URL">url</a>.<a title="()java.net.URI" id="19277">toURI</a>) }
		<span class="keyword">catch</span> { <span title="java.io.File" class="keyword">case</span> _: <a title="java.net.URISyntaxException" id="4382">URISyntaxException</a> =&gt; <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#91949" title="java.net.URL">url</a>.<span title="()java.lang.String">getPath</span>) }

	<span class="comment">/** Converts the given URL to a File.  If the URL is for an entry in a jar, the File for the jar is returned. */</span>
	<span class="keyword">def</span> <a title="(java.net.URL)java.io.File" id="18424">asFile</a>(<a title="java.net.URL" id="91968">url</a>: <span title="java.net.URL">URL</span>): <span title="java.io.File">File</span> =
	{
		<a href="#91968" title="java.net.URL">url</a>.<span title="()java.lang.String">getProtocol</span> <span title="java.io.File" class="keyword">match</span>
		{
			<span title="java.io.File" class="keyword">case</span> <span title="java.lang.String(&quot;file&quot;)" class="string">&quot;file&quot;</span> =&gt; <a href="#18423" title="(java.net.URL)java.io.File">toFile</a>(<a href="#91968" title="java.net.URL">url</a>)
			<span title="java.io.File" class="keyword">case</span> <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span> =&gt;
				<span class="keyword">val</span> <a title="java.lang.String" id="91969">path</a> = <a href="#91968" title="java.net.URL">url</a>.<span title="()java.lang.String">getPath</span>
				<span class="keyword">val</span> <a title="Int" id="91970">end</a> = <a href="#91969" title="java.lang.String">path</a>.<a title="(Int)Int" id="6373">indexOf</a>(<span title="Int(33)" class="char">'!'</span>)
				<span title="(java.net.URI)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<span title="java.net.URI" class="keyword">new</span> <a title="java.net.URI" id="4568">URI</a>(<span title="java.lang.String" class="keyword">if</span>(<a href="#91970" title="Int">end</a> <a title="(Int)Boolean" id="3080">==</a> -<span title="Int(-1)" class="int">1</span>) <a href="#91969" title="java.lang.String">path</a> <span class="keyword">else</span> <a href="#91969" title="java.lang.String">path</a>.<span title="(Int,Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#91970" title="Int">end</a>)))
			<span title="Nothing" class="keyword">case</span> _ =&gt; <span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Invalid protocol &quot;)" class="string">&quot;Invalid protocol &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#91968" title="java.net.URL">url</a>.<span title="()java.lang.String">getProtocol</span>)
		}
	}
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="18425">assertDirectory</a>(<a title="java.io.File" id="91990">file</a>: <span title="java.io.File">File</span>) { <a title="(Boolean,Any)Unit" id="6476">assert</a>(<a href="#91990" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span>, (<span title="java.lang.String" class="keyword">if</span>(<a href="#91990" title="java.io.File">file</a>.<span title="()Boolean">exists</span>) <span title="java.lang.String(&quot;Not a directory: &quot;)" class="string">&quot;Not a directory: &quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot;Directory not found: &quot;)" class="string">&quot;Directory not found: &quot;</span>) <span title="(Any)java.lang.String">+</span> <a href="#91990" title="java.io.File">file</a>) }
	<span class="keyword">def</span> <a title="(java.io.File*)Unit" id="18426">assertDirectories</a>(<a title="java.io.File*" id="91998">file</a>: <a title="java.io.File*" id="2680">File</a>*) { <a href="#91998" title="java.io.File*">file</a>.<span title="((java.io.File) =&gt; Unit)Unit">foreach</span>(<a href="#18425" title="(java.io.File)Unit">assertDirectory</a>) }

	<span class="comment">// &quot;base.extension&quot; -&gt; (base, extension)</span>
	<span class="keyword">def</span> <a title="(String)(String, String)" id="18427">split</a>(<a title="String" id="92001">name</a>: <span title="String">String</span>): <a title="(String, String)" id="1326">(</a>String, String) =
	{
		<span class="keyword">val</span> <a title="Int" id="92002">lastDot</a> = <a href="#92001" title="String">name</a>.<a title="(Int)Int" id="6375">lastIndexOf</a>(<span title="Int(46)" class="char">'.'</span>)
		<span title="(String, String)" class="keyword">if</span>(<a href="#92002" title="Int">lastDot</a> <span title="(Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>)
			<span title="(java.lang.String,java.lang.String)(java.lang.String, java.lang.String)">(</span><a href="#92001" title="String">name</a>.<span title="(Int,Int)java.lang.String">substring</span>(<span title="Int(0)" class="int">0</span>, <a href="#92002" title="Int">lastDot</a>), <a href="#92001" title="String">name</a>.<span title="(Int)java.lang.String">substring</span>(<a href="#92002" title="Int">lastDot</a><span title="(Int)Int">+</span><span title="Int(1)" class="int">1</span>))
		<span class="keyword">else</span>
			<span title="(String,java.lang.String)(String, java.lang.String)">(</span><a href="#92001" title="String">name</a>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
	}

	<span class="keyword">def</span> <a title="(Iterable[java.io.File])Unit" id="18428">touch</a>(<a title="Iterable[java.io.File]" id="92040">files</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]): <span title="Unit">Unit</span> = <a href="#92040" title="Iterable[java.io.File]">files</a>.<span title="((java.io.File) =&gt; Unit)Unit">foreach</span>(<a href="#18429" title="(java.io.File)Unit">touch</a>)
	<span class="comment">/** Creates a file at the given location.*/</span>
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="18429">touch</a>(<a title="java.io.File" id="92042">file</a>: <span title="java.io.File">File</span>)
	{
		<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92042" title="java.io.File">file</a>.<span title="()java.io.File">getParentFile</span>)
		<span class="keyword">val</span> <a title="Boolean" id="92046">created</a> = <a href="ErrorHandling.scala.html#20062" title="(=&gt; String)(=&gt; Boolean)Boolean">translate</a>(<span title="java.lang.String(&quot;Could not create file &quot;)" class="string">&quot;Could not create file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92042" title="java.io.File">file</a>) { <a href="#92042" title="java.io.File">file</a>.<a title="()Boolean" id="16974">createNewFile</a>() }
		<span title="Unit" class="keyword">if</span>(<a href="#92046" title="Boolean">created</a> <span title="(Boolean)Boolean">||</span> <a href="#92042" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span>)
			<span title="Unit">(</span>)
		<span class="keyword">else</span> <span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#92042" title="java.io.File">file</a>.<a title="(Long)Boolean" id="16985">setLastModified</a>(<span title="object java.lang.System">System</span>.<a title="()Long" id="18311">currentTimeMillis</a>))
			<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Could not update last modified time for file &quot;)" class="string">&quot;Could not update last modified time for file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92042" title="java.io.File">file</a>)
	}
	<span class="keyword">def</span> <a title="(Iterable[java.io.File])Unit" id="18430">createDirectories</a>(<a title="Iterable[java.io.File]" id="92049">dirs</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]): <span title="Unit">Unit</span> =
		<a href="#92049" title="Iterable[java.io.File]">dirs</a>.<span title="((java.io.File) =&gt; Unit)Unit">foreach</span>(<a href="#18431" title="(java.io.File)Unit">createDirectory</a>)
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="18431">createDirectory</a>(<a title="java.io.File" id="92047">dir</a>: <span title="java.io.File">File</span>): <span title="Unit">Unit</span> =
	{
		<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="92052">failBase</a> = <span title="java.lang.String(&quot;Could not create directory &quot;)" class="string">&quot;Could not create directory &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92047" title="java.io.File">dir</a>
		<span title="Unit" class="keyword">if</span>(<a href="#92047" title="java.io.File">dir</a>.<span title="()Boolean">isDirectory</span> <span title="(Boolean)Boolean">||</span> <a href="#92047" title="java.io.File">dir</a>.<a title="()Boolean" id="16983">mkdirs</a>())
			<span title="Unit">(</span>)
		<span class="keyword">else</span> <span title="Unit" class="keyword">if</span>(<a href="#92047" title="java.io.File">dir</a>.<span title="()Boolean">exists</span>)
			<span title="(String)Nothing">error</span>(<a href="#92052" title="=&gt; java.lang.String">failBase</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: file exists and is not a directory.&quot;)" class="string">&quot;: file exists and is not a directory.&quot;</span>)
		<span class="keyword">else</span>
			<span title="(String)Nothing">error</span>(<a href="#92052" title="=&gt; java.lang.String">failBase</a>)
	}
	<span class="keyword">def</span> <a title="(java.io.File,java.io.File)Set[java.io.File]" id="18432">unzip</a>(<a title="java.io.File" id="20904">from</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="20905">toDirectory</a>: <span title="java.io.File">File</span>): <span title="Set[java.io.File]">Set</span>[File] = <a href="#18433" title="(java.io.File,java.io.File,xsbt.NameFilter)Set[java.io.File]">unzip</a>(<a href="#20904" title="java.io.File">from</a>, <a href="#20905" title="java.io.File">toDirectory</a>, <a href="NameFilter.scala.html#7318" title="object xsbt.AllPassFilter">AllPassFilter</a>)
	<span class="keyword">def</span> <a title="(java.io.File,java.io.File,xsbt.NameFilter)Set[java.io.File]" id="18433">unzip</a>(<a title="java.io.File" id="20901">from</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="20902">toDirectory</a>: <span title="java.io.File">File</span>, <a title="xsbt.NameFilter" id="20903">filter</a>: <a href="NameFilter.scala.html#7341" title="xsbt.NameFilter">NameFilter</a>): <span title="Set[java.io.File]">Set</span>[File] = <a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.FileInputStream) =&gt; Set[java.io.File])Set[java.io.File]">fileInputStream</a>(<a href="#20901" title="java.io.File">from</a>)(<a title="java.io.FileInputStream" id="92066">in</a> =&gt; <a href="#18434" title="(java.io.InputStream,java.io.File,xsbt.NameFilter)Set[java.io.File]">unzip</a>(<a href="#92066" title="java.io.FileInputStream">in</a>, <a href="#20902" title="java.io.File">toDirectory</a>, <a href="#20903" title="xsbt.NameFilter">filter</a>))
	<span class="keyword">def</span> <a title="(java.io.InputStream,java.io.File,xsbt.NameFilter)Set[java.io.File]" id="18434">unzip</a>(<a title="java.io.InputStream" id="20888">from</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.io.File" id="20889">toDirectory</a>: <span title="java.io.File">File</span>, <a title="xsbt.NameFilter" id="20890">filter</a>: <a href="NameFilter.scala.html#7341" title="xsbt.NameFilter">NameFilter</a>): <span title="Set[java.io.File]">Set</span>[File] =
	{
		<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#20889" title="java.io.File">toDirectory</a>)
		<a href="OpenResource.scala.html#83063" title="(java.io.InputStream)((java.util.zip.ZipInputStream) =&gt; scala.collection.immutable.Set[java.io.File])scala.collection.immutable.Set[java.io.File]">zipInputStream</a>(<a href="#20888" title="java.io.InputStream">from</a>) { <a title="java.util.zip.ZipInputStream" id="92094">zipInput</a> =&gt; <a href="#18435" title="(java.util.zip.ZipInputStream,java.io.File,xsbt.NameFilter)scala.collection.immutable.Set[java.io.File]">extract</a>(<a href="#92094" title="java.util.zip.ZipInputStream">zipInput</a>, <a href="#20889" title="java.io.File">toDirectory</a>, <a href="#20890" title="xsbt.NameFilter">filter</a>) }
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.util.zip.ZipInputStream,java.io.File,xsbt.NameFilter)scala.collection.immutable.Set[java.io.File]" id="18435">extract</a>(<a title="java.util.zip.ZipInputStream" id="92095">from</a>: <a title="java.util.zip.ZipInputStream" id="20165">ZipInputStream</a>, <a title="java.io.File" id="92096">toDirectory</a>: <span title="java.io.File">File</span>, <a title="xsbt.NameFilter" id="92097">filter</a>: <a href="NameFilter.scala.html#7341" title="xsbt.NameFilter">NameFilter</a>) =
	{
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[java.io.File]" id="92099">set</a> = <span title="scala.collection.mutable.HashSet[java.io.File]" class="keyword">new</span> <a title="scala.collection.mutable.HashSet[java.io.File]" id="20234">HashSet</a>[File]
		<span class="keyword">def</span> <a title="()Unit" id="92100">next</a>()
		{
			<span class="keyword">val</span> <a title="java.util.zip.ZipEntry" id="92101">entry</a> = <a href="#92095" title="java.util.zip.ZipInputStream">from</a>.<a title="()java.util.zip.ZipEntry" id="64270">getNextEntry</a>
			<span title="Unit" class="keyword">if</span>(<a href="#92101" title="java.util.zip.ZipEntry">entry</a> <span title="(AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>)
				<span title="Unit">(</span>)
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <a title="java.lang.String" id="92103">name</a> = <a href="#92101" title="java.util.zip.ZipEntry">entry</a>.<a title="()java.lang.String" id="63983">getName</a>
				<span title="Unit" class="keyword">if</span>(<a href="#92097" title="xsbt.NameFilter">filter</a>.<a href="NameFilter.scala.html#21203" title="(String)Boolean">accept</a>(<a href="#92103" title="java.lang.String">name</a>))
				{
					<span class="keyword">val</span> <a title="java.io.File" id="92107">target</a> = <span title="(java.io.File,java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#92096" title="java.io.File">toDirectory</a>, <a href="#92103" title="java.lang.String">name</a>)
					<span class="comment">//log.debug(&quot;Extracting zip entry '&quot; + name + &quot;' to '&quot; + target + &quot;'&quot;)</span>
					<span title="Unit" class="keyword">if</span>(<a href="#92101" title="java.util.zip.ZipEntry">entry</a>.<a title="()Boolean" id="63998">isDirectory</a>)
						<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92107" title="java.io.File">target</a>)
					<span class="keyword">else</span>
					{
						<a href="#92099" title="scala.collection.mutable.HashSet[java.io.File]">set</a> <a title="(java.io.File)Unit" id="30882">+=</a> <a href="#92107" title="java.io.File">target</a>
						<a href="ErrorHandling.scala.html#20062" title="(=&gt; String)(=&gt; Unit)Unit">translate</a>(<span title="java.lang.String(&quot;Error extracting zip entry '&quot;)" class="string">&quot;Error extracting zip entry '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92103" title="java.lang.String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' to '&quot;)" class="string">&quot;' to '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92107" title="java.io.File">target</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;': &quot;)" class="string">&quot;': &quot;</span>) {
							<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.FileOutputStream) =&gt; Unit)Unit">fileOutputStream</a>(<span title="Boolean(false)" class="keyword">false</span>)(<a href="#92107" title="java.io.File">target</a>) { <a title="java.io.FileOutputStream" id="92126">out</a> =&gt; <a href="#18436" title="(java.io.InputStream,java.io.OutputStream)Unit">transfer</a>(<a href="#92095" title="java.util.zip.ZipInputStream">from</a>, <a href="#92126" title="java.io.FileOutputStream">out</a>) }
						}
					}
					<span class="comment">//target.setLastModified(entry.getTime)</span>
				}
				<span class="keyword">else</span>
				<span title="Unit">{</span>
					<span class="comment">//log.debug(&quot;Ignoring zip entry '&quot; + name + &quot;'&quot;)</span>
				}
				<a href="#92095" title="java.util.zip.ZipInputStream">from</a>.<a title="()Unit" id="64271">closeEntry</a>()
				<a href="#92100" title="()Unit">next</a>()
			}
		}
		<a href="#92100" title="()Unit">next</a>()
		<span title="(java.io.File*)scala.collection.immutable.Set[java.io.File]">Set</span>() <a title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]" id="16922">++</a> <a href="#92099" title="scala.collection.mutable.HashSet[java.io.File]">set</a>
	}

	<span class="comment">/** Copies all bytes from the given input stream to the given output stream.
	* Neither stream is closed.*/</span>
	<span class="keyword">def</span> <a title="(java.io.InputStream,java.io.OutputStream)Unit" id="18436">transfer</a>(<a title="java.io.InputStream" id="83102">in</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.io.OutputStream" id="83103">out</a>: <span title="java.io.OutputStream">OutputStream</span>): <span title="Unit">Unit</span> = <a href="#18438" title="(java.io.InputStream,java.io.OutputStream,Boolean)Unit">transferImpl</a>(<a href="#83102" title="java.io.InputStream">in</a>, <a href="#83103" title="java.io.OutputStream">out</a>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="comment">/** Copies all bytes from the given input stream to the given output stream.  The
	* input stream is closed after the method completes.*/</span>
	<span class="keyword">def</span> <a title="(java.io.InputStream,java.io.OutputStream)Unit" id="18437">transferAndClose</a>(<a title="java.io.InputStream" id="92142">in</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.io.OutputStream" id="92143">out</a>: <span title="java.io.OutputStream">OutputStream</span>): <span title="Unit">Unit</span> = <a href="#18438" title="(java.io.InputStream,java.io.OutputStream,Boolean)Unit">transferImpl</a>(<a href="#92142" title="java.io.InputStream">in</a>, <a href="#92143" title="java.io.OutputStream">out</a>, <span title="Boolean(true)" class="keyword">true</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.InputStream,java.io.OutputStream,Boolean)Unit" id="18438">transferImpl</a>(<a title="java.io.InputStream" id="92139">in</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.io.OutputStream" id="92140">out</a>: <span title="java.io.OutputStream">OutputStream</span>, <a title="Boolean" id="92141">close</a>: <span title="Boolean">Boolean</span>)
	{
		<span class="keyword">try</span>
		{
			<span class="keyword">val</span> <a title="Array[Byte]" id="92144">buffer</a> = <span title="Array[Byte]" class="keyword">new</span> <span title="Array[Byte]">Array</span>[Byte](<a href="#18410" title="=&gt; Int">BufferSize</a>)
			<span class="keyword">def</span> <a title="()Unit" id="92145">read</a>()
			{
				<span class="keyword">val</span> <a title="Int" id="92147">byteCount</a> = <a href="#92139" title="java.io.InputStream">in</a>.<a title="(Array[Byte])Int" id="20893">read</a>(<a href="#92144" title="Array[Byte]">buffer</a>)
				<span title="Unit" class="keyword">if</span>(<a href="#92147" title="Int">byteCount</a> <span title="(Int)Boolean">&gt;=</span> <span title="Int(0)" class="int">0</span>)
				{
					<a href="#92140" title="java.io.OutputStream">out</a>.<a title="(Array[Byte],Int,Int)Unit" id="46704">write</a>(<a href="#92144" title="Array[Byte]">buffer</a>, <span title="Int(0)" class="int">0</span>, <a href="#92147" title="Int">byteCount</a>)
					<a href="#92145" title="()Unit">read</a>()
				}
			}
			<a href="#92145" title="()Unit">read</a>()
		}
		<span class="keyword">finally</span> { <span title="Unit" class="keyword">if</span>(<a href="#92141" title="Boolean">close</a>) <a href="#92139" title="java.io.InputStream">in</a>.<a title="()Unit" id="20897">close</a> }
	}

	<span class="comment">/** Creates a temporary directory and provides its location to the given function.  The directory
	* is deleted after the function returns.*/</span>
	<span class="keyword">def</span> <a title="[T]((java.io.File) =&gt; T)T" id="18439">withTemporaryDirectory</a>[<a title="&gt;: Nothing &lt;: Any" id="18441">T</a>](<a title="(java.io.File) =&gt; T" id="20060">action</a>: File =&gt; T): <a href="#18441" title="T">T</a> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="92171">dir</a> = <a href="#18442" title="=&gt; java.io.File">createTemporaryDirectory</a>
		<span class="keyword">try</span> { <a href="#20060" title="(java.io.File)T">action</a>(<a href="#92171" title="java.io.File">dir</a>) }
		<span class="keyword">finally</span> { <a href="#18445" title="(java.io.File)Unit">delete</a>(<a href="#92171" title="java.io.File">dir</a>) }
	}
	<span class="keyword">def</span> <a title="=&gt; java.io.File" id="18442">createTemporaryDirectory</a>: <span title="java.io.File">File</span> =
	{
		<span class="keyword">def</span> <a title="(Int)java.io.File" id="92173">create</a>(<a title="Int" id="92174">tries</a>: <a title="Int" id="2342">Int</a>): <span title="java.io.File">File</span> =
		{
			<span title="java.io.File" class="keyword">if</span>(<a href="#92174" title="Int">tries</a> <span title="(Int)Boolean">&gt;</span> <a href="#18404" title="=&gt; Int">MaximumTries</a>)
				<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Could not create temporary directory.&quot;)" class="string">&quot;Could not create temporary directory.&quot;</span>)
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <a title="java.lang.String" id="92176">randomName</a> = <span title="java.lang.String(&quot;sbt_&quot;)" class="string">&quot;sbt_&quot;</span> <span title="(Any)java.lang.String">+</span> java.lang.<a title="object java.lang.Integer" id="1729">Integer</a>.<a title="(Int)java.lang.String" id="17067">toHexString</a>(<a href="#18406" title="=&gt; java.util.Random">random</a>.<a title="()Int" id="63644">nextInt</a>)
				<span class="keyword">val</span> <a title="java.io.File" id="92177">f</a> = <span title="(java.io.File,java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#18408" title="=&gt; java.io.File">temporaryDirectory</a>, <a href="#92176" title="java.lang.String">randomName</a>)

				<span class="keyword">try</span> { <a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92177" title="java.io.File">f</a>); <a href="#92177" title="java.io.File">f</a> }
				<span class="keyword">catch</span> { <span title="java.io.File" class="keyword">case</span> <a title="Exception" id="92193">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#92173" title="(Int)java.io.File">create</a>(<a href="#92174" title="Int">tries</a> <span title="(Int)Int">+</span> <span title="Int(1)" class="int">1</span>) }
			}
		}
		<a href="#92173" title="(Int)java.io.File">create</a>(<span title="Int(0)" class="int">0</span>)
	}

	<span class="keyword">private</span>[xsbt] <span class="keyword">def</span> <a title="(java.io.File)Iterable[java.io.File]" id="18443">jars</a>(<a title="java.io.File" id="92212">dir</a>: <span title="java.io.File">File</span>): <span title="Iterable[java.io.File]">Iterable</span>[File] = <a href="#18447" title="(java.io.File,java.io.FileFilter)Array[java.io.File]">listFiles</a>(<a href="#92212" title="java.io.File">dir</a>, <a href="NameFilter.scala.html#90792" title="implicit xsbt.GlobFilter.apply : (String)xsbt.NameFilter">GlobFilter</a>(<span title="java.lang.String(&quot;*.jar&quot;)" class="string">&quot;*.jar&quot;</span>))

	<span class="keyword">def</span> <a title="(Iterable[java.io.File])Unit" id="18444">delete</a>(<a title="Iterable[java.io.File]" id="61237">files</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]): <span title="Unit">Unit</span> = <a href="#61237" title="Iterable[java.io.File]">files</a>.<span title="((java.io.File) =&gt; Unit)Unit">foreach</span>(<a href="#18445" title="(java.io.File)Unit">delete</a>)
	<span class="keyword">def</span> <a title="(java.io.File)Unit" id="18445">delete</a>(<a title="java.io.File" id="61236">file</a>: <span title="java.io.File">File</span>)
	{
		<a href="ErrorHandling.scala.html#20062" title="(=&gt; String)(=&gt; AnyVal)AnyVal">translate</a>(<span title="java.lang.String(&quot;Error deleting file &quot;)" class="string">&quot;Error deleting file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61236" title="java.io.File">file</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span>)
		{
			<span title="AnyVal" class="keyword">if</span>(<a href="#61236" title="java.io.File">file</a>.<span title="()Boolean">isDirectory</span>)
			{
				<a href="#18444" title="(Iterable[java.io.File])Unit">delete</a>(<a href="#18448" title="(java.io.File)Array[java.io.File]">listFiles</a>(<a href="#61236" title="java.io.File">file</a>))
				<a href="#61236" title="java.io.File">file</a>.<span title="()Boolean">delete</span>
			}
			<span class="keyword">else</span> <span title="Unit" class="keyword">if</span>(<a href="#61236" title="java.io.File">file</a>.<span title="()Boolean">exists</span>)
				<a href="#61236" title="java.io.File">file</a>.<span title="()Boolean">delete</span>
		}
	}
	<span class="keyword">def</span> <a title="(java.io.FileFilter)(java.io.File)Array[java.io.File]" id="18446">listFiles</a>(<a title="java.io.FileFilter" id="92223">filter</a>: java.io.<span title="java.io.FileFilter">FileFilter</span>)(<a title="java.io.File" id="92224">dir</a>: <span title="java.io.File">File</span>): <span title="Array[java.io.File]">Array</span>[File] = <a href="#18449" title="(Array[java.io.File])Array[java.io.File]">wrapNull</a>(<a href="#92224" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<a href="#92223" title="java.io.FileFilter">filter</a>))
	<span class="keyword">def</span> <a title="(java.io.File,java.io.FileFilter)Array[java.io.File]" id="18447">listFiles</a>(<a title="java.io.File" id="92221">dir</a>: <span title="java.io.File">File</span>, <a title="java.io.FileFilter" id="92222">filter</a>: java.io.<span title="java.io.FileFilter">FileFilter</span>): <span title="Array[java.io.File]">Array</span>[File] = <a href="#18449" title="(Array[java.io.File])Array[java.io.File]">wrapNull</a>(<a href="#92221" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<a href="#92222" title="java.io.FileFilter">filter</a>))
	<span class="keyword">def</span> <a title="(java.io.File)Array[java.io.File]" id="18448">listFiles</a>(<a title="java.io.File" id="92214">dir</a>: <span title="java.io.File">File</span>): <span title="Array[java.io.File]">Array</span>[File] = <a href="#18449" title="(Array[java.io.File])Array[java.io.File]">wrapNull</a>(<a href="#92214" title="java.io.File">dir</a>.<a title="()Array[java.io.File]" id="16979">listFiles</a>())
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Array[java.io.File])Array[java.io.File]" id="18449">wrapNull</a>(<a title="Array[java.io.File]" id="92243">a</a>: <span title="Array[java.io.File]">Array</span>[File]) =
	{
		<span title="Array[java.io.File]" class="keyword">if</span>(<a href="#92243" title="Array[java.io.File]">a</a> <span title="(AnyRef)Boolean">==</span> <span title="Null(null)" class="keyword">null</span>)
			<span title="Array[java.io.File]" class="keyword">new</span> <span title="Array[java.io.File]">Array</span>[File](<span title="Int(0)" class="int">0</span>)
		<span class="keyword">else</span>
			<a href="#92243" title="Array[java.io.File]">a</a>
	}


	<span class="comment">/** Creates a jar file.
	* @param sources The files to include in the jar file paired with the entry name in the jar.
	* @param outputJar The file to write the jar to.
	* @param manifest The manifest for the jar.*/</span>
	<span class="keyword">def</span> <a title="(Iterable[(java.io.File, String)],java.io.File,java.util.jar.Manifest)Unit" id="18450">jar</a>(<a title="Iterable[(java.io.File, String)]" id="92252">sources</a>: <span title="Iterable[(java.io.File, String)]">Iterable</span>[(File,String)], <a title="java.io.File" id="92253">outputJar</a>: <span title="java.io.File">File</span>, <a title="java.util.jar.Manifest" id="92254">manifest</a>: <a title="java.util.jar.Manifest" id="19192">Manifest</a>): <span title="Unit">Unit</span> =
		<a href="#18452" title="(Iterable[(java.io.File, String)],java.io.File,Option[java.util.jar.Manifest])Unit">archive</a>(<a href="#92252" title="Iterable[(java.io.File, String)]">sources</a>, <a href="#92253" title="java.io.File">outputJar</a>, <span title="(java.util.jar.Manifest)Some[java.util.jar.Manifest]">Some</span>(<a href="#92254" title="java.util.jar.Manifest">manifest</a>))
	<span class="comment">/** Creates a zip file.
	* @param sources The files to include in the zip file paired with the entry name in the zip.
	* @param outputZip The file to write the zip to.*/</span>
	<span class="keyword">def</span> <a title="(Iterable[(java.io.File, String)],java.io.File)Unit" id="18451">zip</a>(<a title="Iterable[(java.io.File, String)]" id="21188">sources</a>: <span title="Iterable[(java.io.File, String)]">Iterable</span>[(File,String)], <a title="java.io.File" id="21189">outputZip</a>: <span title="java.io.File">File</span>): <span title="Unit">Unit</span> =
		<a href="#18452" title="(Iterable[(java.io.File, String)],java.io.File,Option[java.util.jar.Manifest])Unit">archive</a>(<a href="#21188" title="Iterable[(java.io.File, String)]">sources</a>, <a href="#21189" title="java.io.File">outputZip</a>, <span title="object None">None</span>)

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[(java.io.File, String)],java.io.File,Option[java.util.jar.Manifest])Unit" id="18452">archive</a>(<a title="Iterable[(java.io.File, String)]" id="92255">sources</a>: <span title="Iterable[(java.io.File, String)]">Iterable</span>[(File,String)], <a title="java.io.File" id="92256">outputFile</a>: <span title="java.io.File">File</span>, <a title="Option[java.util.jar.Manifest]" id="92257">manifest</a>: <span title="Option[java.util.jar.Manifest]">Option</span>[Manifest])
	{
		<span title="Unit" class="keyword">if</span>(<a href="#92256" title="java.io.File">outputFile</a>.<span title="()Boolean">isDirectory</span>)
			<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Specified output file &quot;)" class="string">&quot;Specified output file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92256" title="java.io.File">outputFile</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; is a directory.&quot;)" class="string">&quot; is a directory.&quot;</span>)
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="java.io.File" id="92259">outputDir</a> = <a href="#92256" title="java.io.File">outputFile</a>.<span title="()java.io.File">getParentFile</span>
			<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92259" title="java.io.File">outputDir</a>)
			<a href="#18455" title="(java.io.File,Option[java.util.jar.Manifest])((java.util.zip.ZipOutputStream) =&gt; Unit)Unit">withZipOutput</a>(<a href="#92256" title="java.io.File">outputFile</a>, <a href="#92257" title="Option[java.util.jar.Manifest]">manifest</a>)
			{ <a title="java.util.zip.ZipOutputStream" id="92264">output</a> =&gt;
				<span class="keyword">val</span> <a title="(String) =&gt; java.util.zip.ZipEntry" id="92265">createEntry</a>: (String =&gt; ZipEntry) = <span title="(String) =&gt; java.util.zip.ZipEntry" class="keyword">if</span>(<a href="#92257" title="Option[java.util.jar.Manifest]">manifest</a>.<a title="=&gt; Boolean" id="30527">isDefined</a>) <span title="java.util.jar.JarEntry" class="keyword">new</span> <a title="java.util.jar.JarEntry" id="19177">JarEntry</a>(<a href="#92267" title="String">_</a>) <span class="keyword">else</span> <span title="java.util.zip.ZipEntry" class="keyword">new</span> <a title="java.util.zip.ZipEntry" id="20120">ZipEntry</a>(<a href="#92270" title="String">_</a>)
				<a href="#18453" title="(Iterable[(java.io.File, String)],java.util.zip.ZipOutputStream)((String) =&gt; java.util.zip.ZipEntry)Unit">writeZip</a>(<a href="#92255" title="Iterable[(java.io.File, String)]">sources</a>, <a href="#92264" title="java.util.zip.ZipOutputStream">output</a>)(<a href="#92265" title="(String) =&gt; java.util.zip.ZipEntry">createEntry</a>)
			}
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[(java.io.File, String)],java.util.zip.ZipOutputStream)((String) =&gt; java.util.zip.ZipEntry)Unit" id="18453">writeZip</a>(<a title="Iterable[(java.io.File, String)]" id="92273">sources</a>: <span title="Iterable[(java.io.File, String)]">Iterable</span>[(File,String)], <a title="java.util.zip.ZipOutputStream" id="92274">output</a>: <span title="java.util.zip.ZipOutputStream">ZipOutputStream</span>)(<a title="(String) =&gt; java.util.zip.ZipEntry" id="92275">createEntry</a>: String =&gt; ZipEntry)
	{
		<span class="keyword">def</span> <a title="(java.io.File,String)Unit" id="92276">add</a>(<a title="java.io.File" id="92277">sourceFile</a>: <span title="java.io.File">File</span>, <a title="String" id="92278">name</a>: <span title="String">String</span>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#92277" title="java.io.File">sourceFile</a>.<span title="()Boolean">isDirectory</span>)
				<span title="Unit">(</span>)
			<span class="keyword">else</span> <span title="Unit" class="keyword">if</span>(<a href="#92277" title="java.io.File">sourceFile</a>.<span title="()Boolean">exists</span>)
			{
				<span class="keyword">val</span> <a title="java.util.zip.ZipEntry" id="92279">nextEntry</a> = <a href="#92275" title="(String)java.util.zip.ZipEntry">createEntry</a>(<a href="#18454" title="(String)String">normalizeName</a>(<a href="#92278" title="String">name</a>))
				<a href="#92279" title="java.util.zip.ZipEntry">nextEntry</a>.<a title="(Long)Unit" id="63984">setTime</a>(<a href="#92277" title="java.io.File">sourceFile</a>.<span title="()Long">lastModified</span>)
				<a href="#92274" title="java.util.zip.ZipOutputStream">output</a>.<a title="(java.util.zip.ZipEntry)Unit" id="63960">putNextEntry</a>(<a href="#92279" title="java.util.zip.ZipEntry">nextEntry</a>)
				<a href="#18437" title="(java.io.InputStream,java.io.OutputStream)Unit">transferAndClose</a>(<a title="(java.io.File)java.io.FileInputStream" id="64063" class="keyword">new</a> <a title="java.io.FileInputStream" id="3782">FileInputStream</a>(<a href="#92277" title="java.io.File">sourceFile</a>), <a href="#92274" title="java.util.zip.ZipOutputStream">output</a>)
			}
			<span class="keyword">else</span>
				<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92277" title="java.io.File">sourceFile</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; does not exist.&quot;)" class="string">&quot; does not exist.&quot;</span>)
		}
		<a href="#92273" title="Iterable[(java.io.File, String)]">sources</a>.<span title="(((java.io.File, String)) =&gt; Unit)Unit">foreach</span>(<span title="((java.io.File, String) =&gt; Unit)((java.io.File, String)) =&gt; Unit">tupled</span>(<a href="#92276" title="(java.io.File,String)Unit">add</a>))
		<a href="#92274" title="java.util.zip.ZipOutputStream">output</a>.<a title="()Unit" id="63961">closeEntry</a>()
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String)String" id="18454">normalizeName</a>(<a title="String" id="92280">name</a>: <span title="String">String</span>) =
	{
		<span class="keyword">val</span> <a title="Char" id="92282">sep</a> = <span title="object java.io.File">File</span>.<span title="Char">separatorChar</span>
		<span title="String" class="keyword">if</span>(<a href="#92282" title="Char">sep</a> <span title="(Char)Boolean">==</span> <span title="Char('/')" class="char">'/'</span>) <a href="#92280" title="String">name</a> <span class="keyword">else</span> <a href="#92280" title="String">name</a>.<a title="(Char,Char)java.lang.String" id="6387">replace</a>(<a href="#92282" title="Char">sep</a>, <span title="Char('/')" class="char">'/'</span>)
	}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File,Option[java.util.jar.Manifest])((java.util.zip.ZipOutputStream) =&gt; Unit)Unit" id="18455">withZipOutput</a>(<a title="java.io.File" id="92260">file</a>: <span title="java.io.File">File</span>, <a title="Option[java.util.jar.Manifest]" id="92261">manifest</a>: <span title="Option[java.util.jar.Manifest]">Option</span>[Manifest])(<a title="(java.util.zip.ZipOutputStream) =&gt; Unit" id="92262">f</a>: ZipOutputStream =&gt; Unit)
	{
		<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.FileOutputStream) =&gt; Any)Any">fileOutputStream</a>(<span title="Boolean(false)" class="keyword">false</span>)(<a href="#92260" title="java.io.File">file</a>) { <a title="java.io.FileOutputStream" id="92373">fileOut</a> =&gt;
			<span class="keyword">val</span> <a href="#17992" title="(java.util.zip.ZipOutputStream, java.lang.String)">(</a><a href="#92374" title="java.util.zip.ZipOutputStream" id="17992">zipOut</a>, <a href="#92374" title="java.lang.String" id="17994">ext</a>) =
				<a href="#92261" title="Option[java.util.jar.Manifest]">manifest</a> <span title="(java.util.zip.ZipOutputStream, java.lang.String)" class="keyword">match</span>
				{
					<span title="(java.util.jar.JarOutputStream, java.lang.String)" class="keyword">case</span> <a id="1">Some</a>(<a title="java.util.jar.Manifest" id="92377">mf</a>) =&gt;
					{
						<span class="keyword">import</span> Attributes.Name.MANIFEST_VERSION
						<span class="keyword">val</span> <a title="java.util.jar.Attributes" id="92379">main</a> = <a href="#92377" title="java.util.jar.Manifest">mf</a>.<a title="()java.util.jar.Attributes" id="60760">getMainAttributes</a>
						<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#92379" title="java.util.jar.Attributes">main</a>.<a title="(Any)Boolean" id="60734">containsKey</a>(<span title="java.util.jar.Attributes.Name">MANIFEST_VERSION</span>))
							<a href="#92379" title="java.util.jar.Attributes">main</a>.<a title="(Any,Any)java.lang.Object" id="60730">put</a>(<span title="java.util.jar.Attributes.Name">MANIFEST_VERSION</span>, <span title="java.lang.String(&quot;1.0&quot;)" class="string">&quot;1.0&quot;</span>)
						<span title="(java.util.jar.JarOutputStream,java.lang.String)(java.util.jar.JarOutputStream, java.lang.String)">(</span><span title="java.util.jar.JarOutputStream" class="keyword">new</span> <a title="java.util.jar.JarOutputStream" id="19189">JarOutputStream</a>(<a href="#92373" title="java.io.FileOutputStream">fileOut</a>, <a href="#92377" title="java.util.jar.Manifest">mf</a>), <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span>)
					}
					<span title="(java.util.zip.ZipOutputStream, java.lang.String)" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="(java.util.zip.ZipOutputStream,java.lang.String)(java.util.zip.ZipOutputStream, java.lang.String)">(</span><span title="java.util.zip.ZipOutputStream" class="keyword">new</span> <span title="java.util.zip.ZipOutputStream">ZipOutputStream</span>(<a href="#92373" title="java.io.FileOutputStream">fileOut</a>), <span title="java.lang.String(&quot;zip&quot;)" class="string">&quot;zip&quot;</span>)
				}
			<span class="keyword">try</span> { <a href="#92262" title="(java.util.zip.ZipOutputStream)Unit">f</a>(<a href="#17992" title="java.util.zip.ZipOutputStream">zipOut</a>) }
			<span class="keyword">catch</span> { <span title="java.lang.String" class="keyword">case</span> <a title="Exception" id="92393">e</a>: <span title="Exception">Exception</span> =&gt; <span title="java.lang.String(&quot;Error writing &quot;)" class="string">&quot;Error writing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#17994" title="java.lang.String">ext</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92393" title="Exception">e</a>.<a title="()java.lang.String" id="18029">toString</a> }
			<span class="keyword">finally</span> { <a href="#17992" title="java.util.zip.ZipOutputStream">zipOut</a>.<a title="()Unit" id="63964">close</a> }
		}
	}
	<span class="keyword">def</span> <a title="(java.io.File,java.io.File)Option[String]" id="18456">relativize</a>(<a title="java.io.File" id="92398">base</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="92399">file</a>: <span title="java.io.File">File</span>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="92400">pathString</a> = <a href="#92399" title="java.io.File">file</a>.<span title="()java.lang.String">getAbsolutePath</span>
		<a href="#18457" title="(java.io.File)Option[String]">baseFileString</a>(<a href="#92398" title="java.io.File">base</a>) <a title="((String) =&gt; Option[String])Option[String]" id="30535">flatMap</a>
		{
			<a title="String" id="92404">baseString</a> =&gt;
			{
				<span title="Option[String]" class="keyword">if</span>(<a href="#92400" title="java.lang.String">pathString</a>.<a title="(java.lang.String)Boolean" id="6370">startsWith</a>(<a href="#92404" title="String">baseString</a>))
					<span title="(java.lang.String)Some[java.lang.String]">Some</span>(<a href="#92400" title="java.lang.String">pathString</a>.<span title="(Int)java.lang.String">substring</span>(<a href="#92404" title="String">baseString</a>.<span title="()Int">length</span>))
				<span class="keyword">else</span>
					<span title="object None">None</span>
			}
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File)Option[String]" id="18457">baseFileString</a>(<a title="java.io.File" id="92401">baseFile</a>: <span title="java.io.File">File</span>): <span title="Option[String]">Option</span>[String] =
	{
		<span title="Option[String]" class="keyword">if</span>(<a href="#92401" title="java.io.File">baseFile</a>.<span title="()Boolean">isDirectory</span>)
		{
			<span class="keyword">val</span> <a title="java.lang.String" id="92408">cp</a> = <a href="#92401" title="java.io.File">baseFile</a>.<span title="()java.lang.String">getAbsolutePath</span>
			<a title="(Boolean)Unit" id="6475">assert</a>(<a href="#92408" title="java.lang.String">cp</a>.<span title="()Int">length</span> <span title="(Int)Boolean">&gt;</span> <span title="Int(0)" class="int">0</span>)
			<span title="Option[String]" class="keyword">if</span>(<a href="#92408" title="java.lang.String">cp</a>.<a title="(Int)Char" id="6350">charAt</a>(<a href="#92408" title="java.lang.String">cp</a>.<span title="()Int">length</span> <a title="(Int)Int" id="3087">-</a> <span title="Int(1)" class="int">1</span>) <span title="(Char)Boolean">==</span> <span title="object java.io.File">File</span>.<span title="Char">separatorChar</span>)
				<span title="(java.lang.String)Some[java.lang.String]">Some</span>(<a href="#92408" title="java.lang.String">cp</a>)
			<span class="keyword">else</span>
				<span title="(java.lang.String)Some[java.lang.String]">Some</span>(<a href="#92408" title="java.lang.String">cp</a> <span title="(Any)java.lang.String">+</span> <span title="object java.io.File">File</span>.<span title="Char">separatorChar</span>)
		}
		<span class="keyword">else</span>
			<span title="object None">None</span>
	}
	<span class="keyword">def</span> <a title="(Iterable[(java.io.File, java.io.File)])Set[java.io.File]" id="18458">copy</a>(<a title="Iterable[(java.io.File, java.io.File)]" id="21137">sources</a>: <span title="Iterable[(java.io.File, java.io.File)]">Iterable</span>[(File,File)]): <span title="Set[java.io.File]">Set</span>[File] = <span title="(java.io.File*)scala.collection.immutable.Set[java.io.File]">Set</span>( <a href="#21137" title="Iterable[(java.io.File, java.io.File)]">sources</a>.<a title="(((java.io.File, java.io.File)) =&gt; java.io.File)Iterable[java.io.File]" id="16138">map</a>(<span title="((java.io.File, java.io.File) =&gt; java.io.File)((java.io.File, java.io.File)) =&gt; java.io.File">tupled</span>(<a href="#18459" title="(java.io.File,java.io.File)java.io.File">copyImpl</a>)).<a title="=&gt; Seq[java.io.File]" id="16172">toSeq</a>.<a title="Array[java.io.File]" id="16030">toArray</a> : _*)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File,java.io.File)java.io.File" id="18459">copyImpl</a>(<a title="java.io.File" id="92513">from</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="92514">to</a>: <span title="java.io.File">File</span>): <span title="java.io.File">File</span> =
	{
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#92514" title="java.io.File">to</a>.<span title="()Boolean">exists</span> <span title="(Boolean)Boolean">||</span> <a href="#92513" title="java.io.File">from</a>.<span title="()Long">lastModified</span> <a title="(Long)Boolean" id="3207">&gt;</a> <a href="#92514" title="java.io.File">to</a>.<span title="()Long">lastModified</span>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#92513" title="java.io.File">from</a>.<span title="()Boolean">isDirectory</span>)
				<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92514" title="java.io.File">to</a>)
			<span class="keyword">else</span>
			{
				<a href="#18431" title="(java.io.File)Unit">createDirectory</a>(<a href="#92514" title="java.io.File">to</a>.<span title="()java.io.File">getParentFile</span>)
				<a href="#18460" title="(java.io.File,java.io.File)Unit">copyFile</a>(<a href="#92513" title="java.io.File">from</a>, <a href="#92514" title="java.io.File">to</a>)
			}
		}
		<a href="#92514" title="java.io.File">to</a>
	}
	<span class="keyword">def</span> <a title="(java.io.File,java.io.File)Unit" id="18460">copyFile</a>(<a title="java.io.File" id="83163">sourceFile</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="83164">targetFile</a>: <span title="java.io.File">File</span>)
	{
		<span title="(Boolean,Any)Unit">require</span>(<a href="#83163" title="java.io.File">sourceFile</a>.<span title="()Boolean">exists</span>, <span title="java.lang.String(&quot;Source file '&quot;)" class="string">&quot;Source file '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83163" title="java.io.File">sourceFile</a>.<span title="()java.lang.String">getAbsolutePath</span> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' does not exist.&quot;)" class="string">&quot;' does not exist.&quot;</span>)
		<span title="(Boolean,Any)Unit">require</span>(<span title="=&gt; Boolean">!</span><a href="#83163" title="java.io.File">sourceFile</a>.<span title="()Boolean">isDirectory</span>, <span title="java.lang.String(&quot;Source file '&quot;)" class="string">&quot;Source file '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83163" title="java.io.File">sourceFile</a>.<span title="()java.lang.String">getAbsolutePath</span> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' is a directory.&quot;)" class="string">&quot;' is a directory.&quot;</span>)
		<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.nio.channels.FileChannel) =&gt; Unit)Unit">fileInputChannel</a>(<a href="#83163" title="java.io.File">sourceFile</a>) { <a title="java.nio.channels.FileChannel" id="92549">in</a> =&gt;
			<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.nio.channels.FileChannel) =&gt; Unit)Unit">fileOutputChannel</a>(<a href="#83164" title="java.io.File">targetFile</a>) { <a title="java.nio.channels.FileChannel" id="92562">out</a> =&gt;
				<span class="keyword">val</span> <a title="Long" id="92563">copied</a> = <a href="#92562" title="java.nio.channels.FileChannel">out</a>.<a title="(java.nio.channels.ReadableByteChannel,Long,Long)Long" id="64732">transferFrom</a>(<a href="#92549" title="java.nio.channels.FileChannel">in</a>, <span title="Long(0L)" class="int">0</span>, <a href="#92549" title="java.nio.channels.FileChannel">in</a>.<span title="()Long">size</span>)
				<span title="Unit" class="keyword">if</span>(<a href="#92563" title="Long">copied</a> <a title="(Long)Boolean" id="3204">!=</a> <a href="#92549" title="java.nio.channels.FileChannel">in</a>.<span title="()Long">size</span>)
					<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Could not copy '&quot;)" class="string">&quot;Could not copy '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83163" title="java.io.File">sourceFile</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' to '&quot;)" class="string">&quot;' to '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#83164" title="java.io.File">targetFile</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' (&quot;)" class="string">&quot;' (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92563" title="Long">copied</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92549" title="java.nio.channels.FileChannel">in</a>.<span title="()Long">size</span> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; bytes copied)&quot;)" class="string">&quot; bytes copied)&quot;</span>)
			}
		}
	}
	<span class="keyword">def</span> <a title="=&gt; java.nio.charset.Charset" id="18461">defaultCharset</a> = <a href="#18414" title="=&gt; java.nio.charset.Charset">utf8</a>
	<span class="keyword">def</span> <a title="(java.io.File,String)Unit" id="18462">write</a>(<a title="java.io.File" id="58023">toFile</a>: <span title="java.io.File">File</span>, <a title="String" id="58024">content</a>: <span title="String">String</span>): <span title="Unit">Unit</span> = <a href="#18463" title="(java.io.File,String,java.nio.charset.Charset)Unit">write</a>(<a href="#58023" title="java.io.File">toFile</a>, <a href="#58024" title="String">content</a>, <a href="#18461" title="=&gt; java.nio.charset.Charset">defaultCharset</a>)
	<span class="keyword">def</span> <a title="(java.io.File,String,java.nio.charset.Charset)Unit" id="18463">write</a>(<a title="java.io.File" id="58020">toFile</a>: <span title="java.io.File">File</span>, <a title="String" id="58021">content</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="58022">charset</a>: <span title="java.nio.charset.Charset">Charset</span>): <span title="Unit">Unit</span> = <a href="#18464" title="(java.io.File,String,java.nio.charset.Charset,Boolean)Unit">write</a>(<a href="#58020" title="java.io.File">toFile</a>, <a href="#58021" title="String">content</a>, <a href="#58022" title="java.nio.charset.Charset">charset</a>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="(java.io.File,String,java.nio.charset.Charset,Boolean)Unit" id="18464">write</a>(<a title="java.io.File" id="58016">file</a>: <span title="java.io.File">File</span>, <a title="String" id="58017">content</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="58018">charset</a>: <span title="java.nio.charset.Charset">Charset</span>, <a title="Boolean" id="58019">append</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
		<a href="#18465" title="(java.io.File,String,java.nio.charset.Charset,Boolean)((java.io.BufferedWriter) =&gt; Unit)Unit">writeCharset</a>(<a href="#58016" title="java.io.File">file</a>, <a href="#58017" title="String">content</a>, <a href="#58018" title="java.nio.charset.Charset">charset</a>, <a href="#58019" title="Boolean">append</a>) { <a href="#92576" title="java.io.BufferedWriter">_</a>.<span title="(java.lang.String)Unit">write</span>(<a href="#58017" title="String">content</a>)  }

	<span class="keyword">def</span> <a title="[T](java.io.File,String,java.nio.charset.Charset,Boolean)((java.io.BufferedWriter) =&gt; T)T" id="18465">writeCharset</a>[<a title="&gt;: Nothing &lt;: Any" id="18467">T</a>](<a title="java.io.File" id="92569">file</a>: <span title="java.io.File">File</span>, <a title="String" id="92570">content</a>: <span title="String">String</span>, <a title="java.nio.charset.Charset" id="92571">charset</a>: <span title="java.nio.charset.Charset">Charset</span>, <a title="Boolean" id="92572">append</a>: <span title="Boolean">Boolean</span>)(<a title="(java.io.BufferedWriter) =&gt; T" id="92573">f</a>: BufferedWriter =&gt; T): <a href="#18467" title="T">T</a> =
	{
		<span title="T" class="keyword">if</span>(<a href="#92571" title="java.nio.charset.Charset">charset</a>.<a title="()java.nio.charset.CharsetEncoder" id="45896">newEncoder</a>.<a title="(java.lang.CharSequence)Boolean" id="48492">canEncode</a>(<a href="#92570" title="String">content</a>))
			<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.BufferedWriter) =&gt; T)T">fileWriter</a>(<a href="#92571" title="java.nio.charset.Charset">charset</a>, <a href="#92572" title="Boolean">append</a>)(<a href="#92569" title="java.io.File">file</a>) { <a href="#92573" title="(java.io.BufferedWriter) =&gt; T">f</a> }
		<span class="keyword">else</span>
			<span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;String cannot be encoded by charset &quot;)" class="string">&quot;String cannot be encoded by charset &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#92571" title="java.nio.charset.Charset">charset</a>.<span title="()java.lang.String">name</span>)
	}

	<span class="keyword">def</span> <a title="(java.io.File)String" id="18468">read</a>(<a title="java.io.File" id="90954">file</a>: <span title="java.io.File">File</span>): <span title="String">String</span> = <a href="#18469" title="(java.io.File,java.nio.charset.Charset)String">read</a>(<a href="#90954" title="java.io.File">file</a>, <a href="#18461" title="=&gt; java.nio.charset.Charset">defaultCharset</a>)
	<span class="keyword">def</span> <a title="(java.io.File,java.nio.charset.Charset)String" id="18469">read</a>(<a title="java.io.File" id="90952">file</a>: <span title="java.io.File">File</span>, <a title="java.nio.charset.Charset" id="90953">charset</a>: <span title="java.nio.charset.Charset">Charset</span>): <span title="String">String</span> =
	{
		<span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="92629">out</a> = <a title="(Int)java.io.ByteArrayOutputStream" id="65356" class="keyword">new</a> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span>(<a href="#90952" title="java.io.File">file</a>.<a title="()Long" id="16973">length</a>.<a title="=&gt; Int" id="3133">toInt</a>)
		<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.FileInputStream) =&gt; Unit)Unit">fileInputStream</a>(<a href="#90952" title="java.io.File">file</a>){ <a title="java.io.FileInputStream" id="92633">in</a> =&gt; <a href="#18436" title="(java.io.InputStream,java.io.OutputStream)Unit">transfer</a>(<a href="#92633" title="java.io.FileInputStream">in</a>, <a href="#92629" title="java.io.ByteArrayOutputStream">out</a>) }
		<a href="#92629" title="java.io.ByteArrayOutputStream">out</a>.<span title="(java.lang.String)java.lang.String">toString</span>(<a href="#90953" title="java.nio.charset.Charset">charset</a>.<span title="()java.lang.String">name</span>)
	}
	<span class="comment">/** doesn't close the InputStream */</span>
	<span class="keyword">def</span> <a title="(java.io.InputStream)String" id="18470">read</a>(<a title="java.io.InputStream" id="90951">in</a>: <span title="java.io.InputStream">InputStream</span>): <span title="String">String</span> = <a href="#18471" title="(java.io.InputStream,java.nio.charset.Charset)String">read</a>(<a href="#90951" title="java.io.InputStream">in</a>, <a href="#18461" title="=&gt; java.nio.charset.Charset">defaultCharset</a>)
	<span class="comment">/** doesn't close the InputStream */</span>
	<span class="keyword">def</span> <a title="(java.io.InputStream,java.nio.charset.Charset)String" id="18471">read</a>(<a title="java.io.InputStream" id="90949">in</a>: <span title="java.io.InputStream">InputStream</span>, <a title="java.nio.charset.Charset" id="90950">charset</a>: <span title="java.nio.charset.Charset">Charset</span>): <span title="String">String</span> =
	{
		<span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="92648">out</a> = <span title="java.io.ByteArrayOutputStream" class="keyword">new</span> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span>
		<a href="#18436" title="(java.io.InputStream,java.io.OutputStream)Unit">transfer</a>(<a href="#90949" title="java.io.InputStream">in</a>, <a href="#92648" title="java.io.ByteArrayOutputStream">out</a>)
		<a href="#92648" title="java.io.ByteArrayOutputStream">out</a>.<span title="(java.lang.String)java.lang.String">toString</span>(<a href="#90950" title="java.nio.charset.Charset">charset</a>.<span title="()java.lang.String">name</span>)
	}
	<span class="keyword">def</span> <a title="(java.io.File)Array[Byte]" id="18472">readBytes</a>(<a title="java.io.File" id="92654">file</a>: <span title="java.io.File">File</span>): <span title="Array[Byte]">Array</span>[Byte] = <a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.FileInputStream) =&gt; Array[Byte])Array[Byte]">fileInputStream</a>(<a href="#92654" title="java.io.File">file</a>)(<a href="#18473" title="(java.io.InputStream)Array[Byte]">readBytes</a>)
	<span class="comment">/** doesn't close the InputStream */</span>
	<span class="keyword">def</span> <a title="(java.io.InputStream)Array[Byte]" id="18473">readBytes</a>(<a title="java.io.InputStream" id="92657">in</a>: <span title="java.io.InputStream">InputStream</span>): <span title="Array[Byte]">Array</span>[Byte] =
	{
		<span class="keyword">val</span> <a title="java.io.ByteArrayOutputStream" id="92661">out</a> = <span title="java.io.ByteArrayOutputStream" class="keyword">new</span> <span title="java.io.ByteArrayOutputStream">ByteArrayOutputStream</span>
		<a href="#18436" title="(java.io.InputStream,java.io.OutputStream)Unit">transfer</a>(<a href="#92657" title="java.io.InputStream">in</a>, <a href="#92661" title="java.io.ByteArrayOutputStream">out</a>)
		<a href="#92661" title="java.io.ByteArrayOutputStream">out</a>.<a title="()Array[Byte]" id="65361">toByteArray</a>
	}

	<span class="comment">// Not optimized for large files</span>
	<span class="keyword">def</span> <a title="(java.io.File)List[String]" id="18474">readLines</a>(<a title="java.io.File" id="70012">file</a>: <span title="java.io.File">File</span>): <span title="List[String]">List</span>[String] = <a href="#18475" title="(java.io.File,java.nio.charset.Charset)List[String]">readLines</a>(<a href="#70012" title="java.io.File">file</a>, <a href="#18461" title="=&gt; java.nio.charset.Charset">defaultCharset</a>)
	<span class="keyword">def</span> <a title="(java.io.File,java.nio.charset.Charset)List[String]" id="18475">readLines</a>(<a title="java.io.File" id="70010">file</a>: <span title="java.io.File">File</span>, <a title="java.nio.charset.Charset" id="70011">charset</a>: <span title="java.nio.charset.Charset">Charset</span>): <span title="List[String]">List</span>[String] =
	{
		<a href="OpenResource.scala.html#83063" title="(java.io.File)((java.io.BufferedReader) =&gt; List[String])List[String]">fileReader</a>(<a href="#70011" title="java.nio.charset.Charset">charset</a>)(<a href="#70010" title="java.io.File">file</a>){ <a title="java.io.BufferedReader" id="92690">in</a> =&gt;
			<span class="keyword">def</span> <a title="(List[String])List[String]" id="92691">readLine</a>(<a title="List[String]" id="92692">accum</a>: <span title="List[String]">List</span>[String]): <span title="List[String]">List</span>[String] =
			{
				<span class="keyword">val</span> <a title="java.lang.String" id="92693">line</a> = <a href="#92690" title="java.io.BufferedReader">in</a>.<a title="()java.lang.String" id="64995">readLine</a>()
				<span title="List[String]" class="keyword">if</span>(<a href="#92693" title="java.lang.String">line</a> <a title="(AnyRef)Boolean" id="6013">eq</a> <span title="Null(null)" class="keyword">null</span>) <a href="#92692" title="List[String]">accum</a>.<a title="=&gt; List[String]" id="15750">reverse</a> <span class="keyword">else</span> <a href="#92691" title="(List[String])List[String]">readLine</a>(<a href="#92693" title="java.lang.String">line</a> <a href="#92695" title="(String)List[String]" id="15700">::</a> <a href="#92692" title="List[String]">accum</a>)
			}
			<a href="#92691" title="(List[String])List[String]">readLine</a>(<a title="object Nil" id="310">Nil</a>)
		}
	}
	<span class="keyword">def</span> <a title="(java.io.File,Seq[String])Unit" id="18476">writeLines</a>(<a title="java.io.File" id="85872">file</a>: <span title="java.io.File">File</span>, <a title="Seq[String]" id="85873">lines</a>: <span title="Seq[String]">Seq</span>[String]): <span title="Unit">Unit</span> = <a href="#18477" title="(java.io.File,Seq[String],java.nio.charset.Charset)Unit">writeLines</a>(<a href="#85872" title="java.io.File">file</a>, <a href="#85873" title="Seq[String]">lines</a>, <a href="#18461" title="=&gt; java.nio.charset.Charset">defaultCharset</a>)
	<span class="keyword">def</span> <a title="(java.io.File,Seq[String],java.nio.charset.Charset)Unit" id="18477">writeLines</a>(<a title="java.io.File" id="85869">file</a>: <span title="java.io.File">File</span>, <a title="Seq[String]" id="85870">lines</a>: <span title="Seq[String]">Seq</span>[String], <a title="java.nio.charset.Charset" id="85871">charset</a>: <span title="java.nio.charset.Charset">Charset</span>): <span title="Unit">Unit</span> = <a href="#18478" title="(java.io.File,Seq[String],java.nio.charset.Charset,Boolean)Unit">writeLines</a>(<a href="#85869" title="java.io.File">file</a>, <a href="#85870" title="Seq[String]">lines</a>, <a href="#85871" title="java.nio.charset.Charset">charset</a>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="(java.io.File,Seq[String],java.nio.charset.Charset,Boolean)Unit" id="18478">writeLines</a>(<a title="java.io.File" id="85865">file</a>: <span title="java.io.File">File</span>, <a title="Seq[String]" id="85866">lines</a>: <span title="Seq[String]">Seq</span>[String], <a title="java.nio.charset.Charset" id="85867">charset</a>: <span title="java.nio.charset.Charset">Charset</span>, <a title="Boolean" id="85868">append</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
		<a href="#18465" title="(java.io.File,String,java.nio.charset.Charset,Boolean)((java.io.BufferedWriter) =&gt; Unit)Unit">writeCharset</a>(<a href="#85865" title="java.io.File">file</a>, <a href="#85866" title="Seq[String]">lines</a>.<a title="=&gt; Option[String]" id="16007">headOption</a>.<a title="(=&gt; String)String" id="30531">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>), <a href="#85867" title="java.nio.charset.Charset">charset</a>, <a href="#85868" title="Boolean">append</a>) { <a title="java.io.BufferedWriter" id="92704">w</a> =&gt;
			<a href="#85866" title="Seq[String]">lines</a>.<span title="((String) =&gt; Unit)Unit">foreach</span> { <a title="String" id="92706">line</a> =&gt; <a href="#92704" title="java.io.BufferedWriter">w</a>.<span title="(java.lang.String)Unit">write</span>(<a href="#92706" title="String">line</a>); <a href="#92704" title="java.io.BufferedWriter">w</a>.<a title="()Unit" id="48432">newLine</a>() }
		}

	<span class="comment">/** A pattern used to split a String by path separator characters.*/</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.util.regex.Pattern" id="18479">PathSeparatorPattern</a> = java.util.regex.<a title="object java.util.regex.Pattern" id="17381">Pattern</a>.<a title="(java.lang.String)java.util.regex.Pattern" id="58323">compile</a>(<span title="object java.io.File">File</span>.<a title="java.lang.String" id="16948">pathSeparator</a>)

	<span class="comment">/** Splits a String around path separator characters. */</span>
	<span class="keyword">def</span> <a title="(String)Array[java.lang.String]" id="18481">pathSplit</a>(<a title="String" id="92709">s</a>: <span title="String">String</span>) = <a href="#18479" title="=&gt; java.util.regex.Pattern">PathSeparatorPattern</a>.<a title="(java.lang.CharSequence)Array[java.lang.String]" id="58331">split</a>(<a href="#92709" title="String">s</a>)

	<span class="comment">/** Move the provided files to a temporary location.
	*   If 'f' returns normally, delete the files.
	*   If 'f' throws an Exception, return the files to their original location.*/</span>
	<span class="keyword">def</span> <a title="[T](Set[java.io.File])(=&gt; T)T" id="18482">stash</a>[<a title="&gt;: Nothing &lt;: Any" id="18484">T</a>](<a title="Set[java.io.File]" id="92712">files</a>: <span title="Set[java.io.File]">Set</span>[File])(<a title="=&gt; T" id="92713">f</a>: =&gt; T): <a href="#18484" title="T">T</a> =
		<a href="#18439" title="((java.io.File) =&gt; T)T">withTemporaryDirectory</a> { <a title="java.io.File" id="92716">dir</a> =&gt;
			<span class="keyword">val</span> <a title="Array[(java.io.File, java.io.File)]" id="92717">stashed</a> = <a href="#18485" title="(java.io.File,Array[java.io.File])Array[(java.io.File, java.io.File)]">stashLocations</a>(<a href="#92716" title="java.io.File">dir</a>, <a href="#92712" title="Set[java.io.File]">files</a>.<a title="Array[java.io.File]" id="18169">toArray</a>)
			<a href="#18486" title="(Iterable[(java.io.File, java.io.File)])Unit">move</a>(<a href="#92717" title="Array[(java.io.File, java.io.File)]">stashed</a>)

			<span class="keyword">try</span> { <a href="#92713" title="=&gt; T">f</a> } <span class="keyword">catch</span> { <span title="T" class="keyword">case</span> <a title="Exception" id="92760">e</a>: <span title="Exception">Exception</span> =&gt;
				<span class="keyword">try</span> { <a href="#18486" title="(Iterable[(java.io.File, java.io.File)])Unit">move</a>(<a href="#92717" title="Array[(java.io.File, java.io.File)]">stashed</a>.<span title="(((java.io.File, java.io.File)) =&gt; (java.io.File, java.io.File))Array[(java.io.File, java.io.File)]">map</span>(<a href="#92764" title="(java.io.File, java.io.File)">_</a>.<a title="=&gt; (java.io.File, java.io.File)" id="17998">swap</a>)); <span title="Nothing" class="keyword">throw</span> <a href="#92760" title="Exception">e</a> }
				<span class="keyword">catch</span> { <span title="Nothing" class="keyword">case</span> _: <span title="Exception">Exception</span> =&gt; <span title="Nothing" class="keyword">throw</span> <a href="#92760" title="Exception">e</a> }
			}
		}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.File,Array[java.io.File])Array[(java.io.File, java.io.File)]" id="18485">stashLocations</a>(<a title="java.io.File" id="92718">dir</a>: <span title="java.io.File">File</span>, <a title="Array[java.io.File]" id="92719">files</a>: <span title="Array[java.io.File]">Array</span>[File]) =
		<span class="keyword">for</span>( <a href="#92723" title="(((java.io.File, Int)) =&gt; (java.io.File, java.io.File))Array[(java.io.File, java.io.File)]" id="15878">(</a><a title="java.io.File" id="92730">file</a>, <a title="Int" id="92731">index</a>) &lt;- <a href="#92719" title="Array[java.io.File]">files</a>.<a title="=&gt; Array[(java.io.File, Int)]" id="15887">zipWithIndex</a>) <span class="keyword">yield</span>
			<span title="(java.io.File,java.io.File)(java.io.File, java.io.File)">(</span><a href="#92730" title="java.io.File">file</a>, <span title="(java.io.File,java.lang.String)java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#92718" title="java.io.File">dir</a>, <a href="#92731" title="implicit scala.Predef.intWrapper : (Int)scala.runtime.RichInt" id="6605">index</a>.<a title="=&gt; String" id="18135">toHexString</a>))

	<span class="keyword">def</span> <a title="(Iterable[(java.io.File, java.io.File)])Unit" id="18486">move</a>(<a title="Iterable[(java.io.File, java.io.File)]" id="92759">files</a>: <span title="Iterable[(java.io.File, java.io.File)]">Iterable</span>[(File, File)]): <span title="Unit">Unit</span> =
		<a href="#92759" title="Iterable[(java.io.File, java.io.File)]">files</a>.<span title="(((java.io.File, java.io.File)) =&gt; Unit)Unit">foreach</span>(<span title="object Function">Function</span>.<span title="((java.io.File, java.io.File) =&gt; Unit)((java.io.File, java.io.File)) =&gt; Unit">tupled</span>(<a href="#18487" title="(java.io.File,java.io.File)Unit">move</a>))
		
	<span class="keyword">def</span> <a title="(java.io.File,java.io.File)Unit" id="18487">move</a>(<a title="java.io.File" id="92757">a</a>: <span title="java.io.File">File</span>, <a title="java.io.File" id="92758">b</a>: <span title="java.io.File">File</span>): <span title="Unit">Unit</span> =
	{
		<span title="Unit" class="keyword">if</span>(<a href="#92758" title="java.io.File">b</a>.<span title="()Boolean">exists</span>)
			<a href="#18445" title="(java.io.File)Unit">delete</a>(<a href="#92758" title="java.io.File">b</a>)
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#92757" title="java.io.File">a</a>.<a title="(java.io.File)Boolean" id="16984">renameTo</a>(<a href="#92758" title="java.io.File">b</a>))
		{
			<a href="#18460" title="(java.io.File,java.io.File)Unit">copyFile</a>(<a href="#92757" title="java.io.File">a</a>, <a href="#92758" title="java.io.File">b</a>)
			<a href="#18445" title="(java.io.File)Unit">delete</a>(<a href="#92757" title="java.io.File">a</a>)
		}
	}
}

        </pre>
    </body>
</html>