<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ConvertResolver.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> org.apache.ivy.{core,plugins}
<span class="keyword">import</span> core.module.id.ModuleRevisionId
<span class="keyword">import</span> plugins.resolver.{ChainResolver, DependencyResolver, IBiblioResolver}
<span class="keyword">import</span> plugins.resolver.{AbstractPatternsBasedResolver, AbstractSshBasedResolver, FileSystemResolver, SFTPResolver, SshResolver, URLResolver}

<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.ConvertResolver" id="10939">ConvertResolver</a>
{
	<span class="comment">/** Converts the given sbt resolver into an Ivy resolver..*/</span>
	<span class="keyword">def</span> <a title="(sbt.Resolver)org.apache.ivy.plugins.resolver.RepositoryResolver" id="40989">apply</a>(<a title="sbt.Resolver" id="40995">r</a>: <a href="IvyInterface.scala.html#12834" title="sbt.Resolver">Resolver</a>) =
	{
		<a href="#40995" title="sbt.Resolver">r</a> <span title="org.apache.ivy.plugins.resolver.RepositoryResolver" class="keyword">match</span>
		{
			<span title="org.apache.ivy.plugins.resolver.IBiblioResolver" class="keyword">case</span> <a title="sbt.MavenRepository" id="40997">repo</a>: <a href="IvyInterface.scala.html#10068" title="sbt.MavenRepository">MavenRepository</a> =&gt;
			{
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.IBiblioResolver" id="41007">resolver</a> = <span title="org.apache.ivy.plugins.resolver.IBiblioResolver" class="keyword">new</span> <span title="org.apache.ivy.plugins.resolver.IBiblioResolver">IBiblioResolver</span>
				<a href="#40990" title="(org.apache.ivy.plugins.resolver.IBiblioResolver,String,String)Unit">initializeMavenStyle</a>(<a href="#41007" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>, <a href="#40997" title="sbt.MavenRepository">repo</a>.<a href="IvyInterface.scala.html#41001" title="=&gt; String">name</a>, <a href="#40997" title="sbt.MavenRepository">repo</a>.<a href="IvyInterface.scala.html#41003" title="=&gt; String">root</a>)
				<a href="#41007" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>
			}
			<span title="org.apache.ivy.plugins.resolver.IBiblioResolver" class="keyword">case</span> <a href="IvyInterface.scala.html#13024" title="object sbt.JavaNet1Repository">JavaNet1Repository</a> =&gt;
			{
				<span class="comment">// Thanks to Matthias Pfau for posting how to use the Maven 1 repository on java.net with Ivy:</span>
				<span class="comment">// http://www.nabble.com/Using-gradle-Ivy-with-special-maven-repositories-td23775489.html</span>
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.IBiblioResolver" id="41744">resolver</a> = <a title="template $anon extends org.apache.ivy.plugins.resolver.IBiblioResolver" id="41745" class="keyword">new</a> <span title="org.apache.ivy.plugins.resolver.IBiblioResolver">IBiblioResolver</span> { <span class="keyword">override</span> <span class="keyword">def</span> <a title="(org.apache.ivy.core.module.id.ModuleRevisionId)org.apache.ivy.core.module.id.ModuleRevisionId" id="41747">convertM2IdForResourceSearch</a>(<a title="org.apache.ivy.core.module.id.ModuleRevisionId" id="41749">mrid</a>: <a title="org.apache.ivy.core.module.id.ModuleRevisionId" id="40979">ModuleRevisionId</a>) = <a href="#41749" title="org.apache.ivy.core.module.id.ModuleRevisionId">mrid</a> }
				<a href="#40990" title="(org.apache.ivy.plugins.resolver.IBiblioResolver,String,String)Unit">initializeMavenStyle</a>(<a href="#41744" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>, <a href="IvyInterface.scala.html#13024" title="object sbt.JavaNet1Repository">JavaNet1Repository</a>.<a href="IvyInterface.scala.html#41743" title="=&gt; java.lang.String">name</a>, <span title="java.lang.String(&quot;http://download.java.net/maven/1/&quot;)" class="string">&quot;http://download.java.net/maven/1/&quot;</span>)
				<a href="#41744" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>.<a title="(java.lang.String)Unit" id="41078">setPattern</a>(<span title="java.lang.String(&quot;[organisation]/[ext]s/[module]-[revision](-[classifier]).[ext]&quot;)" class="string">&quot;[organisation]/[ext]s/[module]-[revision](-[classifier]).[ext]&quot;</span>)
				<a href="#41744" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>
			}
			<span title="org.apache.ivy.plugins.resolver.SshResolver" class="keyword">case</span> <a title="sbt.SshRepository" id="41800">repo</a>: <a href="IvyInterface.scala.html#10650" title="sbt.SshRepository">SshRepository</a> =&gt;
			{
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.SshResolver" id="41837">resolver</a> = <span title="org.apache.ivy.plugins.resolver.SshResolver" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.SshResolver" id="39491">SshResolver</a>
				<a href="#40991" title="(org.apache.ivy.plugins.resolver.AbstractSshBasedResolver,sbt.SshBasedRepository)Unit">initializeSSHResolver</a>(<a href="#41837" title="org.apache.ivy.plugins.resolver.SshResolver">resolver</a>, <a href="#41800" title="sbt.SshRepository">repo</a>)
				<a href="#41800" title="sbt.SshRepository">repo</a>.<a href="IvyInterface.scala.html#41829" title="=&gt; Option[String]">publishPermissions</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a title="String" id="41872">perm</a> =&gt; <a href="#41837" title="org.apache.ivy.plugins.resolver.SshResolver">resolver</a>.<a title="(java.lang.String)Unit" id="41839">setPublishPermissions</a>(<a href="#41872" title="String">perm</a>))
				<a href="#41837" title="org.apache.ivy.plugins.resolver.SshResolver">resolver</a>
			}
			<span title="org.apache.ivy.plugins.resolver.SFTPResolver" class="keyword">case</span> <a title="sbt.SftpRepository" id="41873">repo</a>: <a href="IvyInterface.scala.html#10440" title="sbt.SftpRepository">SftpRepository</a> =&gt;
			{
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.SFTPResolver" id="41887">resolver</a> = <span title="org.apache.ivy.plugins.resolver.SFTPResolver" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.SFTPResolver" id="39476">SFTPResolver</a>
				<a href="#40991" title="(org.apache.ivy.plugins.resolver.AbstractSshBasedResolver,sbt.SshBasedRepository)Unit">initializeSSHResolver</a>(<a href="#41887" title="org.apache.ivy.plugins.resolver.SFTPResolver">resolver</a>, <a href="#41873" title="sbt.SftpRepository">repo</a>)
				<a href="#41887" title="org.apache.ivy.plugins.resolver.SFTPResolver">resolver</a>
			}
			<span title="org.apache.ivy.plugins.resolver.FileSystemResolver" class="keyword">case</span> <a title="sbt.FileRepository" id="41903">repo</a>: <a href="IvyInterface.scala.html#13518" title="sbt.FileRepository">FileRepository</a> =&gt;
			{
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.FileSystemResolver" id="41919">resolver</a> = <span title="org.apache.ivy.plugins.resolver.FileSystemResolver" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.FileSystemResolver" id="39470">FileSystemResolver</a>
				<a href="#41919" title="org.apache.ivy.plugins.resolver.FileSystemResolver">resolver</a>.<span title="(java.lang.String)Unit">setName</span>(<a href="#41903" title="sbt.FileRepository">repo</a>.<a href="IvyInterface.scala.html#41907" title="=&gt; String">name</a>)
				<a href="#40993" title="(org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver,sbt.Patterns)Unit">initializePatterns</a>(<a href="#41919" title="org.apache.ivy.plugins.resolver.FileSystemResolver">resolver</a>, <a href="#41903" title="sbt.FileRepository">repo</a>.<a href="IvyInterface.scala.html#41911" title="=&gt; sbt.Patterns">patterns</a>)
				<span class="keyword">import</span> repo.configuration.{isLocal, isTransactional}
				<a href="#41919" title="org.apache.ivy.plugins.resolver.FileSystemResolver">resolver</a>.<a title="(Boolean)Unit" id="41924">setLocal</a>(<a href="IvyInterface.scala.html#41945" title="=&gt; Boolean">isLocal</a>)
				<a href="IvyInterface.scala.html#41947" title="=&gt; Option[Boolean]">isTransactional</a>.<span title="((Boolean) =&gt; Unit)Unit">foreach</span>(<a title="Boolean" id="41954">value</a> =&gt; <a href="#41919" title="org.apache.ivy.plugins.resolver.FileSystemResolver">resolver</a>.<a title="(java.lang.String)Unit" id="41934">setTransactional</a>(<a href="#41954" title="Boolean">value</a>.<a title="()java.lang.String" id="3443">toString</a>))
				<a href="#41919" title="org.apache.ivy.plugins.resolver.FileSystemResolver">resolver</a>
			}
			<span title="org.apache.ivy.plugins.resolver.URLResolver" class="keyword">case</span> <a title="sbt.URLRepository" id="41955">repo</a>: <a href="IvyInterface.scala.html#10323" title="sbt.URLRepository">URLRepository</a> =&gt;
			{
				<span class="keyword">val</span> <a title="org.apache.ivy.plugins.resolver.URLResolver" id="41965">resolver</a> = <span title="org.apache.ivy.plugins.resolver.URLResolver" class="keyword">new</span> <a title="org.apache.ivy.plugins.resolver.URLResolver" id="39512">URLResolver</a>
				<a href="#41965" title="org.apache.ivy.plugins.resolver.URLResolver">resolver</a>.<span title="(java.lang.String)Unit">setName</span>(<a href="#41955" title="sbt.URLRepository">repo</a>.<a href="IvyInterface.scala.html#41958" title="=&gt; String">name</a>)
				<a href="#40993" title="(org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver,sbt.Patterns)Unit">initializePatterns</a>(<a href="#41965" title="org.apache.ivy.plugins.resolver.URLResolver">resolver</a>, <a href="#41955" title="sbt.URLRepository">repo</a>.<a href="IvyInterface.scala.html#41960" title="=&gt; sbt.Patterns">patterns</a>)
				<a href="#41965" title="org.apache.ivy.plugins.resolver.URLResolver">resolver</a>
			}
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.plugins.resolver.IBiblioResolver,String,String)Unit" id="40990">initializeMavenStyle</a>(<a title="org.apache.ivy.plugins.resolver.IBiblioResolver" id="41738">resolver</a>: <span title="org.apache.ivy.plugins.resolver.IBiblioResolver">IBiblioResolver</span>, <a title="String" id="41739">name</a>: <span title="String">String</span>, <a title="String" id="41740">root</a>: <span title="String">String</span>)
	{
		<a href="#41738" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>.<span title="(java.lang.String)Unit">setName</span>(<a href="#41739" title="String">name</a>)
		<a href="#41738" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>.<a title="(Boolean)Unit" id="41074">setM2compatible</a>(<span title="Boolean(true)" class="keyword">true</span>)
		<a href="#41738" title="org.apache.ivy.plugins.resolver.IBiblioResolver">resolver</a>.<a title="(java.lang.String)Unit" id="41080">setRoot</a>(<a href="#41740" title="String">root</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.plugins.resolver.AbstractSshBasedResolver,sbt.SshBasedRepository)Unit" id="40991">initializeSSHResolver</a>(<a title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver" id="41855">resolver</a>: <span title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">AbstractSshBasedResolver</span>, <a title="sbt.SshBasedRepository" id="41856">repo</a>: <a href="IvyInterface.scala.html#8592" title="sbt.SshBasedRepository">SshBasedRepository</a>)
	{
		<a href="#41855" title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">resolver</a>.<span title="(java.lang.String)Unit">setName</span>(<a href="#41856" title="sbt.SshBasedRepository">repo</a>.<a href="IvyInterface.scala.html#40998" title="=&gt; String">name</a>)
		<a href="#41855" title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">resolver</a>.<a title="(java.io.File)Unit" id="41847">setPassfile</a>(<span title="Null(null)" class="keyword">null</span>)
		<a href="#40993" title="(org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver,sbt.Patterns)Unit">initializePatterns</a>(<a href="#41855" title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">resolver</a>, <a href="#41856" title="sbt.SshBasedRepository">repo</a>.<a href="IvyInterface.scala.html#41804" title="=&gt; sbt.Patterns">patterns</a>)
		<a href="#40992" title="(org.apache.ivy.plugins.resolver.AbstractSshBasedResolver,sbt.RepositoryHelpers.SshConnection)Unit">initializeConnection</a>(<a href="#41855" title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">resolver</a>, <a href="#41856" title="sbt.SshBasedRepository">repo</a>.<a href="IvyInterface.scala.html#41812" title="=&gt; sbt.RepositoryHelpers.SshConnection">connection</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.plugins.resolver.AbstractSshBasedResolver,sbt.RepositoryHelpers.SshConnection)Unit" id="40992">initializeConnection</a>(<a title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver" id="41998">resolver</a>: <span title="org.apache.ivy.plugins.resolver.AbstractSshBasedResolver">AbstractSshBasedResolver</span>, <a title="sbt.RepositoryHelpers.SshConnection" id="41999">connection</a>: RepositoryHelpers.<a href="IvyInterface.scala.html#41858" title="sbt.RepositoryHelpers.SshConnection">SshConnection</a>)
	{
		<span class="keyword">import</span> resolver._
		<span class="keyword">import</span> connection._
		<a href="IvyInterface.scala.html#42006" title="=&gt; Option[String]">hostname</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a href="#41998" title="(java.lang.String)Unit" id="41852">setHost</a>)
		<a href="IvyInterface.scala.html#42008" title="=&gt; Option[Int]">port</a>.<span title="((Int) =&gt; Unit)Unit">foreach</span>(<a href="#41998" title="(Int)Unit" id="41853">setPort</a>)
		<a href="IvyInterface.scala.html#42004" title="=&gt; Option[sbt.RepositoryHelpers.SshAuthentication]">authentication</a> <span title="((sbt.RepositoryHelpers.SshAuthentication) =&gt; Unit)Unit">foreach</span>
			<a href="#42019" title="Unit">{</a>
				<span title="Unit" class="keyword">case</span> RepositoryHelpers.PasswordAuthentication(<a title="String" id="42037">user</a>, <a title="Option[String]" id="42038">password</a>) =&gt;
					<a href="#41998" title="(java.lang.String)Unit">setUser</a>(<a href="#42037" title="String">user</a>)
					<a href="#42038" title="Option[String]">password</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a href="#41998" title="(java.lang.String)Unit" id="41849">setUserPassword</a>)
				<span title="Unit" class="keyword">case</span> RepositoryHelpers.KeyFileAuthentication(<a title="String" id="42071">user</a>, <a title="java.io.File" id="42072">file</a>, <a title="Option[String]" id="42073">password</a>) =&gt;
					<a href="#41998" title="(java.io.File)Unit" id="41846">setKeyFile</a>(<a href="#42072" title="java.io.File">file</a>)
					<a href="#42073" title="Option[String]">password</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a href="#41998" title="(java.lang.String)Unit" id="41850">setKeyFilePassword</a>)
					<a href="#41998" title="(java.lang.String)Unit">setUser</a>(<a href="#42071" title="String">user</a>)
			}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver,sbt.Patterns)Unit" id="40993">initializePatterns</a>(<a title="org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver" id="41940">resolver</a>: <a title="org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver" id="39509">AbstractPatternsBasedResolver</a>, <a title="sbt.Patterns" id="41941">patterns</a>: <a href="IvyInterface.scala.html#12594" title="sbt.Patterns">Patterns</a>)
	{
		<a href="#41940" title="org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver">resolver</a>.<a title="(Boolean)Unit" id="41254">setM2compatible</a>(<a href="#41941" title="sbt.Patterns">patterns</a>.<a href="IvyInterface.scala.html#42083" title="=&gt; Boolean">isMavenCompatible</a>)
		<a href="#41941" title="sbt.Patterns">patterns</a>.<a href="IvyInterface.scala.html#42079" title="=&gt; Seq[String]">ivyPatterns</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a href="#41940" title="org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver">resolver</a>.<a href="#42090" title="(java.lang.String)Unit" id="41201">addIvyPattern</a>)
		<a href="#41941" title="sbt.Patterns">patterns</a>.<a href="IvyInterface.scala.html#42081" title="=&gt; Seq[String]">artifactPatterns</a>.<span title="((String) =&gt; Unit)Unit">foreach</span>(<a href="#41940" title="org.apache.ivy.plugins.resolver.AbstractPatternsBasedResolver">resolver</a>.<a href="#42092" title="(java.lang.String)Unit" id="41202">addArtifactPattern</a>)
	}
}

        </pre>
    </body>
</html>