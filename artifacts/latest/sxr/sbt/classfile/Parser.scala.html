<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/classfile/Parser.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt.classfile
<span class="keyword">import</span> sbt._

<span class="keyword">import</span> java.io.{DataInputStream, File, InputStream}

<span class="comment">// Translation of jdepend.framework.ClassFileParser by Mike Clark, Clarkware Consulting, Inc.</span>
<span class="comment">// BSD Licensed</span>
<span class="comment">//</span>
<span class="comment">// Note that unlike the rest of sbt, some things might be null.</span>

<span class="keyword">import</span> Constants._

<span class="keyword">private</span>[sbt] <span class="keyword">object</span> <a title="object sbt.classfile.Parser" id="13109">Parser</a>
{
	<span class="keyword">def</span> <a title="(java.io.File,sbt.Logger)sbt.classfile.ClassFile" id="38550">apply</a>(<a title="java.io.File" id="38563">file</a>: <a title="java.io.File" id="3620">File</a>, <a title="sbt.Logger" id="38564">log</a>: <a href="../Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <a href="ClassFile.scala.html#13165" title="sbt.classfile.ClassFile">ClassFile</a> = <a href="../FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="../FileUtilities.scala.html#15521" title="(java.io.File,sbt.Logger)((java.io.InputStream) =&gt; Either[String,sbt.classfile.ClassFile])Either[String,sbt.classfile.ClassFile]">readStreamValue</a>(<a href="#38563" title="java.io.File">file</a>, <a href="#38564" title="sbt.Logger">log</a>)(<a href="#38551" title="(String,sbt.Logger)(java.io.InputStream)Either[String,sbt.classfile.ClassFile]">parse</a>(<a href="#38563" title="java.io.File">file</a>.<a href="#38594" title="()java.lang.String" id="16226">getCanonicalPath</a>, <a href="#38564" title="sbt.Logger">log</a>)).<a title="=&gt; Either.RightProjection[String,sbt.classfile.ClassFile]" id="25882">right</a>.<a title="=&gt; sbt.classfile.ClassFile" id="25840">get</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,sbt.Logger)(java.io.InputStream)Either[String,sbt.classfile.ClassFile]" id="38551">parse</a>(<a title="String" id="38591">fileName</a>: <span title="String">String</span>, <a title="sbt.Logger" id="38592">log</a>: <a href="../Logger.scala.html#11865" title="sbt.Logger">Logger</a>)(<a title="java.io.InputStream" id="38593">is</a>: <span title="java.io.InputStream">InputStream</span>): <a title="Either[String,sbt.classfile.ClassFile]" id="336">Either</a>[String, ClassFile] = <a title="(sbt.classfile.ClassFile)Right[Nothing,sbt.classfile.ClassFile]" id="490">Right</a>(<a href="#38552" title="(String,java.io.InputStream,sbt.Logger)sbt.classfile.ClassFile">parseImpl</a>(<a href="#38591" title="String">fileName</a>, <a href="#38593" title="java.io.InputStream">is</a>, <a href="#38592" title="sbt.Logger">log</a>))
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,java.io.InputStream,sbt.Logger)sbt.classfile.ClassFile" id="38552">parseImpl</a>(<a title="String" id="38599">filename</a>: <span title="String">String</span>, <a title="java.io.InputStream" id="38600">is</a>: <span title="java.io.InputStream">InputStream</span>, <a title="sbt.Logger" id="38601">log</a>: <a href="../Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <a href="ClassFile.scala.html#13165" title="sbt.classfile.ClassFile">ClassFile</a> =
	{
		<span class="keyword">val</span> <a title="java.io.DataInputStream" id="38602">in</a> = <span title="java.io.DataInputStream" class="keyword">new</span> <span title="java.io.DataInputStream">DataInputStream</span>(<a href="#38600" title="java.io.InputStream">is</a>)
		<a title="template $anon extends java.lang.Object with sbt.classfile.ClassFile" id="38637" class="keyword">new</a> <a href="ClassFile.scala.html#13165" title="sbt.classfile.ClassFile">ClassFile</a>
		{
			<span title="(Boolean,Any)Unit">assume</span>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readInt</span>() <span title="(Int)Boolean">==</span> <span title="Int(-889275714)">JavaMagic</span>, <span title="java.lang.String(&quot;Invalid class file: &quot;)" class="string">&quot;Invalid class file: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#38639" title="=&gt; String">fileName</a>)

			<span class="keyword">val</span> <a title="String" id="38639">fileName</a> = <a href="#38599" title="String">filename</a>
			<span class="keyword">val</span> <a title="Int" id="38641">minorVersion</a>: <span title="Int">Int</span> = <a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()
			<span class="keyword">val</span> <a title="Int" id="38643">majorVersion</a>: <span title="Int">Int</span> = <a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()

			<span class="keyword">val</span> <a title="Array[sbt.classfile.Constant]" id="38645">constantPool</a> = <a href="#38556" title="(java.io.DataInputStream)Array[sbt.classfile.Constant]">parseConstantPool</a>(<a href="#38602" title="java.io.DataInputStream">in</a>)
			<span class="keyword">val</span> <a title="Int" id="38647">accessFlags</a>: <span title="Int">Int</span> = <a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()

			<span class="keyword">val</span> <a title="java.lang.String" id="38649">className</a> = <a href="#38666" title="(Int)java.lang.String">getClassConstantName</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())
			<span class="keyword">val</span> <a title="java.lang.String" id="38651">superClassName</a> = <a href="#38666" title="(Int)java.lang.String">getClassConstantName</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())
			<span class="keyword">val</span> <a title="Array[java.lang.String]" id="38653">interfaceNames</a> = <a href="#38553" title="(Int)(=&gt; java.lang.String)(implicit scala.reflect.Manifest[java.lang.String])Array[java.lang.String]">array</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())(<a href="#38666" title="(Int)java.lang.String">getClassConstantName</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()))

			<span class="keyword">val</span> <a title="Array[sbt.classfile.FieldOrMethodInfo]" id="38655">fields</a> = <a href="#38664" title="()Array[sbt.classfile.FieldOrMethodInfo]">readFieldsOrMethods</a>()
			<span class="keyword">val</span> <a title="Array[sbt.classfile.FieldOrMethodInfo]" id="38657">methods</a> = <a href="#38664" title="()Array[sbt.classfile.FieldOrMethodInfo]">readFieldsOrMethods</a>()

			<span class="keyword">val</span> <a title="Array[sbt.classfile.AttributeInfo]" id="38659">attributes</a> = <a href="#38553" title="(Int)(=&gt; sbt.classfile.AttributeInfo)(implicit scala.reflect.Manifest[sbt.classfile.AttributeInfo])Array[sbt.classfile.AttributeInfo]">array</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())(<a href="#38669" title="()sbt.classfile.AttributeInfo">parseAttribute</a>())

			<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="Option[String]" id="38662">sourceFile</a> =
				<span class="keyword">for</span>(<a title="((sbt.classfile.AttributeInfo) =&gt; String)Option[String]" id="38969">sourceFileAttribute</a> &lt;- <a href="#38659" title="=&gt; Array[sbt.classfile.AttributeInfo]">attributes</a>.<a title="((sbt.classfile.AttributeInfo) =&gt; Boolean)Option[sbt.classfile.AttributeInfo]" id="16284">find</a>(<a href="#38959" title="sbt.classfile.AttributeInfo">_</a>.<a href="ClassFile.scala.html#38892" title="=&gt; Boolean">isSourceFile</a>)) <span class="keyword">yield</span>
					<a href="#38665" title="(Int)String">toUTF8</a>(<a href="#38559" title="(sbt.classfile.AttributeInfo)Int">entryIndex</a>(<a href="#38969" title="sbt.classfile.AttributeInfo">sourceFileAttribute</a>))

			<span class="keyword">def</span> <a title="(sbt.classfile.AttributeInfo)String" id="38663">stringValue</a>(<a title="sbt.classfile.AttributeInfo" id="38988">a</a>: <a href="ClassFile.scala.html#13018" title="sbt.classfile.AttributeInfo">AttributeInfo</a>) = <a href="#38665" title="(Int)String">toUTF8</a>(<a href="#38559" title="(sbt.classfile.AttributeInfo)Int">entryIndex</a>(<a href="#38988" title="sbt.classfile.AttributeInfo">a</a>))

			<span class="keyword">private</span> <span class="keyword">def</span> <a title="()Array[sbt.classfile.FieldOrMethodInfo]" id="38664">readFieldsOrMethods</a>() = <a href="#38553" title="(Int)(=&gt; sbt.classfile.FieldOrMethodInfo)(implicit scala.reflect.Manifest[sbt.classfile.FieldOrMethodInfo])Array[sbt.classfile.FieldOrMethodInfo]">array</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())(<a href="#38668" title="()sbt.classfile.FieldOrMethodInfo">parseFieldOrMethodInfo</a>())
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Int)String" id="38665">toUTF8</a>(<a title="Int" id="38786">entryIndex</a>: <span title="Int">Int</span>) =
			{
				<span class="keyword">val</span> <a title="sbt.classfile.Constant" id="38788">entry</a> = <a href="#38645" title="(Int)sbt.classfile.Constant">constantPool</a>(<a href="#38786" title="Int">entryIndex</a>)
				<span title="(Boolean,Any)Unit">assume</span>(<a href="#38788" title="sbt.classfile.Constant">entry</a>.<a href="ClassFile.scala.html#38694" title="=&gt; Byte">tag</a> <a title="(Int)Boolean" id="2762">==</a> <span title="Int(1)">ConstantUTF8</span>, <span title="java.lang.String(&quot;Constant pool entry is not a UTF8 type: &quot;)" class="string">&quot;Constant pool entry is not a UTF8 type: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#38786" title="Int">entryIndex</a>)
				<a href="#38788" title="sbt.classfile.Constant">entry</a>.<a href="ClassFile.scala.html#38700" title="=&gt; Option[AnyRef]">value</a>.<a title="=&gt; AnyRef" id="19229">get</a>.<a title="String" id="3451">asInstanceOf</a>[<span title="String">String</span>]
			}
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Int)java.lang.String" id="38666">getClassConstantName</a>(<a title="Int" id="38776">entryIndex</a>: <span title="Int">Int</span>) =
			{
				<span class="keyword">val</span> <a title="sbt.classfile.Constant" id="38778">entry</a> = <a href="#38645" title="(Int)sbt.classfile.Constant">constantPool</a>(<a href="#38776" title="Int">entryIndex</a>)
				<span title="java.lang.String" class="keyword">if</span>(<a href="#38778" title="sbt.classfile.Constant">entry</a> <a title="(AnyRef)Boolean" id="3457">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>
				<span class="keyword">else</span> <a href="#38560" title="(String)java.lang.String">slashesToDots</a>(<a href="#38665" title="(Int)String">toUTF8</a>(<a href="#38778" title="sbt.classfile.Constant">entry</a>.<a href="ClassFile.scala.html#38696" title="=&gt; Int">nameIndex</a>))
			}
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Int)Option[String]" id="38667">toString</a>(<a title="Int" id="38854">index</a>: <span title="Int">Int</span>) =
			{
				<span title="Option[String]" class="keyword">if</span>(<a href="#38854" title="Int">index</a> <a title="(Int)Boolean" id="3092">&lt;=</a> <span title="Int(0)" class="int">0</span>) <span title="object None">None</span>
				<span class="keyword">else</span> <span title="(String)Some[String]">Some</span>(<a href="#38665" title="(Int)String">toUTF8</a>(<a href="#38854" title="Int">index</a>))
			}
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="()sbt.classfile.FieldOrMethodInfo" id="38668">parseFieldOrMethodInfo</a>() =
				<span title="sbt.classfile.FieldOrMethodInfo" class="keyword">new</span> <a href="ClassFile.scala.html#13090" title="sbt.classfile.FieldOrMethodInfo">FieldOrMethodInfo</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>(), <a href="#38667" title="(Int)Option[String]">toString</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()), <a href="#38667" title="(Int)Option[String]">toString</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()),
					<a href="#38553" title="(Int)(=&gt; sbt.classfile.AttributeInfo)(implicit scala.reflect.Manifest[sbt.classfile.AttributeInfo])Array[sbt.classfile.AttributeInfo]">array</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())(<a href="#38669" title="()sbt.classfile.AttributeInfo">parseAttribute</a>()) )
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="()sbt.classfile.AttributeInfo" id="38669">parseAttribute</a>() =
			{
				<span class="keyword">val</span> <a title="Int" id="38894">nameIndex</a> = <a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()
				<span class="keyword">val</span> <a title="Option[String]" id="38895">name</a> = <span title="Option[String]" class="keyword">if</span>(<a href="#38894" title="Int">nameIndex</a> <span title="(Int)Boolean">==</span> -<span title="Int(-1)" class="int">1</span>) <span title="object None">None</span> <span class="keyword">else</span> <span title="(String)Some[String]">Some</span>(<a href="#38665" title="(Int)String">toUTF8</a>(<a href="#38894" title="Int">nameIndex</a>))
				<span class="keyword">val</span> <a title="Array[Byte]" id="38896">value</a> = <a href="#38553" title="(Int)(=&gt; Byte)(implicit scala.reflect.Manifest[Byte])Array[Byte]">array</a>(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Int">readInt</span>())(<a href="#38602" title="java.io.DataInputStream">in</a>.<span title="()Byte">readByte</span>())
				<span title="sbt.classfile.AttributeInfo" class="keyword">new</span> <a href="ClassFile.scala.html#13018" title="sbt.classfile.AttributeInfo">AttributeInfo</a>(<a href="#38895" title="Option[String]">name</a>, <a href="#38896" title="Array[Byte]">value</a>)
			}

			<span class="keyword">def</span> <a title="=&gt; scala.collection.immutable.Set[String]" id="38670">types</a> = <a title="(String*)scala.collection.immutable.Set[String]" id="6083">Set</a>((<a href="#38672" title="=&gt; Array[String]">fieldTypes</a> <span title="(Iterable[String])Array[String]">++</span> <a href="#38673" title="=&gt; Array[String]">methodTypes</a> <span title="(Iterable[String])Array[String]">++</span> <a href="#38674" title="=&gt; List[String]">classConstantReferences</a>) : _*)

			<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Array[sbt.classfile.FieldOrMethodInfo])Array[String]" id="38671">getTypes</a>(<a title="Array[sbt.classfile.FieldOrMethodInfo]" id="38996">fieldsOrMethods</a>: <span title="Array[sbt.classfile.FieldOrMethodInfo]">Array</span>[FieldOrMethodInfo]) =
				<a href="#38996" title="Array[sbt.classfile.FieldOrMethodInfo]">fieldsOrMethods</a>.<a title="((sbt.classfile.FieldOrMethodInfo) =&gt; Iterable[String])Array[String]" id="17321">flatMap</a> { <a title="sbt.classfile.FieldOrMethodInfo" id="39000">fieldOrMethod</a> =&gt;
					<a href="#38561" title="(Option[String])List[String]">descriptorToTypes</a>(<a href="#39000" title="sbt.classfile.FieldOrMethodInfo">fieldOrMethod</a>.<a href="ClassFile.scala.html#38842" title="=&gt; Option[String]">descriptor</a>)
				}

			<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Array[String]" id="38672">fieldTypes</a> = <a href="#38671" title="(Array[sbt.classfile.FieldOrMethodInfo])Array[String]">getTypes</a>(<a href="#38655" title="=&gt; Array[sbt.classfile.FieldOrMethodInfo]">fields</a>)
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Array[String]" id="38673">methodTypes</a> = <a href="#38671" title="(Array[sbt.classfile.FieldOrMethodInfo])Array[String]">getTypes</a>(<a href="#38657" title="=&gt; Array[sbt.classfile.FieldOrMethodInfo]">methods</a>)

			<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[String]" id="38674">classConstantReferences</a> =
				<a href="#38675" title="=&gt; List[sbt.classfile.Constant]">constants</a>.<a title="((sbt.classfile.Constant) =&gt; Iterable[String])List[String]" id="17984">flatMap</a> { <a title="sbt.classfile.Constant" id="39140">constant</a> =&gt;
					<a href="#39140" title="sbt.classfile.Constant">constant</a>.<a href="ClassFile.scala.html#38694" title="=&gt; Byte">tag</a> <span title="List[String]" class="keyword">match</span>
					{
						<span title="List[String]" class="keyword">case</span> <a href="ClassFile.scala.html#38535" title="=&gt; Int(7)">ConstantClass</a> =&gt;
							<span class="keyword">val</span> <a title="String" id="39141">name</a> = <a href="#38665" title="(Int)String">toUTF8</a>(<a href="#39140" title="sbt.classfile.Constant">constant</a>.<a href="ClassFile.scala.html#38696" title="=&gt; Int">nameIndex</a>)
							<span title="List[String]" class="keyword">if</span>(<a href="#39141" title="String">name</a>.<a title="(java.lang.String)Boolean" id="5786">startsWith</a>(<span title="java.lang.String(&quot;[&quot;)" class="string">&quot;[&quot;</span>))
								<a href="#38561" title="(Option[String])List[String]">descriptorToTypes</a>(<span title="(String)Some[String]">Some</span>(<a href="#39141" title="String">name</a>))
							<span class="keyword">else</span>
								<a href="#38560" title="(String)java.lang.String">slashesToDots</a>(<a href="#39141" title="String">name</a>) <a href="#39144" title="(java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span>
						<span title="Nil.type" class="keyword">case</span> _ =&gt; <span title="object Nil">Nil</span>
					}
				}
			<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; List[sbt.classfile.Constant]" id="38675">constants</a> =
			{
				<span class="keyword">def</span> <a title="(Int,List[sbt.classfile.Constant])List[sbt.classfile.Constant]" id="39090">next</a>(<a title="Int" id="39091">i</a>: <span title="Int">Int</span>, <a title="List[sbt.classfile.Constant]" id="39092">list</a>: <span title="List[sbt.classfile.Constant]">List</span>[Constant]): <span title="List[sbt.classfile.Constant]">List</span>[Constant] =
				{
					<span title="List[sbt.classfile.Constant]" class="keyword">if</span>(<a href="#39091" title="Int">i</a> <span title="(Int)Boolean">&lt;</span> <a href="#38645" title="=&gt; Array[sbt.classfile.Constant]">constantPool</a>.<a title="=&gt; Int" id="17311">length</a>)
					{
						<span class="keyword">val</span> <a title="sbt.classfile.Constant" id="39094">constant</a> = <a href="#38645" title="(Int)sbt.classfile.Constant">constantPool</a>(<a href="#39091" title="Int">i</a>)
						<a href="#39090" title="(Int,List[sbt.classfile.Constant])List[sbt.classfile.Constant]">next</a>(<span title="Int" class="keyword">if</span>(<a href="#39094" title="sbt.classfile.Constant">constant</a>.<a href="ClassFile.scala.html#38706" title="=&gt; Boolean">wide</a>) <a href="#39091" title="Int">i</a><span title="(Int)Int">+</span><span title="Int(2)" class="int">2</span> <span class="keyword">else</span> <a href="#39091" title="Int">i</a><span title="(Int)Int">+</span><span title="Int(1)" class="int">1</span>, <a href="#39094" title="sbt.classfile.Constant">constant</a> <a href="#39134" title="(sbt.classfile.Constant)List[sbt.classfile.Constant]">::</a> <a href="#39092" title="List[sbt.classfile.Constant]">list</a>)
					}
					<span class="keyword">else</span>
						<a href="#39092" title="List[sbt.classfile.Constant]">list</a>
				}
				<a href="#39090" title="(Int,List[sbt.classfile.Constant])List[sbt.classfile.Constant]">next</a>(<span title="Int(1)" class="int">1</span>, <span title="object Nil">Nil</span>)
			}
		}
    }
    <span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](Int)(=&gt; T)(implicit scala.reflect.Manifest[T])Array[T]" id="38553">array</a>[<a title="&gt;: Nothing &lt;: Any" id="38555">T</a>](<a title="Int" id="38806">size</a>: <span title="Int">Int</span>)(<a title="=&gt; T" id="38807">f</a>: =&gt; T)(<span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="38808">mf</a>: scala.reflect.<a title="scala.reflect.Manifest[T]" id="2659">Manifest</a>[T]) = <span title="object Array">Array</span>.<a title="((Int) =&gt; T)(Int)Array[T]" id="17346">fromFunction</a>(<a title="Int" id="38826">i</a> =&gt; <a href="#38807" title="=&gt; T">f</a>)(<a href="#38806" title="Int">size</a>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.DataInputStream)Array[sbt.classfile.Constant]" id="38556">parseConstantPool</a>(<a title="java.io.DataInputStream" id="38678">in</a>: <span title="java.io.DataInputStream">DataInputStream</span>) =
	{
		<span class="keyword">val</span> <a title="Int" id="38680">constantPoolSize</a> = <a href="#38678" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>()
		<span class="keyword">val</span> <a title="Array[sbt.classfile.Constant]" id="38681">pool</a> = <span title="Array[sbt.classfile.Constant]" class="keyword">new</span> <span title="Array[sbt.classfile.Constant]">Array</span>[Constant](<a href="#38680" title="Int">constantPoolSize</a>)

		<span class="keyword">def</span> <a title="(Int)Unit" id="38682">parse</a>(<a title="Int" id="38684">i</a>: <span title="Int">Int</span>): <a title="Unit" id="2114">Unit</a> =
			<span title="Unit" class="keyword">if</span>(<a href="#38684" title="Int">i</a> <span title="(Int)Boolean">&lt;</span> <a href="#38680" title="Int">constantPoolSize</a>)
			{
				<span class="keyword">val</span> <a title="sbt.classfile.Constant" id="38686">constant</a> = <a href="#38557" title="(java.io.DataInputStream)sbt.classfile.Constant">getConstant</a>(<a href="#38678" title="java.io.DataInputStream">in</a>)
				<a href="#38681" title="Array[sbt.classfile.Constant]">pool</a>(<a href="#38684" title="Int">i</a>) = <a href="#38686" title="sbt.classfile.Constant">constant</a>
				<a href="#38682" title="(Int)Unit">parse</a>( <span title="Int" class="keyword">if</span>(<a href="#38686" title="sbt.classfile.Constant">constant</a>.<a href="ClassFile.scala.html#38706" title="=&gt; Boolean">wide</a>) <a href="#38684" title="Int">i</a><span title="(Int)Int">+</span><span title="Int(2)" class="int">2</span> <span class="keyword">else</span> <a href="#38684" title="Int">i</a><span title="(Int)Int">+</span><span title="Int(1)" class="int">1</span> )
			}

		<a href="#38682" title="(Int)Unit">parse</a>(<span title="Int(1)" class="int">1</span>)
		<a href="#38681" title="Array[sbt.classfile.Constant]">pool</a>
	}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.io.DataInputStream)sbt.classfile.Constant" id="38557">getConstant</a>(<a title="java.io.DataInputStream" id="38687">in</a>: <span title="java.io.DataInputStream">DataInputStream</span>) =
	{
		<span class="keyword">val</span> <a title="Byte" id="38689">tag</a> = <a href="#38687" title="java.io.DataInputStream">in</a>.<span title="()Byte">readByte</span>()
		<a href="#38689" title="Byte">tag</a> <span title="sbt.classfile.Constant" class="keyword">match</span>
		{
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38535" title="=&gt; Int(7)">ConstantClass</a> | <a href="ClassFile.scala.html#38537" title="=&gt; Int(8)">ConstantString</a> =&gt; <a href="ClassFile.scala.html#38704" title="(Byte,Int)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <a href="#38687" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38539" title="=&gt; Int(9)">ConstantField</a> | <a href="ClassFile.scala.html#38541" title="=&gt; Int(10)">ConstantMethod</a> | <a href="ClassFile.scala.html#38543" title="=&gt; Int(11)">ConstantInterfaceMethod</a> | <a href="ClassFile.scala.html#38545" title="=&gt; Int(12)">ConstantNameAndType</a> =&gt;
				<a href="ClassFile.scala.html#38703" title="(Byte,Int,Int)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <a href="#38687" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>(), <a href="#38687" title="java.io.DataInputStream">in</a>.<span title="()Int">readUnsignedShort</span>())
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38527" title="=&gt; Int(3)">ConstantInteger</a> =&gt; <a href="ClassFile.scala.html#38705" title="(Byte,AnyRef)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <span title="java.lang.Integer" class="keyword">new</span> java.lang.<a title="java.lang.Integer" id="1728">Integer</a>(<a href="#38687" title="java.io.DataInputStream">in</a>.<span title="()Int">readInt</span>()))
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38529" title="=&gt; Int(4)">ConstantFloat</a> =&gt; <a href="ClassFile.scala.html#38705" title="(Byte,AnyRef)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <span title="java.lang.Float" class="keyword">new</span> java.lang.<a title="java.lang.Float" id="2070">Float</a>(<a href="#38687" title="java.io.DataInputStream">in</a>.<a title="()Float" id="38617">readFloat</a>()))
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38531" title="=&gt; Int(5)">ConstantLong</a> =&gt; <a href="ClassFile.scala.html#38705" title="(Byte,AnyRef)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <span title="java.lang.Long" class="keyword">new</span> java.lang.<a title="java.lang.Long" id="1899">Long</a>(<a href="#38687" title="java.io.DataInputStream">in</a>.<a title="()Long" id="38616">readLong</a>()))
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38533" title="=&gt; Int(6)">ConstantDouble</a> =&gt; <a href="ClassFile.scala.html#38705" title="(Byte,AnyRef)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <span title="java.lang.Double" class="keyword">new</span> java.lang.<a title="java.lang.Double" id="2079">Double</a>(<a href="#38687" title="java.io.DataInputStream">in</a>.<a title="()Double" id="38618">readDouble</a>()))
			<span title="sbt.classfile.Constant" class="keyword">case</span> <a href="ClassFile.scala.html#38523" title="=&gt; Int(1)">ConstantUTF8</a> =&gt; <a href="ClassFile.scala.html#38705" title="(Byte,AnyRef)sbt.classfile.Constant" class="keyword">new</a> <a href="ClassFile.scala.html#13192" title="sbt.classfile.Constant">Constant</a>(<a href="#38689" title="Byte">tag</a>, <a href="#38687" title="java.io.DataInputStream">in</a>.<a title="()java.lang.String" id="38620">readUTF</a>())
			<span title="Nothing" class="keyword">case</span> _ =&gt; <a title="(String)Nothing" id="6085">error</a>(<span title="java.lang.String(&quot;Unknown constant: &quot;)" class="string">&quot;Unknown constant: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#38689" title="Byte">tag</a>)
		}
	}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Byte)Int" id="38558">toInt</a>(<a title="Byte" id="38982">v</a>: <a title="Byte" id="2336">Byte</a>) = <span title="Int" class="keyword">if</span>(<a href="#38982" title="Byte">v</a> <a title="(Int)Boolean" id="2764">&lt;</a> <span title="Int(0)" class="int">0</span>) <a href="#38982" title="Byte">v</a> <a title="(Int)Int" id="2768">+</a> <span title="Int(256)" class="int">256</span> <span class="keyword">else</span> <a href="#38982" title="Byte">v</a>.<a title="=&gt; Int" id="2706">toInt</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.classfile.AttributeInfo)Int" id="38559">entryIndex</a>(<a title="sbt.classfile.AttributeInfo" id="38970">a</a>: <a href="ClassFile.scala.html#13018" title="sbt.classfile.AttributeInfo">AttributeInfo</a>) =
	{
		<span class="keyword">val</span> <a href="#38975" title="(Byte, Byte)" id="1327">Array</a>(<a href="#38972" title="Byte" id="17794">v0</a>, <a href="#38972" title="Byte" id="17796">v1</a>) = <a href="#38970" title="sbt.classfile.AttributeInfo">a</a>.<a href="ClassFile.scala.html#38887" title="=&gt; Array[Byte]">value</a>
		<a href="#38558" title="(Byte)Int">toInt</a>(<a href="#17794" title="Byte">v0</a>) <a title="(Int)Int" id="3097">*</a> <span title="Int(256)" class="int">256</span> <span title="(Int)Int">+</span> <a href="#38558" title="(Byte)Int">toInt</a>(<a href="#17796" title="Byte">v1</a>)
	}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String)java.lang.String" id="38560">slashesToDots</a>(<a title="String" id="38783">s</a>: <span title="String">String</span>) = <a href="#38783" title="String">s</a>.<a title="(Char,Char)java.lang.String" id="5803">replace</a>(<span title="Char('/')" class="char">'/'</span>, <span title="Char('.')" class="char">'.'</span>)

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[String])List[String]" id="38561">descriptorToTypes</a>(<a title="Option[String]" id="39001">descriptor</a>: <a title="Option[String]" id="897">Option</a>[String]) =
	{
		<span class="keyword">def</span> <a title="(String,List[String])List[String]" id="39003">toTypes</a>(<a title="String" id="39004">descriptor</a>: <span title="String">String</span>, <a title="List[String]" id="39005">types</a>: <span title="List[String]">List</span>[String]): <span title="List[String]">List</span>[String] =
		{
			<span class="keyword">val</span> <a title="Int" id="39006">startIndex</a> = <a href="#39004" title="String">descriptor</a>.<a title="(Int)Int" id="5789">indexOf</a>(<span title="Int(76)">ClassDescriptor</span>)
			<span title="List[String]" class="keyword">if</span>(<a href="#39006" title="Int">startIndex</a> <span title="(Int)Boolean">&lt;</span> <span title="Int(0)" class="int">0</span>)
				<a href="#39005" title="List[String]">types</a>
			<span class="keyword">else</span>
			{
				<span class="keyword">val</span> <a title="Int" id="39014">endIndex</a> = <a href="#39004" title="String">descriptor</a>.<a title="(Int,Int)Int" id="5790">indexOf</a>(<span title="Int(59)" class="char">';'</span>, <a href="#39006" title="Int">startIndex</a><span title="(Int)Int">+</span><span title="Int(1)" class="int">1</span>)
				<span class="keyword">val</span> <a title="java.lang.String" id="39015">tpe</a> = <a href="#38560" title="(String)java.lang.String">slashesToDots</a>(<a href="#39004" title="String">descriptor</a>.<a title="(Int,Int)java.lang.String" id="5800">substring</a>(<a href="#39006" title="Int">startIndex</a> <span title="(Int)Int">+</span> <span title="Int(1)" class="int">1</span>, <a href="#39014" title="Int">endIndex</a>))
				<a href="#39003" title="(String,List[String])List[String]">toTypes</a>(<a href="#39004" title="String">descriptor</a>.<a title="(Int)java.lang.String" id="5799">substring</a>(<a href="#39014" title="Int">endIndex</a>), <a href="#39015" title="java.lang.String">tpe</a> <a href="#39061" title="(String)List[String]">::</a> <a href="#39005" title="List[String]">types</a>)
			}
		}
		<a href="#39003" title="(String,List[String])List[String]">toTypes</a>(<a href="#39001" title="Option[String]">descriptor</a>.<a title="(=&gt; String)String" id="19232">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>), <span title="object Nil">Nil</span>)
    }
}

        </pre>
    </body>
</html>