<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/ClasspathUtilities.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.{URI, URL, URLClassLoader}
<span class="keyword">import</span> java.util.Collections
<span class="keyword">import</span> scala.collection.Set
<span class="keyword">import</span> scala.collection.mutable.{HashSet, ListBuffer}
<span class="keyword">import</span> xsbt.ScalaInstance
<span class="keyword">import</span> xsbt.FileUtilities.{createTemporaryDirectory, withTemporaryDirectory, write}

<span class="keyword">object</span> <a title="object sbt.ClasspathUtilities" id="13104">ClasspathUtilities</a>
{
	<span class="keyword">def</span> <a title="(sbt.PathFinder)Array[java.net.URL]" id="54723">toClasspath</a>(<a title="sbt.PathFinder" id="57946">finder</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>): <span title="Array[java.net.URL]">Array</span>[URL] = <a href="#57946" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#52328" title="=&gt; Array[java.net.URL]">getURLs</a>
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Array[java.net.URL]" id="54724">toClasspath</a>(<a title="Iterable[sbt.Path]" id="57948">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Array[java.net.URL]">Array</span>[URL] = <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52314" title="(Iterable[sbt.Path])Array[java.net.URL]">getURLs</a>(<a href="#57948" title="Iterable[sbt.Path]">paths</a>)
	<span class="keyword">def</span> <a title="(sbt.PathFinder)java.lang.ClassLoader" id="54725">toLoader</a>(<a title="sbt.PathFinder" id="56907">finder</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#54727" title="(Iterable[sbt.Path])java.lang.ClassLoader">toLoader</a>(<a href="#56907" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>)
	<span class="keyword">def</span> <a title="(sbt.PathFinder,java.lang.ClassLoader)java.lang.ClassLoader" id="54726">toLoader</a>(<a title="sbt.PathFinder" id="56905">finder</a>: <a href="Path.scala.html#10418" title="sbt.PathFinder">PathFinder</a>, <a title="java.lang.ClassLoader" id="56906">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#54728" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#56905" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#52325" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#56906" title="java.lang.ClassLoader">parent</a>)
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path])java.lang.ClassLoader" id="54727">toLoader</a>(<a title="Iterable[sbt.Path]" id="56904">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#54728" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#56904" title="Iterable[sbt.Path]">paths</a>, <a href="#54729" title="=&gt; java.lang.ClassLoader">rootLoader</a>)
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader" id="54728">toLoader</a>(<a title="Iterable[sbt.Path]" id="56902">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="java.lang.ClassLoader" id="56903">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="java.net.URLClassLoader" class="keyword">new</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#54724" title="(Iterable[sbt.Path])Array[java.net.URL]">toClasspath</a>(<a href="#56902" title="Iterable[sbt.Path]">paths</a>), <a href="#56903" title="java.lang.ClassLoader">parent</a>)
	
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="54730">rootLoader</a> =
	{
		<span class="keyword">def</span> <a title="(java.lang.ClassLoader)java.lang.ClassLoader" id="57982">parent</a>(<a title="java.lang.ClassLoader" id="57983">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> =
		{
			<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="57984">p</a> = <a href="#57983" title="java.lang.ClassLoader">loader</a>.<a title="()java.lang.ClassLoader" id="19121">getParent</a>
			<span title="java.lang.ClassLoader" class="keyword">if</span>(<a href="#57984" title="java.lang.ClassLoader">p</a> <a title="(AnyRef)Boolean" id="6013">eq</a> <span title="Null(null)" class="keyword">null</span>) <a href="#57983" title="java.lang.ClassLoader">loader</a> <span class="keyword">else</span> <a href="#57982" title="(java.lang.ClassLoader)java.lang.ClassLoader">parent</a>(<a href="#57984" title="java.lang.ClassLoader">p</a>)
		}
		<a href="#57982" title="(java.lang.ClassLoader)java.lang.ClassLoader">parent</a>(<a title="()java.lang.Class[_]" id="3450">getClass</a>.<span title="()java.lang.ClassLoader">getClassLoader</span>)
	}
	
	<span class="keyword">final</span> <span class="keyword">val</span> <a title="java.lang.String(&quot;app.class.path&quot;)" id="54731">AppClassPath</a> = <span title="java.lang.String(&quot;app.class.path&quot;)" class="string">&quot;app.class.path&quot;</span>
	<span class="keyword">final</span> <span class="keyword">val</span> <a title="java.lang.String(&quot;boot.class.path&quot;)" id="54733">BootClassPath</a> = <span title="java.lang.String(&quot;boot.class.path&quot;)" class="string">&quot;boot.class.path&quot;</span>
	
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],xsbt.ScalaInstance,sbt.Path)Iterable[sbt.Path]" id="54735">createClasspathResources</a>(<a title="Iterable[sbt.Path]" id="58002">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="xsbt.ScalaInstance" id="58003">instance</a>: <a href="../ScalaInstance.scala.html#7485" title="xsbt.ScalaInstance">ScalaInstance</a>, <a title="sbt.Path" id="58004">baseDir</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>): <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
		<a href="#54736" title="(Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path)Iterable[sbt.Path]">createClasspathResources</a>(<a href="#58002" title="Iterable[sbt.Path]">classpath</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52309" title="(Iterable[java.io.File])Iterable[sbt.Path]">fromFiles</a>(<a href="#58003" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15217" title="=&gt; List[java.io.File]">jars</a>), <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52309" title="(Iterable[java.io.File])Iterable[sbt.Path]">fromFiles</a>(<a href="#58003" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15217" title="=&gt; List[java.io.File]">jars</a>), <a href="#58004" title="sbt.Path">baseDir</a>)
		
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path)Iterable[sbt.Path]" id="54736">createClasspathResources</a>(<a title="Iterable[sbt.Path]" id="58006">appPaths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="58007">bootPaths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="sbt.Path" id="58008">baseDir</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>): <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
	{
		<span class="keyword">def</span> <a title="(String,Iterable[sbt.Path])Unit" id="58012">writePaths</a>(<a title="String" id="58013">name</a>: <span title="String">String</span>, <a title="Iterable[sbt.Path]" id="58014">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <a title="Unit" id="2105">Unit</a> =
			<a href="../FileUtilities.scala.html#18462" title="(java.io.File,String)Unit">write</a>(<a href="#58008" title="sbt.Path">baseDir</a> <a href="Path.scala.html#52343" title="(String)sbt.Path">/</a> <a href="#58013" title="String">name</a> <a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>, <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52289" title="(Iterable[sbt.Path])String">makeString</a>(<a href="#58014" title="Iterable[sbt.Path]">paths</a>))
		<a href="#58012" title="(String,Iterable[sbt.Path])Unit">writePaths</a>(<span title="java.lang.String(&quot;app.class.path&quot;)">AppClassPath</span>, <a href="#58006" title="Iterable[sbt.Path]">appPaths</a>)
		<a href="#58012" title="(String,Iterable[sbt.Path])Unit">writePaths</a>(<span title="java.lang.String(&quot;boot.class.path&quot;)">BootClassPath</span>, <a href="#58007" title="Iterable[sbt.Path]">bootPaths</a>)
		<a href="#58006" title="Iterable[sbt.Path]">appPaths</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a title="(sbt.Path*)Seq[sbt.Path]" id="730">Seq</a>(<a href="#58008" title="sbt.Path">baseDir</a>)
	}

	<span class="comment">/** The client is responsible for cleaning up the temporary directory.*/</span>
	<span class="keyword">def</span> <a title="[T](Iterable[sbt.Path],xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)" id="54737">makeLoader</a>[<a title="&gt;: Nothing &lt;: Any" id="54739">T</a>](<a title="Iterable[sbt.Path]" id="58032">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="xsbt.ScalaInstance" id="58033">instance</a>: <a href="../ScalaInstance.scala.html#7485" title="xsbt.ScalaInstance">ScalaInstance</a>): <span title="(java.lang.ClassLoader, sbt.Path)">(</span>ClassLoader, Path) =
		<a href="#54740" title="(Iterable[sbt.Path],java.lang.ClassLoader,xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)">makeLoader</a>(<a href="#58032" title="Iterable[sbt.Path]">classpath</a>, <a href="#58033" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15208" title="=&gt; java.lang.ClassLoader">loader</a>, <a href="#58033" title="xsbt.ScalaInstance">instance</a>)
	<span class="comment">/** The client is responsible for cleaning up the temporary directory.*/</span>
	<span class="keyword">def</span> <a title="[T](Iterable[sbt.Path],java.lang.ClassLoader,xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)" id="54740">makeLoader</a>[<a title="&gt;: Nothing &lt;: Any" id="54742">T</a>](<a title="Iterable[sbt.Path]" id="58035">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="java.lang.ClassLoader" id="58036">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="xsbt.ScalaInstance" id="58037">instance</a>: <a href="../ScalaInstance.scala.html#7485" title="xsbt.ScalaInstance">ScalaInstance</a>): <span title="(java.lang.ClassLoader, sbt.Path)">(</span>ClassLoader, Path) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="58041">dir</a> = <a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52308" title="(java.io.File)sbt.Path">fromFile</a>(<a href="../FileUtilities.scala.html#18442" title="=&gt; java.io.File">createTemporaryDirectory</a>)
		<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="58042">modifiedClasspath</a> = <a href="#54735" title="(Iterable[sbt.Path],xsbt.ScalaInstance,sbt.Path)Iterable[sbt.Path]">createClasspathResources</a>(<a href="#58035" title="Iterable[sbt.Path]">classpath</a>, <a href="#58037" title="xsbt.ScalaInstance">instance</a>, <a href="#58041" title="sbt.Path">dir</a>)
		<span title="(java.lang.ClassLoader,sbt.Path)(java.lang.ClassLoader, sbt.Path)">(</span><a href="#54728" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#58042" title="Iterable[sbt.Path]">modifiedClasspath</a>, <a href="#58036" title="java.lang.ClassLoader">parent</a>), <a href="#58041" title="sbt.Path">dir</a>)
	}
	
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Class[_])Unit" id="54743">printSource</a>(<a title="Class[_]" id="58064">c</a>: <span title="Class[_]">Class</span>[_]) =
		<a title="(Any)Unit" id="6584">println</a>(<a href="#58064" title="Class[_]">c</a>.<a title="()java.lang.String" id="3923">getName</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; loader=&quot;)" class="string">&quot; loader=&quot;</span> <span title="(Any)java.lang.String">+</span><a href="#58064" title="Class[_]">c</a>.<span title="()java.lang.ClassLoader">getClassLoader</span> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; location=&quot;)" class="string">&quot; location=&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52263" title="(Class[_])java.io.File">classLocationFile</a>(<a href="#58064" title="Class[_]">c</a>))
	
	<span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="54744">isArchive</a>(<a title="sbt.Path" id="58078">path</a>: <a href="Path.scala.html#11861" title="sbt.Path">Path</a>): <span title="Boolean">Boolean</span> = <a href="#54745" title="(java.io.File)Boolean">isArchive</a>(<a href="#58078" title="sbt.Path">path</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>)
	<span class="keyword">def</span> <a title="(java.io.File)Boolean" id="54745">isArchive</a>(<a title="java.io.File" id="58080">file</a>: <span title="java.io.File">File</span>): <span title="Boolean">Boolean</span> = <a href="#54746" title="(String)Boolean">isArchiveName</a>(<a href="#58080" title="java.io.File">file</a>.<a title="()java.lang.String" id="16955">getName</a>)
	<span class="keyword">def</span> <a title="(String)Boolean" id="54746">isArchiveName</a>(<a title="String" id="58081">fileName</a>: <span title="String">String</span>) = <a href="#58081" title="String">fileName</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>) <a title="(Boolean)Boolean" id="2689">||</a> <a href="#58081" title="String">fileName</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.zip&quot;)" class="string">&quot;.zip&quot;</span>)
	<span class="comment">// Partitions the given classpath into (jars, directories)</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])" id="54747">separate</a>(<a title="Iterable[java.io.File]" id="58083">paths</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]): <span title="(Iterable[java.io.File], Iterable[java.io.File])">(</span>Iterable[File], Iterable[File]) = <a href="#58083" title="Iterable[java.io.File]">paths</a>.<a title="((java.io.File) =&gt; Boolean)(Iterable[java.io.File], Iterable[java.io.File])" id="16143">partition</a>(<a href="#54745" title="(java.io.File)Boolean">isArchive</a>)
	<span class="comment">// Partitions the given classpath into (jars, directories)</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])(Iterable[java.io.File], Iterable[java.io.File])" id="54748">separatePaths</a>(<a title="Iterable[sbt.Path]" id="58088">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <a href="#54747" title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])">separate</a>(<a href="#58088" title="Iterable[sbt.Path]">paths</a>.<span title="((sbt.Path) =&gt; java.io.File)Iterable[java.io.File]">map</span>(<a href="#58092" title="sbt.Path">_</a>.<a href="Path.scala.html#52349" title="=&gt; java.io.File">asFile</a>.<span title="()java.io.File">getCanonicalFile</span>))
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])" id="54749">buildSearchPaths</a>(<a title="Iterable[sbt.Path]" id="58093">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span>wrap.Set[File], wrap.Set[File]) =
	{
		<span class="keyword">val</span> <a href="#58095" title="(Iterable[java.io.File], Iterable[java.io.File])">(</a><a href="#58094" title="Iterable[java.io.File]" id="58095">jars</a>, <a href="#58094" title="Iterable[java.io.File]" id="58096">dirs</a>) = <a href="#54748" title="(Iterable[sbt.Path])(Iterable[java.io.File], Iterable[java.io.File])">separatePaths</a>(<a href="#58093" title="Iterable[sbt.Path]">classpath</a>)
		<span title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span><a href="#54760" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#58095" title="Iterable[java.io.File]">jars</a> <span title="(Iterable[java.io.File])Collection[java.io.File]">++</span> <a href="#54756" title="=&gt; sbt.wrap.Set[java.io.File]">extraJars</a>.<a href="wrap/Wrappers.scala.html#54800" title="=&gt; List[java.io.File]">toList</a>), <a href="#54760" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#58096" title="Iterable[java.io.File]">dirs</a> <span title="(Iterable[java.io.File])Collection[java.io.File]">++</span> <a href="#54758" title="=&gt; sbt.wrap.Set[java.io.File]">extraDirs</a>.<a href="wrap/Wrappers.scala.html#54800" title="=&gt; List[java.io.File]">toList</a>))
	}
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File],java.io.File)Boolean" id="54750">onClasspath</a>(<a title="sbt.wrap.Set[java.io.File]" id="58416">classpathJars</a>: wrap.<a href="wrap/Wrappers.scala.html#15079" title="sbt.wrap.Set[java.io.File]">Set</a>[File], <a title="sbt.wrap.Set[java.io.File]" id="58417">classpathDirectories</a>: wrap.<a href="wrap/Wrappers.scala.html#15079" title="sbt.wrap.Set[java.io.File]">Set</a>[File], <a title="java.io.File" id="58418">file</a>: <span title="java.io.File">File</span>): <span title="Boolean">Boolean</span> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="58419">f</a> = <a href="#58418" title="java.io.File">file</a>.<span title="()java.io.File">getCanonicalFile</span>
		<span title="Boolean" class="keyword">if</span>(<a href="#13104" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="#54745" title="(java.io.File)Boolean">isArchive</a>(<a href="#58419" title="java.io.File">f</a>))
			<a href="#58416" title="sbt.wrap.Set[java.io.File]">classpathJars</a>.<a href="wrap/Wrappers.scala.html#54802" title="(java.io.File)Boolean">contains</a>(<a href="#58419" title="java.io.File">f</a>)
		<span class="keyword">else</span>
			<a href="#58417" title="sbt.wrap.Set[java.io.File]">classpathDirectories</a>.<a href="wrap/Wrappers.scala.html#54800" title="=&gt; List[java.io.File]">toList</a>.<a title="((java.io.File) =&gt; Boolean)Option[java.io.File]" id="15739">find</a>(<a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52304" title="(java.io.File,java.io.File)Option[String]">relativize</a>(<a href="#58424" title="java.io.File">_</a>, <a href="#58419" title="java.io.File">f</a>).<span title="=&gt; Boolean">isDefined</span>).<span title="=&gt; Boolean">isDefined</span>
	}
	
	<span class="comment">/** Returns all entries in 'classpath' that correspond to a compiler plugin.*/</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[java.io.File]" id="54751">compilerPlugins</a>(<a title="Iterable[sbt.Path]" id="54763">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Iterable[java.io.File]">Iterable</span>[File] =
	{
		<span class="keyword">val</span> <a title="java.net.URLClassLoader" id="58427">loader</a> = <a title="(Array[java.net.URL])java.net.URLClassLoader" id="19170" class="keyword">new</a> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="Path.scala.html#11862" title="object sbt.Path">Path</a>.<a href="Path.scala.html#52314" title="(Iterable[sbt.Path])Array[java.net.URL]">getURLs</a>(<a href="#54763" title="Iterable[sbt.Path]">classpath</a>))
		wrap.<a href="wrap/Wrappers.scala.html#15035" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#52464" title="(java.util.Enumeration[java.net.URL])List[java.net.URL]">toList</a>(<a href="#58427" title="java.net.URLClassLoader">loader</a>.<a title="(java.lang.String)java.util.Enumeration[java.net.URL]" id="18685">getResources</a>(<span title="java.lang.String(&quot;scalac-plugin.xml&quot;)" class="string">&quot;scalac-plugin.xml&quot;</span>)).<a title="((java.net.URL) =&gt; Iterable[java.io.File])List[java.io.File]" id="15748">flatMap</a>(<a href="#54753" title="(Boolean)(java.net.URL)List[java.io.File]">asFile</a>(<span title="Boolean(true)" class="keyword">true</span>))
	}
	<span class="comment">/** Converts the given URL to a File.  If the URL is for an entry in a jar, the File for the jar is returned. */</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(java.net.URL)List[java.io.File]" id="54752">asFile</a>(<a title="java.net.URL" id="58446">url</a>: <span title="java.net.URL">URL</span>): <span title="List[java.io.File]">List</span>[File] = <a href="#54753" title="(Boolean)(java.net.URL)List[java.io.File]">asFile</a>(<span title="Boolean(false)" class="keyword">false</span>)(<a href="#58446" title="java.net.URL">url</a>)
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Boolean)(java.net.URL)List[java.io.File]" id="54753">asFile</a>(<a title="Boolean" id="58444">jarOnly</a>: <span title="Boolean">Boolean</span>)(<a title="java.net.URL" id="58445">url</a>: <span title="java.net.URL">URL</span>): <span title="List[java.io.File]">List</span>[File] =
	{
		<span class="keyword">try</span>
		{
			<a href="#58445" title="java.net.URL">url</a>.<a title="()java.lang.String" id="19268">getProtocol</a> <span title="List[java.io.File]" class="keyword">match</span>
			{
				<span title="List[java.io.File]" class="keyword">case</span> <span title="java.lang.String(&quot;file&quot;)" class="string">&quot;file&quot;</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#58444" title="Boolean">jarOnly</a>=&gt; <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52259" title="(java.net.URL)java.io.File">toFile</a>(<a href="#58445" title="java.net.URL">url</a>) <a href="#58461" title="(java.io.File)List[java.io.File]">::</a> <span title="object Nil">Nil</span>
				<span title="List[java.io.File]" class="keyword">case</span> <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span> =&gt;
					<span class="keyword">val</span> <a title="java.lang.String" id="58476">path</a> = <a href="#58445" title="java.net.URL">url</a>.<a title="()java.lang.String" id="19263">getPath</a>
					<span class="keyword">val</span> <a title="Int" id="58477">end</a> = <a href="#58476" title="java.lang.String">path</a>.<a title="(Int)Int" id="6373">indexOf</a>(<span title="Int(33)" class="char">'!'</span>)
					<a title="(java.net.URI)java.io.File" id="16954" class="keyword">new</a> <span title="java.io.File">File</span>(<span title="java.net.URI" class="keyword">new</span> <a title="java.net.URI" id="4568">URI</a>(<span title="java.lang.String" class="keyword">if</span>(<a href="#58477" title="Int">end</a> <a title="(Int)Boolean" id="3080">==</a> -<span title="Int(-1)" class="int">1</span>) <a href="#58476" title="java.lang.String">path</a> <span class="keyword">else</span> <a href="#58476" title="java.lang.String">path</a>.<a title="(Int,Int)java.lang.String" id="6384">substring</a>(<span title="Int(0)" class="int">0</span>, <a href="#58477" title="Int">end</a>))) <a href="#58484" title="(java.io.File)List[java.io.File]">::</a> <span title="object Nil">Nil</span>
				<span title="Nil.type" class="keyword">case</span> _ =&gt; <span title="object Nil">Nil</span>
			}
		}
		<span class="keyword">catch</span> { <span title="Nil.type" class="keyword">case</span> <a title="Exception" id="58498">e</a>: <a title="Exception" id="2067">Exception</a> =&gt; <span title="object Nil">Nil</span> }
	}
	
	<span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="#54757" title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])" id="54755">(</a><a href="#54754" title="sbt.wrap.Set[java.io.File]" id="54757">extraJars</a>, <a href="#54754" title="sbt.wrap.Set[java.io.File]" id="54759">extraDirs</a>) =
	{
		<span class="keyword">import</span> scala.tools.nsc.GenericRunnerCommand
		<span class="keyword">val</span> <a title="scala.tools.nsc.GenericRunnerSettings" id="58108">settings</a> = (<a title="(List[String],(String) =&gt; Unit)scala.tools.nsc.GenericRunnerCommand" id="37473" class="keyword">new</a> <a title="scala.tools.nsc.GenericRunnerCommand" id="22158">GenericRunnerCommand</a>(<span title="object Nil">Nil</span>, <a title="String" id="58128">message</a> =&gt; <a title="(String)Nothing" id="6472">error</a>(<a href="#58128" title="String">message</a>))).<a title="=&gt; scala.tools.nsc.GenericRunnerSettings" id="37469">settings</a>
		<span class="keyword">val</span> <a title="List[java.io.File]" id="58109">bootPaths</a> = <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52148" title="(String)Array[java.lang.String]">pathSplit</a>(<a href="#58108" title="scala.tools.nsc.GenericRunnerSettings">settings</a>.<a title="=&gt; settings.StringSetting" id="30237">bootclasspath</a>.<span title="=&gt; String">value</span>).<span title="((java.lang.String) =&gt; java.io.File)Array[java.io.File]">map</span>(<a title="java.lang.String" id="58343">p</a> =&gt; <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#58343" title="java.lang.String">p</a>)).<a title="=&gt; List[java.io.File]" id="16171">toList</a>
		<span class="keyword">val</span> <a href="#58111" title="(Iterable[java.io.File], Iterable[java.io.File])">(</a><a href="#58110" title="Iterable[java.io.File]" id="58111">bootJars</a>, <a href="#58110" title="Iterable[java.io.File]" id="58112">bootDirs</a>) = <a href="#54747" title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])">separate</a>(<a href="#58109" title="List[java.io.File]">bootPaths</a>)
		<span class="keyword">val</span> <a title="List[java.io.File]" id="58113">extJars</a> =
		{
			<span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[java.io.File]" id="58350">buffer</a> = <span title="scala.collection.mutable.ListBuffer[java.io.File]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[java.io.File]" id="20264">ListBuffer</a>[File]
			<span class="keyword">def</span> <a title="(java.io.File)Unit" id="58351">findJars</a>(<a title="java.io.File" id="58352">dir</a>: <span title="java.io.File">File</span>)
			{
				<a href="#58350" title="scala.collection.mutable.ListBuffer[java.io.File]">buffer</a> <a title="(Iterable[java.io.File])Unit" id="45218">++=</a> <a href="#58352" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<span title="sbt.SimpleFileFilter" class="keyword">new</span> <a href="NameFilter.scala.html#9767" title="sbt.SimpleFileFilter">SimpleFileFilter</a>(<a href="#54745" title="(java.io.File)Boolean">isArchive</a>))
				<span class="keyword">for</span>(<a title="((java.io.File) =&gt; Unit)Unit" id="58373">dir</a> &lt;- <a href="#58352" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<a href="NameFilter.scala.html#12552" title="object sbt.DirectoryFilter">DirectoryFilter</a>))
					<a href="#58351" title="(java.io.File)Unit">findJars</a>(<a href="#58373" title="java.io.File">dir</a>)
			}
			<span class="keyword">for</span>(<a title="(((java.lang.String, java.io.File)) =&gt; Unit)Unit" id="58390">path</a> &lt;- <a href="FileUtilities.scala.html#10716" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#52148" title="(String)Array[java.lang.String]">pathSplit</a>(<a href="#58108" title="scala.tools.nsc.GenericRunnerSettings">settings</a>.<a title="=&gt; settings.StringSetting" id="30239">extdirs</a>.<span title="=&gt; String">value</span>); <span class="keyword">val</span> <a title="java.io.File" id="58391">dir</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#58390" title="java.lang.String">path</a>) <span class="keyword">if</span> <a href="#58391" title="java.io.File">dir</a>.<a title="()Boolean" id="16969">isDirectory</a>)
				<a href="#58351" title="(java.io.File)Unit">findJars</a>(<a href="#58391" title="java.io.File">dir</a>)
			<a href="#58350" title="scala.collection.mutable.ListBuffer[java.io.File]">buffer</a>.<a title="=&gt; List[java.io.File]" id="52546">readOnly</a>.<a title="((java.io.File) =&gt; java.io.File)List[java.io.File]" id="15727">map</a>(<a href="#58395" title="java.io.File">_</a>.<span title="()java.io.File">getCanonicalFile</span>)
		}
		<span title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span><a href="#54760" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#58113" title="List[java.io.File]">extJars</a> <a title="(Iterable[java.io.File])List[java.io.File]" id="15706">++</a> <a href="#58111" title="Iterable[java.io.File]">bootJars</a>.<span title="((java.io.File) =&gt; java.io.File)Iterable[java.io.File]">map</span>(<a href="#58407" title="java.io.File">_</a>.<span title="()java.io.File">getCanonicalFile</span>)), <a href="#54760" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#58112" title="Iterable[java.io.File]">bootDirs</a>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](Iterable[T])sbt.wrap.Set[T]" id="54760">linkedSet</a>[<a title="&gt;: Nothing &lt;: Any" id="54762">T</a>](<a title="Iterable[T]" id="58103">s</a>: <span title="Iterable[T]">Iterable</span>[T]): wrap.<a href="wrap/Wrappers.scala.html#15079" title="sbt.wrap.Set[T]">Set</a>[T] =
	{
		<span class="keyword">val</span> <a title="sbt.wrap.MutableSetWrapper[T]" id="58499">set</a> = <span title="sbt.wrap.MutableSetWrapper[T]" class="keyword">new</span> wrap.<a href="wrap/Wrappers.scala.html#15037" title="sbt.wrap.MutableSetWrapper[T]">MutableSetWrapper</a>(<a title="()java.util.LinkedHashSet[T]" id="54828" class="keyword">new</a> java.util.<a title="java.util.LinkedHashSet[T]" id="5810">LinkedHashSet</a>[T])
		<a href="#58499" title="sbt.wrap.MutableSetWrapper[T]">set</a> <a href="wrap/Wrappers.scala.html#54819" title="(Iterable[T])Unit">++=</a> <a href="#58103" title="Iterable[T]">s</a>
		<a href="#58499" title="sbt.wrap.MutableSetWrapper[T]">set</a>.<a href="wrap/Wrappers.scala.html#54814" title="=&gt; sbt.wrap.Set[T]">readOnly</a>
	}
}

<span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LoaderBase extends java.net.URLClassLoader with NotNull with ScalaObject" id="8462">LoaderBase</a>(<a title="Array[java.net.URL]" id="58518">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="58519">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>) <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#58518" title="Array[java.net.URL]">urls</a>, <a href="#58519" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#58519" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="58512">loadClass</a>(<a title="String" id="58547">className</a>: <span title="String">String</span>, <a title="Boolean" id="58548">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span class="keyword">val</span> <a title="java.lang.Class[_]" id="58553">loaded</a> = <a href="#8462" title="(java.lang.String)java.lang.Class[_]" id="18679">findLoadedClass</a>(<a href="#58547" title="String">className</a>)
		<span class="keyword">val</span> <a title="java.lang.Class[_ &gt;: _$3 with ?0]" id="58554">found</a> =
			<span title="java.lang.Class[_53]" class="keyword">if</span>(<a href="#58553" title="java.lang.Class[_]">loaded</a> <a title="(AnyRef)Boolean" id="3448">==</a> <span title="Null(null)" class="keyword">null</span>)
				<a href="#58513" title="(String)Class[_]">doLoadClass</a>(<a href="#58547" title="String">className</a>)
			<span class="keyword">else</span>
				<a href="#58553" title="java.lang.Class[_]">loaded</a>
			
		<span title="Unit" class="keyword">if</span>(<a href="#58548" title="Boolean">resolve</a>)
			<a href="#8462" title="(java.lang.Class[_])Unit">resolveClass</a>(<a href="#58554" title="java.lang.Class[_ &gt;: _$3 with ?0]">found</a>)
		<a href="#58554" title="java.lang.Class[_ &gt;: _$3 with ?0]">found</a>
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(String)Class[_]" id="58513">doLoadClass</a>(<a title="String" id="58558">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_]
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String)Class[_]" id="58514">selfLoadClass</a>(<a title="String" id="58597">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] = <span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#58597" title="String">className</a>, <span title="Boolean(false)" class="keyword">false</span>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class IntermediateLoader extends sbt.LoaderBase with NotNull with ScalaObject" id="10271">IntermediateLoader</a>(<a title="Array[java.net.URL]" id="58621">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="58622">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>) <span class="keyword">extends</span> <a href="#8462" title="sbt.LoaderBase">LoaderBase</a>(<a href="#58621" title="Array[java.net.URL]">urls</a>, <a href="#58622" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(String)Class[_]" id="58617">doLoadClass</a>(<a title="String" id="58623">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span class="comment">// if this loader is asked to load an sbt class, it must be because the project we are building is sbt itself,</span>
		 <span class="comment">// so we want to load the version of classes on the project classpath, not the parent</span>
		<span title="java.lang.Class[_54]" class="keyword">if</span>(<a href="#58623" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#9021" title="object sbt.Loaders">Loaders</a>.<a href="#58630" title="=&gt; java.lang.String">SbtPackage</a>))
			<a href="#10271" title="(java.lang.String)java.lang.Class[_]">findClass</a>(<a href="#58623" title="String">className</a>)
		<span class="keyword">else</span>
			<a href="#58514" title="(String)Class[_]">selfLoadClass</a>(<a href="#58623" title="String">className</a>)
	}
}
<span class="comment">/** Delegates class loading to `parent` for all classes included by `filter`.  An attempt to load classes excluded by `filter`
* results in a `ClassNotFoundException`.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FilteredLoader extends java.lang.ClassLoader with NotNull with ScalaObject" id="13250">FilteredLoader</a>(<a title="java.lang.ClassLoader" id="58666">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.ClassFilter" id="58667">filter</a>: <a href="#2101" title="sbt.ClassFilter">ClassFilter</a>) <span class="keyword">extends</span> <span title="java.lang.ClassLoader">ClassLoader</span>(<a href="#58666" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#58666" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(java.lang.ClassLoader,Iterable[String])sbt.FilteredLoader" id="58660" class="keyword">this</a>(<a title="java.lang.ClassLoader" id="58674">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="58675">excludePackages</a>: <span title="Iterable[String]">Iterable</span>[String]) = <a href="#13250" title="FilteredLoader.this.type" class="keyword">this</a>(<a href="#58674" title="java.lang.ClassLoader">parent</a>, <span title="sbt.ExcludePackagesFilter" class="keyword">new</span> <a href="#11753" title="sbt.ExcludePackagesFilter">ExcludePackagesFilter</a>(<a href="#58675" title="Iterable[String]">excludePackages</a>))
	
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="58661">loadClass</a>(<a title="String" id="58688">className</a>: <span title="String">String</span>, <a title="Boolean" id="58689">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[?0]" class="keyword">if</span>(<a href="#58667" title="sbt.ClassFilter">filter</a>.<a href="#58665" title="(String)Boolean">include</a>(<a href="#58688" title="String">className</a>))
			<span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#58688" title="String">className</a>, <a href="#58689" title="Boolean">resolve</a>)
		<span class="keyword">else</span>
			<span title="Nothing" class="keyword">throw</span> <a title="(java.lang.String)java.lang.ClassNotFoundException" id="58543" class="keyword">new</a> <a title="java.lang.ClassNotFoundException" id="1668">ClassNotFoundException</a>(<a href="#58688" title="String">className</a>)
	}
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class SelectiveLoader extends java.net.URLClassLoader with NotNull with ScalaObject" id="11873">SelectiveLoader</a>(<a title="Array[java.net.URL]" id="58719">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="58720">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.ClassFilter" id="58721">filter</a>: <a href="#2101" title="sbt.ClassFilter">ClassFilter</a>) <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#58719" title="Array[java.net.URL]">urls</a>, <a href="#58720" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#58720" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(Array[java.net.URL],java.lang.ClassLoader,Iterable[String])sbt.SelectiveLoader" id="58713" class="keyword">this</a>(<a title="Array[java.net.URL]" id="58742">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="58743">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="58744">includePackages</a>: <span title="Iterable[String]">Iterable</span>[String]) = <a href="#11873" title="SelectiveLoader.this.type" class="keyword">this</a>(<a href="#58742" title="Array[java.net.URL]">urls</a>, <a href="#58743" title="java.lang.ClassLoader">parent</a>, <span title="sbt.IncludePackagesFilter" class="keyword">new</span> <a href="#8990" title="sbt.IncludePackagesFilter">IncludePackagesFilter</a>(<a href="#58744" title="Iterable[String]">includePackages</a>))
	
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="58714">loadClass</a>(<a title="String" id="58753">className</a>: <span title="String">String</span>, <a title="Boolean" id="58754">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[_55]" class="keyword">if</span>(<a href="#58721" title="sbt.ClassFilter">filter</a>.<a href="#58665" title="(String)Boolean">include</a>(<a href="#58753" title="String">className</a>))
			<span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#58753" title="String">className</a>, <a href="#58754" title="Boolean">resolve</a>)
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="java.lang.Class[_]" id="58769">loaded</a> = <a href="#58720" title="java.lang.ClassLoader">parent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#58753" title="String">className</a>)
			<span title="Unit" class="keyword">if</span>(<a href="#58754" title="Boolean">resolve</a>)
				<a href="#11873" title="(java.lang.Class[_])Unit">resolveClass</a>(<a href="#58769" title="java.lang.Class[_]">loaded</a>)
			<a href="#58769" title="java.lang.Class[_]">loaded</a>
		}
	}
}
<span class="keyword">private</span> <span class="keyword">trait</span> <a title="trait ClassFilter extends java.lang.Object" id="2101">ClassFilter</a>
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="58665">include</a>(<a title="String" id="58694">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span>
}
<span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PackageFilter extends java.lang.Object with sbt.ClassFilter with ScalaObject" id="9935">PackageFilter</a>(<a title="Iterable[String]" id="58798">packages</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#2101" title="sbt.ClassFilter">ClassFilter</a>
{
	<span title="(Boolean)Unit">require</span>(<a href="#58798" title="Iterable[String]">packages</a>.<a title="((String) =&gt; Boolean)Boolean" id="16149">forall</a>(<a href="#58801" title="String">_</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)))
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String)Boolean" id="58681">matches</a>(<a title="String" id="58802">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <a href="#58798" title="Iterable[String]">packages</a>.<a title="((String) =&gt; Boolean)Boolean" id="16150">exists</a>(<a href="#58802" title="String">className</a>.<a href="#58805" title="(java.lang.String)Boolean">startsWith</a>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class ExcludePackagesFilter extends sbt.PackageFilter with ScalaObject" id="11753">ExcludePackagesFilter</a>(<a title="Iterable[String]" id="58686">exclude</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#9935" title="sbt.PackageFilter">PackageFilter</a>(<a href="#58686" title="Iterable[String]">exclude</a>)
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="58685">include</a>(<a title="String" id="58809">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="#58681" title="(String)Boolean">matches</a>(<a href="#58809" title="String">className</a>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class IncludePackagesFilter extends sbt.PackageFilter with ScalaObject" id="8990">IncludePackagesFilter</a>(<a title="Iterable[String]" id="58751">include</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#9935" title="sbt.PackageFilter">PackageFilter</a>(<a href="#58751" title="Iterable[String]">include</a>)
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="58750">include</a>(<a title="String" id="58812">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <a href="#58681" title="(String)Boolean">matches</a>(<a href="#58812" title="String">className</a>)
}

<span class="keyword">private</span> <span class="keyword">class</span> <a title="class LazyFrameworkLoader extends sbt.LoaderBase with NotNull with ScalaObject" id="12212">LazyFrameworkLoader</a>(<a title="String" id="58828">baseName</a>: <span title="String">String</span>, <a title="Array[java.net.URL]" id="58829">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="58830">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="java.lang.ClassLoader" id="58831">grandparent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>)
	<span class="keyword">extends</span> <a href="#8462" title="sbt.LoaderBase">LoaderBase</a>(<a href="#58829" title="Array[java.net.URL]">urls</a>, <a href="#58830" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(String)Class[_]" id="58822">doLoadClass</a>(<a title="String" id="58832">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[_57]" class="keyword">if</span>(<a href="#58832" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#58828" title="String">baseName</a>))
			<a href="#12212" title="(java.lang.String)java.lang.Class[_]">findClass</a>(<a href="#58832" title="String">className</a>)
		<span class="keyword">else</span> <span title="java.lang.Class[_56]" class="keyword">if</span>(<a href="#9021" title="object sbt.Loaders">Loaders</a>.<a href="#58632" title="(String)Boolean">isSbtClass</a>(<a href="#58832" title="String">className</a>)) <span class="comment">// we circumvent the parent loader because we know that we want the</span>
			<a href="#58831" title="java.lang.ClassLoader">grandparent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#58832" title="String">className</a>)              <span class="comment">// version of sbt that is currently the builder (not the project being built)</span>
		<span class="keyword">else</span>
			<a href="#58830" title="java.lang.ClassLoader">parent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#58832" title="String">className</a>)
	}
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.Loaders" id="9021">Loaders</a>
{
	<span class="keyword">val</span> <a title="java.lang.String" id="58630">SbtPackage</a> = <span title="java.lang.String(&quot;sbt.&quot;)" class="string">&quot;sbt.&quot;</span>
	<span class="keyword">def</span> <a title="(String)Boolean" id="58632">isSbtClass</a>(<a title="String" id="58839">className</a>: <span title="String">String</span>) = <a href="#58839" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#9021" title="object sbt.Loaders">Loaders</a>.<a href="#58630" title="=&gt; java.lang.String">SbtPackage</a>)
}
        </pre>
    </body>
</html>