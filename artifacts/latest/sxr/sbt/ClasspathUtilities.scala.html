<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/ClasspathUtilities.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009, 2010 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> java.net.{URI, URL, URLClassLoader}
<span class="keyword">import</span> java.util.Collections
<span class="keyword">import</span> scala.collection.Set
<span class="keyword">import</span> scala.collection.mutable.{HashSet, ListBuffer}
<span class="keyword">import</span> xsbt.ScalaInstance
<span class="keyword">import</span> xsbt.FileUtilities.{createTemporaryDirectory, withTemporaryDirectory, write}

<span class="keyword">object</span> <a title="object sbt.ClasspathUtilities" id="13105">ClasspathUtilities</a>
{
	<span class="keyword">def</span> <a title="(sbt.PathFinder)Array[java.net.URL]" id="51733">toClasspath</a>(<a title="sbt.PathFinder" id="54956">finder</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>): <span title="Array[java.net.URL]">Array</span>[URL] = <a href="#54956" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#49338" title="=&gt; Array[java.net.URL]">getURLs</a>
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Array[java.net.URL]" id="51734">toClasspath</a>(<a title="Iterable[sbt.Path]" id="54958">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Array[java.net.URL]">Array</span>[URL] = <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49324" title="(Iterable[sbt.Path])Array[java.net.URL]">getURLs</a>(<a href="#54958" title="Iterable[sbt.Path]">paths</a>)
	<span class="keyword">def</span> <a title="(sbt.PathFinder)java.lang.ClassLoader" id="51735">toLoader</a>(<a title="sbt.PathFinder" id="53917">finder</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#51737" title="(Iterable[sbt.Path])java.lang.ClassLoader">toLoader</a>(<a href="#53917" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#49335" title="=&gt; scala.collection.Set[sbt.Path]">get</a>)
	<span class="keyword">def</span> <a title="(sbt.PathFinder,java.lang.ClassLoader)java.lang.ClassLoader" id="51736">toLoader</a>(<a title="sbt.PathFinder" id="53915">finder</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>, <a title="java.lang.ClassLoader" id="53916">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#51738" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#53915" title="sbt.PathFinder">finder</a>.<a href="Path.scala.html#49335" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#53916" title="java.lang.ClassLoader">parent</a>)
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path])java.lang.ClassLoader" id="51737">toLoader</a>(<a title="Iterable[sbt.Path]" id="53914">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="java.lang.ClassLoader">ClassLoader</span> = <a href="#51738" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#53914" title="Iterable[sbt.Path]">paths</a>, <a href="#51739" title="=&gt; java.lang.ClassLoader">rootLoader</a>)
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader" id="51738">toLoader</a>(<a title="Iterable[sbt.Path]" id="53912">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="java.lang.ClassLoader" id="53913">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> = <span title="java.net.URLClassLoader" class="keyword">new</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#51734" title="(Iterable[sbt.Path])Array[java.net.URL]">toClasspath</a>(<a href="#53912" title="Iterable[sbt.Path]">paths</a>), <a href="#53913" title="java.lang.ClassLoader">parent</a>)
	
	<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="java.lang.ClassLoader" id="51740">rootLoader</a> =
	{
		<span class="keyword">def</span> <a title="(java.lang.ClassLoader)java.lang.ClassLoader" id="54992">parent</a>(<a title="java.lang.ClassLoader" id="54993">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>): <span title="java.lang.ClassLoader">ClassLoader</span> =
		{
			<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="54994">p</a> = <a href="#54993" title="java.lang.ClassLoader">loader</a>.<a title="()java.lang.ClassLoader" id="18925">getParent</a>
			<span title="java.lang.ClassLoader" class="keyword">if</span>(<a href="#54994" title="java.lang.ClassLoader">p</a> <a title="(AnyRef)Boolean" id="6017">eq</a> <span title="Null(null)" class="keyword">null</span>) <a href="#54993" title="java.lang.ClassLoader">loader</a> <span class="keyword">else</span> <a href="#54992" title="(java.lang.ClassLoader)java.lang.ClassLoader">parent</a>(<a href="#54994" title="java.lang.ClassLoader">p</a>)
		}
		<a href="#54992" title="(java.lang.ClassLoader)java.lang.ClassLoader">parent</a>(<a title="()java.lang.Class[_]" id="3454">getClass</a>.<span title="()java.lang.ClassLoader">getClassLoader</span>)
	}
	
	<span class="keyword">final</span> <span class="keyword">val</span> <a title="java.lang.String(&quot;app.class.path&quot;)" id="51741">AppClassPath</a> = <span title="java.lang.String(&quot;app.class.path&quot;)" class="string">&quot;app.class.path&quot;</span>
	<span class="keyword">final</span> <span class="keyword">val</span> <a title="java.lang.String(&quot;boot.class.path&quot;)" id="51743">BootClassPath</a> = <span title="java.lang.String(&quot;boot.class.path&quot;)" class="string">&quot;boot.class.path&quot;</span>
	
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],xsbt.ScalaInstance,sbt.Path)Iterable[sbt.Path]" id="51745">createClasspathResources</a>(<a title="Iterable[sbt.Path]" id="55012">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="xsbt.ScalaInstance" id="55013">instance</a>: <a href="../ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>, <a title="sbt.Path" id="55014">baseDir</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>): <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
		<a href="#51746" title="(Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path)Iterable[sbt.Path]">createClasspathResources</a>(<a href="#55012" title="Iterable[sbt.Path]">classpath</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49319" title="(Iterable[java.io.File])Iterable[sbt.Path]">fromFiles</a>(<a href="#55013" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15021" title="=&gt; List[java.io.File]">jars</a>), <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49319" title="(Iterable[java.io.File])Iterable[sbt.Path]">fromFiles</a>(<a href="#55013" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15021" title="=&gt; List[java.io.File]">jars</a>), <a href="#55014" title="sbt.Path">baseDir</a>)
		
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path)Iterable[sbt.Path]" id="51746">createClasspathResources</a>(<a title="Iterable[sbt.Path]" id="55016">appPaths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="55017">bootPaths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="sbt.Path" id="55018">baseDir</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>): <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
	{
		<span class="keyword">def</span> <a title="(String,Iterable[sbt.Path])Unit" id="55022">writePaths</a>(<a title="String" id="55023">name</a>: <span title="String">String</span>, <a title="Iterable[sbt.Path]" id="55024">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <a title="Unit" id="2109">Unit</a> =
			<a href="../FileUtilities.scala.html#18266" title="(java.io.File,String)Unit">write</a>(<a href="#55018" title="sbt.Path">baseDir</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> <a href="#55023" title="String">name</a> <a href="Path.scala.html#49359" title="=&gt; java.io.File">asFile</a>, <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49299" title="(Iterable[sbt.Path])String">makeString</a>(<a href="#55024" title="Iterable[sbt.Path]">paths</a>))
		<a href="#55022" title="(String,Iterable[sbt.Path])Unit">writePaths</a>(<span title="java.lang.String(&quot;app.class.path&quot;)">AppClassPath</span>, <a href="#55016" title="Iterable[sbt.Path]">appPaths</a>)
		<a href="#55022" title="(String,Iterable[sbt.Path])Unit">writePaths</a>(<span title="java.lang.String(&quot;boot.class.path&quot;)">BootClassPath</span>, <a href="#55017" title="Iterable[sbt.Path]">bootPaths</a>)
		<a href="#55016" title="Iterable[sbt.Path]">appPaths</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a title="(sbt.Path*)Seq[sbt.Path]" id="734">Seq</a>(<a href="#55018" title="sbt.Path">baseDir</a>)
	}

	<span class="comment">/** The client is responsible for cleaning up the temporary directory.*/</span>
	<span class="keyword">def</span> <a title="[T](Iterable[sbt.Path],xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)" id="51747">makeLoader</a>[<a title="&gt;: Nothing &lt;: Any" id="51749">T</a>](<a title="Iterable[sbt.Path]" id="55042">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="xsbt.ScalaInstance" id="55043">instance</a>: <a href="../ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>): <span title="(java.lang.ClassLoader, sbt.Path)">(</span>ClassLoader, Path) =
		<a href="#51750" title="(Iterable[sbt.Path],java.lang.ClassLoader,xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)">makeLoader</a>(<a href="#55042" title="Iterable[sbt.Path]">classpath</a>, <a href="#55043" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#15012" title="=&gt; java.lang.ClassLoader">loader</a>, <a href="#55043" title="xsbt.ScalaInstance">instance</a>)
	<span class="comment">/** The client is responsible for cleaning up the temporary directory.*/</span>
	<span class="keyword">def</span> <a title="[T](Iterable[sbt.Path],java.lang.ClassLoader,xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)" id="51750">makeLoader</a>[<a title="&gt;: Nothing &lt;: Any" id="51752">T</a>](<a title="Iterable[sbt.Path]" id="55045">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="java.lang.ClassLoader" id="55046">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="xsbt.ScalaInstance" id="55047">instance</a>: <a href="../ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>): <span title="(java.lang.ClassLoader, sbt.Path)">(</span>ClassLoader, Path) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="55051">dir</a> = <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49318" title="(java.io.File)sbt.Path">fromFile</a>(<a href="../FileUtilities.scala.html#18246" title="=&gt; java.io.File">createTemporaryDirectory</a>)
		<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="55052">modifiedClasspath</a> = <a href="#51745" title="(Iterable[sbt.Path],xsbt.ScalaInstance,sbt.Path)Iterable[sbt.Path]">createClasspathResources</a>(<a href="#55045" title="Iterable[sbt.Path]">classpath</a>, <a href="#55047" title="xsbt.ScalaInstance">instance</a>, <a href="#55051" title="sbt.Path">dir</a>)
		<span title="(java.lang.ClassLoader,sbt.Path)(java.lang.ClassLoader, sbt.Path)">(</span><a href="#51738" title="(Iterable[sbt.Path],java.lang.ClassLoader)java.lang.ClassLoader">toLoader</a>(<a href="#55052" title="Iterable[sbt.Path]">modifiedClasspath</a>, <a href="#55046" title="java.lang.ClassLoader">parent</a>), <a href="#55051" title="sbt.Path">dir</a>)
	}
	
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Class[_])Unit" id="51753">printSource</a>(<a title="Class[_]" id="55074">c</a>: <span title="Class[_]">Class</span>[_]) =
		<a title="(Any)Unit" id="6588">println</a>(<a href="#55074" title="Class[_]">c</a>.<a title="()java.lang.String" id="3927">getName</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; loader=&quot;)" class="string">&quot; loader=&quot;</span> <span title="(Any)java.lang.String">+</span><a href="#55074" title="Class[_]">c</a>.<span title="()java.lang.ClassLoader">getClassLoader</span> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; location=&quot;)" class="string">&quot; location=&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49273" title="(Class[_])java.io.File">classLocationFile</a>(<a href="#55074" title="Class[_]">c</a>))
	
	<span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="51754">isArchive</a>(<a title="sbt.Path" id="55088">path</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>): <span title="Boolean">Boolean</span> = <a href="#51755" title="(java.io.File)Boolean">isArchive</a>(<a href="#55088" title="sbt.Path">path</a>.<a href="Path.scala.html#49359" title="=&gt; java.io.File">asFile</a>)
	<span class="keyword">def</span> <a title="(java.io.File)Boolean" id="51755">isArchive</a>(<a title="java.io.File" id="55090">file</a>: <span title="java.io.File">File</span>): <span title="Boolean">Boolean</span> = <a href="#51756" title="(String)Boolean">isArchiveName</a>(<a href="#55090" title="java.io.File">file</a>.<a title="()java.lang.String" id="16759">getName</a>)
	<span class="keyword">def</span> <a title="(String)Boolean" id="51756">isArchiveName</a>(<a title="String" id="55091">fileName</a>: <span title="String">String</span>) = <a href="#55091" title="String">fileName</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>) <a title="(Boolean)Boolean" id="2693">||</a> <a href="#55091" title="String">fileName</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.zip&quot;)" class="string">&quot;.zip&quot;</span>)
	<span class="comment">// Partitions the given classpath into (jars, directories)</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])" id="51757">separate</a>(<a title="Iterable[java.io.File]" id="55093">paths</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]): <span title="(Iterable[java.io.File], Iterable[java.io.File])">(</span>Iterable[File], Iterable[File]) = <a href="#55093" title="Iterable[java.io.File]">paths</a>.<a title="((java.io.File) =&gt; Boolean)(Iterable[java.io.File], Iterable[java.io.File])" id="15947">partition</a>(<a href="#51755" title="(java.io.File)Boolean">isArchive</a>)
	<span class="comment">// Partitions the given classpath into (jars, directories)</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])(Iterable[java.io.File], Iterable[java.io.File])" id="51758">separatePaths</a>(<a title="Iterable[sbt.Path]" id="55098">paths</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <a href="#51757" title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])">separate</a>(<a href="#55098" title="Iterable[sbt.Path]">paths</a>.<span title="((sbt.Path) =&gt; java.io.File)Iterable[java.io.File]">map</span>(<a href="#55102" title="sbt.Path">_</a>.<a href="Path.scala.html#49359" title="=&gt; java.io.File">asFile</a>.<span title="()java.io.File">getCanonicalFile</span>))
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])" id="51759">buildSearchPaths</a>(<a title="Iterable[sbt.Path]" id="55103">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span>wrap.Set[File], wrap.Set[File]) =
	{
		<span class="keyword">val</span> <a href="#55105" title="(Iterable[java.io.File], Iterable[java.io.File])">(</a><a href="#55104" title="Iterable[java.io.File]" id="55105">jars</a>, <a href="#55104" title="Iterable[java.io.File]" id="55106">dirs</a>) = <a href="#51758" title="(Iterable[sbt.Path])(Iterable[java.io.File], Iterable[java.io.File])">separatePaths</a>(<a href="#55103" title="Iterable[sbt.Path]">classpath</a>)
		<span title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span><a href="#51770" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#55105" title="Iterable[java.io.File]">jars</a> <span title="(Iterable[java.io.File])Collection[java.io.File]">++</span> <a href="#51766" title="=&gt; sbt.wrap.Set[java.io.File]">extraJars</a>.<a href="wrap/Wrappers.scala.html#51810" title="=&gt; List[java.io.File]">toList</a>), <a href="#51770" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#55106" title="Iterable[java.io.File]">dirs</a> <span title="(Iterable[java.io.File])Collection[java.io.File]">++</span> <a href="#51768" title="=&gt; sbt.wrap.Set[java.io.File]">extraDirs</a>.<a href="wrap/Wrappers.scala.html#51810" title="=&gt; List[java.io.File]">toList</a>))
	}
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File],java.io.File)Boolean" id="51760">onClasspath</a>(<a title="sbt.wrap.Set[java.io.File]" id="55426">classpathJars</a>: wrap.<a href="wrap/Wrappers.scala.html#14883" title="sbt.wrap.Set[java.io.File]">Set</a>[File], <a title="sbt.wrap.Set[java.io.File]" id="55427">classpathDirectories</a>: wrap.<a href="wrap/Wrappers.scala.html#14883" title="sbt.wrap.Set[java.io.File]">Set</a>[File], <a title="java.io.File" id="55428">file</a>: <span title="java.io.File">File</span>): <span title="Boolean">Boolean</span> =
	{
		<span class="keyword">val</span> <a title="java.io.File" id="55429">f</a> = <a href="#55428" title="java.io.File">file</a>.<span title="()java.io.File">getCanonicalFile</span>
		<span title="Boolean" class="keyword">if</span>(<a href="#13105" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="#51755" title="(java.io.File)Boolean">isArchive</a>(<a href="#55429" title="java.io.File">f</a>))
			<a href="#55426" title="sbt.wrap.Set[java.io.File]">classpathJars</a>.<a href="wrap/Wrappers.scala.html#51812" title="(java.io.File)Boolean">contains</a>(<a href="#55429" title="java.io.File">f</a>)
		<span class="keyword">else</span>
			<a href="#55427" title="sbt.wrap.Set[java.io.File]">classpathDirectories</a>.<a href="wrap/Wrappers.scala.html#51810" title="=&gt; List[java.io.File]">toList</a>.<a title="((java.io.File) =&gt; Boolean)Option[java.io.File]" id="15543">find</a>(<a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49314" title="(java.io.File,java.io.File)Option[String]">relativize</a>(<a href="#55434" title="java.io.File">_</a>, <a href="#55429" title="java.io.File">f</a>).<span title="=&gt; Boolean">isDefined</span>).<span title="=&gt; Boolean">isDefined</span>
	}
	
	<span class="comment">/** Returns all entries in 'classpath' that correspond to a compiler plugin.*/</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[java.io.File]" id="51761">compilerPlugins</a>(<a title="Iterable[sbt.Path]" id="51773">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Iterable[java.io.File]">Iterable</span>[File] =
	{
		<span class="keyword">val</span> <a title="java.net.URLClassLoader" id="55437">loader</a> = <a title="(Array[java.net.URL])java.net.URLClassLoader" id="18974" class="keyword">new</a> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49324" title="(Iterable[sbt.Path])Array[java.net.URL]">getURLs</a>(<a href="#51773" title="Iterable[sbt.Path]">classpath</a>))
		wrap.<a href="wrap/Wrappers.scala.html#14839" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#49474" title="(java.util.Enumeration[java.net.URL])List[java.net.URL]">toList</a>(<a href="#55437" title="java.net.URLClassLoader">loader</a>.<a title="(java.lang.String)java.util.Enumeration[java.net.URL]" id="18489">getResources</a>(<span title="java.lang.String(&quot;scalac-plugin.xml&quot;)" class="string">&quot;scalac-plugin.xml&quot;</span>)).<a title="((java.net.URL) =&gt; Iterable[java.io.File])List[java.io.File]" id="15552">flatMap</a>(<a href="#51763" title="(Boolean)(java.net.URL)List[java.io.File]">asFile</a>(<span title="Boolean(true)" class="keyword">true</span>))
	}
	<span class="comment">/** Converts the given URL to a File.  If the URL is for an entry in a jar, the File for the jar is returned. */</span>
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(java.net.URL)List[java.io.File]" id="51762">asFile</a>(<a title="java.net.URL" id="55456">url</a>: <span title="java.net.URL">URL</span>): <span title="List[java.io.File]">List</span>[File] = <a href="#51763" title="(Boolean)(java.net.URL)List[java.io.File]">asFile</a>(<span title="Boolean(false)" class="keyword">false</span>)(<a href="#55456" title="java.net.URL">url</a>)
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="(Boolean)(java.net.URL)List[java.io.File]" id="51763">asFile</a>(<a title="Boolean" id="55454">jarOnly</a>: <span title="Boolean">Boolean</span>)(<a title="java.net.URL" id="55455">url</a>: <span title="java.net.URL">URL</span>): <span title="List[java.io.File]">List</span>[File] =
	{
		<span class="keyword">try</span>
		{
			<a href="#55455" title="java.net.URL">url</a>.<a title="()java.lang.String" id="19072">getProtocol</a> <span title="List[java.io.File]" class="keyword">match</span>
			{
				<span title="List[java.io.File]" class="keyword">case</span> <span title="java.lang.String(&quot;file&quot;)" class="string">&quot;file&quot;</span> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#55454" title="Boolean">jarOnly</a>=&gt; <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49269" title="(java.net.URL)java.io.File">toFile</a>(<a href="#55455" title="java.net.URL">url</a>) <a href="#55471" title="(java.io.File)List[java.io.File]">::</a> <span title="object Nil">Nil</span>
				<span title="List[java.io.File]" class="keyword">case</span> <span title="java.lang.String(&quot;jar&quot;)" class="string">&quot;jar&quot;</span> =&gt;
					<span class="keyword">val</span> <a title="java.lang.String" id="55486">path</a> = <a href="#55455" title="java.net.URL">url</a>.<a title="()java.lang.String" id="19067">getPath</a>
					<span class="keyword">val</span> <a title="Int" id="55487">end</a> = <a href="#55486" title="java.lang.String">path</a>.<a title="(Int)Int" id="6377">indexOf</a>(<span title="Int(33)" class="char">'!'</span>)
					<a title="(java.net.URI)java.io.File" id="16758" class="keyword">new</a> <span title="java.io.File">File</span>(<span title="java.net.URI" class="keyword">new</span> <a title="java.net.URI" id="4572">URI</a>(<span title="java.lang.String" class="keyword">if</span>(<a href="#55487" title="Int">end</a> <a title="(Int)Boolean" id="3084">==</a> -<span title="Int(-1)" class="int">1</span>) <a href="#55486" title="java.lang.String">path</a> <span class="keyword">else</span> <a href="#55486" title="java.lang.String">path</a>.<a title="(Int,Int)java.lang.String" id="6388">substring</a>(<span title="Int(0)" class="int">0</span>, <a href="#55487" title="Int">end</a>))) <a href="#55494" title="(java.io.File)List[java.io.File]">::</a> <span title="object Nil">Nil</span>
				<span title="Nil.type" class="keyword">case</span> _ =&gt; <span title="object Nil">Nil</span>
			}
		}
		<span class="keyword">catch</span> { <span title="Nil.type" class="keyword">case</span> <a title="Exception" id="55508">e</a>: <a title="Exception" id="2071">Exception</a> =&gt; <span title="object Nil">Nil</span> }
	}
	
	<span class="keyword">private</span> <span class="keyword">lazy</span> <span class="keyword">val</span> <a href="#51767" title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])" id="51765">(</a><a href="#51764" title="sbt.wrap.Set[java.io.File]" id="51767">extraJars</a>, <a href="#51764" title="sbt.wrap.Set[java.io.File]" id="51769">extraDirs</a>) =
	{
		<span class="keyword">import</span> scala.tools.nsc.GenericRunnerCommand
		<span class="keyword">val</span> <a title="scala.tools.nsc.GenericRunnerSettings" id="55118">settings</a> = (<a title="(List[String],(String) =&gt; Unit)scala.tools.nsc.GenericRunnerCommand" id="37267" class="keyword">new</a> <a title="scala.tools.nsc.GenericRunnerCommand" id="21961">GenericRunnerCommand</a>(<span title="object Nil">Nil</span>, <a title="String" id="55138">message</a> =&gt; <a title="(String)Nothing" id="6476">error</a>(<a href="#55138" title="String">message</a>))).<a title="=&gt; scala.tools.nsc.GenericRunnerSettings" id="37263">settings</a>
		<span class="keyword">val</span> <a title="List[java.io.File]" id="55119">bootPaths</a> = <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49158" title="(String)Array[java.lang.String]">pathSplit</a>(<a href="#55118" title="scala.tools.nsc.GenericRunnerSettings">settings</a>.<a title="=&gt; settings.StringSetting" id="30035">bootclasspath</a>.<span title="=&gt; String">value</span>).<span title="((java.lang.String) =&gt; java.io.File)Array[java.io.File]">map</span>(<a title="java.lang.String" id="55353">p</a> =&gt; <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#55353" title="java.lang.String">p</a>)).<a title="=&gt; List[java.io.File]" id="15975">toList</a>
		<span class="keyword">val</span> <a href="#55121" title="(Iterable[java.io.File], Iterable[java.io.File])">(</a><a href="#55120" title="Iterable[java.io.File]" id="55121">bootJars</a>, <a href="#55120" title="Iterable[java.io.File]" id="55122">bootDirs</a>) = <a href="#51757" title="(Iterable[java.io.File])(Iterable[java.io.File], Iterable[java.io.File])">separate</a>(<a href="#55119" title="List[java.io.File]">bootPaths</a>)
		<span class="keyword">val</span> <a title="List[java.io.File]" id="55123">extJars</a> =
		{
			<span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[java.io.File]" id="55360">buffer</a> = <span title="scala.collection.mutable.ListBuffer[java.io.File]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[java.io.File]" id="20067">ListBuffer</a>[File]
			<span class="keyword">def</span> <a title="(java.io.File)Unit" id="55361">findJars</a>(<a title="java.io.File" id="55362">dir</a>: <span title="java.io.File">File</span>)
			{
				<a href="#55360" title="scala.collection.mutable.ListBuffer[java.io.File]">buffer</a> <a title="(Iterable[java.io.File])Unit" id="45009">++=</a> <a href="#55362" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<span title="sbt.SimpleFileFilter" class="keyword">new</span> <a href="NameFilter.scala.html#9768" title="sbt.SimpleFileFilter">SimpleFileFilter</a>(<a href="#51755" title="(java.io.File)Boolean">isArchive</a>))
				<span class="keyword">for</span>(<a title="((java.io.File) =&gt; Unit)Unit" id="55383">dir</a> &lt;- <a href="#55362" title="java.io.File">dir</a>.<span title="(java.io.FileFilter)Array[java.io.File]">listFiles</span>(<a href="NameFilter.scala.html#12553" title="object sbt.DirectoryFilter">DirectoryFilter</a>))
					<a href="#55361" title="(java.io.File)Unit">findJars</a>(<a href="#55383" title="java.io.File">dir</a>)
			}
			<span class="keyword">for</span>(<a title="(((java.lang.String, java.io.File)) =&gt; Unit)Unit" id="55400">path</a> &lt;- <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49158" title="(String)Array[java.lang.String]">pathSplit</a>(<a href="#55118" title="scala.tools.nsc.GenericRunnerSettings">settings</a>.<a title="=&gt; settings.StringSetting" id="30037">extdirs</a>.<span title="=&gt; String">value</span>); <span class="keyword">val</span> <a title="java.io.File" id="55401">dir</a> = <span title="java.io.File" class="keyword">new</span> <span title="java.io.File">File</span>(<a href="#55400" title="java.lang.String">path</a>) <span class="keyword">if</span> <a href="#55401" title="java.io.File">dir</a>.<a title="()Boolean" id="16773">isDirectory</a>)
				<a href="#55361" title="(java.io.File)Unit">findJars</a>(<a href="#55401" title="java.io.File">dir</a>)
			<a href="#55360" title="scala.collection.mutable.ListBuffer[java.io.File]">buffer</a>.<a title="=&gt; List[java.io.File]" id="49556">readOnly</a>.<a title="((java.io.File) =&gt; java.io.File)List[java.io.File]" id="15531">map</a>(<a href="#55405" title="java.io.File">_</a>.<span title="()java.io.File">getCanonicalFile</span>)
		}
		<span title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</span><a href="#51770" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#55123" title="List[java.io.File]">extJars</a> <a title="(Iterable[java.io.File])List[java.io.File]" id="15510">++</a> <a href="#55121" title="Iterable[java.io.File]">bootJars</a>.<span title="((java.io.File) =&gt; java.io.File)Iterable[java.io.File]">map</span>(<a href="#55417" title="java.io.File">_</a>.<span title="()java.io.File">getCanonicalFile</span>)), <a href="#51770" title="(Iterable[java.io.File])sbt.wrap.Set[java.io.File]">linkedSet</a>(<a href="#55122" title="Iterable[java.io.File]">bootDirs</a>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](Iterable[T])sbt.wrap.Set[T]" id="51770">linkedSet</a>[<a title="&gt;: Nothing &lt;: Any" id="51772">T</a>](<a title="Iterable[T]" id="55113">s</a>: <span title="Iterable[T]">Iterable</span>[T]): wrap.<a href="wrap/Wrappers.scala.html#14883" title="sbt.wrap.Set[T]">Set</a>[T] =
	{
		<span class="keyword">val</span> <a title="sbt.wrap.MutableSetWrapper[T]" id="55509">set</a> = <span title="sbt.wrap.MutableSetWrapper[T]" class="keyword">new</span> wrap.<a href="wrap/Wrappers.scala.html#14841" title="sbt.wrap.MutableSetWrapper[T]">MutableSetWrapper</a>(<a title="()java.util.LinkedHashSet[T]" id="51838" class="keyword">new</a> java.util.<a title="java.util.LinkedHashSet[T]" id="5814">LinkedHashSet</a>[T])
		<a href="#55509" title="sbt.wrap.MutableSetWrapper[T]">set</a> <a href="wrap/Wrappers.scala.html#51829" title="(Iterable[T])Unit">++=</a> <a href="#55113" title="Iterable[T]">s</a>
		<a href="#55509" title="sbt.wrap.MutableSetWrapper[T]">set</a>.<a href="wrap/Wrappers.scala.html#51824" title="=&gt; sbt.wrap.Set[T]">readOnly</a>
	}
}

<span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class LoaderBase extends java.net.URLClassLoader with NotNull with ScalaObject" id="8463">LoaderBase</a>(<a title="Array[java.net.URL]" id="55528">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="55529">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>) <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#55528" title="Array[java.net.URL]">urls</a>, <a href="#55529" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#55529" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="55522">loadClass</a>(<a title="String" id="55557">className</a>: <span title="String">String</span>, <a title="Boolean" id="55558">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span class="keyword">val</span> <a title="java.lang.Class[_]" id="55563">loaded</a> = <a href="#8463" title="(java.lang.String)java.lang.Class[_]" id="18483">findLoadedClass</a>(<a href="#55557" title="String">className</a>)
		<span class="keyword">val</span> <a title="java.lang.Class[_ &gt;: _$3 with ?0]" id="55564">found</a> =
			<span title="java.lang.Class[_53]" class="keyword">if</span>(<a href="#55563" title="java.lang.Class[_]">loaded</a> <a title="(AnyRef)Boolean" id="3452">==</a> <span title="Null(null)" class="keyword">null</span>)
				<a href="#55523" title="(String)Class[_]">doLoadClass</a>(<a href="#55557" title="String">className</a>)
			<span class="keyword">else</span>
				<a href="#55563" title="java.lang.Class[_]">loaded</a>
			
		<span title="Unit" class="keyword">if</span>(<a href="#55558" title="Boolean">resolve</a>)
			<a href="#8463" title="(java.lang.Class[_])Unit">resolveClass</a>(<a href="#55564" title="java.lang.Class[_ &gt;: _$3 with ?0]">found</a>)
		<a href="#55564" title="java.lang.Class[_ &gt;: _$3 with ?0]">found</a>
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(String)Class[_]" id="55523">doLoadClass</a>(<a title="String" id="55568">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_]
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String)Class[_]" id="55524">selfLoadClass</a>(<a title="String" id="55607">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] = <span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#55607" title="String">className</a>, <span title="Boolean(false)" class="keyword">false</span>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class IntermediateLoader extends sbt.LoaderBase with NotNull with ScalaObject" id="10272">IntermediateLoader</a>(<a title="Array[java.net.URL]" id="55631">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="55632">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>) <span class="keyword">extends</span> <a href="#8463" title="sbt.LoaderBase">LoaderBase</a>(<a href="#55631" title="Array[java.net.URL]">urls</a>, <a href="#55632" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(String)Class[_]" id="55627">doLoadClass</a>(<a title="String" id="55633">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span class="comment">// if this loader is asked to load an sbt class, it must be because the project we are building is sbt itself,</span>
		 <span class="comment">// so we want to load the version of classes on the project classpath, not the parent</span>
		<span title="java.lang.Class[_54]" class="keyword">if</span>(<a href="#55633" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#9022" title="object sbt.Loaders">Loaders</a>.<a href="#55640" title="=&gt; java.lang.String">SbtPackage</a>))
			<a href="#10272" title="(java.lang.String)java.lang.Class[_]">findClass</a>(<a href="#55633" title="String">className</a>)
		<span class="keyword">else</span>
			<a href="#55524" title="(String)Class[_]">selfLoadClass</a>(<a href="#55633" title="String">className</a>)
	}
}
<span class="comment">/** Delegates class loading to `parent` for all classes included by `filter`.  An attempt to load classes excluded by `filter`
* results in a `ClassNotFoundException`.*/</span>
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class FilteredLoader extends java.lang.ClassLoader with NotNull with ScalaObject" id="13251">FilteredLoader</a>(<a title="java.lang.ClassLoader" id="55676">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.ClassFilter" id="55677">filter</a>: <a href="#2105" title="sbt.ClassFilter">ClassFilter</a>) <span class="keyword">extends</span> <span title="java.lang.ClassLoader">ClassLoader</span>(<a href="#55676" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#55676" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(java.lang.ClassLoader,Iterable[String])sbt.FilteredLoader" id="55670" class="keyword">this</a>(<a title="java.lang.ClassLoader" id="55684">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="55685">excludePackages</a>: <span title="Iterable[String]">Iterable</span>[String]) = <a href="#13251" title="FilteredLoader.this.type" class="keyword">this</a>(<a href="#55684" title="java.lang.ClassLoader">parent</a>, <span title="sbt.ExcludePackagesFilter" class="keyword">new</span> <a href="#11754" title="sbt.ExcludePackagesFilter">ExcludePackagesFilter</a>(<a href="#55685" title="Iterable[String]">excludePackages</a>))
	
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="55671">loadClass</a>(<a title="String" id="55698">className</a>: <span title="String">String</span>, <a title="Boolean" id="55699">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[?0]" class="keyword">if</span>(<a href="#55677" title="sbt.ClassFilter">filter</a>.<a href="#55675" title="(String)Boolean">include</a>(<a href="#55698" title="String">className</a>))
			<span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#55698" title="String">className</a>, <a href="#55699" title="Boolean">resolve</a>)
		<span class="keyword">else</span>
			<span title="Nothing" class="keyword">throw</span> <a title="(java.lang.String)java.lang.ClassNotFoundException" id="55553" class="keyword">new</a> <a title="java.lang.ClassNotFoundException" id="1672">ClassNotFoundException</a>(<a href="#55698" title="String">className</a>)
	}
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class SelectiveLoader extends java.net.URLClassLoader with NotNull with ScalaObject" id="11874">SelectiveLoader</a>(<a title="Array[java.net.URL]" id="55729">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="55730">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.ClassFilter" id="55731">filter</a>: <a href="#2105" title="sbt.ClassFilter">ClassFilter</a>) <span class="keyword">extends</span> <span title="java.net.URLClassLoader">URLClassLoader</span>(<a href="#55729" title="Array[java.net.URL]">urls</a>, <a href="#55730" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span title="(Boolean)Unit">require</span>(<a href="#55730" title="java.lang.ClassLoader">parent</a> <span title="(AnyRef)Boolean">!=</span> <span title="Null(null)" class="keyword">null</span>) <span class="comment">// included because a null parent is legitimate in Java</span>
	<span class="keyword">def</span> <a title="(Array[java.net.URL],java.lang.ClassLoader,Iterable[String])sbt.SelectiveLoader" id="55723" class="keyword">this</a>(<a title="Array[java.net.URL]" id="55752">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="55753">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Iterable[String]" id="55754">includePackages</a>: <span title="Iterable[String]">Iterable</span>[String]) = <a href="#11874" title="SelectiveLoader.this.type" class="keyword">this</a>(<a href="#55752" title="Array[java.net.URL]">urls</a>, <a href="#55753" title="java.lang.ClassLoader">parent</a>, <span title="sbt.IncludePackagesFilter" class="keyword">new</span> <a href="#8991" title="sbt.IncludePackagesFilter">IncludePackagesFilter</a>(<a href="#55754" title="Iterable[String]">includePackages</a>))
	
	@<span title="throws">throws</span>(<span title="java.lang.Class[java.lang.ClassNotFoundException]">classOf</span>[ClassNotFoundException])
	<span class="keyword">override</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String,Boolean)Class[_]" id="55724">loadClass</a>(<a title="String" id="55763">className</a>: <span title="String">String</span>, <a title="Boolean" id="55764">resolve</a>: <span title="Boolean">Boolean</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[_55]" class="keyword">if</span>(<a href="#55731" title="sbt.ClassFilter">filter</a>.<a href="#55675" title="(String)Boolean">include</a>(<a href="#55763" title="String">className</a>))
			<span class="keyword">super</span>.<span title="(java.lang.String,Boolean)java.lang.Class[_]">loadClass</span>(<a href="#55763" title="String">className</a>, <a href="#55764" title="Boolean">resolve</a>)
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="java.lang.Class[_]" id="55779">loaded</a> = <a href="#55730" title="java.lang.ClassLoader">parent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#55763" title="String">className</a>)
			<span title="Unit" class="keyword">if</span>(<a href="#55764" title="Boolean">resolve</a>)
				<a href="#11874" title="(java.lang.Class[_])Unit">resolveClass</a>(<a href="#55779" title="java.lang.Class[_]">loaded</a>)
			<a href="#55779" title="java.lang.Class[_]">loaded</a>
		}
	}
}
<span class="keyword">private</span> <span class="keyword">trait</span> <a title="trait ClassFilter extends java.lang.Object" id="2105">ClassFilter</a>
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="55675">include</a>(<a title="String" id="55704">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span>
}
<span class="keyword">private</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class PackageFilter extends java.lang.Object with sbt.ClassFilter with ScalaObject" id="9936">PackageFilter</a>(<a title="Iterable[String]" id="55808">packages</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#2105" title="sbt.ClassFilter">ClassFilter</a>
{
	<span title="(Boolean)Unit">require</span>(<a href="#55808" title="Iterable[String]">packages</a>.<a title="((String) =&gt; Boolean)Boolean" id="15953">forall</a>(<a href="#55811" title="String">_</a>.<span title="(java.lang.String)Boolean">endsWith</span>(<span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)))
	<span class="keyword">protected</span> <span class="keyword">final</span> <span class="keyword">def</span> <a title="(String)Boolean" id="55691">matches</a>(<a title="String" id="55812">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <a href="#55808" title="Iterable[String]">packages</a>.<a title="((String) =&gt; Boolean)Boolean" id="15954">exists</a>(<a href="#55812" title="String">className</a>.<a href="#55815" title="(java.lang.String)Boolean">startsWith</a>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class ExcludePackagesFilter extends sbt.PackageFilter with ScalaObject" id="11754">ExcludePackagesFilter</a>(<a title="Iterable[String]" id="55696">exclude</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#9936" title="sbt.PackageFilter">PackageFilter</a>(<a href="#55696" title="Iterable[String]">exclude</a>)
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="55695">include</a>(<a title="String" id="55819">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <span title="=&gt; Boolean">!</span><a href="#55691" title="(String)Boolean">matches</a>(<a href="#55819" title="String">className</a>)
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class IncludePackagesFilter extends sbt.PackageFilter with ScalaObject" id="8991">IncludePackagesFilter</a>(<a title="Iterable[String]" id="55761">include</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <a href="#9936" title="sbt.PackageFilter">PackageFilter</a>(<a href="#55761" title="Iterable[String]">include</a>)
{
	<span class="keyword">def</span> <a title="(String)Boolean" id="55760">include</a>(<a title="String" id="55822">className</a>: <span title="String">String</span>): <span title="Boolean">Boolean</span> = <a href="#55691" title="(String)Boolean">matches</a>(<a href="#55822" title="String">className</a>)
}

<span class="keyword">private</span> <span class="keyword">class</span> <a title="class LazyFrameworkLoader extends sbt.LoaderBase with NotNull with ScalaObject" id="12213">LazyFrameworkLoader</a>(<a title="String" id="55838">baseName</a>: <span title="String">String</span>, <a title="Array[java.net.URL]" id="55839">urls</a>: <span title="Array[java.net.URL]">Array</span>[URL], <a title="java.lang.ClassLoader" id="55840">parent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="java.lang.ClassLoader" id="55841">grandparent</a>: <span title="java.lang.ClassLoader">ClassLoader</span>)
	<span class="keyword">extends</span> <a href="#8463" title="sbt.LoaderBase">LoaderBase</a>(<a href="#55839" title="Array[java.net.URL]">urls</a>, <a href="#55840" title="java.lang.ClassLoader">parent</a>) <span class="keyword">with</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(String)Class[_]" id="55832">doLoadClass</a>(<a title="String" id="55842">className</a>: <span title="String">String</span>): <span title="Class[_]">Class</span>[_] =
	{
		<span title="java.lang.Class[_57]" class="keyword">if</span>(<a href="#55842" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#55838" title="String">baseName</a>))
			<a href="#12213" title="(java.lang.String)java.lang.Class[_]">findClass</a>(<a href="#55842" title="String">className</a>)
		<span class="keyword">else</span> <span title="java.lang.Class[_56]" class="keyword">if</span>(<a href="#9022" title="object sbt.Loaders">Loaders</a>.<a href="#55642" title="(String)Boolean">isSbtClass</a>(<a href="#55842" title="String">className</a>)) <span class="comment">// we circumvent the parent loader because we know that we want the</span>
			<a href="#55841" title="java.lang.ClassLoader">grandparent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#55842" title="String">className</a>)              <span class="comment">// version of sbt that is currently the builder (not the project being built)</span>
		<span class="keyword">else</span>
			<a href="#55840" title="java.lang.ClassLoader">parent</a>.<span title="(java.lang.String)java.lang.Class[_]">loadClass</span>(<a href="#55842" title="String">className</a>)
	}
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.Loaders" id="9022">Loaders</a>
{
	<span class="keyword">val</span> <a title="java.lang.String" id="55640">SbtPackage</a> = <span title="java.lang.String(&quot;sbt.&quot;)" class="string">&quot;sbt.&quot;</span>
	<span class="keyword">def</span> <a title="(String)Boolean" id="55642">isSbtClass</a>(<a title="String" id="55849">className</a>: <span title="String">String</span>) = <a href="#55849" title="String">className</a>.<span title="(java.lang.String)Boolean">startsWith</span>(<a href="#9022" title="object sbt.Loaders">Loaders</a>.<a href="#55640" title="=&gt; java.lang.String">SbtPackage</a>)
}
        </pre>
    </body>
</html>