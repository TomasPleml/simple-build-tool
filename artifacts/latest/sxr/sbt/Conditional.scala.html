<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Conditional.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> xsbt.AnalyzingCompiler

<span class="keyword">trait</span> <a title="trait Conditional[Source, Product, External] extends java.lang.Object with NotNull with ScalaObject" id="10008">Conditional</a>[<a title="&gt;: Nothing &lt;: Any" id="13565">Source</a>, <a title="&gt;: Nothing &lt;: Any" id="13566">Product</a>, <a title="&gt;: Nothing &lt;: Any" id="13567">External</a>] <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">type</span> <a title="&gt;: Nothing &lt;: sbt.TaskAnalysis[Source,Product,External]" id="27009">AnalysisType</a> &lt;: TaskAnalysis[Source, Product, External]
	<span class="keyword">val</span> <a title="Conditional.this.AnalysisType" id="27010">analysis</a>: <a href="#27009" title="Conditional.this.AnalysisType">AnalysisType</a> = <a href="#27012" title="=&gt; Conditional.this.AnalysisType">loadAnalysis</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Conditional.this.AnalysisType" id="27012">loadAnalysis</a>: <a href="#27009" title="Conditional.this.AnalysisType">AnalysisType</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="27013">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="27014">productType</a>: <span title="String">String</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; String" id="27015">productTypePlural</a>: <span title="String">String</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="27016">sourcesToProcess</a>: <span title="Iterable[Source]">Iterable</span>[Source]

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Boolean" id="27017">sourceExists</a>(<a title="Source" id="56837">source</a>: <a href="#13565" title="Source">Source</a>): <span title="Boolean">Boolean</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Long" id="27018">sourceLastModified</a>(<a title="Source" id="34645">source</a>: <a href="#13565" title="Source">Source</a>): <span title="Long">Long</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Product)Boolean" id="27019">productExists</a>(<a title="Product" id="34647">product</a>: <a href="#13566" title="Product">Product</a>): <span title="Boolean">Boolean</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Product)Long" id="27020">productLastModified</a>(<a title="Product" id="34650">product</a>: <a href="#13566" title="Product">Product</a>): <span title="Long">Long</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]" id="27021">externalInfo</a>(<a title="Iterable[External]" id="34668">externals</a>: <span title="Iterable[External]">Iterable</span>[External]): <span title="Iterable[(External, Conditional.this.ExternalInfo)]">Iterable</span>[(External, ExternalInfo)]

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Conditional.this.ConditionalAnalysis)Option[String]" id="27022">execute</a>(<a title="Conditional.this.ConditionalAnalysis" id="34426">cAnalysis</a>: <a href="#27026" title="Conditional.this.ConditionalAnalysis">ConditionalAnalysis</a>): <a title="Option[String]" id="897">Option</a>[String]

	<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <a title="class ExternalInfo extends java.lang.Object with NotNull with ScalaObject with Product" id="56849">ExternalInfo</a>(<a title="Boolean" id="56869">available</a>: <span title="Boolean">Boolean</span>, <a title="Long" id="56870">lastModified</a>: <span title="Long">Long</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
	<span class="keyword">trait</span> <a title="trait ConditionalAnalysis extends java.lang.Object with NotNull" id="27026">ConditionalAnalysis</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
	{
		<span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="34417">dirtySources</a>: <span title="Iterable[Source]">Iterable</span>[Source]
		<span class="keyword">def</span> <a title="=&gt; Iterable[Source]" id="34418">cleanSources</a>: <span title="Iterable[Source]">Iterable</span>[Source]
		<span class="keyword">def</span> <a title="=&gt; Int" id="34419">directlyModifiedSourcesCount</a>: <span title="Int">Int</span>
		<span class="keyword">def</span> <a title="=&gt; Int" id="34420">invalidatedSourcesCount</a>: <span title="Int">Int</span>
		<span class="keyword">def</span> <a title="=&gt; Int" id="34421">removedSourcesCount</a>: <span title="Int">Int</span>
	}

	<span class="keyword">final</span> <span class="keyword">def</span> <a title="=&gt; Option[String]" id="27027">run</a> =
	{
		<span class="keyword">val</span> <a title="Option[String]" id="34611">result</a> = <a href="#27022" title="(Conditional.this.ConditionalAnalysis)Option[String]">execute</a>(<a href="#27028" title="=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis">analyze</a>)
		<a href="#27032" title="(Boolean)Unit">processingComplete</a>(<a href="#34611" title="Option[String]">result</a>.<a title="=&gt; Boolean" id="19227">isEmpty</a>)
		<a href="#34611" title="Option[String]">result</a>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; &lt;refinement&gt; extends java.lang.Object with Conditional.this.ConditionalAnalysis" id="27028">analyze</a> =
	{
		<span class="keyword">import</span> scala.collection.mutable.HashSet

		<span class="keyword">val</span> <a title="Iterable[Source]" id="34615">sourcesSnapshot</a> = <a href="#27016" title="=&gt; Iterable[Source]">sourcesToProcess</a>
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="34616">removedSources</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <span title="(Iterable[Source])Unit">++=</span> <a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25584" title="=&gt; scala.collection.Set[Source]">allSources</a>
		<a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <span title="(Iterable[Source])Unit">--=</span> <a href="#34615" title="Iterable[Source]">sourcesSnapshot</a>
		<span class="keyword">val</span> <a title="Int" id="34617">removedCount</a> = <a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a>.<span title="=&gt; Int">size</span>
		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="34631">removed</a> &lt;- <a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a>)
		{
			<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34631" title="Source">removed</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; removed.&quot;)" class="string">&quot; removed.&quot;</span>)
			<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25595" title="(Source)Unit">removeDependent</a>(<a href="#34631" title="Source">removed</a>)
		}

		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="34618">unmodified</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="34619">modified</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]

		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="34636">source</a> &lt;- <a href="#34615" title="Iterable[Source]">sourcesSnapshot</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#27031" title="(Source)Boolean">isSourceModified</a>(<a href="#34636" title="Source">source</a>))
			{
				<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34636" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; directly modified.&quot;)" class="string">&quot; directly modified.&quot;</span>)
				<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#34636" title="Source">source</a>
			}
			<span class="keyword">else</span>
			{
				<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34636" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; unmodified.&quot;)" class="string">&quot; unmodified.&quot;</span>)
				<a href="#34618" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">+=</span> <a href="#34636" title="Source">source</a>
			}
		}
		<span class="keyword">val</span> <a title="Int" id="34620">directlyModifiedCount</a> = <a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a>.<span title="=&gt; Int">size</span>
		<span class="keyword">for</span>(<a href="#34671" title="(((External, Conditional.this.ExternalInfo)) =&gt; Unit)Unit">(</a><a title="External" id="34676">external</a>, <a title="Conditional.this.ExternalInfo" id="34677">info</a>) &lt;- <a href="#27021" title="(Iterable[External])Iterable[(External, Conditional.this.ExternalInfo)]">externalInfo</a>(<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25586" title="=&gt; scala.collection.Set[External]">allExternals</a>))
		{
			<span class="keyword">val</span> <a title="scala.collection.Set[Source]" id="34678">dependentSources</a> = <a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25589" title="(External)Option[scala.collection.Set[Source]]">externalDependencies</a>(<a href="#34676" title="External">external</a>).<a title="(=&gt; scala.collection.Set[Source])scala.collection.Set[Source]" id="19232">getOrElse</a>(<a title="=&gt; collection.immutable.Set.type" id="6083">Set</a>.<a title="scala.collection.immutable.Set[Source]" id="23009">empty</a>)
			<span title="Unit" class="keyword">if</span>(<a href="#34677" title="Conditional.this.ExternalInfo">info</a>.<a href="#56869" title="=&gt; Boolean">available</a>)
			{
				<span class="keyword">val</span> <a title="Long" id="34690">dependencyLastModified</a> = <a href="#34677" title="Conditional.this.ExternalInfo">info</a>.<a href="#56870" title="=&gt; Long">lastModified</a>
				<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="34692">dependentSource</a> &lt;- <a href="#34678" title="scala.collection.Set[Source]">dependentSources</a>; <a title="((scala.collection.Set[Product]) =&gt; Unit)Unit" id="34694">dependentProducts</a> &lt;- <a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25588" title="(Source)Option[scala.collection.Set[Product]]">products</a>(<a href="#34692" title="Source">dependentSource</a>))
				{
					<a href="#34694" title="scala.collection.Set[Product]">dependentProducts</a>.<span title="((Product) =&gt; Boolean)Option[Product]">find</span>(<a title="Product" id="34696">p</a> =&gt; <a href="#27020" title="(Product)Long">productLastModified</a>(<a href="#34696" title="Product">p</a>) <span title="(Long)Boolean">&lt;</span> <a href="#34690" title="Long">dependencyLastModified</a>) <span title="Unit" class="keyword">match</span>
					{
						<span title="Unit" class="keyword">case</span> Some(<a title="Product" id="34698">modifiedProduct</a>) =&gt;
						{
							<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<a href="#27014" title="=&gt; String">productType</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34698" title="Product">modifiedProduct</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; older than external dependency &quot;)" class="string">&quot; older than external dependency &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34676" title="External">external</a>)
							<a href="#34618" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">-=</span> <a href="#34692" title="Source">dependentSource</a>
							<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#34692" title="Source">dependentSource</a>
						}
						<span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <span title="Unit">(</span>)
					}
				}
			}
			<span class="keyword">else</span>
			{
				<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;External dependency &quot;)" class="string">&quot;External dependency &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34676" title="External">external</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; not found.&quot;)" class="string">&quot; not found.&quot;</span>)
				<a href="#34618" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Iterable[Source])Unit">--=</span> <a href="#34678" title="scala.collection.Set[Source]">dependentSources</a>
				<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Iterable[Source])Unit">++=</span> <a href="#34678" title="scala.collection.Set[Source]">dependentSources</a>
				<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25597" title="(External)Unit">removeExternalDependency</a>(<a href="#34676" title="External">external</a>)
			}
		}

		<span class="keyword">val</span> <a title="scala.collection.mutable.HashSet[Source]" id="34621">handled</a> = <span title="scala.collection.mutable.HashSet[Source]" class="keyword">new</span> scala.collection.mutable.<span title="scala.collection.mutable.HashSet[Source]">HashSet</span>[Source]
		<span class="keyword">val</span> <a title="Boolean" id="34622">transitive</a> = <span title="=&gt; Boolean">!</span>java.lang.<a title="object java.lang.Boolean" id="1972">Boolean</a>.<a title="(java.lang.String)Boolean" id="16566">getBoolean</a>(<span title="java.lang.String(&quot;sbt.intransitive&quot;)" class="string">&quot;sbt.intransitive&quot;</span>)
		<span class="keyword">def</span> <a title="(Iterable[Source])Unit" id="34623">markModified</a>(<a title="Iterable[Source]" id="34708">changed</a>: <span title="Iterable[Source]">Iterable</span>[Source]) { <span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="34712">c</a> &lt;- <a href="#34708" title="Iterable[Source]">changed</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#34621" title="scala.collection.mutable.HashSet[Source]">handled</a>.<a title="(Source)Boolean" id="18108">contains</a>(<a href="#34712" title="Source">c</a>)) <a href="#34624" title="(Source)Unit">markSourceModified</a>(<a href="#34712" title="Source">c</a>) }
		<span class="keyword">def</span> <a title="(Source)Unit" id="34624">markSourceModified</a>(<a title="Source" id="34713">src</a>: <a href="#13565" title="Source">Source</a>)
		{
			<a href="#34618" title="scala.collection.mutable.HashSet[Source]">unmodified</a> <span title="(Source)Unit">-=</span> <a href="#34713" title="Source">src</a>
			<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a> <span title="(Source)Unit">+=</span> <a href="#34713" title="Source">src</a>
			<a href="#34621" title="scala.collection.mutable.HashSet[Source]">handled</a> <span title="(Source)Unit">+=</span> <a href="#34713" title="Source">src</a>
			<span title="Unit" class="keyword">if</span>(<a href="#34622" title="Boolean">transitive</a>)
				<a href="#34625" title="(Source)Unit">markDependenciesModified</a>(<a href="#34713" title="Source">src</a>)
		}
		<span class="keyword">def</span> <a title="(Source)Unit" id="34625">markDependenciesModified</a>(<a title="Source" id="34717">src</a>: <a href="#13565" title="Source">Source</a>) { <a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25596" title="(Source)Option[scala.collection.Set[Source]]">removeDependencies</a>(<a href="#34717" title="Source">src</a>).<a title="((scala.collection.Set[Source]) =&gt; Unit)Option[Unit]" id="19234">map</a>(<a href="#34623" title="(Iterable[Source])Unit">markModified</a>) }

		<a href="#34623" title="(Iterable[Source])Unit">markModified</a>(<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a>.<span title="=&gt; List[Source]">toList</span>)
		<span title="Unit" class="keyword">if</span>(<a href="#34622" title="Boolean">transitive</a>)
			<a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a>.<span title="((Source) =&gt; Unit)Unit">foreach</span>(<a href="#34625" title="(Source)Unit">markDependenciesModified</a>)

		<span class="keyword">for</span>(<a title="((Source) =&gt; Unit)Unit" id="34735">changed</a> &lt;- <a href="#34616" title="scala.collection.mutable.HashSet[Source]">removedSources</a> <a title="(Iterable[Source])scala.collection.mutable.Set[Source]" id="18127">++</a> <a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a>)
			<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25594" title="(Source)Unit">removeSource</a>(<a href="#34735" title="Source">changed</a>)

		<a title="template $anon extends java.lang.Object with Conditional.this.ConditionalAnalysis" id="34737" class="keyword">new</a> <a href="#27026" title="Conditional.this.ConditionalAnalysis">ConditionalAnalysis</a>
		{
			<span class="keyword">def</span> <a title="=&gt; scala.collection.Set[Source]" id="34739">dirtySources</a> = wrap.<a href="wrap/Wrappers.scala.html#14270" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#18262" title="(scala.collection.mutable.Set[Source])scala.collection.Set[Source]">readOnly</a>(<a href="#34619" title="scala.collection.mutable.HashSet[Source]">modified</a>)
			<span class="keyword">def</span> <a title="=&gt; scala.collection.Set[Source]" id="34740">cleanSources</a> = wrap.<a href="wrap/Wrappers.scala.html#14270" title="object sbt.wrap.Wrappers">Wrappers</a>.<a href="wrap/Wrappers.scala.html#18262" title="(scala.collection.mutable.Set[Source])scala.collection.Set[Source]">readOnly</a>(<a href="#34618" title="scala.collection.mutable.HashSet[Source]">unmodified</a>)
			<span class="keyword">def</span> <a title="=&gt; Int" id="34741">directlyModifiedSourcesCount</a> = <a href="#34620" title="Int">directlyModifiedCount</a>
			<span class="keyword">def</span> <a title="=&gt; Int" id="34742">invalidatedSourcesCount</a> = <a href="#34739" title="=&gt; scala.collection.Set[Source]">dirtySources</a>.<span title="=&gt; Int">size</span> <a title="(Int)Int" id="3096">-</a> <a href="#34620" title="Int">directlyModifiedCount</a>
			<span class="keyword">def</span> <a title="=&gt; Int" id="34743">removedSourcesCount</a> = <a href="#34617" title="Int">removedCount</a>
			<span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="34744">toString</a> =
			{
				<span title="java.lang.String(&quot;  Source analysis: &quot;)" class="string">&quot;  Source analysis: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34741" title="=&gt; Int">directlyModifiedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; new/modified, &quot;)" class="string">&quot; new/modified, &quot;</span> <span title="(Any)java.lang.String">+</span>
					<a href="#34742" title="=&gt; Int">invalidatedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; indirectly invalidated, &quot;)" class="string">&quot; indirectly invalidated, &quot;</span> <span title="(Any)java.lang.String">+</span>
					<a href="#34743" title="=&gt; Int">removedSourcesCount</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; removed.&quot;)" class="string">&quot; removed.&quot;</span>
			}
		}
	}

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="27029">checkLastModified</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="27030">noProductsImpliesModified</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Source)Boolean" id="27031">isSourceModified</a>(<a title="Source" id="34637">source</a>: <a href="#13565" title="Source">Source</a>) =
	{
		<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25588" title="(Source)Option[scala.collection.Set[Product]]">products</a>(<a href="#34637" title="Source">source</a>) <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
			{
				<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;New file &quot;)" class="string">&quot;New file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34637" title="Source">source</a>)
				<span title="Boolean(true)" class="keyword">true</span>
			}
			<span title="Boolean" class="keyword">case</span> Some(<a title="scala.collection.Set[Product]" id="34642">sourceProducts</a>) =&gt;
			{
				<span class="keyword">val</span> <a title="Long" id="34643">sourceModificationTime</a> = <a href="#27018" title="(Source)Long">sourceLastModified</a>(<a href="#34637" title="Source">source</a>)
				<span class="keyword">def</span> <a title="(Product)Boolean" id="34644">isOutofdate</a>(<a title="Product" id="34646">p</a>: <a href="#13566" title="Product">Product</a>) =
					<span title="=&gt; Boolean">!</span><a href="#27019" title="(Product)Boolean">productExists</a>(<a href="#34646" title="Product">p</a>) <span title="(Boolean)Boolean">||</span> (<a href="#27029" title="=&gt; Boolean">checkLastModified</a> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#27020" title="(Product)Long">productLastModified</a>(<a href="#34646" title="Product">p</a>) <span title="(Long)Boolean">&lt;</span> <a href="#34643" title="Long">sourceModificationTime</a>)

				<a href="#34642" title="scala.collection.Set[Product]">sourceProducts</a>.<span title="((Product) =&gt; Boolean)Option[Product]">find</span>(<a href="#34644" title="(Product)Boolean">isOutofdate</a>) <span title="Boolean" class="keyword">match</span>
				{
					<span title="Boolean" class="keyword">case</span> Some(<a title="Product" id="34654">modifiedProduct</a>) =&gt;
						<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Outdated &quot;)" class="string">&quot;Outdated &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#27014" title="=&gt; String">productType</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34654" title="Product">modifiedProduct</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; for source &quot;)" class="string">&quot; for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34637" title="Source">source</a>)
						<span title="Boolean(true)" class="keyword">true</span>
					<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
						<span title="Boolean" class="keyword">if</span>(<a href="#27030" title="=&gt; Boolean">noProductsImpliesModified</a> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#34642" title="scala.collection.Set[Product]">sourceProducts</a>.<a title="=&gt; Boolean" id="18154">isEmpty</a>)
						{
							<span class="comment">// necessary for change detection that depends on last modified</span>
							<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34637" title="Source">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; has no products, marking it modified.&quot;)" class="string">&quot; has no products, marking it modified.&quot;</span>)
							<span title="Boolean(true)" class="keyword">true</span>
						}
						<span class="keyword">else</span>
							<span title="Boolean(false)" class="keyword">false</span>
				}
			}
		}
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Boolean)Unit" id="27032">processingComplete</a>(<a title="Boolean" id="34836">success</a>: <span title="Boolean">Boolean</span>)
	{
		<span title="Unit" class="keyword">if</span>(<a href="#34836" title="Boolean">success</a>)
		{
			<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25581" title="()Option[String]">save</a>()
			<a href="#27013" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19734" title="(=&gt; String)Unit">info</a>(<span title="java.lang.String(&quot;  Post-analysis: &quot;)" class="string">&quot;  Post-analysis: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25585" title="=&gt; scala.collection.Set[Product]">allProducts</a>.<span title="=&gt; Seq[Product]">toSeq</span>.<a title="=&gt; Int" id="16730">length</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#27015" title="=&gt; String">productTypePlural</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
		}
		<span class="keyword">else</span>
			<a href="#27010" title="=&gt; Conditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#25582" title="()Option[String]">revert</a>()
	}
}

<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AbstractCompileConfiguration extends java.lang.Object with NotNull with ScalaObject" id="10458">AbstractCompileConfiguration</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; String" id="27082">label</a>: <span title="String">String</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="27083">sourceRoots</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="27084">sources</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="27085">outputDirectory</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="27086">classpath</a>: <a href="Path.scala.html#8784" title="sbt.PathFinder">PathFinder</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="27087">analysisPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="27088">projectPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="27089">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>
	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="27090">options</a>: <span title="Seq[String]">Seq</span>[String]
	<span class="keyword">def</span> <a title="=&gt; Seq[String]" id="27091">javaOptions</a>: <span title="Seq[String]">Seq</span>[String]
	<span class="keyword">def</span> <a title="=&gt; Int" id="27092">maxErrors</a>: <span title="Int">Int</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.CompileOrder.Value" id="27093">compileOrder</a>: CompileOrder.<span title="sbt.CompileOrder.Value">Value</span>
}
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class CompileConfiguration extends sbt.AbstractCompileConfiguration with ScalaObject" id="11046">CompileConfiguration</a> <span class="keyword">extends</span> <a href="#10458" title="sbt.AbstractCompileConfiguration">AbstractCompileConfiguration</a>
{
	<span class="keyword">def</span> <a title="=&gt; sbt.Fingerprints" id="27095">fingerprints</a>: <a href="#56884" title="sbt.Fingerprints">Fingerprints</a>
}
<span class="keyword">final</span> <span class="keyword">case</span> <span class="keyword">class</span> <a title="class Fingerprints extends java.lang.Object with NotNull with ScalaObject with Product" id="56884">Fingerprints</a>(<a title="Iterable[String]" id="57126">superclassNames</a>: <span title="Iterable[String]">Iterable</span>[String], <a title="Iterable[String]" id="57127">annotationNames</a>: <span title="Iterable[String]">Iterable</span>[String]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>

<span class="keyword">import</span> java.io.File
<span class="keyword">class</span> <a title="class CompileConditional extends sbt.AbstractCompileConditional with ScalaObject" id="8070">CompileConditional</a>(<span class="keyword">override</span> <span class="keyword">val</span> <a title="sbt.CompileConfiguration" id="35578">config</a>: <a href="#11046" title="sbt.CompileConfiguration">CompileConfiguration</a>, <a title="xsbt.AnalyzingCompiler" id="35579">compiler</a>: <a href="../AnalyzingCompiler.scala.html#12509" title="xsbt.AnalyzingCompiler">AnalyzingCompiler</a>) <span class="keyword">extends</span> <a href="#8970" title="sbt.AbstractCompileConditional">AbstractCompileConditional</a>(<a href="#35578" title="sbt.CompileConfiguration">config</a>, <a href="#35579" title="xsbt.AnalyzingCompiler">compiler</a>)
{
	<span class="keyword">import</span> config._
	<span class="keyword">type</span> <a title="sbt.CompileAnalysis" id="27077">AnalysisType</a> = <a href="Analysis.scala.html#6999" title="sbt.CompileAnalysis">CompileAnalysis</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)sbt.CompileAnalysis" id="27078">constructAnalysis</a>(<a title="sbt.Path" id="56903">analysisPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="56904">projectPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="56905">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>) =
		<span title="sbt.CompileAnalysis" class="keyword">new</span> <a href="Analysis.scala.html#6999" title="sbt.CompileAnalysis">CompileAnalysis</a>(<a href="#56903" title="sbt.Path">analysisPath</a>, <a href="#56904" title="sbt.Path">projectPath</a>, <a href="#56905" title="sbt.Logger">log</a>)
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; CompileConditional.this.CompileAnalysisCallback" id="27079">analysisCallback</a> = <span title="CompileConditional.this.CompileAnalysisCallback" class="keyword">new</span> <a href="#27080" title="CompileConditional.this.CompileAnalysisCallback">CompileAnalysisCallback</a>
	<span class="keyword">protected</span> <span class="keyword">class</span> <a title="class CompileAnalysisCallback extends sbt.BasicCompileAnalysisCallback with ScalaObject" id="27080">CompileAnalysisCallback</a> <span class="keyword">extends</span> <a href="AnalysisCallback.scala.html#7407" title="sbt.BasicCompileAnalysisCallback">BasicCompileAnalysisCallback</a>(<a href="#27088" title="=&gt; sbt.Path">projectPath</a>, <a href="#27010" title="=&gt; CompileConditional.this.AnalysisType">analysis</a>)
	{
		<span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> <a title="sbt.Fingerprints" id="56920">fingerprints0</a> = <a href="#27095" title="=&gt; sbt.Fingerprints">fingerprints</a>
		<span class="keyword">def</span> <a title="=&gt; Iterable[String]" id="56921">superclassNames</a> = <a href="#56920" title="sbt.Fingerprints">fingerprints0</a>.<a href="#57126" title="=&gt; Iterable[String]">superclassNames</a>
		<span class="keyword">def</span> <a title="=&gt; Iterable[String]" id="56922">annotationNames</a> = <a href="#56920" title="sbt.Fingerprints">fingerprints0</a>.<a href="#57127" title="=&gt; Iterable[String]">annotationNames</a>
		<span class="keyword">def</span> <a title="(sbt.Path,String,String,Boolean)Unit" id="56923">foundSubclass</a>(<a title="sbt.Path" id="56932">sourcePath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="String" id="56933">subclassName</a>: <span title="String">String</span>, <a title="String" id="56934">superclassName</a>: <span title="String">String</span>, <a title="Boolean" id="56935">isModule</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
			<a href="AnalysisCallback.scala.html#34554" title="=&gt; sbt.CompileAnalysis">analysis</a>.<a href="Analysis.scala.html#27238" title="(sbt.Path,sbt.Discovered)Unit">addTest</a>(<a href="#56932" title="sbt.Path">sourcePath</a>, <a href="impl/TestParser.scala.html#40480" title="(Boolean,String,String)sbt.DiscoveredSubclass">DiscoveredSubclass</a>(<a href="#56935" title="Boolean">isModule</a>, <a href="#56933" title="String">subclassName</a>, <a href="#56934" title="String">superclassName</a>))
		<span class="keyword">def</span> <a title="(sbt.Path,String,String,Boolean)Unit" id="56924">foundAnnotated</a>(<a title="sbt.Path" id="56941">sourcePath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="String" id="56942">className</a>: <span title="String">String</span>, <a title="String" id="56943">annotationName</a>: <span title="String">String</span>, <a title="Boolean" id="56944">isModule</a>: <span title="Boolean">Boolean</span>): <span title="Unit">Unit</span> =
			<a href="AnalysisCallback.scala.html#34554" title="=&gt; sbt.CompileAnalysis">analysis</a>.<a href="Analysis.scala.html#27238" title="(sbt.Path,sbt.Discovered)Unit">addTest</a>(<a href="#56941" title="sbt.Path">sourcePath</a>, <a href="impl/TestParser.scala.html#40524" title="(Boolean,String,String)sbt.DiscoveredAnnotated">DiscoveredAnnotated</a>(<a href="#56944" title="Boolean">isModule</a>, <a href="#56942" title="String">className</a>, <a href="#56943" title="String">annotationName</a>))
	}
}
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class AbstractCompileConditional extends java.lang.Object with sbt.Conditional[sbt.Path,sbt.Path,java.io.File] with ScalaObject" id="8970">AbstractCompileConditional</a>(<span class="keyword">val</span> <a title="sbt.AbstractCompileConfiguration" id="34390">config</a>: <a href="#10458" title="sbt.AbstractCompileConfiguration">AbstractCompileConfiguration</a>, <span class="keyword">val</span> <a title="xsbt.AnalyzingCompiler" id="34391">compiler</a>: <a href="../AnalyzingCompiler.scala.html#12509" title="xsbt.AnalyzingCompiler">AnalyzingCompiler</a>) <span class="keyword">extends</span> <a href="#10008" title="sbt.Conditional[sbt.Path,sbt.Path,java.io.File]">Conditional</a>[Path, Path, File]
{
	<span class="keyword">import</span> config._
	<span class="keyword">type</span> <a title="&gt;: Nothing &lt;: sbt.BasicCompileAnalysis" id="27041">AnalysisType</a> &lt;: BasicCompileAnalysis
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; AbstractCompileConditional.this.AnalysisType" id="27042">loadAnalysis</a> =
	{
		<span class="keyword">val</span> <a title="AbstractCompileConditional.this.AnalysisType" id="56950">a</a> = <a href="#27043" title="(sbt.Path,sbt.Path,sbt.Logger)AbstractCompileConditional.this.AnalysisType">constructAnalysis</a>(<a href="#27087" title="=&gt; sbt.Path">analysisPath</a>, <a href="#27088" title="=&gt; sbt.Path">projectPath</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>)
		<span class="keyword">for</span>(<a title="((String) =&gt; Unit)Unit" id="56952">errorMessage</a> &lt;- <a href="#56950" title="AbstractCompileConditional.this.AnalysisType">a</a>.<a href="Analysis.scala.html#27201" title="()Option[String]">load</a>())
			<a title="(String)Nothing" id="6085">error</a>(<a href="#56952" title="String">errorMessage</a>)
		<a href="#56950" title="AbstractCompileConditional.this.AnalysisType">a</a>
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)AbstractCompileConditional.this.AnalysisType" id="27043">constructAnalysis</a>(<a title="sbt.Path" id="34410">analysisPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Path" id="34411">projectPath</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="34412">log</a>: <a href="Logger.scala.html#11865" title="sbt.Logger">Logger</a>): <a href="#27041" title="AbstractCompileConditional.this.AnalysisType">AnalysisType</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.Logger" id="27044">log</a> = <a href="#34390" title="=&gt; sbt.AbstractCompileConfiguration">config</a>.<a href="#27089" title="=&gt; sbt.Logger">log</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="27045">productType</a> = <span title="java.lang.String(&quot;class&quot;)" class="string">&quot;class&quot;</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; java.lang.String" id="27046">productTypePlural</a> = <span title="java.lang.String(&quot;classes&quot;)" class="string">&quot;classes&quot;</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; scala.collection.Set[sbt.Path]" id="27047">sourcesToProcess</a> = <a href="#27084" title="=&gt; sbt.PathFinder">sources</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="27048">sourceExists</a>(<a title="sbt.Path" id="56959">source</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#56959" title="sbt.Path">source</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>.<span title="()Boolean">exists</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Long" id="27049">sourceLastModified</a>(<a title="sbt.Path" id="56961">source</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#56961" title="sbt.Path">source</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>.<span title="()Long">lastModified</span>

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="27050">productExists</a>(<a title="sbt.Path" id="56963">product</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#56963" title="sbt.Path">product</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>.<span title="()Boolean">exists</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Long" id="27051">productLastModified</a>(<a title="sbt.Path" id="56965">product</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) = <a href="#56965" title="sbt.Path">product</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>.<span title="()Long">lastModified</span>

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.File" id="27052">libraryJar</a> = <a href="#34391" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#27312" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>.<a href="../ScalaInstance.scala.html#23399" title="=&gt; java.io.File">libraryJar</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; java.io.File" id="27053">compilerJar</a> = <a href="#34391" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#27312" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>.<a href="../ScalaInstance.scala.html#23401" title="=&gt; java.io.File">compilerJar</a>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Iterable[java.io.File])Iterable[(java.io.File, AbstractCompileConditional.this.ExternalInfo)]" id="27054">externalInfo</a>(<a title="Iterable[java.io.File]" id="56971">externals</a>: <span title="Iterable[java.io.File]">Iterable</span>[File]) =
	{
		<span class="keyword">val</span> <a href="#17794" title="(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">(</a><a href="#56973" title="sbt.wrap.Set[java.io.File]" id="17794">classpathJars</a>, <a href="#56973" title="sbt.wrap.Set[java.io.File]" id="17796">classpathDirs</a>) = <a href="ClasspathUtilities.scala.html#11449" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30479" title="(Iterable[sbt.Path])(sbt.wrap.Set[java.io.File], sbt.wrap.Set[java.io.File])">buildSearchPaths</a>(<a href="#27086" title="=&gt; sbt.PathFinder">classpath</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <span title="(sbt.Path*)Seq[sbt.Path]">Seq</span>(<a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15584" title="(java.io.File)sbt.Path">fromFile</a>(<a href="#27052" title="=&gt; java.io.File">libraryJar</a>),  <a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15584" title="(java.io.File)sbt.Path">fromFile</a>(<a href="#27053" title="=&gt; java.io.File">compilerJar</a>)))
		<span class="keyword">for</span>(<a title="((java.io.File) =&gt; (java.io.File, AbstractCompileConditional.this.ExternalInfo))Iterable[(java.io.File, AbstractCompileConditional.this.ExternalInfo)]" id="56987">external</a> &lt;- <a href="#56971" title="Iterable[java.io.File]">externals</a>) <span class="keyword">yield</span>
		{
			<span class="keyword">val</span> <a title="Boolean" id="56988">available</a> = <a href="#56987" title="java.io.File">external</a>.<span title="()Boolean">exists</span> <span title="(Boolean)Boolean">&amp;&amp;</span> (<a href="#56987" title="java.io.File">external</a> <span title="(AnyRef)Boolean">==</span> <a href="#27052" title="=&gt; java.io.File">libraryJar</a> <span title="(Boolean)Boolean">||</span> <a href="ClasspathUtilities.scala.html#11449" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30480" title="(sbt.wrap.Set[java.io.File],sbt.wrap.Set[java.io.File],java.io.File)Boolean">onClasspath</a>(<a href="#17794" title="sbt.wrap.Set[java.io.File]">classpathJars</a>, <a href="#17796" title="sbt.wrap.Set[java.io.File]">classpathDirs</a>, <a href="#56987" title="java.io.File">external</a>) )
			<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#56988" title="Boolean">available</a>)
				<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;External &quot;)" class="string">&quot;External &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#56987" title="java.io.File">external</a> <span title="(Any)java.lang.String">+</span> (<span title="Any" class="keyword">if</span>(<a href="#56987" title="java.io.File">external</a>.<span title="()Boolean">exists</span>) <span title="java.lang.String(&quot; not on classpath.&quot;)" class="string">&quot; not on classpath.&quot;</span> <span class="keyword">else</span> <span title="java.lang.String(&quot; does not exist.&quot;)" class="string">&quot; does not exist.&quot;</span>))
			<span title="(java.io.File,AbstractCompileConditional.this.ExternalInfo)(java.io.File, AbstractCompileConditional.this.ExternalInfo)">(</span><a href="#56987" title="java.io.File">external</a>, <a href="#56849" title="(Boolean,Long)AbstractCompileConditional.this.ExternalInfo">ExternalInfo</a>(<a href="#56988" title="Boolean">available</a>, <a href="#56987" title="java.io.File">external</a>.<span title="()Long">lastModified</span>))
		}
	}

	<span class="keyword">import</span> ChangeDetection.{LastModifiedOnly, HashOnly, HashAndLastModified, HashAndProductsExist}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.ChangeDetection.Value" id="27056">changeDetectionMethod</a>: ChangeDetection.<span title="sbt.ChangeDetection.Value">Value</span> = <a href="#34445" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="27057">checkLastModified</a> = <a href="#27056" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <a title="(AnyRef)Boolean" id="5738">!=</a> <a href="#34445" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="27058">noProductsImpliesModified</a> = <a href="#27056" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="(AnyRef)Boolean">==</span> <a href="#34439" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a>
	<span class="keyword">override</span> <span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="27059">isSourceModified</a>(<a title="sbt.Path" id="57005">source</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) =
		<a href="#27056" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <a href="#34443" title="=&gt; sbt.ChangeDetection.Value">HashAndLastModified</a> | <a href="#34445" title="=&gt; sbt.ChangeDetection.Value">HashAndProductsExist</a> =&gt;
				<span class="comment">// behavior will differ because of checkLastModified</span>
				<span class="comment">// hash modified must come first so that the latest hash is calculated for every source</span>
				<a href="#27064" title="(sbt.Path)Boolean">hashModified</a>(<a href="#57005" title="sbt.Path">source</a>) <span title="(Boolean)Boolean">||</span> <span class="keyword">super</span>.<a href="#27031" title="(sbt.Path)Boolean">isSourceModified</a>(<a href="#57005" title="sbt.Path">source</a>)
			<span title="Boolean" class="keyword">case</span> <a href="#34441" title="=&gt; sbt.ChangeDetection.Value">HashOnly</a> =&gt; <a href="#27064" title="(sbt.Path)Boolean">hashModified</a>(<a href="#57005" title="sbt.Path">source</a>)
			<span title="Boolean" class="keyword">case</span> <a href="#34439" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a> =&gt; <span class="keyword">super</span>.<a href="#27031" title="(sbt.Path)Boolean">isSourceModified</a>(<a href="#57005" title="sbt.Path">source</a>)
		}

	<span class="keyword">import</span> scala.collection.mutable.{Buffer, ListBuffer}
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]" id="27061">newHashes</a>: <a title="scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]" id="15810">Buffer</a>[(Path, Option[Array[Byte]])] = <span title="scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]" class="keyword">new</span> <a title="scala.collection.mutable.ListBuffer[(sbt.Path, Option[Array[Byte]])]" id="15774">ListBuffer</a>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)Unit" id="27063">warnHashError</a>(<a title="sbt.Path" id="57040">source</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>, <a title="String" id="57041">message</a>: <span title="String">String</span>)
	{
		<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19735" title="(=&gt; String)Unit">warn</a>(<span title="java.lang.String(&quot;Error computing hash for source &quot;)" class="string">&quot;Error computing hash for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57040" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57041" title="String">message</a>)
		<a href="#27061" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,object None)(sbt.Path, object None)">(</span><a href="#57040" title="sbt.Path">source</a>, <span title="object None">None</span>))
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.Path)Boolean" id="27064">hashModified</a>(<a title="sbt.Path" id="57008">source</a>: <a href="Path.scala.html#10200" title="sbt.Path">Path</a>) =
	{
		<a href="#57008" title="sbt.Path">source</a>.<a href="Path.scala.html#18072" title="=&gt; Boolean">isDirectory</a> <span title="(Boolean)Boolean">||</span>
		(<a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27218" title="(sbt.Path)Option[Array[Byte]]">hash</a>(<a href="#57008" title="sbt.Path">source</a>) <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <span title="object None">None</span> =&gt;
				<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Source &quot;)" class="string">&quot;Source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57008" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; had no hash, marking modified.&quot;)" class="string">&quot; had no hash, marking modified.&quot;</span>)
				<a href="Hash.scala.html#57020" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#57008" title="sbt.Path">source</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>).<a title="((String) =&gt; Unit,(Array[Byte]) =&gt; Unit)Unit" id="25883">fold</a>(<a title="String" id="57039">err</a> =&gt; <a href="#27063" title="(sbt.Path,String)Unit">warnHashError</a>(<a href="#57008" title="sbt.Path">source</a>, <a href="#57039" title="String">err</a>), <a title="Array[Byte]" id="57043">newHash</a> =&gt; <a href="#27061" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,Some[Array[Byte]])(sbt.Path, Some[Array[Byte]])">(</span><a href="#57008" title="sbt.Path">source</a>, <span title="(Array[Byte])Some[Array[Byte]]">Some</span>(<a href="#57043" title="Array[Byte]">newHash</a>))))
				<span title="Boolean(true)" class="keyword">true</span>
			<span title="Boolean" class="keyword">case</span> Some(<a title="Array[Byte]" id="57047">oldHash</a>) =&gt;
			{
				<a href="Hash.scala.html#57020" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#57008" title="sbt.Path">source</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>) <span title="Boolean" class="keyword">match</span>
				{
					<span title="Boolean" class="keyword">case</span> Left(<a title="String" id="57052">err</a>) =&gt;
						<a href="#27063" title="(sbt.Path,String)Unit">warnHashError</a>(<a href="#57008" title="sbt.Path">source</a>, <a href="#57052" title="String">err</a>)
						<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Assuming source is modified because of error.&quot;)" class="string">&quot;Assuming source is modified because of error.&quot;</span>)
						<span title="Boolean(true)" class="keyword">true</span>
					<span title="Boolean" class="keyword">case</span> Right(<a title="Array[Byte]" id="57055">newHash</a>) =&gt;
						<a href="#27061" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a> <span title="((sbt.Path, Option[Array[Byte]]))Unit">+=</span> (<span title="(sbt.Path,Some[Array[Byte]])(sbt.Path, Some[Array[Byte]])">(</span><a href="#57008" title="sbt.Path">source</a>, <span title="(Array[Byte])Some[Array[Byte]]">Some</span>(<a href="#57055" title="Array[Byte]">newHash</a>)))
						<span class="keyword">val</span> <a title="Boolean" id="57056">different</a> = <span title="=&gt; Boolean">!</span>(<a href="#57047" title="Array[Byte]">oldHash</a> <a title="(Any)Boolean" id="17330">deepEquals</a> <a href="#57055" title="Array[Byte]">newHash</a>)
						<span title="Unit" class="keyword">if</span>(<a href="#57056" title="Boolean">different</a>)
							<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Hash for source &quot;)" class="string">&quot;Hash for source &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57008" title="sbt.Path">source</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; changed (was &quot;)" class="string">&quot; changed (was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="Hash.scala.html#10030" title="object sbt.Hash">Hash</a>.<a href="Hash.scala.html#57017" title="(Array[Byte])String">toHex</a>(<a href="#57047" title="Array[Byte]">oldHash</a>) <span title="(Any)java.lang.String">+</span>
							<span title="java.lang.String(&quot;, is now &quot;)" class="string">&quot;, is now &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="Hash.scala.html#10030" title="object sbt.Hash">Hash</a>.<a href="Hash.scala.html#57017" title="(Array[Byte])String">toHex</a>(<a href="#57055" title="Array[Byte]">newHash</a>) <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;), marking modified.&quot;)" class="string">&quot;), marking modified.&quot;</span>)
						<a href="#57056" title="Boolean">different</a>
				}
			}
		})
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="=&gt; Iterable[sbt.Path]" id="27065">scalaJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path] =
	{
		<span class="keyword">val</span> <a title="xsbt.ScalaInstance" id="57073">instance</a> = <a href="#34391" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>.<a href="../AnalyzingCompiler.scala.html#27312" title="=&gt; xsbt.ScalaInstance">scalaInstance</a>
		<span title="(java.io.File*)Seq[java.io.File]">Seq</span>(<a href="#57073" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#23399" title="=&gt; java.io.File">libraryJar</a>, <a href="#57073" title="xsbt.ScalaInstance">instance</a>.<a href="../ScalaInstance.scala.html#23401" title="=&gt; java.io.File">compilerJar</a>).<a title="((java.io.File) =&gt; sbt.Path)Seq[sbt.Path]" id="16749">map</a>(<a href="Path.scala.html#10201" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15584" title="(java.io.File)sbt.Path">fromFile</a>)
	}
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(AbstractCompileConditional.this.ConditionalAnalysis)Option[String]" id="27066">execute</a>(<a title="AbstractCompileConditional.this.ConditionalAnalysis" id="34424">executeAnalysis</a>: <a href="#27026" title="AbstractCompileConditional.this.ConditionalAnalysis">ConditionalAnalysis</a>) =
	{
		<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19734" title="(=&gt; String)Unit">info</a>(<a href="#34424" title="AbstractCompileConditional.this.ConditionalAnalysis">executeAnalysis</a>.<a title="()java.lang.String" id="5730">toString</a>)
		<a href="#27067" title="()Unit">finishHashes</a>()
		<span class="keyword">import</span> executeAnalysis.dirtySources

		<span class="comment">// the output directory won't show up in the classpath unless it exists, so do this before classpath.get</span>
		<span class="keyword">val</span> <a title="java.io.File" id="34428">outputDir</a> = <a href="#27085" title="=&gt; sbt.Path">outputDirectory</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>
		<a href="FileUtilities.scala.html#9085" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15457" title="(java.io.File,sbt.Logger)Option[String]">createDirectory</a>(<a href="#34428" title="java.io.File">outputDir</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>)

		<span class="keyword">val</span> <a title="scala.collection.Set[sbt.Path]" id="34429">cp</a> = <a href="#27086" title="=&gt; sbt.PathFinder">classpath</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#34417" title="=&gt; Iterable[sbt.Path]">dirtySources</a>.<a title="=&gt; Boolean" id="16315">isEmpty</a>)
			<a href="#27068" title="(Iterable[sbt.Path])Unit">checkClasspath</a>(<a href="#34429" title="scala.collection.Set[sbt.Path]">cp</a>)
		<span class="keyword">def</span> <a title="=&gt; Option[String]" id="34430">run</a> =
		{
			<span class="keyword">val</span> <a title="sbt.Compile" id="34449">compile</a> = <span title="sbt.Compile" class="keyword">new</span> <a href="Compile.scala.html#10605" title="sbt.Compile">Compile</a>(<a href="#34390" title="=&gt; sbt.AbstractCompileConfiguration">config</a>.<a href="#27092" title="=&gt; Int">maxErrors</a>, <a href="#34391" title="=&gt; xsbt.AnalyzingCompiler">compiler</a>, <a href="#27069" title="=&gt; sbt.AnalysisCallback">analysisCallback</a>, <a href="#27088" title="=&gt; sbt.Path">projectPath</a>)
			<a href="Compile.scala.html#29797" title="(String,Iterable[sbt.Path],Iterable[sbt.Path],sbt.Path,Seq[String],Seq[String],sbt.CompileOrder.Value,sbt.Logger)Option[String]">compile</a>(<a href="#27082" title="=&gt; String">label</a>, <a href="#34417" title="=&gt; Iterable[sbt.Path]">dirtySources</a>, <a href="#34429" title="scala.collection.Set[sbt.Path]">cp</a>, <a href="#27085" title="=&gt; sbt.Path">outputDirectory</a>, <a href="#27090" title="=&gt; Seq[String]">options</a>, <a href="#27091" title="=&gt; Seq[String]">javaOptions</a>, <a href="#27093" title="=&gt; sbt.CompileOrder.Value">compileOrder</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>)
		}
		<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="34431">loader</a> = <a href="ClasspathUtilities.scala.html#11449" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30469" title="(Iterable[sbt.Path])java.lang.ClassLoader">toLoader</a>(<a href="#34429" title="scala.collection.Set[sbt.Path]">cp</a> <span title="(Iterable[sbt.Path])Collection[sbt.Path]">++</span> <a href="#27065" title="=&gt; Iterable[sbt.Path]">scalaJars</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="34432">r</a> = classfile.<a href="classfile/Analyze.scala.html#34490" title="(sbt.Path,sbt.Path,Iterable[sbt.Path],Iterable[sbt.Path],sbt.Logger)(=&gt; scala.collection.Set[sbt.Path],sbt.AnalysisCallback,java.lang.ClassLoader)(=&gt; Option[String])Option[String]">Analyze</a>(<a href="#27088" title="=&gt; sbt.Path">projectPath</a>, <a href="#27085" title="=&gt; sbt.Path">outputDirectory</a>, <a href="#34417" title="=&gt; Iterable[sbt.Path]">dirtySources</a>, <a href="#27083" title="=&gt; sbt.PathFinder">sourceRoots</a>.<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#27044" title="=&gt; sbt.Logger">log</a>)(<a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27175" title="=&gt; scala.collection.mutable.Set[sbt.Path]">allProducts</a>, <a href="#27069" title="=&gt; sbt.AnalysisCallback">analysisCallback</a>, <a href="#34431" title="java.lang.ClassLoader">loader</a>)(<a href="#34430" title="=&gt; Option[String]">run</a>)
		<span title="Unit" class="keyword">if</span>(<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19730" title="(sbt.Level.Value)Boolean">atLevel</a>(<a href="Logger.scala.html#8281" title="object sbt.Level">Level</a>.<a href="Logger.scala.html#28792" title="=&gt; sbt.Level.Value">Debug</a>))
		{
			<span class="comment">/** This checks that the plugin accounted for all classes in the output directory.*/</span>
			<span class="keyword">val</span> <a title="scala.collection.mutable.Set[sbt.Path]" id="34521">classes</a> = scala.collection.mutable.<a title="(sbt.Path*)scala.collection.mutable.Set[sbt.Path]" id="15745">HashSet</a>(<a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27175" title="=&gt; scala.collection.mutable.Set[sbt.Path]">allProducts</a>.<span title="=&gt; Seq[sbt.Path]">toSeq</span>: _*)
			<span class="keyword">val</span> <a title="scala.collection.Set[sbt.Path]" id="34522">actualClasses</a> = (<a href="#27085" title="=&gt; sbt.Path">outputDirectory</a> <a href="Path.scala.html#16182" title="(sbt.FileFilter)sbt.PathFinder">**</a> <a href="NameFilter.scala.html#30800" title="(String)sbt.NameFilter">GlobFilter</a>(<span title="java.lang.String(&quot;*.class&quot;)" class="string">&quot;*.class&quot;</span>)).<a href="Path.scala.html#16189" title="=&gt; scala.collection.Set[sbt.Path]">get</a>
			<span class="keyword">val</span> <a title="List[sbt.Path]" id="34523">missedClasses</a> = <a href="#34522" title="scala.collection.Set[sbt.Path]">actualClasses</a>.<span title="=&gt; List[sbt.Path]">toList</span>.<a title="((sbt.Path) =&gt; Boolean)List[sbt.Path]" id="17969">remove</a>(<a href="#34521" title="scala.collection.mutable.Set[sbt.Path]">classes</a>.<a href="#34526" title="(sbt.Path)Boolean" id="18152">contains</a>)
			<a href="#34523" title="List[sbt.Path]">missedClasses</a>.<a title="((sbt.Path) =&gt; Unit)Unit" id="17967">foreach</a>(<a title="sbt.Path" id="34528">c</a> =&gt; <a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Missed class: &quot;)" class="string">&quot;Missed class: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34528" title="sbt.Path">c</a>))
			<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Total missed classes: &quot;)" class="string">&quot;Total missed classes: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#34523" title="List[sbt.Path]">missedClasses</a>.<a title="=&gt; Int" id="17946">length</a>)
		}
		<a href="#34432" title="Option[String]">r</a>
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="()Unit" id="27067">finishHashes</a>()
	{
		<span title="Unit" class="keyword">if</span>(<a href="#27056" title="=&gt; sbt.ChangeDetection.Value">changeDetectionMethod</a> <span title="(AnyRef)Boolean">==</span> <a href="#34439" title="=&gt; sbt.ChangeDetection.Value">LastModifiedOnly</a>)
			<a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27219" title="()Unit">clearHashes</a>()
		<span class="keyword">else</span>
		{
			<span class="keyword">for</span>(<a href="#57084" title="(((sbt.Path, Option[Array[Byte]])) =&gt; Unit)Unit" id="16753">(</a><a title="sbt.Path" id="57089">path</a>, <a title="Option[Array[Byte]]" id="57090">hash</a>) &lt;- <a href="#27061" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a>)
			{
				<a href="#57090" title="Option[Array[Byte]]">hash</a> <span title="Unit" class="keyword">match</span>
				{
					<span title="Unit" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27217" title="(sbt.Path)Unit">clearHash</a>(<a href="#57089" title="sbt.Path">path</a>)
					<span title="Unit" class="keyword">case</span> Some(<a title="Array[Byte]" id="57092">hash</a>) =&gt; <a href="#27010" title="=&gt; AbstractCompileConditional.this.AnalysisType">analysis</a>.<a href="Analysis.scala.html#27216" title="(sbt.Path,Array[Byte])Unit">setHash</a>(<a href="#57089" title="sbt.Path">path</a>, <a href="#57092" title="Array[Byte]">hash</a>)
				}
			}
		}
		<a href="#27061" title="=&gt; scala.collection.mutable.Buffer[(sbt.Path, Option[Array[Byte]])]">newHashes</a>.<a title="()Unit" id="18743">clear</a>()
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path])Unit" id="27068">checkClasspath</a>(<a title="Iterable[sbt.Path]" id="34448">cp</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path])
	{
		<span class="keyword">import</span> scala.collection.mutable.{HashMap, HashSet, Set}
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" id="57096">collisions</a> = <span title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]" id="15927">HashMap</a>[String, Set[Path]]
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="57101">jar</a> &lt;- <a href="#34448" title="Iterable[sbt.Path]">cp</a> <span class="keyword">if</span> <a href="ClasspathUtilities.scala.html#11449" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30474" title="(sbt.Path)Boolean">isArchive</a>(<a href="#57101" title="sbt.Path">jar</a>))
			<a href="#57096" title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]">collisions</a>.<a title="(String,=&gt; scala.collection.mutable.Set[sbt.Path])scala.collection.mutable.Set[sbt.Path]" id="24523">getOrElseUpdate</a>(<a href="#57101" title="sbt.Path">jar</a>.<a href="Path.scala.html#18076" title="=&gt; java.io.File">asFile</a>.<a title="()java.lang.String" id="16219">getName</a>, <span title="scala.collection.mutable.HashSet[sbt.Path]" class="keyword">new</span> <span title="scala.collection.mutable.HashSet[sbt.Path]">HashSet</span>[Path]) <a title="(sbt.Path)Unit" id="18121">+=</a> <a href="#57101" title="sbt.Path">jar</a>
		<span class="keyword">for</span>(<a href="#57104" title="(((String, scala.collection.mutable.Set[sbt.Path])) =&gt; Unit)Unit">(</a><a title="String" id="57109">name</a>, <a title="scala.collection.mutable.Set[sbt.Path]" id="57110">jars</a>) &lt;- <a href="#57096" title="scala.collection.mutable.HashMap[String,scala.collection.mutable.Set[sbt.Path]]">collisions</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#57110" title="scala.collection.mutable.Set[sbt.Path]">jars</a>.<span title="=&gt; Int">size</span> <a title="(Int)Boolean" id="3093">&gt;</a> <span title="Int(1)" class="int">1</span>)
			{
				<a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Possible duplicate classpath locations for jar &quot;)" class="string">&quot;Possible duplicate classpath locations for jar &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57109" title="String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;: &quot;)" class="string">&quot;: &quot;</span>)
				<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="57115">jar</a> &lt;- <a href="#57110" title="scala.collection.mutable.Set[sbt.Path]">jars</a>) <a href="#27044" title="=&gt; sbt.Logger">log</a>.<a href="Logger.scala.html#19733" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;\011&quot;)" class="string">&quot;\t&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#57115" title="sbt.Path">jar</a>.<a href="Path.scala.html#18083" title="=&gt; String">absolutePath</a>)
			}
		}
	}

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="=&gt; sbt.AnalysisCallback" id="27069">analysisCallback</a>: <a href="AnalysisCallback.scala.html#9210" title="sbt.AnalysisCallback">AnalysisCallback</a>
}
<span class="keyword">object</span> <a title="object sbt.ChangeDetection" id="6598">ChangeDetection</a> <span class="keyword">extends</span> <a title="Enumeration" id="19922">Enumeration</a>
{
	<span class="keyword">val</span> <a title="sbt.ChangeDetection.Value" id="34439">LastModifiedOnly</a>, <a title="sbt.ChangeDetection.Value" id="34441">HashOnly</a>, <a title="sbt.ChangeDetection.Value" id="34443">HashAndLastModified</a>, <a title="sbt.ChangeDetection.Value" id="34445">HashAndProductsExist</a> = <span title="=&gt; sbt.ChangeDetection.Value">Value</span>
}
        </pre>
    </body>
</html>