<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Webstart.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> scala.xml.{Elem, NodeSeq}
<span class="keyword">import</span> Control._

<span class="comment">/** Defines the configurable parameters for the webstart task. */</span>
<span class="keyword">trait</span> <a title="trait WebstartOptions extends java.lang.Object with NotNull" id="8076">WebstartOptions</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="comment">/** The main jar to use for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="80673">webstartMainJar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all generated files for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="80674">webstartOutputDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>
	<span class="comment">/** Generates the .jnlp file using the provided resource descriptions.  Each resource description
	* provides the path of the jar relative to 'webstartOutputDirectory' and whether or not
	* it is the main jar.*/</span>
	<span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.Elem" id="80675">jnlpXML</a>(<a title="Seq[sbt.WebstartJarResource]" id="80688">jars</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <span title="scala.xml.Elem">Elem</span>
	<span class="comment">/** The location to write the .jnlp file to.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="80676">jnlpFile</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all jars that are not the main jar.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="80677">webstartLibDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>
	<span class="comment">/** The libraries needed for webstart.  Note that only jars are used; directories are discarded.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="80678">webstartLibraries</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Libraries external to the project needed for webstart.  This is mainly for scala libraries.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="80679">webstartExtraLibraries</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Resources to copy to the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="80680">webstartResources</a>: <a href="Path.scala.html#10419" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** If defined, this specifies where to create a zip of the webstart output directory.  It cannot be
	* in the output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.Path]" id="80681">webstartZip</a>: <span title="Option[sbt.Path]">Option</span>[Path]

	<span class="comment">/** If defined, configures signing of jars.  All jars (main and libraries) are signed using
	* this configuration.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="80682">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration]
	<span class="comment">/** If true, pack200 compression is applied to all jars (main and libraries).  A version of each jar
	* without pack200 compression is still created in the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="80683">webstartPack200</a>: <span title="Boolean">Boolean</span>
	<span class="comment">/** If true, gzip compression will be applied to all jars.  If pack200 compression is enabled,
	* gzip compression is also applied to the archives with pack200 compression.  A version of
	* each file without gzip compression is still created in the webstart output directory. */</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="80684">webstartGzip</a>: <span title="Boolean">Boolean</span>
}
<span class="comment">/** Represents a library included in the webstart distribution.  Name is the filename of the jar.
* href is the path of the jar relative to the webstart output directory.  isMain is true only for
* the main jar. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class WebstartJarResource extends java.lang.Object with NotNull with ScalaObject" id="12042">WebstartJarResource</a>(<span class="keyword">val</span> <a title="String" id="80712">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="80713">href</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Boolean" id="80714">isMain</a>: <span title="Boolean">Boolean</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** Configuration for signing jars. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SignConfiguration extends java.lang.Object with NotNull with ScalaObject" id="9711">SignConfiguration</a>(<span class="keyword">val</span> <a title="String" id="80725">alias</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Seq[sbt.SignJar.SignOption]" id="80726">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** A scala project that produces a webstart distribution. */</span>
<span class="keyword">trait</span> <a title="trait WebstartScalaProject extends java.lang.Object with sbt.ScalaProject with ScalaObject" id="10218">WebstartScalaProject</a> <span class="keyword">extends</span> <a href="ScalaProject.scala.html#12924" title="sbt.ScalaProject">ScalaProject</a>
{
	<span class="keyword">import</span> WebstartScalaProject._
	<span class="comment">/** Creates a task that produces a webstart distribution using the given options.*/</span>
	<span class="keyword">def</span> <a title="(sbt.WebstartOptions)WebstartScalaProject.this.Task" id="80729">webstartTask</a>(<a title="sbt.WebstartOptions" id="80752">options</a>: <a href="#8076" title="sbt.WebstartOptions">WebstartOptions</a>) =
		<a href="TaskManager.scala.html#50837" title="(=&gt; Option[String])WebstartScalaProject.this.Task">task</a>
		{
			<span class="keyword">import</span> options._
			<a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49192" title="(Iterable[sbt.Path],sbt.Logger)Option[String]">createDirectories</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="#80762" title="(sbt.Path)List[sbt.Path]">::</a> <a href="#80677" title="=&gt; sbt.Path">webstartLibDirectory</a> <a href="#80763" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>) <span class="comment">// ignore errors</span>
			<a href="#80751" title="(sbt.WebstartOptions)Unit">verifyOptions</a>(<a href="#80752" title="sbt.WebstartOptions">options</a>)

			<span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="80756">relativize</a>(<a title="sbt.Path" id="80769">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>) = <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49311" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#49351" title="=&gt; sbt.Path">##</a>, <a href="#80769" title="sbt.Path">jar</a>) <a title="(=&gt; sbt.Path)sbt.Path" id="30329">getOrElse</a>
				<a title="(String)Nothing" id="6476">error</a>(<span title="java.lang.String(&quot;Jar (&quot;)" class="string">&quot;Jar (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80769" title="sbt.Path">jar</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) was not in webstart output directory (&quot;)" class="string">&quot;) was not in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
			<span class="keyword">def</span> <a title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]" id="80757">signAndPack</a>(<a title="List[sbt.Path]" id="80775">jars</a>: <span title="List[sbt.Path]">List</span>[Path], <a title="sbt.Path" id="80776">targetDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>): <a title="Either[String,List[sbt.Path]]" id="340">Either</a>[String, List[Path]] =
			{
				<a href="Control.scala.html#50250" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#80775" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>: <span title="List[sbt.Path]">List</span>[Path])
				{ (<a title="List[sbt.Path]" id="80796">allJars</a>, <a title="sbt.Path" id="80797">jar</a>) =&gt;
					<span class="keyword">val</span> <a title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" id="80798">signPackResult</a> =
						<a href="#80682" title="=&gt; Option[sbt.SignConfiguration]">webstartSignConfiguration</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
						{
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> Some(<a title="sbt.SignConfiguration" id="80800">config</a>) =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#80683" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#80742" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signAndPack200</a>(<a href="#80797" title="sbt.Path">jar</a>, <a href="#80800" title="sbt.SignConfiguration">config</a>, <a href="#80776" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#80739" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signOnly</a>(<a href="#80797" title="sbt.Path">jar</a>, <a href="#80800" title="sbt.SignConfiguration">config</a>, <a href="#80776" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>)
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#80683" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#80744" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">pack200Only</a>(<a href="#80797" title="sbt.Path">jar</a>, <a href="#80776" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#80745" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#80797" title="sbt.Path">jar</a>, <a href="#80776" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="80956">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#13002" title="sbt.Jars">Jars</a>(<a href="#80956" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>))
						}
					<span class="keyword">val</span> <a title="Boolean" id="80799">deleteOriginal</a> = <a href="#80683" title="=&gt; Boolean">webstartPack200</a>
					<a href="#80798" title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product">signPackResult</a>.<span title="=&gt; Either.RightProjection[String,sbt.Jars]">right</span> <span title="((sbt.Jars) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">flatMap</span> { <a title="sbt.Jars" id="80964">addJars</a> =&gt;
						<span title="Either[String,List[sbt.Path]]" class="keyword">if</span>(<a href="#80684" title="=&gt; Boolean">webstartGzip</a>)
							<a href="Control.scala.html#13546" title="object sbt.Control">Control</a>.<a href="Control.scala.html#50250" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#80964" title="sbt.Jars">addJars</a>.<a href="#80863" title="=&gt; List[sbt.Path]">gzippable</a>, <a href="#80964" title="sbt.Jars">addJars</a>.<a href="#80862" title="=&gt; List[sbt.Path]">allJars</a> <a href="#80981" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#80796" title="List[sbt.Path]">allJars</a>)
								{ (<a title="List[sbt.Path]" id="80990">accumulate</a>, <a title="sbt.Path" id="80991">jar</a>) =&gt; <a href="#80741" title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product">gzipJar</a>(<a href="#80991" title="sbt.Path">jar</a>, <a href="#80799" title="Boolean">deleteOriginal</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">map</span>(<a href="#81029" title="List[sbt.Path]">_</a> <a href="#81030" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#80990" title="List[sbt.Path]">accumulate</a>) }
						<span class="keyword">else</span>
							<a title="(List[sbt.Path])Right[Nothing,List[sbt.Path]]" id="494">Right</a>(<a href="#80964" title="sbt.Jars">addJars</a>.<a href="#80862" title="=&gt; List[sbt.Path]">allJars</a> <a href="#81037" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#80796" title="List[sbt.Path]">allJars</a>)
					}
				}
			}

			<span class="keyword">import</span> FileUtilities._

			<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="80759">jars</a> = (<a href="#80678" title="=&gt; sbt.PathFinder">webstartLibraries</a> <a href="Path.scala.html#49326" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#80679" title="=&gt; sbt.PathFinder">webstartExtraLibraries</a>).<a href="Path.scala.html#49335" title="=&gt; scala.collection.Set[sbt.Path]">get</a>.<span title="((sbt.Path) =&gt; Boolean)Iterable[sbt.Path]">filter</span>(<a href="ClasspathUtilities.scala.html#13105" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#51754" title="(sbt.Path)Boolean">isArchive</a>)
			<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[sbt.Path]" id="80760">process</a>(<a title="Iterable[sbt.Path]" id="81044">jars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <span class="keyword">for</span>(<a title="((sbt.Path) =&gt; sbt.Path)Iterable[sbt.Path]" id="81049">jar</a> &lt;- <a href="#81044" title="Iterable[sbt.Path]">jars</a> <span class="keyword">if</span> <a href="#81049" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>.<a title="(java.lang.String)Boolean" id="6375">endsWith</a>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)) <span class="keyword">yield</span> <a href="#80756" title="(sbt.Path)sbt.Path">relativize</a>(<a href="#81049" title="sbt.Path">jar</a>)

			<a href="Control.scala.html#50255" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#80757" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#80673" title="=&gt; sbt.Path">webstartMainJar</a> <a href="#81051" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>)) { <a title="List[sbt.Path]" id="81055">mainJars</a> =&gt;
				<a href="Control.scala.html#50255" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#80757" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#80759" title="Iterable[sbt.Path]">jars</a>.<span title="=&gt; List[sbt.Path]">toList</span>, <a href="#80677" title="=&gt; sbt.Path">webstartLibDirectory</a>)) { <a title="List[sbt.Path]" id="81058">libJars</a> =&gt;
					<a href="#80747" title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#80675" title="(Seq[sbt.WebstartJarResource])scala.xml.Elem">jnlpXML</a>(<a href="#80749" title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]">jarResources</a>(<a href="#80760" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#81055" title="List[sbt.Path]">mainJars</a>), <a href="#80760" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#81058" title="List[sbt.Path]">libJars</a>))), <a href="#80676" title="=&gt; sbt.Path">jnlpFile</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
					<a href="Control.scala.html#50255" title="(Either[String,scala.collection.Set[sbt.Path]])((scala.collection.Set[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="FileUtilities.scala.html#49207" title="(Iterable[sbt.Path],sbt.Path,sbt.Logger)Either[String,scala.collection.Set[sbt.Path]]">copy</a>(<a href="#80680" title="=&gt; sbt.PathFinder">webstartResources</a>.<a href="Path.scala.html#49335" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>)) { <a title="scala.collection.Set[sbt.Path]" id="81073">copiedResources</a> =&gt;
						<span class="keyword">val</span> <a title="sbt.PathFinder" id="81074">keep</a> = <a href="#80676" title="=&gt; sbt.Path">jnlpFile</a> <a href="Path.scala.html#49326" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49304" title="(=&gt; Iterable[sbt.Path])sbt.PathFinder">lazyPathFinder</a>(<a href="#81055" title="List[sbt.Path]">mainJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#81058" title="List[sbt.Path]">libJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#81073" title="scala.collection.Set[sbt.Path]">copiedResources</a>) <a href="Path.scala.html#49326" title="(sbt.PathFinder)sbt.PathFinder">+++</a>
							<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#49326" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#80677" title="=&gt; sbt.Path">webstartLibDirectory</a>
						<a href="FileUtilities.scala.html#49215" title="(sbt.Path,Iterable[sbt.Path],sbt.Logger)Option[String]">prune</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#81074" title="sbt.PathFinder">keep</a>.<a href="Path.scala.html#49335" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
						<a href="#80681" title="=&gt; Option[sbt.Path]">webstartZip</a>.<a title="((sbt.Path) =&gt; Option[String])Option[String]" id="30333">flatMap</a>( <a title="sbt.Path" id="81092">zipPath</a> =&gt; <a href="FileUtilities.scala.html#49166" title="(Iterable[sbt.Path],sbt.Path,Boolean,sbt.Logger)Option[String]">zip</a>(<span title="(sbt.Path*)List[sbt.Path]">List</span>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#49351" title="=&gt; sbt.Path">##</a>), <a href="#81092" title="sbt.Path">zipPath</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="Project.scala.html#50852" title="=&gt; sbt.Logger">log</a>) )
					}
				}
			}
		}
	<span class="comment">/** Creates default XML elements for a JNLP file for the given resources.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.NodeSeq" id="80730">defaultElements</a>(<a title="Seq[sbt.WebstartJarResource]" id="81095">resources</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <a title="scala.xml.NodeSeq" id="39850">NodeSeq</a> = <a title="object scala.xml.NodeSeq" id="39851">NodeSeq</a>.<a title="(Seq[scala.xml.Node])scala.xml.NodeSeq" id="44731">fromSeq</a>(<a href="#81095" title="Seq[sbt.WebstartJarResource]">resources</a>.<a title="((sbt.WebstartJarResource) =&gt; scala.xml.Elem)Seq[scala.xml.Elem]" id="15820">map</a>(<a href="#80731" title="(sbt.WebstartJarResource)scala.xml.Elem">defaultElement</a>))
	<span class="comment">/** Creates a default XML element for a JNLP file for the given resource.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.WebstartJarResource)scala.xml.Elem" id="80731">defaultElement</a>(<a title="sbt.WebstartJarResource" id="81097">resource</a>: <a href="#12042" title="sbt.WebstartJarResource">WebstartJarResource</a>): <span title="scala.xml.Elem">Elem</span> =
		&lt;jar href={<a href="#81097" title="sbt.WebstartJarResource">resource</a>.<a href="#80713" title="=&gt; String">href</a>} main={<a href="#81097" title="sbt.WebstartJarResource">resource</a>.<a href="#80714" title="=&gt; Boolean">isMain</a>.<a title="()java.lang.String" id="3443">toString</a>}/&gt;

}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Jars extends java.lang.Object with NotNull with ScalaObject" id="13002">Jars</a>(<span class="keyword">val</span> <a title="List[sbt.Path]" id="80863">gzippable</a>: <span title="List[sbt.Path]">List</span>[Path], <span class="keyword">val</span> <a title="List[sbt.Path]" id="80864">nonGzippable</a>: <span title="List[sbt.Path]">List</span>[Path]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; List[sbt.Path]" id="80862">allJars</a> = <a href="#80863" title="=&gt; List[sbt.Path]">gzippable</a> <a href="#80984" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#80864" title="=&gt; List[sbt.Path]">nonGzippable</a>
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.WebstartScalaProject" id="10219">WebstartScalaProject</a>
{
	<span class="keyword">import</span> FileTasks.{runOption, wrapProduct, wrapProducts}
	<span class="comment">/** Changes the extension of the Path of the given jar from &quot;.jar&quot; to newExtension.  If append is true,
	* the new extension is simply appended to the jar's filename. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)sbt.Path" id="80736">appendExtension</a>(<a title="sbt.Path" id="80811">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="String" id="80812">newExtension</a>: <span title="String">String</span>) =
		<a href="#80811" title="sbt.Path">jar</a> <span title="sbt.Path" class="keyword">match</span>
		{
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.RelativePath" id="80814">rp</a>: <a href="Path.scala.html#10992" title="sbt.RelativePath">RelativePath</a> =&gt; <a href="#80814" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#70646" title="=&gt; sbt.Path">parentPath</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> (<a href="#80814" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#70648" title="=&gt; String">component</a> <span title="(Any)java.lang.String">+</span> <a href="#80812" title="String">newExtension</a>)
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.Path" id="80815">x</a> =&gt; <a href="#80815" title="sbt.Path">x</a>
		}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="80737">gzipJarPath</a>(<a title="sbt.Path" id="80997">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>) = <a href="#80736" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#80997" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="80738">packPath</a>(<a title="sbt.Path" id="80809">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>) = <a href="#80736" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#80809" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.pack&quot;)" class="string">&quot;.pack&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="80739">signOnly</a>(<a title="sbt.Path" id="80873">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="80874">signConfiguration</a>: <a href="#9711" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="80875">targetDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="80876">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="80878">targetJar</a> = <a href="#80875" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> <a href="#80873" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#58153" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign&quot;)" class="string">&quot;sign&quot;</span>, <a href="FileTask.scala.html#58151" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#57187" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#80873" title="sbt.Path">jar</a>, <a href="#80876" title="sbt.Logger">log</a>) {
			<a href="#80876" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Signing &quot;)" class="string">&quot;Signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80873" title="sbt.Path">jar</a>)
			<a href="#80740" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#80873" title="sbt.Path">jar</a>, <a href="#80874" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#80878" title="sbt.Path">targetJar</a>, <a href="#80876" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#13002" title="sbt.Jars">Jars</a>(<a href="#80878" title="sbt.Path">targetJar</a> <a href="#80892" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]" id="80740">signAndVerify</a>(<a title="sbt.Path" id="80837">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="80838">signConfiguration</a>: <a href="#9711" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="80839">targetJar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="80840">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#69082" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#80837" title="sbt.Path">jar</a>, <a href="#80838" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#80725" title="=&gt; String">alias</a>, <a href="Pack.scala.html#69073" title="(sbt.Path)sbt.SignJar.SignOption">signedJar</a>(<a href="#80839" title="sbt.Path">targetJar</a>) <a href="#80843" title="(sbt.SignJar.SignOption)List[sbt.SignJar.SignOption]">::</a> <a href="#80838" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#80726" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>.<span title="=&gt; List[sbt.SignJar.SignOption]">toList</span>, <a href="#80840" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="Pack.scala.html#69083" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#80837" title="sbt.Path">jar</a>, <a href="#80838" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#80726" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#80840" title="sbt.Logger">log</a>).<a title="((String) =&gt; java.lang.String)Option[java.lang.String]" id="30331">map</a>(<a title="String" id="80850">err</a> =&gt; <span title="java.lang.String(&quot;Signed jar failed verification: &quot;)" class="string">&quot;Signed jar failed verification: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80850" title="String">err</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="80741">gzipJar</a>(<a title="sbt.Path" id="80992">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="Boolean" id="80993">deleteOriginal</a>: <span title="Boolean">Boolean</span>, <a title="sbt.Logger" id="80994">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="80996">gzipJar</a> = <a href="#80737" title="(sbt.Path)sbt.Path">gzipJarPath</a>(<a href="#80992" title="sbt.Path">jar</a>)
		<a href="FileTask.scala.html#58153" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span>, <a href="FileTask.scala.html#58151" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">gzipJar</a> <a href="FileTask.scala.html#57187" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#80992" title="sbt.Path">jar</a>, <a href="#80994" title="sbt.Logger">log</a>)
		{
			<a href="#80994" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Gzipping &quot;)" class="string">&quot;Gzipping &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80992" title="sbt.Path">jar</a>)
			<a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49160" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">gzip</a>(<a href="#80992" title="sbt.Path">jar</a>, <a href="#80996" title="sbt.Path">gzipJar</a>, <a href="#80994" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
				(<span title="Option[String]" class="keyword">if</span>(<a href="#80993" title="Boolean">deleteOriginal</a>) <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49220" title="(Iterable[sbt.Path],Boolean,sbt.Logger)Option[String]">clean</a>(<a href="#80992" title="sbt.Path">jar</a> <a href="#81012" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#80994" title="sbt.Logger">log</a>) <span class="keyword">else</span> <span title="object None">None</span>)
		}.<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#80996" title="sbt.Path">gzipJar</a> <a href="#81019" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  This method only does anything if
	* its outputs are out of date with respect to 'jar'.  Note that it does not determine if the signing configuration has changed.
	* See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="80742">signAndPack200</a>(<a title="sbt.Path" id="80801">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="80802">signConfiguration</a>: <a href="#9711" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="80803">targetDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="80804">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="80806">signedJar</a> = <a href="#80803" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> <a href="#80801" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="80807">packedJar</a> = <a href="#80738" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#80806" title="sbt.Path">signedJar</a>)
		<span class="keyword">import</span> signConfiguration._

		<a href="FileTask.scala.html#58153" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign and pack200&quot;)" class="string">&quot;sign and pack200&quot;</span>, <a href="FileTask.scala.html#58152" title="implicit sbt.FileTasks.wrapProducts : (=&gt; Iterable[sbt.Path])sbt.ProductsWrapper">List</a>(<a href="#80807" title="sbt.Path">packedJar</a>, <a href="#80806" title="sbt.Path">signedJar</a>) <a href="FileTask.scala.html#57187" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#80801" title="sbt.Path">jar</a>, <a href="#80804" title="sbt.Logger">log</a>) {
			<a href="#80804" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression and signing &quot;)" class="string">&quot;Applying pack200 compression and signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80801" title="sbt.Path">jar</a>)
			<a href="#80743" title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">signAndPack</a>(<a href="#80801" title="sbt.Path">jar</a>, <a href="#80806" title="sbt.Path">signedJar</a>, <a href="#80807" title="sbt.Path">packedJar</a>, <a href="#80725" title="=&gt; String">alias</a>, <a href="#80726" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#80804" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="#80740" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#80801" title="sbt.Path">jar</a>, <a href="#80802" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#80806" title="sbt.Path">signedJar</a>, <a href="#80804" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#13002" title="sbt.Jars">Jars</a>(<a href="#80807" title="sbt.Path">packedJar</a> <a href="#80865" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#80806" title="sbt.Path">signedJar</a> <a href="#80868" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>))
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]" id="80743">signAndPack</a>(<a title="sbt.Path" id="80829">jarPath</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Path" id="80830">signedPath</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Path" id="80831">out</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="String" id="80832">alias</a>: <span title="String">String</span>, <a title="Seq[sbt.SignJar.SignOption]" id="80833">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption], <a title="sbt.Logger" id="80834">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">import</span> Pack._
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#68565" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#80829" title="sbt.Path">jarPath</a>, <a href="#80831" title="sbt.Path">out</a>, <a href="#80834" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#68567" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#80831" title="sbt.Path">out</a>, <a href="#80830" title="sbt.Path">signedPath</a>, <a href="#80834" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#69082" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#80830" title="sbt.Path">signedPath</a>, <a href="#80832" title="String">alias</a>, <a href="#80833" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#80834" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#68565" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#80830" title="sbt.Path">signedPath</a>, <a href="#80831" title="sbt.Path">out</a>, <a href="#80834" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#68567" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#80831" title="sbt.Path">out</a>, <a href="#80830" title="sbt.Path">signedPath</a>, <a href="#80834" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#69083" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#80830" title="sbt.Path">signedPath</a>, <a href="#80833" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#80834" title="sbt.Logger">log</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="80744">pack200Only</a>(<a title="sbt.Path" id="80897">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Path" id="80898">targetDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="80899">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="80901">targetJar</a> = <a href="#80898" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> <a href="#80897" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="80902">packedJar</a> = <a href="#80738" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#80901" title="sbt.Path">targetJar</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="80903">packResult</a> =
			<a href="FileTask.scala.html#58153" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;pack200&quot;)" class="string">&quot;pack200&quot;</span>, <a href="FileTask.scala.html#58151" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">packedJar</a> <a href="FileTask.scala.html#57187" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#80897" title="sbt.Path">jar</a>, <a href="#80899" title="sbt.Logger">log</a>)
			{
				<a href="#80899" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression to &quot;)" class="string">&quot;Applying pack200 compression to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80897" title="sbt.Path">jar</a>)
				<a href="Pack.scala.html#8467" title="object sbt.Pack">Pack</a>.<a href="Pack.scala.html#68565" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#80897" title="sbt.Path">jar</a>, <a href="#80902" title="sbt.Path">packedJar</a>, <a href="#80899" title="sbt.Logger">log</a>)
			}
		<a href="#80903" title="Option[String]">packResult</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
		{
			<span title="Left[String,Nothing]" class="keyword">case</span> Some(<a title="String" id="80914">err</a>) =&gt; <a title="(String)Left[String,Nothing]" id="1175">Left</a>(<a href="#80914" title="String">err</a>)
			<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#80745" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#80897" title="sbt.Path">jar</a>, <a href="#80898" title="sbt.Path">targetDirectory</a>, <a href="#80899" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="80945">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#13002" title="sbt.Jars">Jars</a>(<a href="#80902" title="sbt.Path">packedJar</a> <a href="#80946" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#80945" title="List[sbt.Path]">jars</a>))
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="80745">copyJar</a>(<a title="sbt.Path" id="80917">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Path" id="80918">targetDirectory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="80919">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="80921">targetJar</a> = <a href="#80918" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#49353" title="(String)sbt.Path">/</a> <a href="#80917" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#58153" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;copy jar&quot;)" class="string">&quot;copy jar&quot;</span>, <a href="FileTask.scala.html#58151" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#57187" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#80917" title="sbt.Path">jar</a>, <a href="#80919" title="sbt.Logger">log</a>)( <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49211" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">copyFile</a>(<a href="#80917" title="sbt.Path">jar</a>, <a href="#80921" title="sbt.Path">targetJar</a>, <a href="#80919" title="sbt.Logger">log</a>) ).<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#80921" title="sbt.Path">targetJar</a> <a href="#80935" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,sbt.Path,sbt.Logger)Option[String]" id="80746">writeXML</a>(<a title="String" id="81063">xmlString</a>: <span title="String">String</span>, <a title="sbt.Path" id="81064">outputPath</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="81065">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
		<a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49225" title="(java.io.File,String,sbt.Logger)Option[String]">write</a>(<a href="#81064" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#49359" title="=&gt; java.io.File">asFile</a>, <a href="#81063" title="String">xmlString</a>, <a href="#81065" title="sbt.Logger">log</a>)
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath' if the hashes are different.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]" id="80747">writeXML</a>(<a title="scala.xml.Elem" id="81060">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="sbt.Path" id="81061">outputPath</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="81062">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">val</span> <a title="String" id="81124">xmlString</a> =
		{
			<span class="keyword">import</span> scala.xml.Utility
			<span class="keyword">object</span> <a title="object WithToXML" id="81126">WithToXML</a> {
				<span class="keyword">def</span> <a title="(scala.xml.Elem,Boolean)java.lang.String" id="81130">toXML</a>(<a title="scala.xml.Elem" id="81132">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="Boolean" id="81133">stripComments</a>: <span title="Boolean">Boolean</span>) = <span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node)String" id="81146">toXML</a>(<a href="#81132" title="scala.xml.Elem">xml</a>).<a title="()java.lang.String" id="6404">toString</a> <span class="comment">// this will only be called for 2.8, which defaults to stripComments= false, unlike 2.7</span>
			}
			<span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.WebstartScalaProject.another28Hack : (AnyRef)object WithToXML" id="81128">another28Hack</a>(<a title="AnyRef" id="81280">any</a>: <a title="AnyRef" id="1957">AnyRef</a>) = <a href="#81126" title="object WithToXML">WithToXML</a>
			scala.xml.<span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node,Boolean)String" id="81147">toXML</a>(<a href="#81060" title="scala.xml.Elem">xml</a>, <span title="Boolean(false)" class="keyword">false</span>) <span class="comment">// 2.8 doesn't have this method anymore, so the above implicit will kick in for 2.8 only</span>
		}
		<span title="Option[String]" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#81061" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#49354" title="=&gt; Boolean">exists</a>)
		{
			<a href="#81062" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file did not exist, writing inline XML to &quot;)" class="string">&quot;JNLP file did not exist, writing inline XML to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#81061" title="sbt.Path">outputPath</a>)
			<a href="#80746" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#81124" title="String">xmlString</a>, <a href="#81061" title="sbt.Path">outputPath</a>, <a href="#81062" title="sbt.Logger">log</a>)
		}
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="Either[String,Option[String]]" id="81297">result</a> =
				<span class="keyword">for</span>( <a title="((Array[Byte]) =&gt; Either[String,Option[String]])Either[String,Option[String]]" id="81307">xmlHash</a> &lt;- <a href="Hash.scala.html#56786" title="(String,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#81124" title="String">xmlString</a>, <a href="#81062" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span>; <a title="((Array[Byte]) =&gt; Option[String])Either[String,Option[String]] with Product" id="81317">fileHash</a> &lt;- <a href="Hash.scala.html#56787" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#81061" title="sbt.Path">outputPath</a>, <a href="#81062" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span> ) <span class="keyword">yield</span>
				{
					<span title="Option[String]" class="keyword">if</span>(<a href="#81307" title="Array[Byte]">xmlHash</a> <a title="(Any)Boolean" id="15696">deepEquals</a> <a href="#81317" title="Array[Byte]">fileHash</a>)
					{
						<a href="#81062" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file &quot;)" class="string">&quot;JNLP file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#81061" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; uptodate.&quot;)" class="string">&quot; uptodate.&quot;</span>)
						<span title="object None">None</span>
					}
					<span class="keyword">else</span>
					{
						<a href="#81062" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Inline JNLP XML modified, updating file &quot;)" class="string">&quot;Inline JNLP XML modified, updating file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#81061" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
						<a href="#80746" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#81124" title="String">xmlString</a>, <a href="#81061" title="sbt.Path">outputPath</a>, <a href="#81062" title="sbt.Logger">log</a>)
					}
				}
			<a href="#81297" title="Either[String,Option[String]]">result</a>.<a title="((String) =&gt; Option[String],(Option[String]) =&gt; Option[String])Option[String]" id="50353">fold</a>(<a title="String" id="81325">err</a> =&gt; <a title="(String)Some[String]" id="290">Some</a>(<a href="#81325" title="String">err</a>), <a title="Option[String]" id="81328">x</a> =&gt; <a href="#81328" title="Option[String]">x</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean)(sbt.Path)sbt.WebstartJarResource" id="80748">jarResource</a>(<a title="Boolean" id="81329">isMain</a>: <span title="Boolean">Boolean</span>)(<a title="sbt.Path" id="81330">jar</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>): <a href="#12042" title="sbt.WebstartJarResource">WebstartJarResource</a> =
		<span title="sbt.WebstartJarResource" class="keyword">new</span> <a href="#12042" title="sbt.WebstartJarResource">WebstartJarResource</a>(<a href="#81330" title="sbt.Path">jar</a>.<a href="Path.scala.html#49368" title="=&gt; java.lang.String">name</a>, <a href="#81330" title="sbt.Path">jar</a>.<a href="Path.scala.html#49363" title="(String)String">relativePathString</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>), <a href="#81329" title="Boolean">isMain</a>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]" id="80749">jarResources</a>(<a title="Iterable[sbt.Path]" id="81066">mainJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="81067">libraries</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource] =
		<a href="#81066" title="Iterable[sbt.Path]">mainJars</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#80748" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(true)" class="keyword">true</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span> <a href="#81331" title="(List[sbt.WebstartJarResource])List[sbt.WebstartJarResource]">:::</a> <a href="#81067" title="Iterable[sbt.Path]">libraries</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#80748" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(false)" class="keyword">false</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span>

	<span class="comment">/** True iff 'directory' is an ancestor (strictly) of 'check'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path)Boolean" id="80750">isInDirectory</a>(<a title="sbt.Path" id="81340">directory</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>, <a title="sbt.Path" id="81341">check</a>: <a href="Path.scala.html#11862" title="sbt.Path">Path</a>) = <a href="Path.scala.html#11863" title="object sbt.Path">Path</a>.<a href="Path.scala.html#49311" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#81340" title="sbt.Path">directory</a>, <a href="#81341" title="sbt.Path">check</a>).<a title="=&gt; Boolean" id="30325">isDefined</a> <a title="(Boolean)Boolean" id="2694">&amp;&amp;</a> <a href="#81340" title="sbt.Path">directory</a> <a title="(AnyRef)Boolean" id="6016">!=</a> <a href="#81341" title="sbt.Path">check</a>
	<span class="comment">/** Checks the paths in the given options for validity.  See the documentation for WebstartOptions.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.WebstartOptions)Unit" id="80751">verifyOptions</a>(<a title="sbt.WebstartOptions" id="80768">options</a>: <a href="#8076" title="sbt.WebstartOptions">WebstartOptions</a>)
	{
		<span class="keyword">import</span> options._
		<span title="(Boolean,Any)Unit">require</span>(<a href="#80750" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#80677" title="=&gt; sbt.Path">webstartLibDirectory</a>),
			<span title="java.lang.String(&quot;Webstart dependency directory (&quot;)" class="string">&quot;Webstart dependency directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80677" title="=&gt; sbt.Path">webstartLibDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) must be a subdirectory of webstart output directory (&quot;)" class="string">&quot;) must be a subdirectory of webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span>
				<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span title="(Boolean,Any)Unit">require</span>(<a href="#80750" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#80676" title="=&gt; sbt.Path">jnlpFile</a>), <span title="java.lang.String(&quot;Webstart JNLP file output location (&quot;)" class="string">&quot;Webstart JNLP file output location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80676" title="=&gt; sbt.Path">jnlpFile</a> <span title="(Any)java.lang.String">+</span>
			<span title="java.lang.String(&quot;) must be in the webstart output directory (&quot;)" class="string">&quot;) must be in the webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="81362">wz</a> &lt;- <a href="#80681" title="=&gt; Option[sbt.Path]">webstartZip</a>)
			<span title="(Boolean,Any)Unit">require</span>(<span title="=&gt; Boolean">!</span><a href="#80750" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#81362" title="sbt.Path">wz</a>),
				<span title="java.lang.String(&quot;Webstart output zip location (&quot;)" class="string">&quot;Webstart output zip location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#81362" title="sbt.Path">wz</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; cannot be in webstart output directory (&quot;)" class="string">&quot; cannot be in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80674" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
	}
}
<span class="comment">/** The default extension point for a webstart project.  There is one method that is required to be defined: jnlpXML.
* 'webstartSignConfiguration', 'webstartPack200', and 'webstartGzip' are methods of interest. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DefaultWebstartProject extends sbt.BasicWebstartProject with sbt.MavenStyleWebstartPaths with ScalaObject" id="11319">DefaultWebstartProject</a>(<span class="keyword">val</span> <a title="sbt.ProjectInfo" id="81384">info</a>: <a href="ProjectInfo.scala.html#8385" title="sbt.ProjectInfo">ProjectInfo</a>) <span class="keyword">extends</span> <a href="#13146" title="sbt.BasicWebstartProject">BasicWebstartProject</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#9834" title="sbt.MavenStyleWebstartPaths">MavenStyleWebstartPaths</a>
<span class="comment">/** Defines default implementations of all methods in WebstartOptions except for jnlpXML.  packageAction is overridden
* to create a webstart distribution after the normal package operation. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BasicWebstartProject extends sbt.BasicScalaProject with sbt.WebstartScalaProject with sbt.WebstartOptions with sbt.WebstartPaths with ScalaObject" id="13146">BasicWebstartProject</a> <span class="keyword">extends</span> <a href="DefaultProject.scala.html#12438" title="sbt.BasicScalaProject">BasicScalaProject</a> <span class="keyword">with</span> <a href="#10218" title="sbt.WebstartScalaProject">WebstartScalaProject</a> <span class="keyword">with</span> <a href="#8076" title="sbt.WebstartOptions">WebstartOptions</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#9516" title="sbt.WebstartPaths">WebstartPaths</a>
{
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="81371">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration] = <span title="object None">None</span>

	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="81372">webstartExtraLibraries</a> = <a href="DefaultProject.scala.html#51122" title="=&gt; sbt.LibraryDependencies">mainDependencies</a>.<a href="DefaultProject.scala.html#57984" title="=&gt; sbt.PathFinder">scalaJars</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="81373">webstartLibraries</a> = <a href="DefaultProject.scala.html#51116" title="=&gt; sbt.PathFinder">publicClasspath</a> <a href="Path.scala.html#49326" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="DefaultProject.scala.html#51231" title="=&gt; sbt.PathFinder">jarsOfProjectDependencies</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="81374">webstartResources</a> = <a href="Project.scala.html#50950" title="(sbt.PathFinder,sbt.FileFilter)sbt.PathFinder">descendents</a>(<a href="ProjectPaths.scala.html#73199" title="=&gt; sbt.Path">jnlpResourcesPath</a> <a href="Path.scala.html#49351" title="=&gt; sbt.Path">##</a>, <a href="NameFilter.scala.html#10576" title="object sbt.AllPassFilter">AllPassFilter</a>)

	<span class="keyword">def</span> <a title="=&gt; Boolean" id="81375">webstartPack200</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="81376">webstartGzip</a> = <span title="Boolean(true)" class="keyword">true</span>

	<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; BasicWebstartProject.this.Task" id="81377">packageAction</a> = <span class="keyword">super</span>.<a href="DefaultProject.scala.html#51159" title="=&gt; BasicWebstartProject.this.Task">packageAction</a> <a href="TaskManager.scala.html#52226" title="(BasicWebstartProject.this.Task)BasicWebstartProject.this.Task">&amp;&amp;</a> <a href="#80729" title="(sbt.WebstartOptions)BasicWebstartProject.this.Task">webstartTask</a>(<a href="#13146" title="sbt.BasicWebstartProject" class="keyword">this</a>)
}
        </pre>
    </body>
</html>