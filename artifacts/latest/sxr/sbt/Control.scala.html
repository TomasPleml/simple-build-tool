<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Control.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="comment">/** The trap methods execute the provided code in a try block and handle a thrown exception.*/</span>
<span class="keyword">object</span> <a title="object sbt.Control" id="11797">Control</a>
{
	<span class="keyword">def</span> <a title="[T](=&gt; String,sbt.Logger)(=&gt; Either[String,T])Either[String,T]" id="25428">trap</a>[<a title="&gt;: Nothing &lt;: Any" id="25430">T</a>](<a title="=&gt; String" id="30305">errorMessagePrefix</a>: =&gt; String, <a title="sbt.Logger" id="30306">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; Either[String,T]" id="30307">execute</a>: =&gt; Either[String, T]): <span title="Either[String,T]">Either</span>[String, T] =
		<span class="keyword">try</span> { <a href="#30307" title="=&gt; Either[String,T]">execute</a> }
		<span class="keyword">catch</span> { <span title="Left[java.lang.String,Nothing]" class="keyword">case</span> <a title="java.lang.Throwable" id="61123">e</a> =&gt; <a href="#30306" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61123" title="java.lang.Throwable">e</a>); <span title="(java.lang.String)Left[java.lang.String,Nothing]">Left</span>(<a href="#30305" title="=&gt; String">errorMessagePrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#61123" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">toString</span>) }
		
	<span class="keyword">def</span> <a title="[T](=&gt; String,sbt.Logger)(=&gt; Either[String,T])(=&gt; Unit)Either[String,T]" id="25431">trapAndFinally</a>[<a title="&gt;: Nothing &lt;: Any" id="25433">T</a>](<a title="=&gt; String" id="61127">errorMessagePrefix</a>: =&gt; String, <a title="sbt.Logger" id="61128">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; Either[String,T]" id="61129">execute</a>: =&gt; Either[String, T])(<a title="=&gt; Unit" id="61130">doFinally</a>: =&gt; Unit): <span title="Either[String,T]">Either</span>[String, T] =
		<span class="keyword">try</span> { <a href="#61129" title="=&gt; Either[String,T]">execute</a> }
		<span class="keyword">catch</span> { <span title="Left[java.lang.String,Nothing]" class="keyword">case</span> <a title="java.lang.Throwable" id="61131">e</a> =&gt; <a href="#61128" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61131" title="java.lang.Throwable">e</a>); <span title="(java.lang.String)Left[java.lang.String,Nothing]">Left</span>(<a href="#61127" title="=&gt; String">errorMessagePrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#61131" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">toString</span>) }
		<span class="keyword">finally</span> { <a href="#25437" title="(sbt.Logger)(=&gt; Unit)Unit">trapAndLog</a>(<a href="#61128" title="sbt.Logger">log</a>)(<a href="#61130" title="=&gt; Unit">doFinally</a>) }
		
	<span class="keyword">def</span> <a title="(=&gt; String,sbt.Logger)(=&gt; Option[String])Option[String]" id="25434">trapUnit</a>(<a title="=&gt; String" id="61135">errorMessagePrefix</a>: =&gt; String, <a title="sbt.Logger" id="61136">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; Option[String]" id="61137">execute</a>: =&gt; Option[String]): <span title="Option[String]">Option</span>[String] =
		<span class="keyword">try</span> { <a href="#61137" title="=&gt; Option[String]">execute</a> }
		<span class="keyword">catch</span> { <span title="Some[java.lang.String]" class="keyword">case</span> <a title="java.lang.Throwable" id="61138">e</a> =&gt; <a href="#61136" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61138" title="java.lang.Throwable">e</a>); <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<a href="#61135" title="=&gt; String">errorMessagePrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#61138" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">toString</span>) }
		
	<span class="keyword">def</span> <a title="(=&gt; String,sbt.Logger)(=&gt; Option[String])(=&gt; Unit)Option[String]" id="25435">trapUnitAndFinally</a>(<a title="=&gt; String" id="61141">errorMessagePrefix</a>: =&gt; String, <a title="sbt.Logger" id="61142">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; Option[String]" id="61143">execute</a>: =&gt; Option[String])(<a title="=&gt; Unit" id="61144">doFinally</a>: =&gt; Unit): <span title="Option[String]">Option</span>[String] =
		<span class="keyword">try</span> { <a href="#61143" title="=&gt; Option[String]">execute</a> }
		<span class="keyword">catch</span> { <span title="Some[java.lang.String]" class="keyword">case</span> <a title="java.lang.Throwable" id="61145">e</a> =&gt; <a href="#61142" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61145" title="java.lang.Throwable">e</a>); <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<a href="#61141" title="=&gt; String">errorMessagePrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#61145" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">toString</span>) }
		<span class="keyword">finally</span> { <a href="#25437" title="(sbt.Logger)(=&gt; Unit)Unit">trapAndLog</a>(<a href="#61142" title="sbt.Logger">log</a>)(<a href="#61144" title="=&gt; Unit">doFinally</a>) }
		
	<span class="keyword">def</span> <a title="(=&gt; Unit)Unit" id="25436">trap</a>(<a title="=&gt; Unit" id="30300">execute</a>: =&gt; Unit)
	{
		<span class="keyword">try</span> { <a href="#30300" title="=&gt; Unit">execute</a> }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="Exception" id="61148">e</a>: <span title="Exception">Exception</span> =&gt; <span title="Unit">(</span>) }
	}
	<span class="keyword">def</span> <a title="(sbt.Logger)(=&gt; Unit)Unit" id="25437">trapAndLog</a>(<a title="sbt.Logger" id="32691">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; Unit" id="32692">execute</a>: =&gt; Unit)
	{
		<span class="keyword">try</span> { <a href="#32692" title="=&gt; Unit">execute</a> }
		<span class="keyword">catch</span> { <span title="Unit" class="keyword">case</span> <a title="java.lang.Throwable" id="61149">e</a> =&gt; <a href="#32691" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61149" title="java.lang.Throwable">e</a>); <a href="#32691" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19519" title="(=&gt; String)Unit">error</a>(<a href="#61149" title="java.lang.Throwable">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	<span class="keyword">def</span> <a title="[T](=&gt; T)Either[Exception,T]" id="25438">convertException</a>[<a title="&gt;: Nothing &lt;: Any" id="25440">T</a>](<a title="=&gt; T" id="56082">t</a>: =&gt; T): <span title="Either[Exception,T]">Either</span>[Exception, T] =
	{
		<span class="keyword">try</span> { <span title="(T)Right[Nothing,T]">Right</span>(<a href="#56082" title="=&gt; T">t</a>) }
		<span class="keyword">catch</span> { <span title="Left[Exception,Nothing]" class="keyword">case</span> <a title="Exception" id="61154">e</a>: <span title="Exception">Exception</span> =&gt; <span title="(Exception)Left[Exception,Nothing]">Left</span>(<a href="#61154" title="Exception">e</a>) }
	}
	<span class="keyword">def</span> <a title="[T](sbt.Logger)(=&gt; T)Either[String,T]" id="25441">convertErrorMessage</a>[<a title="&gt;: Nothing &lt;: Any" id="25443">T</a>](<a title="sbt.Logger" id="58176">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>)(<a title="=&gt; T" id="58177">t</a>: =&gt; T): <span title="Either[String,T]">Either</span>[String, T] =
	{
		<span class="keyword">try</span> { <span title="(T)Right[Nothing,T]">Right</span>(<a href="#58177" title="=&gt; T">t</a>) }
		<span class="keyword">catch</span> { <span title="Left[java.lang.String,Nothing]" class="keyword">case</span> <a title="Exception" id="61159">e</a>: <span title="Exception">Exception</span> =&gt; <a href="#58176" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19514" title="(=&gt; Throwable)Unit">trace</a>(<a href="#61159" title="Exception">e</a>); <span title="(java.lang.String)Left[java.lang.String,Nothing]">Left</span>(<a href="#61159" title="Exception">e</a>.<span title="()java.lang.String">toString</span>) }
	}
	
	<span class="keyword">def</span> <a title="[T](Either[String,T])T" id="25444">getOrError</a>[<a title="&gt;: Nothing &lt;: Any" id="25446">T</a>](<a title="Either[String,T]" id="61163">result</a>: <span title="Either[String,T]">Either</span>[String, T]): <a href="#25446" title="T">T</a> = <a href="#61163" title="Either[String,T]">result</a>.<a title="((String) =&gt; T,(T) =&gt; T)T" id="25551">fold</a>(<a href="#61166" title="(String)Nothing" id="787">error</a>, <a title="T" id="61168">x</a>=&gt;<a href="#61168" title="T">x</a>)
	<span class="keyword">final</span> <span class="keyword">def</span> <a title="[T](List[T])((T) =&gt; Option[String])Option[String]" id="25447">lazyFold</a>[<a title="&gt;: Nothing &lt;: Any" id="25449">T</a>](<a title="List[T]" id="25598">list</a>: <span title="List[T]">List</span>[T])(<a title="(T) =&gt; Option[String]" id="25599">f</a>: T =&gt; Option[String]): <span title="Option[String]">Option</span>[String] =
		<a href="#25598" title="List[T]">list</a> <span title="Option[String]" class="keyword">match</span>
		{
			<span title="None.type" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="object None">None</span>
			<span title="Option[String]" class="keyword">case</span> <a title="T" id="61169">head</a> :: <a title="List[T]" id="61170">tail</a> =&gt;
				<a href="#25599" title="(T)Option[String]">f</a>(<a href="#61169" title="T">head</a>) <span title="Option[String]" class="keyword">match</span>
				{
					<span title="Option[String]" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#25447" title="(List[T])((T) =&gt; Option[String])Option[String]">lazyFold</a>(<a href="#61170" title="List[T]">tail</a>)(<a href="#25599" title="(T) =&gt; Option[String]">f</a>)
					<span title="Option[String]" class="keyword">case</span> <a title="Option[String]" id="61176">x</a> =&gt; <a href="#61176" title="Option[String]">x</a>
				}
		}
	<span class="keyword">final</span> <span class="keyword">def</span> <a title="[T, S](List[T],S)((S, T) =&gt; Either[String,S])Either[String,S]" id="25450">lazyFold</a>[<a title="&gt;: Nothing &lt;: Any" id="25453">T</a>, <a title="&gt;: Nothing &lt;: Any" id="25454">S</a>](<a title="List[T]" id="25586">list</a>: <span title="List[T]">List</span>[T], <a title="S" id="25587">value</a>: <a href="#25454" title="S">S</a>)(<a title="(S, T) =&gt; Either[String,S]" id="25588">f</a>: (S,T) =&gt; Either[String, S]): <span title="Either[String,S]">Either</span>[String, S] =
		<a href="#25586" title="List[T]">list</a> <span title="Either[String,S]" class="keyword">match</span>
		{
			<span title="Right[Nothing,S]" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="(S)Right[Nothing,S]">Right</span>(<a href="#25587" title="S">value</a>)
			<span title="Either[String,S]" class="keyword">case</span> <a title="T" id="61179">head</a> :: <a title="List[T]" id="61180">tail</a> =&gt;
				<a href="#25588" title="(S,T)Either[String,S]" id="25590">f</a>(<a href="#25587" title="S">value</a>, <a href="#61179" title="T">head</a>) <span title="Either[String,S]" class="keyword">match</span>
				{
					<span title="Either[String,S]" class="keyword">case</span> Right(<a title="S" id="61181">newValue</a>) =&gt; <a href="#25450" title="(List[T],S)((S, T) =&gt; Either[String,S])Either[String,S]">lazyFold</a>(<a href="#61180" title="List[T]">tail</a>, <a href="#61181" title="S">newValue</a>)(<a href="#25588" title="(S, T) =&gt; Either[String,S]">f</a>)
					<span title="Either[String,S]" class="keyword">case</span> <a title="Either[String,S]" id="61199">x</a> =&gt; <a href="#61199" title="Either[String,S]">x</a>
				}
		}
	<span class="keyword">def</span> <a title="[T](Either[String,T])((T) =&gt; Option[String])Option[String]" id="25455">thread</a>[<a title="&gt;: Nothing &lt;: Any" id="25457">T</a>](<a title="Either[String,T]" id="25458">e</a>: <span title="Either[String,T]">Either</span>[String, T])(<a title="(T) =&gt; Option[String]" id="25459">f</a>: T =&gt; Option[String]): <span title="Option[String]">Option</span>[String] =
		<a href="#25458" title="Either[String,T]">e</a>.<a title="=&gt; Either.RightProjection[String,T]" id="25550">right</a>.<a title="((T) =&gt; Either[String,Unit])Either[String,Unit]" id="25514">flatMap</a>( <a title="T" id="61205">t</a> =&gt; <a href="#25459" title="(T)Option[String]">f</a>(<a href="#61205" title="T">t</a>).<a title="(=&gt; Unit)Either[String,Unit] with Product" id="19029">toLeft</a>(<span title="Unit">(</span>)) ).<a title="=&gt; Either.LeftProjection[String,Unit]" id="25463">left</a>.<a title="=&gt; Option[String]" id="25485">toOption</a>
}
        </pre>
    </body>
</html>