<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/ReflectUtilities.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008 David MacIver, Mark Harrah
 */</span>
<span class="keyword">package</span> sbt;

<span class="keyword">import</span> scala.collection._

<span class="keyword">object</span> <a title="object sbt.ReflectUtilities" id="9802">ReflectUtilities</a>
{
	<span class="keyword">def</span> <a title="(String,Char)String" id="25234">transformCamelCase</a>(<a title="String" id="25254">name</a>: <span title="String">String</span>, <a title="Char" id="25255">separator</a>: <a title="Char" id="2346">Char</a>) =
	{
		<span class="keyword">val</span> <a title="StringBuilder" id="25257">buffer</a> = <a title="()StringBuilder" id="17852" class="keyword">new</a> <a title="StringBuilder" id="1383">StringBuilder</a>
		<span class="keyword">for</span>(<a title="((Char) =&gt; Unit)Unit" id="25340">char</a> &lt;- <a href="#25254" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="6224">name</a>)
		{
			<span class="keyword">import</span> java.lang.Character._
			<span title="Unit" class="keyword">if</span>(<a title="(Char)Boolean" id="18585">isUpperCase</a>(<a href="#25340" title="Char">char</a>))
			{
				<a href="#25257" title="implicit scala.Predef.stringBuilderWrapper : (StringBuilder)scala.runtime.RichStringBuilder">buffer</a> <span title="(Char)Unit">+=</span> <a href="#25255" title="Char">separator</a>
				<a href="#25257" title="implicit scala.Predef.stringBuilderWrapper : (StringBuilder)scala.runtime.RichStringBuilder">buffer</a> <span title="(Char)Unit">+=</span> <a title="(Char)Char" id="18609">toLowerCase</a>(<a href="#25340" title="Char">char</a>)
			}
			<span class="keyword">else</span>
				<a href="#25257" title="implicit scala.Predef.stringBuilderWrapper : (StringBuilder)scala.runtime.RichStringBuilder">buffer</a> <span title="(Char)Unit">+=</span> <a href="#25340" title="Char">char</a>
		}
		<a href="#25257" title="StringBuilder">buffer</a>.<a title="()String" id="17904">toString</a>
	}

	<span class="keyword">def</span> <a title="(Class[_])List[Class[_]]" id="25235">ancestry</a>(<a title="Class[_]" id="37887">clazz</a> : <span title="Class[_]">Class</span>[_]) : <a title="List[Class[_]]" id="495">List</a>[Class[_]] = 
		<span title="List[Class[_]]" class="keyword">if</span> (<a href="#37887" title="Class[_]">clazz</a> <span title="(AnyRef)Boolean">==</span> <span title="java.lang.Class[AnyRef]">classOf</span>[AnyRef] <a title="(Boolean)Boolean" id="2698">||</a> <a title="=&gt; Boolean" id="2695">!</a><span title="java.lang.Class[AnyRef]">classOf</span>[AnyRef].<span title="(java.lang.Class[_])Boolean">isAssignableFrom</span>(<a href="#37887" title="Class[_]">clazz</a>)) <a title="(Class[_$1]*)List[Class[_$1]]" id="496">List</a>(<a href="#37887" title="Class[_]">clazz</a>)
		<span class="keyword">else</span> <a href="#37887" title="Class[_]">clazz</a> <a href="#37899" title="(Class[_])List[Class[_]]" id="17936">::</a> <a href="#25235" title="(Class[_])List[Class[_]]">ancestry</a>(<a href="#37887" title="Class[_]">clazz</a>.<a title="(()java.lang.Class[_ &gt;: _$1]) forSome { type _$1 }" id="3904">getSuperclass</a>);

	<span class="keyword">def</span> <a title="(Class[_])scala.collection.mutable.OpenHashMap[java.lang.String,java.lang.reflect.Field]" id="25236">fields</a>(<a title="Class[_]" id="37913">clazz</a> : <span title="Class[_]">Class</span>[_]) = 
		mutable.<a title="((java.lang.String, java.lang.reflect.Field)*)scala.collection.mutable.OpenHashMap[java.lang.String,java.lang.reflect.Field]" id="15865">OpenHashMap</a>(<a href="#25235" title="(Class[_])List[Class[_]]">ancestry</a>(<a href="#37913" title="Class[_]">clazz</a>).
			<a title="((Class[_]) =&gt; Iterable[java.lang.reflect.Field])List[java.lang.reflect.Field]" id="17984">flatMap</a>(<a href="#37981" title="Class[_]">_</a>.<a title="()Array[java.lang.reflect.Field]" id="4300">getDeclaredFields</a>).
			<a title="((java.lang.reflect.Field) =&gt; (java.lang.String, java.lang.reflect.Field))List[(java.lang.String, java.lang.reflect.Field)]" id="17963">map</a>(<a title="java.lang.reflect.Field" id="38029">f</a> =&gt; <a title="(java.lang.String,java.lang.reflect.Field)(java.lang.String, java.lang.reflect.Field)" id="1327">(</a><a href="#38029" title="java.lang.reflect.Field">f</a>.<a title="()java.lang.String" id="37989">getName</a>, <a href="#38029" title="java.lang.reflect.Field">f</a>)):_*)
	
	<span class="keyword">def</span> <a title="[T](AnyRef,Class[T])scala.collection.Map[String,T]" id="25237">allValsC</a>[<a title="&gt;: Nothing &lt;: Any" id="25239">T</a>](<a title="AnyRef" id="38033">self</a>: <span title="AnyRef">AnyRef</span>, <a title="Class[T]" id="38034">clazz</a>: <span title="Class[T]">Class</span>[T]): <span title="scala.collection.Map[String,T]">Map</span>[String, T] =
	{
		<span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[String,T]" id="38035">mappings</a> = <a title="()scala.collection.mutable.OpenHashMap[String,T]" id="37921" class="keyword">new</a> mutable.<a title="scala.collection.mutable.OpenHashMap[String,T]" id="15864">OpenHashMap</a>[String, T]
		<span class="keyword">val</span> <a title="scala.collection.mutable.OpenHashMap[java.lang.String,java.lang.reflect.Field]" id="38036">correspondingFields</a> = <a href="#25236" title="(Class[_])scala.collection.mutable.OpenHashMap[java.lang.String,java.lang.reflect.Field]">fields</a>(<a href="#38033" title="AnyRef">self</a>.<span title="()java.lang.Class[_ &lt;: java.lang.Object]">getClass</span>)
		<span class="keyword">for</span>(<a title="((java.lang.reflect.Method) =&gt; Unit)Unit" id="38044">method</a> &lt;- <a href="#38033" title="AnyRef">self</a>.<span title="()java.lang.Class[_ &lt;: java.lang.Object]">getClass</span>.<a title="()Array[java.lang.reflect.Method]" id="4288">getMethods</a>)
		{
			<span title="Unit" class="keyword">if</span>(<a href="#38044" title="java.lang.reflect.Method">method</a>.<a title="()Array[java.lang.Class[_]]" id="24077">getParameterTypes</a>.<a title="=&gt; Int" id="17311">length</a> <a title="(Int)Boolean" id="3089">==</a> <span title="Int(0)" class="int">0</span> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#38034" title="Class[T]">clazz</a>.<span title="(java.lang.Class[_])Boolean">isAssignableFrom</span>(<a href="#38044" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.Class[_]">getReturnType</span>))
			{
				<span class="keyword">for</span>(<a title="((java.lang.reflect.Field) =&gt; Unit)Unit" id="38056">field</a> &lt;- <a href="#38036" title="scala.collection.mutable.OpenHashMap[java.lang.String,java.lang.reflect.Field]">correspondingFields</a>.<a title="(java.lang.String)Option[java.lang.reflect.Field]" id="37957">get</a>(<a href="#38044" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.String">getName</span>) <span class="keyword">if</span> <a href="#38056" title="java.lang.reflect.Field">field</a>.<a title="()java.lang.Class[_]" id="37994">getType</a> <span title="(AnyRef)Boolean">==</span> <a href="#38044" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.Class[_]">getReturnType</span>)
				{
					<span class="keyword">val</span> <a title="T" id="38057">value</a> = <a href="#38044" title="java.lang.reflect.Method">method</a>.<a title="(Any,java.lang.Object*)java.lang.Object" id="24088">invoke</a>(<a href="#38033" title="AnyRef">self</a>).<span title="T">asInstanceOf</span>[<a href="#25239" title="T">T</a>]
					<span title="Unit" class="keyword">if</span>(<a href="#38057" title="T">value</a> <a title="(Any)Boolean" id="3444">==</a> <span title="Null(null)" class="keyword">null</span>) <span title="Nothing" class="keyword">throw</span> <span title="sbt.UninitializedVal" class="keyword">new</span> <a href="#8472" title="sbt.UninitializedVal">UninitializedVal</a>(<a href="#38044" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.String">getName</span>, <a href="#38044" title="java.lang.reflect.Method">method</a>.<a title="()java.lang.Class[_]" id="24066">getDeclaringClass</a>.<a title="()java.lang.String" id="3899">getName</a>)
					<a href="#38035" title="scala.collection.mutable.OpenHashMap[String,T]">mappings</a>(<a href="#38044" title="java.lang.reflect.Method">method</a>.<span title="()java.lang.String">getName</span>) = <a href="#38057" title="T">value</a>
				}
			}
		}
		<a href="#38035" title="scala.collection.mutable.OpenHashMap[String,T]">mappings</a>
	}
	<span class="keyword">def</span> <a title="[T](AnyRef)(implicit scala.reflect.Manifest[T])scala.collection.Map[String,T]" id="25240">allVals</a>[<a title="&gt;: Nothing &lt;: Any" id="25242">T</a>](<a title="AnyRef" id="25243">self</a>: <span title="AnyRef">AnyRef</span>)(<span class="keyword">implicit</span> <a title="scala.reflect.Manifest[T]" id="25244">mt</a>: scala.reflect.<a title="scala.reflect.Manifest[T]" id="2659">Manifest</a>[T]): <span title="scala.collection.Map[String,T]">Map</span>[String, T] =
		<a href="#25237" title="(AnyRef,Class[U])scala.collection.Map[String,U]">allValsC</a>(<a href="#25243" title="AnyRef">self</a>, <a href="#25244" title="scala.reflect.Manifest[T]">mt</a>.<a title="=&gt; Class[_]" id="19088">erasure</a>).<span title="scala.collection.Map[String,T]">asInstanceOf</span>[<span title="scala.collection.Map[String,T]">Map</span>[String,T]]
}
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class UninitializedVal extends java.lang.RuntimeException with ScalaObject" id="8472">UninitializedVal</a>(<span class="keyword">val</span> <a title="String" id="38065">valName</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="38066">className</a>: <span title="String">String</span>) <span class="keyword">extends</span> <a title="java.lang.RuntimeException" id="19700">RuntimeException</a>(<span title="java.lang.String(&quot;val &quot;)" class="string">&quot;val &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#38065" title="String">valName</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; in class &quot;)" class="string">&quot; in class &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#38066" title="String">className</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; was null.\012This is probably an initialization problem and a 'lazy val' should be used.&quot;)" class="string">&quot; was null.\nThis is probably an initialization problem and a 'lazy val' should be used.&quot;</span>)
        </pre>
    </body>
</html>