<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/TestFramework.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009  Steven Blundy, Mark Harrah, Josh Cough
 */</span>
<span class="keyword">package</span> sbt

	<span class="keyword">import</span> java.net.URLClassLoader
	<span class="keyword">import</span> org.scalatools.testing.{AnnotatedFingerprint, Fingerprint, SubclassFingerprint, TestFingerprint}
	<span class="keyword">import</span> org.scalatools.testing.{Event, EventHandler, Framework, Runner, Runner2, Logger=&gt;TLogger}
	<span class="keyword">import</span> xsbt.ScalaInstance

<span class="keyword">object</span> <a title="object sbt.Result" id="13339">Result</a> <span class="keyword">extends</span> <a title="Enumeration" id="33830">Enumeration</a>
{
	<span class="keyword">val</span> <a title="sbt.Result.Value" id="75446">Error</a>, <a title="sbt.Result.Value" id="75448">Passed</a>, <a title="sbt.Result.Value" id="75450">Failed</a> = <span title="=&gt; sbt.Result.Value">Value</span>
}

<span class="keyword">object</span> <a title="object sbt.TestFrameworks" id="9655">TestFrameworks</a>
{
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58001">ScalaCheck</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;org.scalacheck.ScalaCheckFramework&quot;)" class="string">&quot;org.scalacheck.ScalaCheckFramework&quot;</span>)
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58003">ScalaTest</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;org.scalatest.tools.ScalaTestFramework&quot;)" class="string">&quot;org.scalatest.tools.ScalaTestFramework&quot;</span>)
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58005">Specs</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;org.specs.runner.SpecsFramework&quot;)" class="string">&quot;org.specs.runner.SpecsFramework&quot;</span>)
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58007">JUnit</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;com.novocode.junit.JUnitFramework&quot;)" class="string">&quot;com.novocode.junit.JUnitFramework&quot;</span>)
	<span class="comment">// These are compatibility frameworks included in the 'test-compat' library</span>
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58009">ScalaCheckCompat</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;sbt.impl.ScalaCheckFramework&quot;)" class="string">&quot;sbt.impl.ScalaCheckFramework&quot;</span>)
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58011">ScalaTestCompat</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;sbt.impl.ScalaTestFramework&quot;)" class="string">&quot;sbt.impl.ScalaTestFramework&quot;</span>)
	<span class="keyword">val</span> <a title="sbt.TestFramework" id="58013">SpecsCompat</a> = <span title="sbt.TestFramework" class="keyword">new</span> <a href="#10704" title="sbt.TestFramework">TestFramework</a>(<span title="java.lang.String(&quot;sbt.impl.SpecsFramework&quot;)" class="string">&quot;sbt.impl.SpecsFramework&quot;</span>)
}

<span class="keyword">class</span> <a title="class TestFramework extends java.lang.Object with NotNull with ScalaObject" id="10704">TestFramework</a>(<span class="keyword">val</span> <a title="String" id="58021">implClassName</a>: <span title="String">String</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(java.lang.ClassLoader,sbt.Logger)Option[org.scalatools.testing.Framework]" id="58020">create</a>(<a title="java.lang.ClassLoader" id="58251">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="sbt.Logger" id="58252">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>): <a title="Option[org.scalatools.testing.Framework]" id="901">Option</a>[Framework] =
	{
		<span class="keyword">try</span> { <span title="(org.scalatools.testing.Framework)Some[org.scalatools.testing.Framework]">Some</span>(<a title="object java.lang.Class" id="1616">Class</a>.<a title="(java.lang.String,Boolean,java.lang.ClassLoader)java.lang.Class[_]" id="3915">forName</a>(<a href="#58021" title="=&gt; String">implClassName</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#58251" title="java.lang.ClassLoader">loader</a>).<a title="()?0" id="3917">newInstance</a>.<span title="org.scalatools.testing.Framework">asInstanceOf</span>[<span title="org.scalatools.testing.Framework">Framework</span>]) }
		<span class="keyword">catch</span> { <span title="None.type" class="keyword">case</span> <a title="java.lang.ClassNotFoundException" id="75474">e</a>: <a title="java.lang.ClassNotFoundException" id="1672">ClassNotFoundException</a> =&gt; <a href="#58252" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Framework implementation '&quot;)" class="string">&quot;Framework implementation '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58021" title="=&gt; String">implClassName</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' not present.&quot;)" class="string">&quot;' not present.&quot;</span>); <span title="object None">None</span> }
	}
}
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class TestDefinition extends java.lang.Object with NotNull with ScalaObject" id="13308">TestDefinition</a>(<span class="keyword">val</span> <a title="String" id="75479">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="org.scalatools.testing.Fingerprint" id="75480">fingerprint</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="()java.lang.String" id="74446">toString</a> = <span title="java.lang.String(&quot;Test &quot;)" class="string">&quot;Test &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75479" title="=&gt; String">name</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; : &quot;)" class="string">&quot; : &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75480" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>
	<span class="keyword">override</span> <span class="keyword">def</span> <a title="(Any)Boolean" id="74447">equals</a>(<a title="Any" id="75483">t</a>: <a title="Any" id="36">Any</a>) =
		<a href="#75483" title="Any">t</a> <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> <a title="sbt.TestDefinition" id="75485">r</a>: <a href="#13308" title="sbt.TestDefinition">TestDefinition</a> =&gt; <a href="#75479" title="=&gt; String">name</a> <span title="(AnyRef)Boolean">==</span> <a href="#75485" title="sbt.TestDefinition">r</a>.<a href="#75479" title="=&gt; String">name</a> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#10705" title="object sbt.TestFramework">TestFramework</a>.<a href="#58230" title="(org.scalatools.testing.Fingerprint,org.scalatools.testing.Fingerprint)Boolean">matches</a>(<a href="#75480" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>, <a href="#75485" title="sbt.TestDefinition">r</a>.<a href="#75480" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>)
			<span title="Boolean(false)" class="keyword">case</span> _ =&gt; <span title="Boolean(false)" class="keyword">false</span>
		}
}

<span class="keyword">final</span> <span class="keyword">class</span> <a title="class TestRunner extends java.lang.Object with NotNull with ScalaObject" id="9651">TestRunner</a>(<a title="org.scalatools.testing.Framework" id="75522">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span>, <a title="java.lang.ClassLoader" id="75523">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="Seq[sbt.TestReportListener]" id="75524">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span>[TestReportListener], <a title="sbt.Logger" id="75525">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">val</span> <a title="org.scalatools.testing.Runner" id="75513">delegate</a> = <a href="#75522" title="org.scalatools.testing.Framework">framework</a>.<a title="(java.lang.ClassLoader,Array[org.scalatools.testing.Logger])org.scalatools.testing.Runner" id="58255">testRunner</a>(<a href="#75523" title="java.lang.ClassLoader">loader</a>, <a href="#75524" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="((sbt.TestReportListener) =&gt; Iterable[org.scalatools.testing.Logger])Seq[org.scalatools.testing.Logger]">flatMap</span>(<a href="#75535" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#57875" title="(Option[org.scalatools.testing.Logger])Iterable[org.scalatools.testing.Logger]">contentLogger</a>).<span title="Array[org.scalatools.testing.Logger]">toArray</span>)
	<span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">def</span> <a title="(sbt.TestDefinition,org.scalatools.testing.EventHandler,Array[String])Unit" id="75514">run</a>(<a title="sbt.TestDefinition" id="75547">testDefinition</a>: <a href="#13308" title="sbt.TestDefinition">TestDefinition</a>, <a title="org.scalatools.testing.EventHandler" id="75548">handler</a>: <span title="org.scalatools.testing.EventHandler">EventHandler</span>, <a title="Array[String]" id="75549">args</a>: <span title="Array[String]">Array</span>[String]): <span title="Unit">Unit</span> =
		<span title="(org.scalatools.testing.Fingerprint,org.scalatools.testing.Runner)(org.scalatools.testing.Fingerprint, org.scalatools.testing.Runner)">(</span><a href="#75547" title="sbt.TestDefinition">testDefinition</a>.<a href="#75480" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>, <a href="#75513" title="org.scalatools.testing.Runner">delegate</a>) <span title="Unit" class="keyword">match</span>
		{
			<span title="Unit" class="keyword">case</span> (<a title="org.scalatools.testing.TestFingerprint" id="75553">simple</a>: <a title="org.scalatools.testing.TestFingerprint" id="50083">TestFingerprint</a>, _) =&gt; <a href="#75513" title="org.scalatools.testing.Runner">delegate</a>.<a title="(java.lang.String,org.scalatools.testing.TestFingerprint,org.scalatools.testing.EventHandler,Array[java.lang.String])Unit" id="75532">run</a>(<a href="#75547" title="sbt.TestDefinition">testDefinition</a>.<a href="#75479" title="=&gt; String">name</a>, <a href="#75553" title="org.scalatools.testing.TestFingerprint">simple</a>, <a href="#75548" title="org.scalatools.testing.EventHandler">handler</a>, <a href="#75549" title="Array[String]">args</a>)
			<span title="Unit" class="keyword">case</span> (<a title="org.scalatools.testing.Fingerprint" id="75554">basic</a>, <a title="org.scalatools.testing.Runner2" id="75555">runner2</a>: <a title="org.scalatools.testing.Runner2" id="50080">Runner2</a>) =&gt; <a href="#75555" title="org.scalatools.testing.Runner2">runner2</a>.<a title="(java.lang.String,org.scalatools.testing.Fingerprint,org.scalatools.testing.EventHandler,Array[java.lang.String])Unit" id="75557">run</a>(<a href="#75547" title="sbt.TestDefinition">testDefinition</a>.<a href="#75479" title="=&gt; String">name</a>, <a href="#75554" title="org.scalatools.testing.Fingerprint">basic</a>, <a href="#75548" title="org.scalatools.testing.EventHandler">handler</a>, <a href="#75549" title="Array[String]">args</a>)
			<span title="Nothing" class="keyword">case</span> _ =&gt; <span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Framework '&quot;)" class="string">&quot;Framework '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75522" title="org.scalatools.testing.Framework">framework</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;' does not support test '&quot;)" class="string">&quot;' does not support test '&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75547" title="sbt.TestDefinition">testDefinition</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;'&quot;)" class="string">&quot;'&quot;</span>)
		}

	<span class="keyword">final</span> <span class="keyword">def</span> <a title="(sbt.TestDefinition,Seq[String])sbt.Result.Value" id="75515">run</a>(<a title="sbt.TestDefinition" id="75560">testDefinition</a>: <a href="#13308" title="sbt.TestDefinition">TestDefinition</a>, <a title="Seq[String]" id="75561">args</a>: <span title="Seq[String]">Seq</span>[String]): Result.<span title="sbt.Result.Value">Value</span> =
	{
		<a href="#75525" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49384" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Running &quot;)" class="string">&quot;Running &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75560" title="sbt.TestDefinition">testDefinition</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; with arguments &quot;)" class="string">&quot; with arguments &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#75561" title="Seq[String]">args</a>.<a title="(String)String" id="15979">mkString</a>(<span title="java.lang.String(&quot;, &quot;)" class="string">&quot;, &quot;</span>))
		<span class="keyword">val</span> <a title="String" id="75562">name</a> = <a href="#75560" title="sbt.TestDefinition">testDefinition</a>.<a href="#75479" title="=&gt; String">name</a>
		<span class="keyword">def</span> <a title="()Option[sbt.Result.Value]" id="75563">runTest</a>() =
		{
			<span class="comment">// here we get the results! here is where we'd pass in the event listener</span>
			<span class="keyword">val</span> <a title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]" id="75566">results</a> = <span title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]" class="keyword">new</span> scala.collection.mutable.<a title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]" id="20067">ListBuffer</a>[Event]
			<span class="keyword">val</span> <a title="&lt;refinement&gt; extends java.lang.Object with org.scalatools.testing.EventHandler" id="75567">handler</a> = <a title="template $anon extends java.lang.Object with org.scalatools.testing.EventHandler" id="75573" class="keyword">new</a> <span title="org.scalatools.testing.EventHandler">EventHandler</span> { <span class="keyword">def</span> <a title="(org.scalatools.testing.Event)Unit" id="75575">handle</a>(<a title="org.scalatools.testing.Event" id="75578">e</a>:<a title="org.scalatools.testing.Event" id="50074">Event</a>){ <a href="#75566" title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]">results</a> <a title="(org.scalatools.testing.Event)Unit" id="49552">+=</a> <a href="#75578" title="org.scalatools.testing.Event">e</a> } }
			<a href="#75514" title="(sbt.TestDefinition,org.scalatools.testing.EventHandler,Array[String])Unit">run</a>(<a href="#75560" title="sbt.TestDefinition">testDefinition</a>, <a href="#75567" title="&lt;refinement&gt; extends java.lang.Object with org.scalatools.testing.EventHandler">handler</a>, <a href="#75561" title="Seq[String]">args</a>.<span title="Array[String]">toArray</span>)
			<span class="keyword">val</span> <a title="sbt.TestEvent" id="75568">event</a> = <a href="TestReportListener.scala.html#75590" title="(Seq[org.scalatools.testing.Event])sbt.TestEvent">TestEvent</a>(<a href="#75566" title="scala.collection.mutable.ListBuffer[org.scalatools.testing.Event]">results</a>)
			<a href="#75516" title="((sbt.TestReportListener) =&gt; Unit)Unit">safeListenersCall</a>(<a href="#75597" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#57872" title="(sbt.TestEvent)Unit">testEvent</a>( <a href="#75568" title="sbt.TestEvent">event</a> ))
			<a href="#75568" title="sbt.TestEvent">event</a>.<a href="TestReportListener.scala.html#75593" title="=&gt; Option[sbt.Result.Value]">result</a>
		}

		<a href="#75516" title="((sbt.TestReportListener) =&gt; Unit)Unit">safeListenersCall</a>(<a href="#75601" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#57871" title="(String)Unit">startGroup</a>(<a href="#75562" title="String">name</a>))
		<span class="keyword">try</span>
		{
			<span class="keyword">val</span> <a title="sbt.Result.Value" id="75603">result</a> = <a href="#75563" title="()Option[sbt.Result.Value]">runTest</a>().<a title="(=&gt; sbt.Result.Value)sbt.Result.Value" id="30329">getOrElse</a>(<a href="#13339" title="object sbt.Result">Result</a>.<a href="#75448" title="=&gt; sbt.Result.Value">Passed</a>)
			<a href="#75516" title="((sbt.TestReportListener) =&gt; Unit)Unit">safeListenersCall</a>(<a href="#75607" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#57874" title="(String,sbt.Result.Value)Unit">endGroup</a>(<a href="#75562" title="String">name</a>, <a href="#75603" title="sbt.Result.Value">result</a>))
			<a href="#75603" title="sbt.Result.Value">result</a>
		}
		<span class="keyword">catch</span>
		{
			<span title="sbt.Result.Value" class="keyword">case</span> <a title="java.lang.Throwable" id="75613">e</a> =&gt;
				<a href="#75516" title="((sbt.TestReportListener) =&gt; Unit)Unit">safeListenersCall</a>(<a href="#75615" title="sbt.TestReportListener">_</a>.<a href="TestReportListener.scala.html#57873" title="(String,Throwable)Unit">endGroup</a>(<a href="#75562" title="String">name</a>, <a href="#75613" title="java.lang.Throwable">e</a>))
				<a href="#13339" title="object sbt.Result">Result</a>.<a href="#75446" title="=&gt; sbt.Result.Value">Error</a>
		}
	}

	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="((sbt.TestReportListener) =&gt; Unit)Unit" id="75516">safeListenersCall</a>(<a title="(sbt.TestReportListener) =&gt; Unit" id="75595">call</a>: (TestReportListener) =&gt; Unit): <span title="Unit">Unit</span> =
		<a href="#10705" title="object sbt.TestFramework">TestFramework</a>.<a href="#58227" title="(Iterable[sbt.TestReportListener],sbt.Logger)((sbt.TestReportListener) =&gt; Unit)Unit">safeForeach</a>(<a href="#75524" title="Seq[sbt.TestReportListener]">listeners</a>, <a href="#75525" title="sbt.Logger">log</a>)(<a href="#75595" title="(sbt.TestReportListener) =&gt; Unit">call</a>)
}

<span class="keyword">final</span> <span class="keyword">class</span> <a title="class NamedTestTask extends java.lang.Object with NotNull with ScalaObject" id="10914">NamedTestTask</a>(<span class="keyword">val</span> <a title="String" id="75624">name</a>: <span title="String">String</span>, <a title="=&gt; Option[String]" id="75625">action</a>: =&gt; Option[String]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span> { <span class="keyword">def</span> <a title="()Option[String]" id="74493">run</a>() = <a href="#75625" title="=&gt; Option[String]">action</a> }

<span class="keyword">object</span> <a title="object sbt.TestFramework" id="10705">TestFramework</a>
{
	<span class="keyword">def</span> <a title="(org.scalatools.testing.Framework)Seq[org.scalatools.testing.Fingerprint]" id="58220">getTests</a>(<a title="org.scalatools.testing.Framework" id="58262">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span>): <span title="Seq[org.scalatools.testing.Fingerprint]">Seq</span>[Fingerprint] =
		<a href="#58262" title="org.scalatools.testing.Framework">framework</a>.<span title="()java.lang.Class[_]">getClass</span>.<a title="(java.lang.String,java.lang.Class[_]*)java.lang.reflect.Method" id="4324">getMethod</a>(<span title="java.lang.String(&quot;tests&quot;)" class="string">&quot;tests&quot;</span>).<a title="(Any,java.lang.Object*)java.lang.Object" id="19399">invoke</a>(<a href="#58262" title="org.scalatools.testing.Framework">framework</a>) <span title="Seq[org.scalatools.testing.Fingerprint]" class="keyword">match</span>
		{
			<span title="List[org.scalatools.testing.Fingerprint]" class="keyword">case</span> <a title="Array[org.scalatools.testing.Fingerprint]" id="75637">newStyle</a>: <span title="Array[org.scalatools.testing.Fingerprint]">Array</span>[Fingerprint] =&gt; <a href="#75637" title="Array[org.scalatools.testing.Fingerprint]">newStyle</a>.<span title="=&gt; List[org.scalatools.testing.Fingerprint]">toList</span>
			<span title="List[org.scalatools.testing.TestFingerprint]" class="keyword">case</span> <a title="Array[org.scalatools.testing.TestFingerprint]" id="75638">oldStyle</a>: <span title="Array[org.scalatools.testing.TestFingerprint]">Array</span>[TestFingerprint] =&gt; <a href="#75638" title="Array[org.scalatools.testing.TestFingerprint]">oldStyle</a>.<span title="=&gt; List[org.scalatools.testing.TestFingerprint]">toList</span>
			<span title="Nothing" class="keyword">case</span> _ =&gt; <span title="(String)Nothing">error</span>(<span title="java.lang.String(&quot;Could not call 'tests' on framework &quot;)" class="string">&quot;Could not call 'tests' on framework &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58262" title="org.scalatools.testing.Framework">framework</a>)
		}

	<span class="keyword">private</span> <span class="keyword">val</span> <a title="List[java.lang.String]" id="58221">ScalaCompilerJarPackages</a> = <span title="java.lang.String(&quot;scala.tools.&quot;)" class="string">&quot;scala.tools.&quot;</span> <a href="#75627" title="(java.lang.String)List[java.lang.String]">::</a> <span title="java.lang.String(&quot;jline.&quot;)" class="string">&quot;jline.&quot;</span> <a href="#75628" title="(java.lang.String)List[java.lang.String]">::</a> <span title="java.lang.String(&quot;ch.epfl.lamp.&quot;)" class="string">&quot;ch.epfl.lamp.&quot;</span> <a href="#75629" title="(java.lang.String)List[java.lang.String]">::</a> <span title="object Nil">Nil</span>

	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="58223">TestStartName</a> = <span title="java.lang.String(&quot;test-start&quot;)" class="string">&quot;test-start&quot;</span>
	<span class="keyword">private</span> <span class="keyword">val</span> <a title="java.lang.String" id="58225">TestFinishName</a> = <span title="java.lang.String(&quot;test-finish&quot;)" class="string">&quot;test-finish&quot;</span>
	
	<span class="keyword">private</span>[sbt] <span class="keyword">def</span> <a title="[T](Iterable[T],sbt.Logger)((T) =&gt; Unit)Unit" id="58227">safeForeach</a>[<a title="&gt;: Nothing &lt;: Any" id="58229">T</a>](<a title="Iterable[T]" id="75617">it</a>: <span title="Iterable[T]">Iterable</span>[T], <a title="sbt.Logger" id="75618">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>)(<a title="(T) =&gt; Unit" id="75619">f</a>: T =&gt; Unit): <span title="Unit">Unit</span> =
		<a href="#75617" title="Iterable[T]">it</a>.<span title="((T) =&gt; Unit)Unit">foreach</span>(<a title="T" id="75640">i</a> =&gt; <a href="Control.scala.html#13546" title="object sbt.Control">Control</a>.<a href="Control.scala.html#50237" title="(sbt.Logger)(=&gt; Unit)Unit">trapAndLog</a>(<a href="#75618" title="sbt.Logger">log</a>){ <a href="#75619" title="(T)Unit">f</a>(<a href="#75640" title="T">i</a>) } )

	<span class="keyword">def</span> <a title="(org.scalatools.testing.Fingerprint,org.scalatools.testing.Fingerprint)Boolean" id="58230">matches</a>(<a title="org.scalatools.testing.Fingerprint" id="75487">a</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span>, <a title="org.scalatools.testing.Fingerprint" id="75488">b</a>: <span title="org.scalatools.testing.Fingerprint">Fingerprint</span>) =
		<span title="(org.scalatools.testing.Fingerprint,org.scalatools.testing.Fingerprint)(org.scalatools.testing.Fingerprint, org.scalatools.testing.Fingerprint)">(</span><a href="#75487" title="org.scalatools.testing.Fingerprint">a</a>, <a href="#75488" title="org.scalatools.testing.Fingerprint">b</a>) <span title="Boolean" class="keyword">match</span>
		{
			<span title="Boolean" class="keyword">case</span> (<a title="org.scalatools.testing.SubclassFingerprint" id="75492">a</a>: <span title="org.scalatools.testing.SubclassFingerprint">SubclassFingerprint</span>, <a title="org.scalatools.testing.SubclassFingerprint" id="75493">b</a>: <span title="org.scalatools.testing.SubclassFingerprint">SubclassFingerprint</span>) =&gt; <a href="#75492" title="org.scalatools.testing.SubclassFingerprint">a</a>.<span title="()Boolean">isModule</span> <span title="(Boolean)Boolean">==</span> <a href="#75493" title="org.scalatools.testing.SubclassFingerprint">b</a>.<span title="()Boolean">isModule</span> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#75492" title="org.scalatools.testing.SubclassFingerprint">a</a>.<span title="()java.lang.String">superClassName</span> <span title="(AnyRef)Boolean">==</span> <a href="#75493" title="org.scalatools.testing.SubclassFingerprint">b</a>.<span title="()java.lang.String">superClassName</span>
			<span title="Boolean" class="keyword">case</span> (<a title="org.scalatools.testing.AnnotatedFingerprint" id="75498">a</a>: <span title="org.scalatools.testing.AnnotatedFingerprint">AnnotatedFingerprint</span>, <a title="org.scalatools.testing.AnnotatedFingerprint" id="75499">b</a>: <span title="org.scalatools.testing.AnnotatedFingerprint">AnnotatedFingerprint</span>) =&gt; <a href="#75498" title="org.scalatools.testing.AnnotatedFingerprint">a</a>.<span title="()Boolean">isModule</span> <span title="(Boolean)Boolean">==</span> <a href="#75499" title="org.scalatools.testing.AnnotatedFingerprint">b</a>.<span title="()Boolean">isModule</span> <span title="(Boolean)Boolean">&amp;&amp;</span> <a href="#75498" title="org.scalatools.testing.AnnotatedFingerprint">a</a>.<span title="()java.lang.String">annotationName</span> <span title="(AnyRef)Boolean">==</span> <a href="#75499" title="org.scalatools.testing.AnnotatedFingerprint">b</a>.<span title="()java.lang.String">annotationName</span>
			<span title="Boolean(false)" class="keyword">case</span> _ =&gt; <span title="Boolean(false)" class="keyword">false</span>
		}

		<span class="keyword">import</span> scala.collection.{immutable, Map, Set}

	<span class="keyword">def</span> <a title="(Seq[sbt.TestFramework],Iterable[sbt.Path],xsbt.ScalaInstance,Seq[sbt.TestDefinition],sbt.Logger,Seq[sbt.TestReportListener],Boolean,Iterable[(java.lang.ClassLoader) =&gt; Option[String]],Iterable[(java.lang.ClassLoader) =&gt; Option[String]],scala.collection.Map[sbt.TestFramework,Seq[String]])(Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask])" id="58232">testTasks</a>(<a title="Seq[sbt.TestFramework]" id="74467">frameworks</a>: <span title="Seq[sbt.TestFramework]">Seq</span>[TestFramework],
		<a title="Iterable[sbt.Path]" id="74468">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path],
		<a title="xsbt.ScalaInstance" id="74469">scalaInstance</a>: <a href="../ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>,
		<a title="Seq[sbt.TestDefinition]" id="74470">tests</a>: <span title="Seq[sbt.TestDefinition]">Seq</span>[TestDefinition],
		<a title="sbt.Logger" id="74471">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>,
		<a title="Seq[sbt.TestReportListener]" id="74472">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span>[TestReportListener],
		<a title="Boolean" id="74473">endErrorsEnabled</a>: <span title="Boolean">Boolean</span>,
		<a title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]" id="74474">setup</a>: <span title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">Iterable</span>[ClassLoader =&gt; Option[String]],
		<a title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]" id="74475">cleanup</a>: <span title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">Iterable</span>[ClassLoader =&gt; Option[String]],
		<a title="scala.collection.Map[sbt.TestFramework,Seq[String]]" id="74476">testArgsByFramework</a>: <span title="scala.collection.Map[sbt.TestFramework,Seq[String]]">Map</span>[TestFramework, Seq[String]]):
			<a title="(Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask])" id="421">(</a>Iterable[NamedTestTask], Iterable[NamedTestTask], Iterable[NamedTestTask]) =
	{
		<span class="keyword">val</span> <a href="#17796" title="(java.lang.ClassLoader, sbt.Path)">(</a><a href="#75641" title="java.lang.ClassLoader" id="17796">loader</a>, <a href="#75641" title="sbt.Path" id="17798">tempDir</a>) = <a href="#58238" title="(Iterable[sbt.Path],xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)">createTestLoader</a>(<a href="#74468" title="Iterable[sbt.Path]">classpath</a>, <a href="#74469" title="xsbt.ScalaInstance">scalaInstance</a>)
		<span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]" id="75644">arguments</a> = immutable.<span title="((org.scalatools.testing.Framework, Nothing)*)scala.collection.immutable.Map[org.scalatools.testing.Framework,Nothing]">Map</span>() <span title="(Iterable[(org.scalatools.testing.Framework, Seq[String])])scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]">++</span>
			( <span class="keyword">for</span>(<a title="((sbt.TestFramework) =&gt; Iterable[(org.scalatools.testing.Framework, Seq[String])])Seq[(org.scalatools.testing.Framework, Seq[String])]" id="75667">framework</a> &lt;- <a href="#74467" title="Seq[sbt.TestFramework]">frameworks</a>; <a title="(Option[(org.scalatools.testing.Framework, Seq[String])])Iterable[(org.scalatools.testing.Framework, Seq[String])]" id="75675">created</a> &lt;- <a href="#75667" title="sbt.TestFramework">framework</a>.<a href="#58020" title="(java.lang.ClassLoader,sbt.Logger)Option[org.scalatools.testing.Framework]">create</a>(<a href="#17796" title="java.lang.ClassLoader">loader</a>, <a href="#74471" title="sbt.Logger">log</a>)) <span class="keyword">yield</span>
				<span title="(org.scalatools.testing.Framework,Seq[String])(org.scalatools.testing.Framework, Seq[String])">(</span><a href="#75675" title="org.scalatools.testing.Framework">created</a>, <a href="#74476" title="scala.collection.Map[sbt.TestFramework,Seq[String]]">testArgsByFramework</a>.<a title="(sbt.TestFramework,=&gt; Seq[String])Seq[String]" id="37832">getOrElse</a>(<a href="#75667" title="sbt.TestFramework">framework</a>, <span title="object Nil">Nil</span>)) )
		<span class="keyword">val</span> <a title="(java.lang.ClassLoader) =&gt; Option[String]" id="75645">cleanTmp</a> = (<a title="java.lang.ClassLoader" id="75709">_</a>: <span title="java.lang.ClassLoader">ClassLoader</span>) =&gt; <a href="FileUtilities.scala.html#10717" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#49218" title="(sbt.Path,sbt.Logger)Option[String]">clean</a>(<a href="#17798" title="sbt.Path">tempDir</a>, <a href="#74471" title="sbt.Logger">log</a>)

		<span class="keyword">val</span> <a title="scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]" id="75646">mappedTests</a> = <a href="#58233" title="(Seq[org.scalatools.testing.Framework],Seq[sbt.TestDefinition],scala.collection.Map[org.scalatools.testing.Framework,Seq[String]])scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]">testMap</a>(<a href="#75644" title="scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]">arguments</a>.<a title="=&gt; Iterator[org.scalatools.testing.Framework]" id="37838">keys</a>.<a title="=&gt; List[org.scalatools.testing.Framework]" id="19688">toList</a>, <a href="#74470" title="Seq[sbt.TestDefinition]">tests</a>, <a href="#75644" title="scala.collection.immutable.Map[org.scalatools.testing.Framework,Seq[String]]">arguments</a>)
		<span title="(Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], Iterable[sbt.NamedTestTask])" class="keyword">if</span>(<a href="#75646" title="scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]">mappedTests</a>.<a title="=&gt; Boolean" id="37834">isEmpty</a>)
			<span title="(List[sbt.NamedTestTask],object Nil,List[sbt.NamedTestTask])(List[sbt.NamedTestTask], object Nil, List[sbt.NamedTestTask])">(</span><span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#58223" title="=&gt; java.lang.String">TestStartName</a>, <span title="object None">None</span>) <a href="#75718" title="(sbt.NamedTestTask)List[sbt.NamedTestTask]">::</a> <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>, <span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#58225" title="=&gt; java.lang.String">TestFinishName</a>, { <a href="#74471" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49385" title="(=&gt; String)Unit">info</a>(<span title="java.lang.String(&quot;No tests to run.&quot;)" class="string">&quot;No tests to run.&quot;</span>); <a href="#75645" title="(java.lang.ClassLoader)Option[String]">cleanTmp</a>(<a href="#17796" title="java.lang.ClassLoader">loader</a>) }) <a href="#75721" title="(sbt.NamedTestTask)List[sbt.NamedTestTask]">::</a> <span title="object Nil">Nil</span> )
		<span class="keyword">else</span>
			<a href="#58237" title="(java.lang.ClassLoader,scala.collection.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])],sbt.Logger,Seq[sbt.TestReportListener],Boolean,Iterable[(java.lang.ClassLoader) =&gt; Option[String]],Iterable[(java.lang.ClassLoader) =&gt; Option[String]])(List[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], List[sbt.NamedTestTask])">createTestTasks</a>(<a href="#17796" title="java.lang.ClassLoader">loader</a>, <a href="#75646" title="scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]">mappedTests</a>, <a href="#74471" title="sbt.Logger">log</a>, <a href="#74472" title="Seq[sbt.TestReportListener]">listeners</a>, <a href="#74473" title="Boolean">endErrorsEnabled</a>, <a href="#74474" title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">setup</a>, <a title="((java.lang.ClassLoader) =&gt; Option[String]*)Seq[(java.lang.ClassLoader) =&gt; Option[String]]" id="734">Seq</a>(<a href="#75645" title="(java.lang.ClassLoader) =&gt; Option[String]">cleanTmp</a>) <a title="(Iterable[(java.lang.ClassLoader) =&gt; Option[String]])Seq[(java.lang.ClassLoader) =&gt; Option[String]]" id="15812">++</a> <a href="#74475" title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">cleanup</a>)
	}

	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Seq[org.scalatools.testing.Framework],Seq[sbt.TestDefinition],scala.collection.Map[org.scalatools.testing.Framework,Seq[String]])scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]" id="58233">testMap</a>(<a title="Seq[org.scalatools.testing.Framework]" id="75712">frameworks</a>: <span title="Seq[org.scalatools.testing.Framework]">Seq</span>[Framework], <a title="Seq[sbt.TestDefinition]" id="75713">tests</a>: <span title="Seq[sbt.TestDefinition]">Seq</span>[TestDefinition], <a title="scala.collection.Map[org.scalatools.testing.Framework,Seq[String]]" id="75714">args</a>: <span title="scala.collection.Map[org.scalatools.testing.Framework,Seq[String]]">Map</span>[Framework, Seq[String]]):
		immutable.<a title="scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]" id="16205">Map</a>[Framework, (Set[TestDefinition], Seq[String])] =
	{
		<span class="keyword">import</span> scala.collection.mutable.{HashMap, HashSet, Set}
		<span class="keyword">val</span> <a title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]" id="75868">map</a> = <span title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]" class="keyword">new</span> <a title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]" id="20220">HashMap</a>[Framework, Set[TestDefinition]]
		<span class="keyword">def</span> <a title="()Unit" id="75869">assignTests</a>(): <span title="Unit">Unit</span> =
		{
			<span class="keyword">for</span>(<a title="((sbt.TestDefinition) =&gt; Unit)Unit" id="75875">test</a> &lt;- <a href="#75713" title="Seq[sbt.TestDefinition]">tests</a> <span class="keyword">if</span> <span title="=&gt; Boolean">!</span><a href="#75868" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>.<a title="=&gt; Iterator[scala.collection.mutable.Set[sbt.TestDefinition]]" id="37840">values</a>.<a title="((scala.collection.mutable.Set[sbt.TestDefinition]) =&gt; Boolean)Boolean" id="19657">exists</a>(<a href="#75873" title="scala.collection.mutable.Set[sbt.TestDefinition]">_</a>.<a title="(sbt.TestDefinition)Boolean" id="17965">contains</a>(<a href="#75875" title="sbt.TestDefinition">test</a>)))
			{
				<span class="keyword">def</span> <a title="(org.scalatools.testing.Framework)Boolean" id="75876">isTestForFramework</a>(<a title="org.scalatools.testing.Framework" id="75877">framework</a>: <span title="org.scalatools.testing.Framework">Framework</span>) = <a href="#58220" title="(org.scalatools.testing.Framework)Seq[org.scalatools.testing.Fingerprint]">getTests</a>(<a href="#75877" title="org.scalatools.testing.Framework">framework</a>).<a title="((org.scalatools.testing.Fingerprint) =&gt; Boolean)Boolean" id="15954">exists</a> {<a title="org.scalatools.testing.Fingerprint" id="75879">t</a> =&gt; <a href="#58230" title="(org.scalatools.testing.Fingerprint,org.scalatools.testing.Fingerprint)Boolean">matches</a>(<a href="#75879" title="org.scalatools.testing.Fingerprint">t</a>, <a href="#75875" title="sbt.TestDefinition">test</a>.<a href="#75480" title="=&gt; org.scalatools.testing.Fingerprint">fingerprint</a>) }
				<span class="keyword">for</span>(<a title="((org.scalatools.testing.Framework) =&gt; Unit)Unit" id="75883">framework</a> &lt;- <a href="#75712" title="Seq[org.scalatools.testing.Framework]">frameworks</a>.<a title="((org.scalatools.testing.Framework) =&gt; Boolean)Option[org.scalatools.testing.Framework]" id="15955">find</a>(<a href="#75876" title="(org.scalatools.testing.Framework)Boolean">isTestForFramework</a>))
					<a href="#75868" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>.<a title="(org.scalatools.testing.Framework,=&gt; scala.collection.mutable.Set[sbt.TestDefinition])scala.collection.mutable.Set[sbt.TestDefinition]" id="37804">getOrElseUpdate</a>(<a href="#75883" title="org.scalatools.testing.Framework">framework</a>, <span title="scala.collection.mutable.HashSet[sbt.TestDefinition]" class="keyword">new</span> <a title="scala.collection.mutable.HashSet[sbt.TestDefinition]" id="20037">HashSet</a>[TestDefinition]) <a title="(sbt.TestDefinition)Unit" id="30692">+=</a> <a href="#75875" title="sbt.TestDefinition">test</a>
			}
		}
		<span title="Unit" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#75712" title="Seq[org.scalatools.testing.Framework]">frameworks</a>.<a title="=&gt; Boolean" id="15804">isEmpty</a>)
			<a href="#75869" title="()Unit">assignTests</a>()
		(immutable.<span title="((org.scalatools.testing.Framework, Nothing)*)scala.collection.immutable.Map[org.scalatools.testing.Framework,Nothing]">Map</span>() <span title="(Iterable[(org.scalatools.testing.Framework, scala.collection.mutable.Set[sbt.TestDefinition])])scala.collection.immutable.Map[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">++</span> <a href="#75868" title="scala.collection.mutable.HashMap[org.scalatools.testing.Framework,scala.collection.mutable.Set[sbt.TestDefinition]]">map</a>) <a title="((org.scalatools.testing.Framework, scala.collection.mutable.Set[sbt.TestDefinition]) =&gt; (scala.collection.mutable.Set[sbt.TestDefinition], Seq[String]))scala.collection.immutable.Map[org.scalatools.testing.Framework,(scala.collection.mutable.Set[sbt.TestDefinition], Seq[String])]" id="40109">transform</a> { (<a title="org.scalatools.testing.Framework" id="75916">framework</a>, <a title="scala.collection.mutable.Set[sbt.TestDefinition]" id="75917">tests</a>) =&gt; <span title="(scala.collection.mutable.Set[sbt.TestDefinition],Seq[String])(scala.collection.mutable.Set[sbt.TestDefinition], Seq[String])">(</span><a href="#75917" title="scala.collection.mutable.Set[sbt.TestDefinition]">tests</a>, <a href="#75714" title="(org.scalatools.testing.Framework)Seq[String]" id="37835">args</a>(<a href="#75916" title="org.scalatools.testing.Framework">framework</a>)) }
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="[T](Iterable[(T) =&gt; Option[String]],String,T)List[sbt.NamedTestTask]" id="58234">createTasks</a>[<a title="&gt;: Nothing &lt;: Any" id="58236">T</a>](<a title="Iterable[(T) =&gt; Option[String]]" id="75765">work</a>: <span title="Iterable[(T) =&gt; Option[String]]">Iterable</span>[T =&gt; Option[String]], <a title="String" id="75766">baseName</a>: <span title="String">String</span>, <a title="T" id="75767">input</a>: <a href="#58236" title="T">T</a>) =
		<a href="#75765" title="Iterable[(T) =&gt; Option[String]]">work</a>.<span title="=&gt; List[(T) =&gt; Option[String]]">toList</span>.<a title="=&gt; List[((T) =&gt; Option[String], Int)]" id="15557">zipWithIndex</a>.<a title="((((T) =&gt; Option[String], Int)) =&gt; sbt.NamedTestTask)List[sbt.NamedTestTask]" id="15531">map</a><a href="#75772" title="sbt.NamedTestTask">{</a> <span title="sbt.NamedTestTask" class="keyword">case</span> (<a title="(T) =&gt; Option[String]" id="75773">work</a>, <a title="Int" id="75774">index</a>) =&gt; <span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#75766" title="String">baseName</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span> <span title="(Any)java.lang.String">+</span> (<a href="#75774" title="Int">index</a><a title="(Int)Int" id="3090">+</a><span title="Int(1)" class="int">1</span>), <a href="#75773" title="(T)Option[String]">work</a>(<a href="#75767" title="T">input</a>)) }
		
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(java.lang.ClassLoader,scala.collection.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])],sbt.Logger,Seq[sbt.TestReportListener],Boolean,Iterable[(java.lang.ClassLoader) =&gt; Option[String]],Iterable[(java.lang.ClassLoader) =&gt; Option[String]])(List[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], List[sbt.NamedTestTask])" id="58237">createTestTasks</a>(<a title="java.lang.ClassLoader" id="75725">loader</a>: <span title="java.lang.ClassLoader">ClassLoader</span>, <a title="scala.collection.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]" id="75726">tests</a>: <span title="scala.collection.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]">Map</span>[Framework, (Set[TestDefinition], Seq[String])], <a title="sbt.Logger" id="75727">log</a>: <a href="Logger.scala.html#13533" title="sbt.Logger">Logger</a>,
		<a title="Seq[sbt.TestReportListener]" id="75728">listeners</a>: <span title="Seq[sbt.TestReportListener]">Seq</span>[TestReportListener], <a title="Boolean" id="75729">endErrorsEnabled</a>: <span title="Boolean">Boolean</span>, <a title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]" id="75730">setup</a>: <span title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">Iterable</span>[ClassLoader =&gt; Option[String]],
		<a title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]" id="75731">cleanup</a>: <span title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">Iterable</span>[ClassLoader =&gt; Option[String]]) =
	{
		<span class="keyword">val</span> <a title="Seq[sbt.TestsListener]" id="75733">testsListeners</a> = <a href="#75728" title="Seq[sbt.TestReportListener]">listeners</a>.<span title="((sbt.TestReportListener) =&gt; Boolean)Seq[sbt.TestReportListener]">filter</span>(<a href="#75743" title="sbt.TestReportListener">_</a>.<a title="Boolean" id="3444">isInstanceOf</a>[<a href="TestReportListener.scala.html#10821" title="sbt.TestsListener">TestsListener</a>]).<a title="((sbt.TestReportListener) =&gt; sbt.TestsListener)Seq[sbt.TestsListener]" id="15820">map</a>(<a href="#75747" title="sbt.TestReportListener">_</a>.<span title="sbt.TestsListener">asInstanceOf</span>[<a href="TestReportListener.scala.html#10821" title="sbt.TestsListener">TestsListener</a>])
		<span class="keyword">def</span> <a title="((sbt.TestsListener) =&gt; Unit)Unit" id="75734">foreachListenerSafe</a>(<a title="(sbt.TestsListener) =&gt; Unit" id="75748">f</a>: TestsListener =&gt; Unit): <span title="Unit">Unit</span> = <a href="#58227" title="(Iterable[sbt.TestsListener],sbt.Logger)((sbt.TestsListener) =&gt; Unit)Unit">safeForeach</a>(<a href="#75733" title="Seq[sbt.TestsListener]">testsListeners</a>, <a href="#75727" title="sbt.Logger">log</a>)(<a href="#75748" title="(sbt.TestsListener) =&gt; Unit">f</a>)
		
			<span class="keyword">import</span> Result.{Error,Passed,Failed}
		<span class="keyword">object</span> <a title="object result" id="75736">result</a>
		{
			<span class="keyword">private</span>[<span class="keyword">this</span>] <span class="keyword">var</span> <a title="sbt.Result.Value" id="75751">value</a>: Result.<span title="sbt.Result.Value">Value</span> = <a href="#75448" title="=&gt; sbt.Result.Value">Passed</a>
			<span class="keyword">def</span> <a title="()sbt.Result.Value" id="75752">apply</a>() = <span title="(sbt.Result.Value)sbt.Result.Value">synchronized</span> { <a href="#75751" title="sbt.Result.Value">value</a> }
			<span class="keyword">def</span> <a title="(sbt.Result.Value)Unit" id="75753">update</a>(<a title="sbt.Result.Value" id="75757">v</a>: Result.<span title="sbt.Result.Value">Value</span>): <span title="Unit">Unit</span> = <span title="(Unit)Unit">synchronized</span> { <span title="Unit" class="keyword">if</span>(<a href="#75751" title="sbt.Result.Value">value</a> <a title="(AnyRef)Boolean" id="6016">!=</a> <a href="#75446" title="=&gt; sbt.Result.Value">Error</a>) <a href="#75751" title="sbt.Result.Value">value</a> = <a href="#75757" title="sbt.Result.Value">v</a> }
		}
		<span class="keyword">val</span> <a title="List[sbt.NamedTestTask]" id="75738">startTask</a> = <span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#58223" title="=&gt; java.lang.String">TestStartName</a>, {<a href="#75734" title="((sbt.TestsListener) =&gt; Unit)Unit">foreachListenerSafe</a>(<a href="#75763" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#57876" title="=&gt; Unit">doInit</a>); <span title="object None">None</span>}) <a href="#75761" title="(sbt.NamedTestTask)List[sbt.NamedTestTask]">::</a> <a href="#58234" title="(Iterable[(java.lang.ClassLoader) =&gt; Option[String]],String,java.lang.ClassLoader)List[sbt.NamedTestTask]">createTasks</a>(<a href="#75730" title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">setup</a>, <span title="java.lang.String(&quot;Test setup&quot;)" class="string">&quot;Test setup&quot;</span>, <a href="#75725" title="java.lang.ClassLoader">loader</a>)
		<span class="keyword">val</span> <a title="Iterable[sbt.NamedTestTask]" id="75739">testTasks</a> =
			<a href="#75726" title="scala.collection.Map[org.scalatools.testing.Framework,(scala.collection.Set[sbt.TestDefinition], Seq[String])]">tests</a> <a title="(((org.scalatools.testing.Framework, (scala.collection.Set[sbt.TestDefinition], Seq[String]))) =&gt; Iterable[sbt.NamedTestTask])Iterable[sbt.NamedTestTask]" id="15944">flatMap</a> <a href="#75781" title="Iterable[sbt.NamedTestTask]">{</a> <span title="Iterable[sbt.NamedTestTask]" class="keyword">case</span> (<a title="org.scalatools.testing.Framework" id="75782">framework</a>, (<a title="scala.collection.Set[sbt.TestDefinition]" id="75783">testDefinitions</a>, <a title="Seq[String]" id="75784">testArgs</a>)) =&gt;
			
					<span class="keyword">val</span> <a title="sbt.TestRunner" id="75785">runner</a> = <span title="sbt.TestRunner" class="keyword">new</span> <a href="#9651" title="sbt.TestRunner">TestRunner</a>(<a href="#75782" title="org.scalatools.testing.Framework">framework</a>, <a href="#75725" title="java.lang.ClassLoader">loader</a>, <a href="#75728" title="Seq[sbt.TestReportListener]">listeners</a>, <a href="#75727" title="sbt.Logger">log</a>)
					<span class="keyword">for</span>(<a title="((sbt.TestDefinition) =&gt; sbt.NamedTestTask)Iterable[sbt.NamedTestTask]" id="75788">testDefinition</a> &lt;- <a href="#75783" title="scala.collection.Set[sbt.TestDefinition]">testDefinitions</a>) <span class="keyword">yield</span>
					{
						<span class="keyword">def</span> <a title="()Option[java.lang.String]" id="75789">runTest</a>() =
						{
							<span class="keyword">val</span> <a title="java.lang.ClassLoader" id="75790">oldLoader</a> = <span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<a title="()java.lang.ClassLoader" id="59320">getContextClassLoader</a>
							<span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(java.lang.ClassLoader)Unit">setContextClassLoader</span>(<a href="#75725" title="java.lang.ClassLoader">loader</a>)
							<span class="keyword">try</span> {
								<a href="#75785" title="sbt.TestRunner">runner</a>.<a href="#75515" title="(sbt.TestDefinition,Seq[String])sbt.Result.Value">run</a>(<a href="#75788" title="sbt.TestDefinition">testDefinition</a>, <a href="#75784" title="Seq[String]">testArgs</a>) <span title="Option[java.lang.String]" class="keyword">match</span>
								{
									<span title="Some[java.lang.String]" class="keyword">case</span> <a href="#75446" title="=&gt; sbt.Result.Value">Error</a> =&gt; <a href="#75736" title="object result">result</a>() = <a href="#75446" title="=&gt; sbt.Result.Value">Error</a>; <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;ERROR occurred during testing.&quot;)" class="string">&quot;ERROR occurred during testing.&quot;</span>)
									<span title="Some[java.lang.String]" class="keyword">case</span> <a href="#75450" title="=&gt; sbt.Result.Value">Failed</a> =&gt; <a href="#75736" title="object result">result</a>() = <a href="#75450" title="=&gt; sbt.Result.Value">Failed</a>; <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;Test FAILED&quot;)" class="string">&quot;Test FAILED&quot;</span>)
									<span title="None.type" class="keyword">case</span> _ =&gt; <span title="object None">None</span>
								}
							}
							<span class="keyword">finally</span> {
								<span title="object java.lang.Thread">Thread</span>.<span title="()java.lang.Thread">currentThread</span>.<span title="(java.lang.ClassLoader)Unit">setContextClassLoader</span>(<a href="#75790" title="java.lang.ClassLoader">oldLoader</a>)
							}
						}
						<span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#75788" title="sbt.TestDefinition">testDefinition</a>.<a href="#75479" title="=&gt; String">name</a>, <a href="#75789" title="()Option[java.lang.String]">runTest</a>())
					}
			}
		<span class="keyword">def</span> <a title="()Option[java.lang.String]" id="75740">end</a>() =
		{
			<a href="#75734" title="((sbt.TestsListener) =&gt; Unit)Unit">foreachListenerSafe</a>(<a href="#75812" title="sbt.TestsListener">_</a>.<a href="TestReportListener.scala.html#57877" title="(sbt.Result.Value)Unit">doComplete</a>(<a href="#75752" title="()sbt.Result.Value">result</a>()))
			<a href="#75752" title="()sbt.Result.Value">result</a>() <span title="Option[java.lang.String]" class="keyword">match</span>
			{
				<span title="Option[java.lang.String]" class="keyword">case</span> <a href="#75446" title="=&gt; sbt.Result.Value">Error</a> =&gt; <span title="Option[java.lang.String]" class="keyword">if</span>(<a href="#75729" title="Boolean">endErrorsEnabled</a>) <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;ERROR occurred during testing.&quot;)" class="string">&quot;ERROR occurred during testing.&quot;</span>) <span class="keyword">else</span> <span title="object None">None</span>
				<span title="Option[java.lang.String]" class="keyword">case</span> <a href="#75450" title="=&gt; sbt.Result.Value">Failed</a> =&gt; <span title="Option[java.lang.String]" class="keyword">if</span>(<a href="#75729" title="Boolean">endErrorsEnabled</a>) <span title="(java.lang.String)Some[java.lang.String]">Some</span>(<span title="java.lang.String(&quot;One or more tests FAILED.&quot;)" class="string">&quot;One or more tests FAILED.&quot;</span>) <span class="keyword">else</span> <span title="object None">None</span>
				<span title="None.type" class="keyword">case</span> <a href="#75448" title="=&gt; sbt.Result.Value">Passed</a> =&gt;
				{
					<a href="#75727" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49385" title="(=&gt; String)Unit">info</a>(<span title="java.lang.String(&quot; &quot;)" class="string">&quot; &quot;</span>)
					<a href="#75727" title="sbt.Logger">log</a>.<a href="Logger.scala.html#49385" title="(=&gt; String)Unit">info</a>(<span title="java.lang.String(&quot;All tests PASSED.&quot;)" class="string">&quot;All tests PASSED.&quot;</span>)
					<span title="object None">None</span>
				}
			}
		}
		<span class="keyword">val</span> <a title="List[sbt.NamedTestTask]" id="75741">endTask</a> = <span title="sbt.NamedTestTask" class="keyword">new</span> <a href="#10914" title="sbt.NamedTestTask">NamedTestTask</a>(<a href="#58225" title="=&gt; java.lang.String">TestFinishName</a>, <a href="#75740" title="()Option[java.lang.String]">end</a>() ) <a href="#75854" title="(sbt.NamedTestTask)List[sbt.NamedTestTask]">::</a> <a href="#58234" title="(Iterable[(java.lang.ClassLoader) =&gt; Option[String]],String,java.lang.ClassLoader)List[sbt.NamedTestTask]">createTasks</a>(<a href="#75731" title="Iterable[(java.lang.ClassLoader) =&gt; Option[String]]">cleanup</a>, <span title="java.lang.String(&quot;Test cleanup&quot;)" class="string">&quot;Test cleanup&quot;</span>, <a href="#75725" title="java.lang.ClassLoader">loader</a>)
		<span title="(List[sbt.NamedTestTask],Iterable[sbt.NamedTestTask],List[sbt.NamedTestTask])(List[sbt.NamedTestTask], Iterable[sbt.NamedTestTask], List[sbt.NamedTestTask])">(</span><a href="#75738" title="List[sbt.NamedTestTask]">startTask</a>, <a href="#75739" title="Iterable[sbt.NamedTestTask]">testTasks</a>, <a href="#75741" title="List[sbt.NamedTestTask]">endTask</a>)
	}
	<span class="keyword">def</span> <a title="(Iterable[sbt.Path],xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)" id="58238">createTestLoader</a>(<a title="Iterable[sbt.Path]" id="58239">classpath</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="xsbt.ScalaInstance" id="58240">scalaInstance</a>: <a href="../ScalaInstance.scala.html#7486" title="xsbt.ScalaInstance">ScalaInstance</a>): <a title="(java.lang.ClassLoader, sbt.Path)" id="1330">(</a>ClassLoader, Path) =
	{
		<span class="keyword">val</span> <a title="sbt.FilteredLoader" id="75923">filterCompilerLoader</a> = <a href="ClasspathUtilities.scala.html#55670" title="(java.lang.ClassLoader,Iterable[String])sbt.FilteredLoader" class="keyword">new</a> <a href="ClasspathUtilities.scala.html#13251" title="sbt.FilteredLoader">FilteredLoader</a>(<a href="#58240" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="../ScalaInstance.scala.html#15012" title="=&gt; java.lang.ClassLoader">loader</a>, <a href="#58221" title="=&gt; List[java.lang.String]">ScalaCompilerJarPackages</a>)
		<span class="keyword">val</span> <a title="(String) =&gt; Boolean" id="75924">interfaceFilter</a> = (<a title="String" id="75929">name</a>: <span title="String">String</span>) =&gt; <a href="#75929" title="String">name</a>.<a title="(java.lang.String)Boolean" id="6374">startsWith</a>(<span title="java.lang.String(&quot;org.scalatools.testing.&quot;)" class="string">&quot;org.scalatools.testing.&quot;</span>)
		<span class="keyword">val</span> <a title="(String) =&gt; Boolean" id="75925">notInterfaceFilter</a> = (<a title="String" id="75932">name</a>: <span title="String">String</span>) =&gt; <span title="=&gt; Boolean">!</span><a href="#75924" title="(String)Boolean">interfaceFilter</a>(<a href="#75932" title="String">name</a>)
		<span class="keyword">val</span> <a title="xsbt.DualLoader" id="75926">dual</a> = <span title="xsbt.DualLoader" class="keyword">new</span> xsbt.<a href="../DualLoader.scala.html#7480" title="xsbt.DualLoader">DualLoader</a>(<a href="#75923" title="sbt.FilteredLoader">filterCompilerLoader</a>, <a href="#75925" title="(String) =&gt; Boolean">notInterfaceFilter</a>, <a title="String" id="75935">x</a> =&gt; <span title="Boolean(true)" class="keyword">true</span>, <span title="()java.lang.Class[_]">getClass</span>.<a title="()java.lang.ClassLoader" id="3928">getClassLoader</a>, <a href="#75924" title="(String) =&gt; Boolean">interfaceFilter</a>, <a title="String" id="75938">x</a> =&gt; <span title="Boolean(false)" class="keyword">false</span>)
		<a href="ClasspathUtilities.scala.html#13105" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#51750" title="(Iterable[sbt.Path],java.lang.ClassLoader,xsbt.ScalaInstance)(java.lang.ClassLoader, sbt.Path)">makeLoader</a>(<a href="#58239" title="Iterable[sbt.Path]">classpath</a>, <a href="#75926" title="xsbt.DualLoader">dual</a>, <a href="#58240" title="xsbt.ScalaInstance">scalaInstance</a>)
	}
}

        </pre>
    </body>
</html>