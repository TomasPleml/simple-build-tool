<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/impl/SelectMainClass.scala</title>
        <script type="text/javascript" src="../../jquery-all.js"></script>
        <script type="text/javascript" src="../../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt.impl
<span class="keyword">import</span> sbt._

<span class="keyword">private</span>[sbt] <span class="keyword">object</span> <a title="object sbt.impl.SelectMainClass" id="13532">SelectMainClass</a>
{
	<span class="keyword">def</span> <a title="(Boolean,List[String])Option[String]" id="58219">apply</a>(<a title="Boolean" id="58223">promptIfMultipleChoices</a>: <a title="Boolean" id="2115">Boolean</a>, <a title="List[String]" id="58224">mainClasses</a>: <a title="List[String]" id="495">List</a>[String]) =
	{
		<a href="#58224" title="List[String]">mainClasses</a> <span title="Option[String]" class="keyword">match</span>
		{
			<span title="None.type" class="keyword">case</span> <span title="object Nil">Nil</span> =&gt; <span title="object None">None</span>
			<span title="Some[String]" class="keyword">case</span> <a title="String" id="58226">head</a> <a id="1">::</a> <span title="object Nil">Nil</span> =&gt; <span title="(String)Some[String]">Some</span>(<a href="#58226" title="String">head</a>)
			<span title="Option[String]" class="keyword">case</span> <a title="List[String]" id="58228">multiple</a> =&gt;
				<span title="Option[String]" class="keyword">if</span>(<a href="#58223" title="Boolean">promptIfMultipleChoices</a>)
				{
					<span title="(Any)Unit">println</span>(<span title="java.lang.String(&quot;\012Multiple main classes detected, select one to run:\012&quot;)" class="string">&quot;\nMultiple main classes detected, select one to run:\n&quot;</span>)
					<span class="keyword">for</span>( <a href="#58233" title="(((String, Int)) =&gt; Unit)Unit" id="17757">(</a><a title="String" id="58239">className</a>, <a title="Int" id="58240">index</a>) &lt;- <a href="#58228" title="List[String]">multiple</a>.<a title="=&gt; List[(String, Int)]" id="17778">zipWithIndex</a> )
						<span title="(Any)Unit">println</span>(<span title="java.lang.String(&quot; [&quot;)" class="string">&quot; [&quot;</span> <span title="(Any)java.lang.String">+</span> (<a href="#58240" title="Int">index</a><a title="(Int)Int" id="3095">+</a><span title="Int(1)" class="int">1</span>) <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;] &quot;)" class="string">&quot;] &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58239" title="String">className</a>)
					<span class="keyword">val</span> <a title="String" id="58229">line</a> = <a href="#58220" title="(Option[String])String">trim</a>(<a href="../LineReader.scala.html#7936" title="object sbt.SimpleReader">SimpleReader</a>.<a href="../LineReader.scala.html#43687" title="(String)Option[java.lang.String]">readLine</a>(<span title="java.lang.String(&quot;\012Enter number: &quot;)" class="string">&quot;\nEnter number: &quot;</span>))
					<span title="(Any)Unit">println</span>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
					<a href="#58221" title="(String,Int)Option[Int]">toInt</a>(<a href="#58229" title="String">line</a>, <a href="#58228" title="List[String]">multiple</a>.<a title="=&gt; Int" id="17735">length</a>) <a title="((Int) =&gt; String)Option[String]" id="19017">map</a> <a href="#58228" title="List[String]">multiple</a>.<a href="#58292" title="(Int)String" id="17751">apply</a>
				}
				<span class="keyword">else</span>
					<span title="object None">None</span>
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Option[String])String" id="58220">trim</a>(<a title="Option[String]" id="58243">s</a>: <a title="Option[String]" id="897">Option</a>[String]) = <a href="#58243" title="Option[String]">s</a>.<a title="(=&gt; String)String" id="19015">getOrElse</a>(<span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,Int)Option[Int]" id="58221">toInt</a>(<a title="String" id="58248">s</a>: <a title="String" id="1806">String</a>, <a title="Int" id="58249">size</a>: <a title="Int" id="2351">Int</a>) =
		<span class="keyword">try</span>
		{
			<span class="keyword">val</span> <a title="Int" id="58251">i</a> = <a href="#58248" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString" id="6224">s</a>.<a title="=&gt; Int" id="17029">toInt</a>
			<span title="Option[Int]" class="keyword">if</span>(<a href="#58251" title="Int">i</a> <a title="(Int)Boolean" id="3093">&gt;</a> <span title="Int(0)" class="int">0</span> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#58251" title="Int">i</a> <a title="(Int)Boolean" id="3092">&lt;=</a> <a href="#58249" title="Int">size</a>)
				<span title="(Int)Some[Int]">Some</span>(<a href="#58251" title="Int">i</a><a title="(Int)Int" id="3096">-</a><span title="Int(1)" class="int">1</span>)
			<span class="keyword">else</span>
			{
				<span title="(Any)Unit">println</span>(<span title="java.lang.String(&quot;Number out of range: was &quot;)" class="string">&quot;Number out of range: was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58251" title="Int">i</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;, expected number between 1 and &quot;)" class="string">&quot;, expected number between 1 and &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58249" title="Int">size</a>)
				<span title="object None">None</span>
			}
		}
		<span class="keyword">catch</span>
		{
			<span title="None.type" class="keyword">case</span> <a title="NumberFormatException" id="58280">nfe</a>: <a title="NumberFormatException" id="2049">NumberFormatException</a> =&gt;
				<span title="(Any)Unit">println</span>(<span title="java.lang.String(&quot;Invalid number: &quot;)" class="string">&quot;Invalid number: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#58280" title="NumberFormatException">nfe</a>.<a title="()java.lang.String" id="17620">toString</a>)
				<span title="object None">None</span>
		}
}
        </pre>
    </body>
</html>