<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>CompilerArguments.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> xsbt

	<span class="keyword">import</span> java.io.File
	<span class="keyword">import</span> CompilerArguments.{abs, absString}

<span class="comment">/** Forms the list of options that is passed to the compiler from the required inputs and other options.
* The directory containing scala-library.jar and scala-compiler.jar (scalaLibDirectory) is required in
* order to add these jars to the boot classpath. The 'scala.home' property must be unset because Scala
* puts jars in that directory on the bootclasspath.  Because we use multiple Scala versions,
* this would lead to compiling against the wrong library jar.*/</span>
<span class="keyword">class</span> <a title="class CompilerArguments extends java.lang.Object with NotNull with ScalaObject" id="12773">CompilerArguments</a>(<a title="xsbt.ScalaInstance" id="33406">scalaInstance</a>: <a href="ScalaInstance.scala.html#12893" title="xsbt.ScalaInstance">ScalaInstance</a>, <a title="xsbt.ClasspathOptions" id="33407">cp</a>: <a href="#12758" title="xsbt.ClasspathOptions">ClasspathOptions</a>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="(Set[java.io.File],Set[java.io.File],java.io.File,Seq[String])Seq[String]" id="33400">apply</a>(<a title="Set[java.io.File]" id="33408">sources</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="Set[java.io.File]" id="33409">classpath</a>: <span title="Set[java.io.File]">Set</span>[File], <a title="java.io.File" id="33410">outputDirectory</a>: <a title="java.io.File" id="3620">File</a>, <a title="Seq[String]" id="33411">options</a>: <span title="Seq[String]">Seq</span>[String]): <span title="Seq[String]">Seq</span>[String] =
	{
		<a href="#33404" title="()Unit">checkScalaHomeUnset</a>()
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="80526">bootClasspathOption</a> = <span title="Seq[java.lang.String]" class="keyword">if</span>(<a href="#33407" title="xsbt.ClasspathOptions">cp</a>.<a href="#66500" title="=&gt; Boolean">autoBoot</a>) <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-bootclasspath&quot;)" class="string">&quot;-bootclasspath&quot;</span>, <a href="#33405" title="=&gt; java.lang.String">createBootClasspath</a>) <span class="keyword">else</span> <span title="object Nil">Nil</span>
		<span class="keyword">val</span> <a title="Set[java.io.File]" id="80527">cpWithCompiler</a> = <a href="#33401" title="(Set[java.io.File])Set[java.io.File]">finishClasspath</a>(<a href="#33409" title="Set[java.io.File]">classpath</a>)
		<span class="keyword">val</span> <a title="Seq[String]" id="80528">classpathOption</a> = <span title="(String*)Seq[String]">Seq</span>(<span title="java.lang.String(&quot;-cp&quot;)" class="string">&quot;-cp&quot;</span>, <a href="#33352" title="(Set[java.io.File])String">absString</a>(<a href="#80527" title="Set[java.io.File]">cpWithCompiler</a>) )
		<span class="keyword">val</span> <a title="Seq[java.lang.String]" id="80529">outputOption</a> = <span title="(java.lang.String*)Seq[java.lang.String]">Seq</span>(<span title="java.lang.String(&quot;-d&quot;)" class="string">&quot;-d&quot;</span>, <a href="#33410" title="java.io.File">outputDirectory</a>.<span title="()java.lang.String">getAbsolutePath</span>)
		<a href="#33411" title="Seq[String]">options</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#80529" title="Seq[java.lang.String]">outputOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#80526" title="Seq[java.lang.String]">bootClasspathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#80528" title="Seq[String]">classpathOption</a> <span title="(Iterable[String])Seq[String]">++</span> <a href="#33403" title="(Set[java.io.File])List[java.lang.String]">abs</a>(<a href="#33408" title="Set[java.io.File]">sources</a>)
	}
	<span class="keyword">def</span> <a title="(Set[java.io.File])Set[java.io.File]" id="33401">finishClasspath</a>(<a title="Set[java.io.File]" id="66542">classpath</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Set[java.io.File]">Set</span>[File] =
		<a href="#66542" title="Set[java.io.File]">classpath</a> <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#33402" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#33407" title="xsbt.ClasspathOptions">cp</a>.<a href="#66501" title="=&gt; Boolean">compiler</a>, <a href="#33406" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#23401" title="=&gt; java.io.File">compilerJar</a>) <span title="(Iterable[java.io.File])scala.collection.immutable.Set[java.io.File]">++</span> <a href="#33402" title="(Boolean,java.io.File*)Seq[java.io.File]">include</a>(<a href="#33407" title="xsbt.ClasspathOptions">cp</a>.<a href="#66502" title="=&gt; Boolean">extra</a>, <a href="#33406" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#23403" title="=&gt; Seq[java.io.File]">extraJars</a> : _*)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean,java.io.File*)Seq[java.io.File]" id="33402">include</a>(<a title="Boolean" id="80570">flag</a>: <span title="Boolean">Boolean</span>, <a title="java.io.File*" id="80571">jars</a>: <a title="java.io.File*" id="2689">File</a>*) = <span title="Seq[java.io.File]" class="keyword">if</span>(<a href="#80570" title="Boolean">flag</a>) <a href="#80571" title="java.io.File*">jars</a> <span class="keyword">else</span> <span title="object Nil">Nil</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Set[java.io.File])List[java.lang.String]" id="33403">abs</a>(<a title="Set[java.io.File]" id="80553">files</a>: <span title="Set[java.io.File]">Set</span>[File]) = <a href="#80553" title="Set[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)scala.collection.immutable.Set[java.lang.String]" id="23028">map</a>(<a href="#80557" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>).<a title="=&gt; List[java.lang.String]" id="16304">toList</a>.<a title="((java.lang.String, java.lang.String) =&gt; Boolean)List[java.lang.String]" id="17971">sort</a>(<a href="#80559" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">_</a> <a title="(String)Boolean" id="17264">&lt;</a> <a href="#80560" title="java.lang.String">_</a>)
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="()Unit" id="33404">checkScalaHomeUnset</a>()
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="80647">scalaHome</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String)java.lang.String" id="34082">getProperty</a>(<span title="java.lang.String(&quot;scala.home&quot;)" class="string">&quot;scala.home&quot;</span>)
		<a title="(Boolean,Any)Unit" id="6089">assert</a>((<a href="#80647" title="java.lang.String">scalaHome</a> <a title="(AnyRef)Boolean" id="5739">eq</a> <span title="Null(null)" class="keyword">null</span>) <a title="(Boolean)Boolean" id="2698">||</a> <a href="#80647" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">scalaHome</a>.<span title="=&gt; Boolean">isEmpty</span>, <span title="java.lang.String(&quot;'scala.home' should not be set (was &quot;)" class="string">&quot;'scala.home' should not be set (was &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#80647" title="java.lang.String">scalaHome</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;)&quot;)" class="string">&quot;)&quot;</span>)
	}
	<span class="comment">/** Add the correct Scala library jar to the boot classpath.*/</span>
	<span class="keyword">def</span> <a title="=&gt; java.lang.String" id="33405">createBootClasspath</a> =
	{
		<span class="keyword">val</span> <a title="java.lang.String" id="66545">originalBoot</a> = <span title="object java.lang.System">System</span>.<a title="(java.lang.String,java.lang.String)java.lang.String" id="34083">getProperty</a>(<span title="java.lang.String(&quot;sun.boot.class.path&quot;)" class="string">&quot;sun.boot.class.path&quot;</span>, <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span>)
		<span class="keyword">val</span> <a title="java.lang.String" id="66546">newBootPrefix</a> = <span title="java.lang.String" class="keyword">if</span>(<a href="#66545" title="implicit scala.Predef.stringWrapper : (String)scala.runtime.RichString">originalBoot</a>.<span title="=&gt; Boolean">isEmpty</span>) <span title="java.lang.String(&quot;&quot;)" class="string">&quot;&quot;</span> <span class="keyword">else</span> <a href="#66545" title="java.lang.String">originalBoot</a> <span title="(Any)java.lang.String">+</span> <span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>
		<a href="#66546" title="java.lang.String">newBootPrefix</a> <span title="(Any)java.lang.String">+</span> <a href="#33406" title="xsbt.ScalaInstance">scalaInstance</a>.<a href="ScalaInstance.scala.html#23399" title="=&gt; java.io.File">libraryJar</a>.<span title="()java.lang.String">getAbsolutePath</span>
	}
}
<span class="keyword">class</span> <a title="class ClasspathOptions extends java.lang.Object with NotNull with ScalaObject" id="12758">ClasspathOptions</a>(<span class="keyword">val</span> <a title="Boolean" id="66500">autoBoot</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="66501">compiler</a>: <span title="Boolean">Boolean</span>, <span class="keyword">val</span> <a title="Boolean" id="66502">extra</a>: <span title="Boolean">Boolean</span>)  <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="keyword">object</span> <a title="object xsbt.ClasspathOptions" id="12759">ClasspathOptions</a>
{
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="66496">manual</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#12758" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>, <span title="Boolean(false)" class="keyword">false</span>)
	<span class="keyword">def</span> <a title="=&gt; xsbt.ClasspathOptions" id="66497">auto</a> = <span title="xsbt.ClasspathOptions" class="keyword">new</span> <a href="#12758" title="xsbt.ClasspathOptions">ClasspathOptions</a>(<span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>, <span title="Boolean(true)" class="keyword">true</span>)
}
<span class="keyword">object</span> <a title="object xsbt.CompilerArguments" id="12774">CompilerArguments</a>
{
	<span class="keyword">def</span> <a title="(Seq[java.io.File])Seq[String]" id="33349">abs</a>(<a title="Seq[java.io.File]" id="80671">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#80671" title="Seq[java.io.File]">files</a>.<a title="((java.io.File) =&gt; java.lang.String)Seq[java.lang.String]" id="16749">map</a>(<a href="#80674" title="java.io.File">_</a>.<span title="()java.lang.String">getAbsolutePath</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])Seq[String]" id="33350">abs</a>(<a title="Set[java.io.File]" id="80675">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="Seq[String]">Seq</span>[String] = <a href="#33349" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#80675" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
	<span class="keyword">def</span> <a title="(Seq[java.io.File])String" id="33351">absString</a>(<a title="Seq[java.io.File]" id="66541">files</a>: <span title="Seq[java.io.File]">Seq</span>[File]): <span title="String">String</span> = <a href="#33349" title="(Seq[java.io.File])Seq[String]">abs</a>(<a href="#66541" title="Seq[java.io.File]">files</a>).<a title="(String)String" id="16308">mkString</a>(<span title="object java.io.File">File</span>.<span title="java.lang.String">pathSeparator</span>)
	<span class="keyword">def</span> <a title="(Set[java.io.File])String" id="33352">absString</a>(<a title="Set[java.io.File]" id="66540">files</a>: <span title="Set[java.io.File]">Set</span>[File]): <span title="String">String</span> = <a href="#33351" title="(Seq[java.io.File])String">absString</a>(<a href="#66540" title="Set[java.io.File]">files</a>.<span title="=&gt; Seq[java.io.File]">toSeq</span>)
}
        </pre>
    </body>
</html>