<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>ScaladocInterface.scala</title>
        <script type="text/javascript" src="jquery-all.js"></script>
        <script type="text/javascript" src="linked.js"></script>
        <link rel="stylesheet" type="text/css" href="style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2008, 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> xsbt

<span class="keyword">import</span> xsbti.Logger
<span class="keyword">import</span> Log.debug

<span class="keyword">class</span> <a title="class ScaladocInterface extends java.lang.Object with ScalaObject" id="12189">ScaladocInterface</a>
{
	<span class="keyword">def</span> <a title="(Array[String],Int,xsbti.Logger)Unit" id="86715">run</a>(<a title="Array[String]" id="86717">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="86718">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="86719">log</a>: <a href="xsbti/Logger.java.html#5869" title="xsbti.Logger">Logger</a>) = (<span title="xsbt.Runner" class="keyword">new</span> <a href="#12717" title="xsbt.Runner">Runner</a>(<a href="#86717" title="Array[String]">args</a>, <a href="#86718" title="Int">maximumErrors</a>, <a href="#86719" title="xsbti.Logger">log</a>)).<a href="#86736" title="()Unit">run</a>
}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Runner extends java.lang.Object with ScalaObject" id="12717">Runner</a>(<a title="Array[String]" id="86739">args</a>: <span title="Array[String]">Array</span>[String], <a title="Int" id="86740">maximumErrors</a>: <span title="Int">Int</span>, <a title="xsbti.Logger" id="86741">log</a>: <a href="xsbti/Logger.java.html#5869" title="xsbti.Logger">Logger</a>)
{
	<span class="keyword">import</span> scala.tools.nsc.{doc, Global}
	<span class="keyword">val</span> <a title="xsbt.LoggerReporter" id="86729">reporter</a> = <span title="xsbt.LoggerReporter" class="keyword">new</span> <a href="CompileLogger.scala.html#12471" title="xsbt.LoggerReporter">LoggerReporter</a>(<a href="#86740" title="Int">maximumErrors</a>, <a href="#86741" title="xsbti.Logger">log</a>)
	<span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="86731">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span> = <span title="scala.tools.nsc.doc.Settings" class="keyword">new</span> doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>(<a href="#86729" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a href="CompileLogger.scala.html#31679" title="(String)Unit">error</a>)
	<span class="keyword">val</span> <a title="scala.tools.nsc.CompilerCommand" id="86733">command</a> = <a href="Command.scala.html#40929" title="(List[String],scala.tools.nsc.Settings)scala.tools.nsc.CompilerCommand">Command</a>(<a href="#86739" title="Array[String]">args</a>.<a title="=&gt; List[String]" id="16093">toList</a>, <a href="#86731" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)

	<span class="keyword">import</span> forScope._
	<span class="keyword">def</span> <a title="()Unit" id="86736">run</a>()
	{
		<a href="Log.scala.html#47163" title="(xsbti.Logger,=&gt; String)Unit">debug</a>(<a href="#86741" title="xsbti.Logger">log</a>, <span title="java.lang.String(&quot;Calling Scaladoc with arguments:\012\011&quot;)" class="string">&quot;Calling Scaladoc with arguments:\n\t&quot;</span> <a title="(Any)java.lang.String" id="5747">+</a> <a href="#86739" title="Array[String]">args</a>.<a title="(String)String" id="16097">mkString</a>(<span title="java.lang.String(&quot;\012\011&quot;)" class="string">&quot;\n\t&quot;</span>))
		<span title="Unit" class="keyword">if</span>(<a title="=&gt; Boolean" id="2695">!</a><a href="#86729" title="=&gt; xsbt.LoggerReporter">reporter</a>.<span title="=&gt; Boolean">hasErrors</span>)
		{
			<span class="keyword">import</span> doc._ <span class="comment">// 2.8 trunk and Beta1-RC4 have doc.DocFactory.  For other Scala versions, the next line creates forScope.DocFactory</span>
			<span class="keyword">val</span> <a title="Runner.this.forScope.DocFactory" id="87276">processor</a> = <span title="Runner.this.forScope.DocFactory" class="keyword">new</span> <a href="#87273" title="Runner.this.forScope.DocFactory">DocFactory</a>(<a href="#86729" title="=&gt; xsbt.LoggerReporter">reporter</a>, <a href="#86731" title="=&gt; scala.tools.nsc.doc.Settings">docSettings</a>)
			<a href="#87276" title="Runner.this.forScope.DocFactory">processor</a>.<a href="#87284" title="(Seq[String])Unit">document</a>(<a href="#86733" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>)
		}
		<a href="#86729" title="=&gt; xsbt.LoggerReporter">reporter</a>.<a href="CompileLogger.scala.html#31680" title="()Unit">printSummary</a>()
		<span title="Unit" class="keyword">if</span>(<a href="#86729" title="=&gt; xsbt.LoggerReporter">reporter</a>.<span title="=&gt; Boolean">hasErrors</span>) <span title="Nothing" class="keyword">throw</span> <span title="xsbt.InterfaceCompileFailed" class="keyword">new</span> <a href="CompilerInterface.scala.html#12150" title="xsbt.InterfaceCompileFailed">InterfaceCompileFailed</a>(<a href="#86739" title="Array[String]">args</a>, <span title="java.lang.String(&quot;Scaladoc generation failed&quot;)" class="string">&quot;Scaladoc generation failed&quot;</span>)
	}

	<span class="keyword">object</span> <a title="object Runner.this.forScope" id="86737">forScope</a>
	{
		<span class="keyword">class</span> <a title="class DocFactory extends java.lang.Object with ScalaObject" id="87273">DocFactory</a>(<a title="xsbt.LoggerReporter" id="87285">reporter</a>: <a href="CompileLogger.scala.html#12471" title="xsbt.LoggerReporter">LoggerReporter</a>, <a title="scala.tools.nsc.doc.Settings" id="87286">docSettings</a>: doc.<span title="scala.tools.nsc.doc.Settings">Settings</span>) <span class="comment">// 2.7 compatibility</span>
		{
			<span class="keyword">object</span> <a title="object DocFactory.this.compiler" id="87282">compiler</a> <span class="keyword">extends</span> <a title="scala.tools.nsc.Global" id="27513">Global</a>(<a href="#86733" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<a title="=&gt; scala.tools.nsc.Settings" id="39332">settings</a>, <a href="#87285" title="xsbt.LoggerReporter">reporter</a>)
			{
				<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; Boolean" id="87293">onlyPresentation</a> = <span title="Boolean(true)" class="keyword">true</span>
				<span class="keyword">class</span> <a title="class DefaultDocDriver extends java.lang.Object with ScalaObject" id="87294">DefaultDocDriver</a>  <span class="comment">// 2.8 source compatibility</span>
				{
					<a title="(Boolean)Unit" id="787">assert</a>(<span title="Boolean(false)" class="keyword">false</span>)
					<span class="keyword">def</span> <a title="(Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit])Unit" id="87310">process</a>(<a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="87313">units</a>: <a title="Iterator[xsbt.Runner.forScope.DocFactory.compiler.CompilationUnit]" id="1287">Iterator</a>[CompilationUnit]) = <a title="(String)Unit" id="49972">error</a>(<span title="java.lang.String(&quot;for 2.8 compatibility only&quot;)" class="string">&quot;for 2.8 compatibility only&quot;</span>)
				}
			}
			<span class="keyword">def</span> <a title="(Seq[String])Unit" id="87284">document</a>(<a title="Seq[String]" id="87287">ignore</a>: <a title="Seq[String]" id="729">Seq</a>[String])
			{
				<span class="keyword">import</span> compiler._
				<span class="keyword">val</span> <a title="DocFactory.this.compiler.Run" id="87316">run</a> = <span title="DocFactory.this.compiler.Run" class="keyword">new</span> <a href="#87282" title="DocFactory.this.compiler.Run" id="50172">Run</a>
				<a href="#87316" title="DocFactory.this.compiler.Run">run</a> <a title="(List[String])Unit" id="50237">compile</a> <a href="#86733" title="=&gt; scala.tools.nsc.CompilerCommand">command</a>.<span title="=&gt; List[String]">files</span>

				<span class="keyword">val</span> <a title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver" id="87317">generator</a> =
				{
					<span class="keyword">import</span> doc._
					<a title="template $anon extends scala.tools.nsc.doc.DefaultDocDriver" id="87319" class="keyword">new</a> <a title="scala.tools.nsc.doc.DefaultDocDriver" id="87208">DefaultDocDriver</a>
					{
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="DocFactory.this.compiler.type" id="87361">global</a>: compiler.<span class="keyword">type</span> = <a href="#87282" title="object DocFactory.this.compiler">compiler</a>
						<span class="keyword">lazy</span> <span class="keyword">val</span> <a title="scala.tools.nsc.doc.Settings" id="87363">settings</a> = <a href="#87286" title="scala.tools.nsc.doc.Settings">docSettings</a>
					}
				}
				<a href="#87317" title="&lt;refinement&gt; extends scala.tools.nsc.doc.DefaultDocDriver">generator</a>.<a title="(Iterator[generator.global.CompilationUnit])Unit" id="87328">process</a>(<a href="#87316" title="DocFactory.this.compiler.Run">run</a>.<a title="=&gt; Iterator[DocFactory.this.compiler.CompilationUnit]" id="50228">units</a>)
			}
		}
	}
}
        </pre>
    </body>
</html>