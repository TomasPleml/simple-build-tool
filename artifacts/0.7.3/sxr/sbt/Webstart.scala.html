<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>sbt/Webstart.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="comment">/* sbt -- Simple Build Tool
 * Copyright 2009 Mark Harrah
 */</span>
<span class="keyword">package</span> sbt

<span class="keyword">import</span> java.io.File
<span class="keyword">import</span> scala.xml.{Elem, NodeSeq}
<span class="keyword">import</span> Control._

<span class="comment">/** Defines the configurable parameters for the webstart task. */</span>
<span class="keyword">trait</span> <a title="trait WebstartOptions extends java.lang.Object with NotNull" id="6456">WebstartOptions</a> <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="comment">/** The main jar to use for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="61790">webstartMainJar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all generated files for webstart.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="61791">webstartOutputDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>
	<span class="comment">/** Generates the .jnlp file using the provided resource descriptions.  Each resource description
	* provides the path of the jar relative to 'webstartOutputDirectory' and whether or not
	* it is the main jar.*/</span>
	<span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.Elem" id="61792">jnlpXML</a>(<a title="Seq[sbt.WebstartJarResource]" id="61805">jars</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <span title="scala.xml.Elem">Elem</span>
	<span class="comment">/** The location to write the .jnlp file to.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="61793">jnlpFile</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>
	<span class="comment">/** The location to put all jars that are not the main jar.  It must be in 'webstartOutputDirectory'.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.Path" id="61794">webstartLibDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>
	<span class="comment">/** The libraries needed for webstart.  Note that only jars are used; directories are discarded.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="61795">webstartLibraries</a>: <a href="Path.scala.html#8754" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Libraries external to the project needed for webstart.  This is mainly for scala libraries.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="61796">webstartExtraLibraries</a>: <a href="Path.scala.html#8754" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** Resources to copy to the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="61797">webstartResources</a>: <a href="Path.scala.html#8754" title="sbt.PathFinder">PathFinder</a>
	<span class="comment">/** If defined, this specifies where to create a zip of the webstart output directory.  It cannot be
	* in the output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.Path]" id="61798">webstartZip</a>: <span title="Option[sbt.Path]">Option</span>[Path]

	<span class="comment">/** If defined, configures signing of jars.  All jars (main and libraries) are signed using
	* this configuration.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="61799">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration]
	<span class="comment">/** If true, pack200 compression is applied to all jars (main and libraries).  A version of each jar
	* without pack200 compression is still created in the webstart output directory.*/</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="61800">webstartPack200</a>: <span title="Boolean">Boolean</span>
	<span class="comment">/** If true, gzip compression will be applied to all jars.  If pack200 compression is enabled,
	* gzip compression is also applied to the archives with pack200 compression.  A version of
	* each file without gzip compression is still created in the webstart output directory. */</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="61801">webstartGzip</a>: <span title="Boolean">Boolean</span>
}
<span class="comment">/** Represents a library included in the webstart distribution.  Name is the filename of the jar.
* href is the path of the jar relative to the webstart output directory.  isMain is true only for
* the main jar. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class WebstartJarResource extends java.lang.Object with NotNull with ScalaObject" id="10329">WebstartJarResource</a>(<span class="keyword">val</span> <a title="String" id="61829">name</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="String" id="61830">href</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Boolean" id="61831">isMain</a>: <span title="Boolean">Boolean</span>) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** Configuration for signing jars. */</span>
<span class="keyword">final</span> <span class="keyword">class</span> <a title="class SignConfiguration extends java.lang.Object with NotNull with ScalaObject" id="8067">SignConfiguration</a>(<span class="keyword">val</span> <a title="String" id="61859">alias</a>: <span title="String">String</span>, <span class="keyword">val</span> <a title="Seq[sbt.SignJar.SignOption]" id="61860">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
<span class="comment">/** A scala project that produces a webstart distribution. */</span>
<span class="keyword">trait</span> <a title="trait WebstartScalaProject extends java.lang.Object with sbt.ScalaProject with ScalaObject" id="8562">WebstartScalaProject</a> <span class="keyword">extends</span> <a href="ScalaProject.scala.html#11214" title="sbt.ScalaProject">ScalaProject</a>
{
	<span class="keyword">import</span> WebstartScalaProject._
	<span class="comment">/** Creates a task that produces a webstart distribution using the given options.*/</span>
	<span class="keyword">def</span> <a title="(sbt.WebstartOptions)WebstartScalaProject.this.Task" id="61863">webstartTask</a>(<a title="sbt.WebstartOptions" id="61886">options</a>: <a href="#6456" title="sbt.WebstartOptions">WebstartOptions</a>) =
		<a href="TaskManager.scala.html#14599" title="(=&gt; Option[String])WebstartScalaProject.this.Task">task</a>
		{
			<span class="keyword">import</span> options._
			<a href="FileUtilities.scala.html#9046" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15247" title="(Iterable[sbt.Path],sbt.Logger)Option[String]">createDirectories</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="#61900" title="(sbt.Path)List[sbt.Path]">::</a> <a href="#61794" title="=&gt; sbt.Path">webstartLibDirectory</a> <a href="#61901" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>) <span class="comment">// ignore errors</span>
			<a href="#61885" title="(sbt.WebstartOptions)Unit">verifyOptions</a>(<a href="#61886" title="sbt.WebstartOptions">options</a>)

			<span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="61890">relativize</a>(<a title="sbt.Path" id="61907">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>) = <a href="Path.scala.html#10153" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15366" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#17857" title="=&gt; sbt.Path">##</a>, <a href="#61907" title="sbt.Path">jar</a>) <a title="(=&gt; sbt.Path)sbt.Path" id="19015">getOrElse</a>
				<a title="(String)Nothing" id="6085">error</a>(<span title="java.lang.String(&quot;Jar (&quot;)" class="string">&quot;Jar (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61907" title="sbt.Path">jar</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) was not in webstart output directory (&quot;)" class="string">&quot;) was not in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
			<span class="keyword">def</span> <a title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]" id="61891">signAndPack</a>(<a title="List[sbt.Path]" id="61913">jars</a>: <span title="List[sbt.Path]">List</span>[Path], <a title="sbt.Path" id="61914">targetDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>): <a title="Either[String,List[sbt.Path]]" id="336">Either</a>[String, List[Path]] =
			{
				<a href="Control.scala.html#25450" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#61913" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>: <span title="List[sbt.Path]">List</span>[Path])
				{ (<a title="List[sbt.Path]" id="61934">allJars</a>, <a title="sbt.Path" id="61935">jar</a>) =&gt;
					<span class="keyword">val</span> <a title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" id="61936">signPackResult</a> =
						<a href="#61799" title="=&gt; Option[sbt.SignConfiguration]">webstartSignConfiguration</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
						{
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> Some(<a title="sbt.SignConfiguration" id="61938">config</a>) =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#61800" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#61876" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signAndPack200</a>(<a href="#61935" title="sbt.Path">jar</a>, <a href="#61938" title="sbt.SignConfiguration">config</a>, <a href="#61914" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#61873" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">signOnly</a>(<a href="#61935" title="sbt.Path">jar</a>, <a href="#61938" title="sbt.SignConfiguration">config</a>, <a href="#61914" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>)
							<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt;
								<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">if</span>(<a href="#61800" title="=&gt; Boolean">webstartPack200</a>)
									<a href="#61878" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product">pack200Only</a>(<a href="#61935" title="sbt.Path">jar</a>, <a href="#61914" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>)
								<span class="keyword">else</span>
									<a href="#61879" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#61935" title="sbt.Path">jar</a>, <a href="#61914" title="sbt.Path">targetDirectory</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="62148">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#11286" title="sbt.Jars">Jars</a>(<a href="#62148" title="List[sbt.Path]">jars</a>, <span title="object Nil">Nil</span>))
						}
					<span class="keyword">val</span> <a title="Boolean" id="61937">deleteOriginal</a> = <a href="#61800" title="=&gt; Boolean">webstartPack200</a>
					<a href="#61936" title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product">signPackResult</a>.<span title="=&gt; Either.RightProjection[String,sbt.Jars]">right</span> <span title="((sbt.Jars) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">flatMap</span> { <a title="sbt.Jars" id="62156">addJars</a> =&gt;
						<span title="Either[String,List[sbt.Path]]" class="keyword">if</span>(<a href="#61801" title="=&gt; Boolean">webstartGzip</a>)
							<a href="Control.scala.html#11797" title="object sbt.Control">Control</a>.<a href="Control.scala.html#25450" title="(List[sbt.Path],List[sbt.Path])((List[sbt.Path], sbt.Path) =&gt; Either[String,List[sbt.Path]])Either[String,List[sbt.Path]]">lazyFold</a>(<a href="#62156" title="sbt.Jars">addJars</a>.<a href="#62042" title="=&gt; List[sbt.Path]">gzippable</a>, <a href="#62156" title="sbt.Jars">addJars</a>.<a href="#62041" title="=&gt; List[sbt.Path]">allJars</a> <a href="#62173" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#61934" title="List[sbt.Path]">allJars</a>)
								{ (<a title="List[sbt.Path]" id="62182">accumulate</a>, <a title="sbt.Path" id="62183">jar</a>) =&gt; <a href="#61875" title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product">gzipJar</a>(<a href="#62183" title="sbt.Path">jar</a>, <a href="#61937" title="Boolean">deleteOriginal</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">map</span>(<a href="#62227" title="List[sbt.Path]">_</a> <a href="#62228" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62182" title="List[sbt.Path]">accumulate</a>) }
						<span class="keyword">else</span>
							<a title="(List[sbt.Path])Right[Nothing,List[sbt.Path]]" id="490">Right</a>(<a href="#62156" title="sbt.Jars">addJars</a>.<a href="#62041" title="=&gt; List[sbt.Path]">allJars</a> <a href="#62235" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#61934" title="List[sbt.Path]">allJars</a>)
					}
				}
			}

			<span class="keyword">import</span> FileUtilities._

			<span class="keyword">val</span> <a title="Iterable[sbt.Path]" id="61893">jars</a> = (<a href="#61795" title="=&gt; sbt.PathFinder">webstartLibraries</a> <a href="Path.scala.html#15969" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#61796" title="=&gt; sbt.PathFinder">webstartExtraLibraries</a>).<a href="Path.scala.html#15978" title="=&gt; scala.collection.Set[sbt.Path]">get</a>.<span title="((sbt.Path) =&gt; Boolean)Iterable[sbt.Path]">filter</span>(<a href="ClasspathUtilities.scala.html#11386" title="object sbt.ClasspathUtilities">ClasspathUtilities</a>.<a href="ClasspathUtilities.scala.html#30144" title="(sbt.Path)Boolean">isArchive</a>)
			<span class="keyword">def</span> <a title="(Iterable[sbt.Path])Iterable[sbt.Path]" id="61894">process</a>(<a title="Iterable[sbt.Path]" id="62242">jars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]) = <span class="keyword">for</span>(<a title="((sbt.Path) =&gt; sbt.Path)Iterable[sbt.Path]" id="62247">jar</a> &lt;- <a href="#62242" title="Iterable[sbt.Path]">jars</a> <span class="keyword">if</span> <a href="#62247" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>.<a title="(java.lang.String)Boolean" id="5787">endsWith</a>(<span title="java.lang.String(&quot;.jar&quot;)" class="string">&quot;.jar&quot;</span>)) <span class="keyword">yield</span> <a href="#61890" title="(sbt.Path)sbt.Path">relativize</a>(<a href="#62247" title="sbt.Path">jar</a>)

			<a href="Control.scala.html#25455" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#61891" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#61790" title="=&gt; sbt.Path">webstartMainJar</a> <a href="#62249" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>)) { <a title="List[sbt.Path]" id="62253">mainJars</a> =&gt;
				<a href="Control.scala.html#25455" title="(Either[String,List[sbt.Path]])((List[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="#61891" title="(List[sbt.Path],sbt.Path)Either[String,List[sbt.Path]]">signAndPack</a>(<a href="#61893" title="Iterable[sbt.Path]">jars</a>.<span title="=&gt; List[sbt.Path]">toList</span>, <a href="#61794" title="=&gt; sbt.Path">webstartLibDirectory</a>)) { <a title="List[sbt.Path]" id="62256">libJars</a> =&gt;
					<a href="#61881" title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#61792" title="(Seq[sbt.WebstartJarResource])scala.xml.Elem">jnlpXML</a>(<a href="#61883" title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]">jarResources</a>(<a href="#61894" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#62253" title="List[sbt.Path]">mainJars</a>), <a href="#61894" title="(Iterable[sbt.Path])Iterable[sbt.Path]">process</a>(<a href="#62256" title="List[sbt.Path]">libJars</a>))), <a href="#61793" title="=&gt; sbt.Path">jnlpFile</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
					<a href="Control.scala.html#25455" title="(Either[String,scala.collection.Set[sbt.Path]])((scala.collection.Set[sbt.Path]) =&gt; Option[String])Option[String]">thread</a>(<a href="FileUtilities.scala.html#15262" title="(Iterable[sbt.Path],sbt.Path,sbt.Logger)Either[String,scala.collection.Set[sbt.Path]]">copy</a>(<a href="#61797" title="=&gt; sbt.PathFinder">webstartResources</a>.<a href="Path.scala.html#15978" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>)) { <a title="scala.collection.Set[sbt.Path]" id="62271">copiedResources</a> =&gt;
						<span class="keyword">val</span> <a title="sbt.PathFinder" id="62272">keep</a> = <a href="#61793" title="=&gt; sbt.Path">jnlpFile</a> <a href="Path.scala.html#15969" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="Path.scala.html#10153" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15359" title="(=&gt; Iterable[sbt.Path])sbt.PathFinder">lazyPathFinder</a>(<a href="#62253" title="List[sbt.Path]">mainJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#62256" title="List[sbt.Path]">libJars</a> <span title="(Iterable[sbt.Path])List[sbt.Path]">++</span> <a href="#62271" title="scala.collection.Set[sbt.Path]">copiedResources</a>) <a href="Path.scala.html#15969" title="(sbt.PathFinder)sbt.PathFinder">+++</a>
							<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#15969" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="#61794" title="=&gt; sbt.Path">webstartLibDirectory</a>
						<a href="FileUtilities.scala.html#15270" title="(sbt.Path,Iterable[sbt.Path],sbt.Logger)Option[String]">prune</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#62272" title="sbt.PathFinder">keep</a>.<a href="Path.scala.html#15978" title="=&gt; scala.collection.Set[sbt.Path]">get</a>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
						<a href="#61798" title="=&gt; Option[sbt.Path]">webstartZip</a>.<a title="((sbt.Path) =&gt; Option[String])Option[String]" id="19019">flatMap</a>( <a title="sbt.Path" id="62293">zipPath</a> =&gt; <a href="FileUtilities.scala.html#15225" title="(Iterable[sbt.Path],sbt.Path,Boolean,sbt.Logger)Option[String]">zip</a>(<span title="(sbt.Path*)List[sbt.Path]">List</span>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <a href="Path.scala.html#17857" title="=&gt; sbt.Path">##</a>), <a href="#62293" title="sbt.Path">zipPath</a>, <span title="Boolean(true)" class="keyword">true</span>, <a href="Project.scala.html#14612" title="=&gt; sbt.Logger">log</a>) )
					}
				}
			}
		}
	<span class="comment">/** Creates default XML elements for a JNLP file for the given resources.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(Seq[sbt.WebstartJarResource])scala.xml.NodeSeq" id="61864">defaultElements</a>(<a title="Seq[sbt.WebstartJarResource]" id="62296">resources</a>: <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource]): <a title="scala.xml.NodeSeq" id="14443">NodeSeq</a> = <a title="object scala.xml.NodeSeq" id="14444">NodeSeq</a>.<a title="(Seq[scala.xml.Node])scala.xml.NodeSeq" id="19733">fromSeq</a>(<a href="#62296" title="Seq[sbt.WebstartJarResource]">resources</a>.<a title="((sbt.WebstartJarResource) =&gt; scala.xml.Elem)Seq[scala.xml.Elem]" id="16538">map</a>(<a href="#61865" title="(sbt.WebstartJarResource)scala.xml.Elem">defaultElement</a>))
	<span class="comment">/** Creates a default XML element for a JNLP file for the given resource.*/</span>
	<span class="keyword">protected</span> <span class="keyword">def</span> <a title="(sbt.WebstartJarResource)scala.xml.Elem" id="61865">defaultElement</a>(<a title="sbt.WebstartJarResource" id="62298">resource</a>: <a href="#10329" title="sbt.WebstartJarResource">WebstartJarResource</a>): <span title="scala.xml.Elem">Elem</span> =
		&lt;jar href={<a href="#62298" title="sbt.WebstartJarResource">resource</a>.<a href="#61830" title="=&gt; String">href</a>} main={<a href="#62298" title="sbt.WebstartJarResource">resource</a>.<a href="#61831" title="=&gt; Boolean">isMain</a>.<a title="()java.lang.String" id="3448">toString</a>}/&gt;

}
<span class="keyword">private</span> <span class="keyword">class</span> <a title="class Jars extends java.lang.Object with NotNull with ScalaObject" id="11286">Jars</a>(<span class="keyword">val</span> <a title="List[sbt.Path]" id="62042">gzippable</a>: <span title="List[sbt.Path]">List</span>[Path], <span class="keyword">val</span> <a title="List[sbt.Path]" id="62043">nonGzippable</a>: <span title="List[sbt.Path]">List</span>[Path]) <span class="keyword">extends</span> <span title="NotNull">NotNull</span>
{
	<span class="keyword">def</span> <a title="=&gt; List[sbt.Path]" id="62041">allJars</a> = <a href="#62042" title="=&gt; List[sbt.Path]">gzippable</a> <a href="#62176" title="(List[sbt.Path])List[sbt.Path]">:::</a> <a href="#62043" title="=&gt; List[sbt.Path]">nonGzippable</a>
}
<span class="keyword">private</span> <span class="keyword">object</span> <a title="object sbt.WebstartScalaProject" id="8563">WebstartScalaProject</a>
{
	<span class="keyword">import</span> FileTasks.{runOption, wrapProduct, wrapProducts}
	<span class="comment">/** Changes the extension of the Path of the given jar from &quot;.jar&quot; to newExtension.  If append is true,
	* the new extension is simply appended to the jar's filename. */</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,String)sbt.Path" id="61870">appendExtension</a>(<a title="sbt.Path" id="61951">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="String" id="61952">newExtension</a>: <span title="String">String</span>) =
		<a href="#61951" title="sbt.Path">jar</a> <span title="sbt.Path" class="keyword">match</span>
		{
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.RelativePath" id="61954">rp</a>: <a href="Path.scala.html#9324" title="sbt.RelativePath">RelativePath</a> =&gt; <a href="#61954" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#61957" title="=&gt; sbt.Path">parentPath</a> <a href="Path.scala.html#17859" title="(String)sbt.Path">/</a> (<a href="#61954" title="sbt.RelativePath">rp</a>.<a href="Path.scala.html#61959" title="=&gt; String">component</a> <span title="(Any)java.lang.String">+</span> <a href="#61952" title="String">newExtension</a>)
			<span title="sbt.Path" class="keyword">case</span> <a title="sbt.Path" id="61969">x</a> =&gt; <a href="#61969" title="sbt.Path">x</a>
		}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="61871">gzipJarPath</a>(<a title="sbt.Path" id="62189">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>) = <a href="#61870" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#62189" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.gz&quot;)" class="string">&quot;.gz&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path)sbt.Path" id="61872">packPath</a>(<a title="sbt.Path" id="61949">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>) = <a href="#61870" title="(sbt.Path,String)sbt.Path">appendExtension</a>(<a href="#61949" title="sbt.Path">jar</a>, <span title="java.lang.String(&quot;.pack&quot;)" class="string">&quot;.pack&quot;</span>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="61873">signOnly</a>(<a title="sbt.Path" id="62052">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="62053">signConfiguration</a>: <a href="#8067" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="62054">targetDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62055">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62057">targetJar</a> = <a href="#62054" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#17859" title="(String)sbt.Path">/</a> <a href="#62052" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#25960" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign&quot;)" class="string">&quot;sign&quot;</span>, <a href="FileTask.scala.html#25958" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#25980" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62052" title="sbt.Path">jar</a>, <a href="#62055" title="sbt.Logger">log</a>) {
			<a href="#62055" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Signing &quot;)" class="string">&quot;Signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62052" title="sbt.Path">jar</a>)
			<a href="#61874" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#62052" title="sbt.Path">jar</a>, <a href="#62053" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#62057" title="sbt.Path">targetJar</a>, <a href="#62055" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#11286" title="sbt.Jars">Jars</a>(<a href="#62057" title="sbt.Path">targetJar</a> <a href="#62071" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="object Nil">Nil</span>))
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]" id="61874">signAndVerify</a>(<a title="sbt.Path" id="61991">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="61992">signConfiguration</a>: <a href="#8067" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="61993">targetJar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="61994">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#61854" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#61991" title="sbt.Path">jar</a>, <a href="#61992" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#61859" title="=&gt; String">alias</a>, <a href="Pack.scala.html#61845" title="(sbt.Path)sbt.SignJar.SignOption">signedJar</a>(<a href="#61993" title="sbt.Path">targetJar</a>) <a href="#62001" title="(sbt.SignJar.SignOption)List[sbt.SignJar.SignOption]">::</a> <a href="#61992" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#61860" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>.<span title="=&gt; List[sbt.SignJar.SignOption]">toList</span>, <a href="#61994" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="Pack.scala.html#61855" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#61991" title="sbt.Path">jar</a>, <a href="#61992" title="sbt.SignConfiguration">signConfiguration</a>.<a href="#61860" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#61994" title="sbt.Logger">log</a>).<a title="((String) =&gt; java.lang.String)Option[java.lang.String]" id="19017">map</a>(<a title="String" id="62029">err</a> =&gt; <span title="java.lang.String(&quot;Signed jar failed verification: &quot;)" class="string">&quot;Signed jar failed verification: &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62029" title="String">err</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,Boolean,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="61875">gzipJar</a>(<a title="sbt.Path" id="62184">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="Boolean" id="62185">deleteOriginal</a>: <span title="Boolean">Boolean</span>, <a title="sbt.Logger" id="62186">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62188">gzipJar</a> = <a href="#61871" title="(sbt.Path)sbt.Path">gzipJarPath</a>(<a href="#62184" title="sbt.Path">jar</a>)
		<a href="FileTask.scala.html#25960" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;gzip&quot;)" class="string">&quot;gzip&quot;</span>, <a href="FileTask.scala.html#25958" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">gzipJar</a> <a href="FileTask.scala.html#25980" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62184" title="sbt.Path">jar</a>, <a href="#62186" title="sbt.Logger">log</a>)
		{
			<a href="#62186" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Gzipping &quot;)" class="string">&quot;Gzipping &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62184" title="sbt.Path">jar</a>)
			<a href="FileUtilities.scala.html#9046" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15219" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">gzip</a>(<a href="#62184" title="sbt.Path">jar</a>, <a href="#62188" title="sbt.Path">gzipJar</a>, <a href="#62186" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
				(<span title="Option[String]" class="keyword">if</span>(<a href="#62185" title="Boolean">deleteOriginal</a>) <a href="FileUtilities.scala.html#9046" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15275" title="(Iterable[sbt.Path],Boolean,sbt.Logger)Option[String]">clean</a>(<a href="#62184" title="sbt.Path">jar</a> <a href="#62210" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <span title="Boolean(true)" class="keyword">true</span>, <a href="#62186" title="sbt.Logger">log</a>) <span class="keyword">else</span> <span title="object None">None</span>)
		}.<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#62188" title="sbt.Path">gzipJar</a> <a href="#62217" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  This method only does anything if
	* its outputs are out of date with respect to 'jar'.  Note that it does not determine if the signing configuration has changed.
	* See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="61876">signAndPack200</a>(<a title="sbt.Path" id="61939">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.SignConfiguration" id="61940">signConfiguration</a>: <a href="#8067" title="sbt.SignConfiguration">SignConfiguration</a>, <a title="sbt.Path" id="61941">targetDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="61942">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="61944">signedJar</a> = <a href="#61941" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#17859" title="(String)sbt.Path">/</a> <a href="#61939" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="61945">packedJar</a> = <a href="#61872" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#61944" title="sbt.Path">signedJar</a>)
		<span class="keyword">import</span> signConfiguration._

		<a href="FileTask.scala.html#25960" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;sign and pack200&quot;)" class="string">&quot;sign and pack200&quot;</span>, <a href="FileTask.scala.html#25959" title="implicit sbt.FileTasks.wrapProducts : (=&gt; Iterable[sbt.Path])sbt.ProductsWrapper">List</a>(<a href="#61945" title="sbt.Path">packedJar</a>, <a href="#61944" title="sbt.Path">signedJar</a>) <a href="FileTask.scala.html#25980" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#61939" title="sbt.Path">jar</a>, <a href="#61942" title="sbt.Logger">log</a>) {
			<a href="#61942" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression and signing &quot;)" class="string">&quot;Applying pack200 compression and signing &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61939" title="sbt.Path">jar</a>)
			<a href="#61877" title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">signAndPack</a>(<a href="#61939" title="sbt.Path">jar</a>, <a href="#61944" title="sbt.Path">signedJar</a>, <a href="#61945" title="sbt.Path">packedJar</a>, <a href="#61859" title="=&gt; String">alias</a>, <a href="#61860" title="=&gt; Seq[sbt.SignJar.SignOption]">options</a>, <a href="#61942" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
			<a href="#61874" title="(sbt.Path,sbt.SignConfiguration,sbt.Path,sbt.Logger)Option[String]">signAndVerify</a>(<a href="#61939" title="sbt.Path">jar</a>, <a href="#61940" title="sbt.SignConfiguration">signConfiguration</a>, <a href="#61944" title="sbt.Path">signedJar</a>, <a href="#61942" title="sbt.Logger">log</a>)
		}.<span title="(=&gt; sbt.Jars)Either[String,sbt.Jars] with Product">toLeft</span>(<span title="sbt.Jars" class="keyword">new</span> <a href="#11286" title="sbt.Jars">Jars</a>(<a href="#61945" title="sbt.Path">packedJar</a> <a href="#62044" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#61944" title="sbt.Path">signedJar</a> <a href="#62047" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>))
	}
	<span class="comment">/** Properly performs both signing and pack200 compression and verifies the result.  See java.util.jar.Pack200 for more information.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]" id="61877">signAndPack</a>(<a title="sbt.Path" id="61983">jarPath</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Path" id="61984">signedPath</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Path" id="61985">out</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="String" id="61986">alias</a>: <span title="String">String</span>, <a title="Seq[sbt.SignJar.SignOption]" id="61987">options</a>: <span title="Seq[sbt.SignJar.SignOption]">Seq</span>[SignJar.SignOption], <a title="sbt.Logger" id="61988">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">import</span> Pack._
		<span class="keyword">import</span> SignJar._
		<a href="Pack.scala.html#62093" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#61983" title="sbt.Path">jarPath</a>, <a href="#61985" title="sbt.Path">out</a>, <a href="#61988" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62095" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#61985" title="sbt.Path">out</a>, <a href="#61984" title="sbt.Path">signedPath</a>, <a href="#61988" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#61854" title="(sbt.Path,String,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">sign</a>(<a href="#61984" title="sbt.Path">signedPath</a>, <a href="#61986" title="String">alias</a>, <a href="#61987" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#61988" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62093" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#61984" title="sbt.Path">signedPath</a>, <a href="#61985" title="sbt.Path">out</a>, <a href="#61988" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#62095" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">unpack</a>(<a href="#61985" title="sbt.Path">out</a>, <a href="#61984" title="sbt.Path">signedPath</a>, <a href="#61988" title="sbt.Logger">log</a>) <span title="(=&gt; Option[String])Option[String]">orElse</span>
		<a href="Pack.scala.html#61855" title="(sbt.Path,Seq[sbt.SignJar.SignOption],sbt.Logger)Option[String]">verify</a>(<a href="#61984" title="sbt.Path">signedPath</a>, <a href="#61987" title="Seq[sbt.SignJar.SignOption]">options</a>, <a href="#61988" title="sbt.Logger">log</a>)
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,sbt.Jars] with Product" id="61878">pack200Only</a>(<a title="sbt.Path" id="62076">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62077">targetDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62078">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62080">targetJar</a> = <a href="#62077" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#17859" title="(String)sbt.Path">/</a> <a href="#62076" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>
		<span class="keyword">val</span> <a title="sbt.Path" id="62081">packedJar</a> = <a href="#61872" title="(sbt.Path)sbt.Path">packPath</a>(<a href="#62080" title="sbt.Path">targetJar</a>)
		<span class="keyword">val</span> <a title="Option[String]" id="62082">packResult</a> =
			<a href="FileTask.scala.html#25960" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;pack200&quot;)" class="string">&quot;pack200&quot;</span>, <a href="FileTask.scala.html#25958" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">packedJar</a> <a href="FileTask.scala.html#25980" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62076" title="sbt.Path">jar</a>, <a href="#62078" title="sbt.Logger">log</a>)
			{
				<a href="#62078" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Applying pack200 compression to &quot;)" class="string">&quot;Applying pack200 compression to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62076" title="sbt.Path">jar</a>)
				<a href="Pack.scala.html#6847" title="object sbt.Pack">Pack</a>.<a href="Pack.scala.html#62093" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">pack</a>(<a href="#62076" title="sbt.Path">jar</a>, <a href="#62081" title="sbt.Path">packedJar</a>, <a href="#62078" title="sbt.Logger">log</a>)
			}
		<a href="#62082" title="Option[String]">packResult</a> <span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">match</span>
		{
			<span title="Left[String,Nothing]" class="keyword">case</span> Some(<a title="String" id="62105">err</a>) =&gt; <a title="(String)Left[String,Nothing]" id="1171">Left</a>(<a href="#62105" title="String">err</a>)
			<span title="&lt;refinement&gt; extends Either[String,sbt.Jars] with Product" class="keyword">case</span> <span title="object None">None</span> =&gt; <a href="#61879" title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product">copyJar</a>(<a href="#62076" title="sbt.Path">jar</a>, <a href="#62077" title="sbt.Path">targetDirectory</a>, <a href="#62078" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,List[sbt.Path]]">right</span>.<span title="((List[sbt.Path]) =&gt; sbt.Jars)Either[String,sbt.Jars] with Product">map</span>(<a title="List[sbt.Path]" id="62137">jars</a> =&gt; <span title="sbt.Jars" class="keyword">new</span> <a href="#11286" title="sbt.Jars">Jars</a>(<a href="#62081" title="sbt.Path">packedJar</a> <a href="#62138" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>, <a href="#62137" title="List[sbt.Path]">jars</a>))
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path,sbt.Logger)Either[String,List[sbt.Path]] with Product" id="61879">copyJar</a>(<a title="sbt.Path" id="62108">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62109">targetDirectory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62110">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>) =
	{
		<span class="keyword">val</span> <a title="sbt.Path" id="62112">targetJar</a> = <a href="#62109" title="sbt.Path">targetDirectory</a> <a href="Path.scala.html#17859" title="(String)sbt.Path">/</a> <a href="#62108" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>
		<a href="FileTask.scala.html#25960" title="(String,sbt.ProductsSources,sbt.Logger)(=&gt; Option[String])Option[String]">runOption</a>(<span title="java.lang.String(&quot;copy jar&quot;)" class="string">&quot;copy jar&quot;</span>, <a href="FileTask.scala.html#25958" title="implicit sbt.FileTasks.wrapProduct : (=&gt; sbt.Path)sbt.ProductsWrapper">targetJar</a> <a href="FileTask.scala.html#25980" title="(sbt.PathFinder)sbt.ProductsSources">from</a> <a href="#62108" title="sbt.Path">jar</a>, <a href="#62110" title="sbt.Logger">log</a>)( <a href="FileUtilities.scala.html#9046" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15266" title="(sbt.Path,sbt.Path,sbt.Logger)Option[String]">copyFile</a>(<a href="#62108" title="sbt.Path">jar</a>, <a href="#62112" title="sbt.Path">targetJar</a>, <a href="#62110" title="sbt.Logger">log</a>) ).<span title="(=&gt; List[sbt.Path])Either[String,List[sbt.Path]] with Product">toLeft</span>(<a href="#62112" title="sbt.Path">targetJar</a> <a href="#62126" title="(sbt.Path)List[sbt.Path]">::</a> <span title="object Nil">Nil</span>)
	}
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(String,sbt.Path,sbt.Logger)Option[String]" id="61880">writeXML</a>(<a title="String" id="62261">xmlString</a>: <span title="String">String</span>, <a title="sbt.Path" id="62262">outputPath</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62263">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
		<a href="FileUtilities.scala.html#9046" title="object sbt.FileUtilities">FileUtilities</a>.<a href="FileUtilities.scala.html#15280" title="(java.io.File,String,sbt.Logger)Option[String]">write</a>(<a href="#62262" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#17865" title="=&gt; java.io.File">asFile</a>, <a href="#62261" title="String">xmlString</a>, <a href="#62263" title="sbt.Logger">log</a>)
	<span class="comment">/** Writes the XML string 'xmlString' to the file 'outputPath' if the hashes are different.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(scala.xml.Elem,sbt.Path,sbt.Logger)Option[String]" id="61881">writeXML</a>(<a title="scala.xml.Elem" id="62258">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="sbt.Path" id="62259">outputPath</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Logger" id="62260">log</a>: <a href="Logger.scala.html#11784" title="sbt.Logger">Logger</a>): <span title="Option[String]">Option</span>[String] =
	{
		<span class="keyword">val</span> <a title="String" id="62349">xmlString</a> =
		{
			<span class="keyword">import</span> scala.xml.Utility
			<span class="keyword">object</span> <a title="object WithToXML" id="62351">WithToXML</a> {
				<span class="keyword">def</span> <a title="(scala.xml.Elem,Boolean)java.lang.String" id="62355">toXML</a>(<a title="scala.xml.Elem" id="62357">xml</a>: <span title="scala.xml.Elem">Elem</span>, <a title="Boolean" id="62358">stripComments</a>: <span title="Boolean">Boolean</span>) = <span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node)String" id="62371">toXML</a>(<a href="#62357" title="scala.xml.Elem">xml</a>).<a title="()java.lang.String" id="5816">toString</a> <span class="comment">// this will only be called for 2.8, which defaults to stripComments= false, unlike 2.7</span>
			}
			<span class="keyword">implicit</span> <span class="keyword">def</span> <a title="implicit sbt.WebstartScalaProject.another28Hack : (AnyRef)object WithToXML" id="62353">another28Hack</a>(<a title="AnyRef" id="62505">any</a>: <a title="AnyRef" id="1962">AnyRef</a>) = <a href="#62351" title="object WithToXML">WithToXML</a>
			scala.xml.<span title="object scala.xml.Utility">Utility</span>.<a title="(scala.xml.Node,Boolean)String" id="62372">toXML</a>(<a href="#62258" title="scala.xml.Elem">xml</a>, <span title="Boolean(false)" class="keyword">false</span>) <span class="comment">// 2.8 doesn't have this method anymore, so the above implicit will kick in for 2.8 only</span>
		}
		<span title="Option[String]" class="keyword">if</span>(<span title="=&gt; Boolean">!</span><a href="#62259" title="sbt.Path">outputPath</a>.<a href="Path.scala.html#17860" title="=&gt; Boolean">exists</a>)
		{
			<a href="#62260" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file did not exist, writing inline XML to &quot;)" class="string">&quot;JNLP file did not exist, writing inline XML to &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62259" title="sbt.Path">outputPath</a>)
			<a href="#61880" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#62349" title="String">xmlString</a>, <a href="#62259" title="sbt.Path">outputPath</a>, <a href="#62260" title="sbt.Logger">log</a>)
		}
		<span class="keyword">else</span>
		{
			<span class="keyword">val</span> <a title="Either[String,Option[String]]" id="62522">result</a> =
				<span class="keyword">for</span>( <a title="((Array[Byte]) =&gt; Either[String,Option[String]])Either[String,Option[String]]" id="62532">xmlHash</a> &lt;- <a href="Hash.scala.html#56642" title="(String,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#62349" title="String">xmlString</a>, <a href="#62260" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span>; <a title="((Array[Byte]) =&gt; Option[String])Either[String,Option[String]] with Product" id="62542">fileHash</a> &lt;- <a href="Hash.scala.html#56643" title="(sbt.Path,sbt.Logger)Either[String,Array[Byte]]">Hash</a>(<a href="#62259" title="sbt.Path">outputPath</a>, <a href="#62260" title="sbt.Logger">log</a>).<span title="=&gt; Either.RightProjection[String,Array[Byte]]">right</span> ) <span class="keyword">yield</span>
				{
					<span title="Option[String]" class="keyword">if</span>(<a href="#62532" title="Array[Byte]">xmlHash</a> <a title="(Any)Boolean" id="17119">deepEquals</a> <a href="#62542" title="Array[Byte]">fileHash</a>)
					{
						<a href="#62260" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;JNLP file &quot;)" class="string">&quot;JNLP file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62259" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; uptodate.&quot;)" class="string">&quot; uptodate.&quot;</span>)
						<span title="object None">None</span>
					}
					<span class="keyword">else</span>
					{
						<a href="#62260" title="sbt.Logger">log</a>.<a href="Logger.scala.html#19516" title="(=&gt; String)Unit">debug</a>(<span title="java.lang.String(&quot;Inline JNLP XML modified, updating file &quot;)" class="string">&quot;Inline JNLP XML modified, updating file &quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62259" title="sbt.Path">outputPath</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;.&quot;)" class="string">&quot;.&quot;</span>)
						<a href="#61880" title="(String,sbt.Path,sbt.Logger)Option[String]">writeXML</a>(<a href="#62349" title="String">xmlString</a>, <a href="#62259" title="sbt.Path">outputPath</a>, <a href="#62260" title="sbt.Logger">log</a>)
					}
				}
			<a href="#62522" title="Either[String,Option[String]]">result</a>.<a title="((String) =&gt; Option[String],(Option[String]) =&gt; Option[String])Option[String]" id="25551">fold</a>(<a title="String" id="62550">err</a> =&gt; <a title="(String)Some[String]" id="286">Some</a>(<a href="#62550" title="String">err</a>), <a title="Option[String]" id="62553">x</a> =&gt; <a href="#62553" title="Option[String]">x</a>)
		}
	}
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Boolean)(sbt.Path)sbt.WebstartJarResource" id="61882">jarResource</a>(<a title="Boolean" id="62554">isMain</a>: <span title="Boolean">Boolean</span>)(<a title="sbt.Path" id="62555">jar</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>): <a href="#10329" title="sbt.WebstartJarResource">WebstartJarResource</a> =
		<span title="sbt.WebstartJarResource" class="keyword">new</span> <a href="#10329" title="sbt.WebstartJarResource">WebstartJarResource</a>(<a href="#62555" title="sbt.Path">jar</a>.<a href="Path.scala.html#17874" title="=&gt; java.lang.String">name</a>, <a href="#62555" title="sbt.Path">jar</a>.<a href="Path.scala.html#17869" title="(String)String">relativePathString</a>(<span title="java.lang.String(&quot;/&quot;)" class="string">&quot;/&quot;</span>), <a href="#62554" title="Boolean">isMain</a>)
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(Iterable[sbt.Path],Iterable[sbt.Path])Seq[sbt.WebstartJarResource]" id="61883">jarResources</a>(<a title="Iterable[sbt.Path]" id="62264">mainJars</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path], <a title="Iterable[sbt.Path]" id="62265">libraries</a>: <span title="Iterable[sbt.Path]">Iterable</span>[Path]): <span title="Seq[sbt.WebstartJarResource]">Seq</span>[WebstartJarResource] =
		<a href="#62264" title="Iterable[sbt.Path]">mainJars</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#61882" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(true)" class="keyword">true</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span> <a href="#62556" title="(List[sbt.WebstartJarResource])List[sbt.WebstartJarResource]">:::</a> <a href="#62265" title="Iterable[sbt.Path]">libraries</a>.<span title="((sbt.Path) =&gt; sbt.WebstartJarResource)Iterable[sbt.WebstartJarResource]">map</span>(<a href="#61882" title="(Boolean)(sbt.Path)sbt.WebstartJarResource">jarResource</a>(<span title="Boolean(false)" class="keyword">false</span>)).<span title="=&gt; List[sbt.WebstartJarResource]">toList</span>

	<span class="comment">/** True iff 'directory' is an ancestor (strictly) of 'check'.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.Path,sbt.Path)Boolean" id="61884">isInDirectory</a>(<a title="sbt.Path" id="62565">directory</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>, <a title="sbt.Path" id="62566">check</a>: <a href="Path.scala.html#10152" title="sbt.Path">Path</a>) = <a href="Path.scala.html#10153" title="object sbt.Path">Path</a>.<a href="Path.scala.html#15366" title="(sbt.Path,sbt.Path)Option[sbt.Path]">relativize</a>(<a href="#62565" title="sbt.Path">directory</a>, <a href="#62566" title="sbt.Path">check</a>).<a title="=&gt; Boolean" id="19011">isDefined</a> <a title="(Boolean)Boolean" id="2699">&amp;&amp;</a> <a href="#62565" title="sbt.Path">directory</a> <a title="(AnyRef)Boolean" id="5738">!=</a> <a href="#62566" title="sbt.Path">check</a>
	<span class="comment">/** Checks the paths in the given options for validity.  See the documentation for WebstartOptions.*/</span>
	<span class="keyword">private</span> <span class="keyword">def</span> <a title="(sbt.WebstartOptions)Unit" id="61885">verifyOptions</a>(<a title="sbt.WebstartOptions" id="61906">options</a>: <a href="#6456" title="sbt.WebstartOptions">WebstartOptions</a>)
	{
		<span class="keyword">import</span> options._
		<span title="(Boolean,Any)Unit">require</span>(<a href="#61884" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#61794" title="=&gt; sbt.Path">webstartLibDirectory</a>),
			<span title="java.lang.String(&quot;Webstart dependency directory (&quot;)" class="string">&quot;Webstart dependency directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61794" title="=&gt; sbt.Path">webstartLibDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;) must be a subdirectory of webstart output directory (&quot;)" class="string">&quot;) must be a subdirectory of webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span>
				<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span title="(Boolean,Any)Unit">require</span>(<a href="#61884" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#61793" title="=&gt; sbt.Path">jnlpFile</a>), <span title="java.lang.String(&quot;Webstart JNLP file output location (&quot;)" class="string">&quot;Webstart JNLP file output location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61793" title="=&gt; sbt.Path">jnlpFile</a> <span title="(Any)java.lang.String">+</span>
			<span title="java.lang.String(&quot;) must be in the webstart output directory (&quot;)" class="string">&quot;) must be in the webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
		<span class="keyword">for</span>(<a title="((sbt.Path) =&gt; Unit)Unit" id="62587">wz</a> &lt;- <a href="#61798" title="=&gt; Option[sbt.Path]">webstartZip</a>)
			<span title="(Boolean,Any)Unit">require</span>(<span title="=&gt; Boolean">!</span><a href="#61884" title="(sbt.Path,sbt.Path)Boolean">isInDirectory</a>(<a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a>, <a href="#62587" title="sbt.Path">wz</a>),
				<span title="java.lang.String(&quot;Webstart output zip location (&quot;)" class="string">&quot;Webstart output zip location (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#62587" title="sbt.Path">wz</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot; cannot be in webstart output directory (&quot;)" class="string">&quot; cannot be in webstart output directory (&quot;</span> <span title="(Any)java.lang.String">+</span> <a href="#61791" title="=&gt; sbt.Path">webstartOutputDirectory</a> <span title="(Any)java.lang.String">+</span> <span title="java.lang.String(&quot;).&quot;)" class="string">&quot;).&quot;</span>)
	}
}
<span class="comment">/** The default extension point for a webstart project.  There is one method that is required to be defined: jnlpXML.
* 'webstartSignConfiguration', 'webstartPack200', and 'webstartGzip' are methods of interest. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class DefaultWebstartProject extends sbt.BasicWebstartProject with sbt.MavenStyleWebstartPaths with ScalaObject" id="9624">DefaultWebstartProject</a>(<span class="keyword">val</span> <a title="sbt.ProjectInfo" id="62609">info</a>: <a href="ProjectInfo.scala.html#6759" title="sbt.ProjectInfo">ProjectInfo</a>) <span class="keyword">extends</span> <a href="#11418" title="sbt.BasicWebstartProject">BasicWebstartProject</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#8193" title="sbt.MavenStyleWebstartPaths">MavenStyleWebstartPaths</a>
<span class="comment">/** Defines default implementations of all methods in WebstartOptions except for jnlpXML.  packageAction is overridden
* to create a webstart distribution after the normal package operation. */</span>
<span class="keyword">abstract</span> <span class="keyword">class</span> <a title="class BasicWebstartProject extends sbt.BasicScalaProject with sbt.WebstartScalaProject with sbt.WebstartOptions with sbt.WebstartPaths with ScalaObject" id="11418">BasicWebstartProject</a> <span class="keyword">extends</span> <a href="DefaultProject.scala.html#10728" title="sbt.BasicScalaProject">BasicScalaProject</a> <span class="keyword">with</span> <a href="#8562" title="sbt.WebstartScalaProject">WebstartScalaProject</a> <span class="keyword">with</span> <a href="#6456" title="sbt.WebstartOptions">WebstartOptions</a> <span class="keyword">with</span> <a href="ProjectPaths.scala.html#7875" title="sbt.WebstartPaths">WebstartPaths</a>
{
	<span class="keyword">def</span> <a title="=&gt; Option[sbt.SignConfiguration]" id="62596">webstartSignConfiguration</a>: <span title="Option[sbt.SignConfiguration]">Option</span>[SignConfiguration] = <span title="object None">None</span>

	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62597">webstartExtraLibraries</a> = <a href="DefaultProject.scala.html#35249" title="=&gt; sbt.LibraryDependencies">mainDependencies</a>.<a href="DefaultProject.scala.html#48061" title="=&gt; sbt.PathFinder">scalaJars</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62598">webstartLibraries</a> = <a href="DefaultProject.scala.html#35243" title="=&gt; sbt.PathFinder">publicClasspath</a> <a href="Path.scala.html#15969" title="(sbt.PathFinder)sbt.PathFinder">+++</a> <a href="DefaultProject.scala.html#35357" title="=&gt; sbt.PathFinder">jarsOfProjectDependencies</a>
	<span class="keyword">def</span> <a title="=&gt; sbt.PathFinder" id="62599">webstartResources</a> = <a href="Project.scala.html#14708" title="(sbt.PathFinder,sbt.FileFilter)sbt.PathFinder">descendents</a>(<a href="ProjectPaths.scala.html#38217" title="=&gt; sbt.Path">jnlpResourcesPath</a> <a href="Path.scala.html#17857" title="=&gt; sbt.Path">##</a>, <a href="NameFilter.scala.html#8908" title="object sbt.AllPassFilter">AllPassFilter</a>)

	<span class="keyword">def</span> <a title="=&gt; Boolean" id="62600">webstartPack200</a> = <span title="Boolean(true)" class="keyword">true</span>
	<span class="keyword">def</span> <a title="=&gt; Boolean" id="62601">webstartGzip</a> = <span title="Boolean(true)" class="keyword">true</span>

	<span class="keyword">override</span> <span class="keyword">def</span> <a title="=&gt; BasicWebstartProject.this.Task" id="62602">packageAction</a> = <span class="keyword">super</span>.<a href="DefaultProject.scala.html#35285" title="=&gt; BasicWebstartProject.this.Task">packageAction</a> <a href="TaskManager.scala.html#19080" title="(BasicWebstartProject.this.Task)BasicWebstartProject.this.Task">&amp;&amp;</a> <a href="#61863" title="(sbt.WebstartOptions)BasicWebstartProject.this.Task">webstartTask</a>(<a href="#11418" title="sbt.BasicWebstartProject" class="keyword">this</a>)
}
        </pre>
    </body>
</html>